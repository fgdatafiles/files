!function(a){a.cjs=a.createjs,Function.prototype.bind=Function.prototype.bind||function(a){var b=this;return function(){return b.apply(a,arguments)}},(void 0===console||void 0===console.log)&&(console={},console.log=function(){}),a.cm={main:null,modules:{},ready:!1,baked:!1,global:a,prefix:"",lib:"js/",Tools:{},Entities:{},getUrlVar:function(b){var c={};return a.location.href.replace(/[?&]+([^=&]+)=([^&]*)/gi,function(a,b,d){c[b]=d}),c[b]||null}}}(window),function(){function a(){this.Shape_constructor(),this.graphics.f("#f4eadf").dr(-app.maxWidth/2,-app.maxHeight/2,app.maxWidth,app.maxHeight),this.set({alpha:0}),this.name="view-transition"}var b=include("cm"),c=createjs.extend(a,cjs.Shape);c.animateIn=function(a,b,c){return a=a||0,b=b||1e3,c=c||cjs.Ease.cubicInOut,this.visible=!0,cjs.Tween.get(this).wait(a).to({alpha:1},b,c)},c.animateOut=function(a,b,c){return a=a||0,b=b||1e3,c=c||cjs.Ease.cubicInOut,cjs.Tween.get(this).wait(a).to({alpha:0},b,c).set({visible:!1})},c.reset=function(){this.alpha=0},c.flash=function(){return this.visible=!0,cjs.Tween.get(this).to({alpha:1},150,cjs.Ease.sineInOut).wait(150).to({alpha:0},150,cjs.Ease.sineInOut).set({visible:!1},this)},b.ViewTransition=cjs.promote(a,"Shape")}(),function(){function a(){this.Container_constructor()}var b=include("cm"),c=createjs.extend(a,cjs.Container);c.reset=function(){},c.start=function(){this.setActive(!0)},c.setActive=function(a){},c.animateIn=function(){return cjs.Tween.get(this)},c.animateOut=function(){return this.setActive(!1),cjs.Tween.get(this)},c.resize=function(a,b){},c.update=function(){},c.destroy=function(){this.setActive(!1)},b.View=cjs.promote(a,"Container")}(),function(){"use strict";function a(){this.EventDispatcher_constructor(),this.allViews={},this.current=null,this.gameLayer=null,this.transitionLayer=null,this.transitionShape=null}var b=include("cm"),c=cjs.extend(a,cjs.EventDispatcher);c.registerView=function(a,b){this.allViews[a]=b},c.addTransitionShape=function(a){this.transitionShape=a,this.transitionLayer.addChild(this.transitionShape)},c.setTransitionLayer=function(a){this.transitionLayer=a},c.setViewLayer=function(a){this.gameLayer=a},c.gotoView=function(a,b,c,d){var e=new this.allViews[a];if(this.current){this.current.setActive(!1);var f=this.transitionShape.animateIn(b,c,d);f.call(this.removeView,[this.current,this.gameLayer],this),f.call(this.gameLayer.addChild,[e],this.gameLayer),f.call(this.animateOut,[e,b,c,d],this)}else this.gameLayer.addChild(e),e.resize(app.width,app.height),e.start(),e.setActive(!0);this.current=e},c.animateOut=function(a,b,c,d){var e=this.transitionShape.animateOut(b,c,d);e.call(a.resize,[app.width,app.height],a),e.call(a.start,null,a),e.call(a.setActive,[!0],a)},c.removeView=function(a,b){a.removeAllEventListeners(),a.removeAllChildren(),b.removeAllEventListeners(),b.removeAllChildren(),a=null},c.resize=function(a,b){this.current&&this.current.resize(a,b)};var d=createjs.promote(a,"EventDispatcher");b.ViewControl=new d}(),function(){Object.defineProperty(Array.prototype,"iterate",{value:function(a){for(var b=0,c=this.length;c>b;b++)a(b,this[b])}}),Object.defineProperty(Array.prototype,"erase",{value:function(a){var b=this.indexOf(a);return b>=0&&this.splice(b,1),this}}),Object.defineProperty(Array.prototype,"randomRotation",{value:function(a){var b=this.length;if(0===b)return null;a>b&&(a=b);var c=Math.floor(a*Math.random()),d=this.splice(c,1)[0];return this.push(d),d}}),Object.defineProperty(Array.prototype,"clone",{value:function(){return this.slice(0)}})}(),function(){"use strict";var a=include("createjs"),b=include("createjs.Ticker");b.setPaused=function(a){b.paused=a},b.getPaused=function(){return b.paused},a.Sound.setPaused=function(a){for(var b=this._instances,c=b.length;c--;)b[c].paused=a},a.Ticker.setPaused=function(b){a.Ticker.paused=b},a.Ticker.getPaused=function(){return a.Ticker.paused},a.DisplayObject.prototype.center=function(){return this.regs("center")},a.DisplayObject.prototype.pointerOn=function(){return this.set({cursor:Modernizr.prefixedCSSValue("cursor","pointer")}),this},a.DisplayObject.prototype.pointerOff=function(){return this.set({cursor:null}),this},a.DisplayObject.prototype.hitbox=function(b){var c=this.getBounds();return c&&(b=b||0,this.hitArea=new a.Shape,this.hitArea.graphics.f("#000").r(c.x-b,c.y-b,c.width+2*b,c.height+2*b)),this},a.DisplayObject.prototype.scale||(a.DisplayObject.prototype.scale=function(a){return this.scaleX=this.scaleY=a,this}),a.DisplayObject.prototype.regs=function(a,b,c){var d,e,f,g,h=this.getBounds();if(null!==h){if(1===arguments.length)if("string"==typeof arguments[0])switch(arguments[0]){case"center":f=g=.5}else f=g=arguments[0];else{if("string"==typeof a)switch(a){case"center":f=.5;break;case"left":f=0;break;case"right":f=1}else f=a;if("string"==typeof b)switch(b){case"center":g=.5;break;case"top":g=0;break;case"bottom":g=1}else g=b}return d=h.width*f,e=h.height*g,c&&c===!0&&(d="string"!=typeof a?a:h.width*f,e="string"!=typeof b?b:h.height*g),this.set({regX:d,regY:e}),this}return this},a.Bitmap.prototype.getBounds=function(){var a=this.DisplayObject_getBounds();if(a)return a;var b=this.image,c=this.sourceRect||b,d=b&&(b.naturalWidth||b.getContext||b.readyState>=2);return c.naturalWidth?d?this._rectangle.setValues(0,0,c.naturalWidth,c.naturalHeight):null:d?this._rectangle.setValues(0,0,c.width,c.height):null},a.Rectangle.prototype.contains=function(b,c,d,e){d=d||0,e=e||0;var f;return arguments[0]instanceof a.Rectangle?(f=b,f.x>=this.x&&f.x+f.width<=this.x+this.width&&f.y>=this.y&&f.y+f.height<=this.y+this.height):b>=this.x&&b+d<=this.x+this.width&&c>=this.y&&c+e<=this.y+this.height},a.MovieClip&&(a.MovieClip.prototype.doesHaveLabel=function(a){var b=this.labels;for(var c in b)if(b[c].label===a)return!0;return!1}),a.DisplayObject.prototype._zIndex=0,Object.defineProperties(a.DisplayObject.prototype,{zIndex:{get:function(){return this._zIndex},set:function(b){this._zIndex=b,this.parent instanceof a.Container&&this.parent.useZIndex&&this.parent.sortChildren(this.parent._sortChildrenZIndex)}}}),a.Container.prototype.addChild=function(a){if(null===a)return a;var b=arguments.length;if(b>1){for(var c=0;b>c;c++)this.addChild(arguments[c]);return arguments[b-1]}return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.push(a),this.useZIndex&&this.sortChildren(this._sortChildrenZIndex),a.dispatchEvent("added"),a},a.MovieClip.prototype.useZIndex=!1,a.Container.prototype.useZIndex=!1,a.Container.prototype._sortChildrenZIndex=function(a,b){return a.zIndex-b.zIndex}}(),function(){function a(a,b){this.AbstractLoader_constructor(a,b,"flash_animation"),this._manifestQueue=null}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.MANIFEST_PROGRESS=.25,c.canLoadItem=function(a){return"flash_animation"===a.type},b.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},b._createRequest=function(){this._request=new createjs.JavaScriptLoader(this._item)},b.handleEvent=function(a){switch(a.type){case"complete":if(this._rawResult=a.target.getResult(!0),!AdobeAn.compositions)throw"Using out of date flash export! "+this._item.src;var b;if(cm.Assets.compositionsIDMap[this._item.src])b=cm.Assets.compositionsIDMap[this._item.src];else{for(var d=Object.keys(AdobeAn.compositions),e=0,f=d.length;f>e;e++)if(!cm.Assets.compositionsIDMap[d[e]]){b=d[e];break}cm.Assets.compositionsIDMap[this._item.src]=b}this._item.assetsPath=this._item.src.slice(0,this._item.src.lastIndexOf("/")+1);var g=this._item.comp=AdobeAn.compositions[b],h=this._result=this._item.lib=g.getLibrary();if(delete AdobeAn.compositions[b],!h)throw"Something went wrong. Lib not found";return this._sendProgress(c.MANIFEST_PROGRESS),void this._loadManifest(h);case"progress":return a.loaded*=c.MANIFEST_PROGRESS,this.progress=a.loaded/a.total,(isNaN(this.progress)||this.progress===1/0)&&(this.progress=0),void this._sendProgress(a)}this.AbstractLoader_handleEvent(a)},b._loadManifest=function(a){if(a.properties.manifest&&a.properties.manifest.length){var b=this._manifestQueue=new createjs.LoadQueue(this._preferXHR,this._item.assetsPath,this._item.crossOrigin);b.installPlugin(cjs.Sound),b.on("complete",this._handleManifestComplete,this,!0),b.on("fileload",this._handleManifestFileLoad,this),b.on("progress",this._handleManifestProgress,this),b.on("error",this._handleManifestError,this,!0);for(var c=[],d=0,e=a.properties.manifest.length;e>d;d++)-1===a.properties.manifest[d].src.indexOf("sound")&&c.push(a.properties.manifest[d]);b.loadManifest(c)}else this._sendComplete()},b._handleManifestFileLoad=function(a){if(a&&"image"===a.item.type){var b=this._item.comp,c=b.getImages();c[a.item.id]=a.result}},b._handleManifestComplete=function(a){for(var b=this._item.comp,c=b.getLibrary(),d=b.getSpriteSheet(),e=a.target,f=c.ssMetadata,g=0;g<f.length;g++)d[f[g].name]=new createjs.SpriteSheet({images:[e.getResult(f[g].name)],frames:f[g].frames});this._sendComplete()},b._handleManifestProgress=function(a){this.progress=a.progress*(1-c.MANIFEST_PROGRESS)+c.MANIFEST_PROGRESS,this._sendProgress(this.progress)},b._handleManifestError=function(a){var b=new createjs.Event("fileerror");b.item=a.data,this.dispatchEvent(b)},createjs.FlashAnimationLoader=createjs.promote(a,"AbstractLoader")}(),function(){Number.prototype.limit=function(a,b){return Math.min(b,Math.max(a,this))},Number.prototype.round=function(a){return a=Math.pow(10,a||0),Math.round(this*a)/a},Number.prototype.floor=function(){return Math.floor(this)},Number.prototype.ceil=function(){return Math.ceil(this)},Number.prototype.toInt=function(){return 0|this},Number.prototype.toRad=function(){return this/180*Math.PI},Number.prototype.toDeg=function(){return 180*this/Math.PI},Number.prototype.sign=function(){return 0!==this?0>this?-1:1:0===this?0:void 0},Math.distance=function(a,b){return a instanceof Array&&b instanceof Array?Math.sqrt(Math.pow(a[0]-b[0],2)+Math.pow(a[1]-b[1],2)):Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},Math.clamp=function(a,b,c){return b>a?b:a>c?c:a},Math.lerp=function(a,b,c){return a+c*(b-a)},Math.map=function(a,b,c,d,e){return d+(e-d)*((a-b)/(c-b))},Math.limit=function(a,b,c){return Math.min(c,Math.max(b,a))},Math.roundAt=function(a,b){return b?(b=Math.pow(10,b||0),Math.round(a*b)/b):Math.round(a)},Math.toInt=function(a){return 0|a},Math.toRad=function(a){return a*Math.PI/180},Math.toDeg=function(a){return 180*a/Math.PI},Math.getRandomArbitrary=function(a,b){return Math.random()*(b-a)+a},Math.range=function(a,b){return Math.floor(Math.random()*(b-a+1))+a},Math.lineIntersection=function(a,b){var c,d=a.endpoint1[0],e=a.endpoint1[1],f=a.endpoint2[0],g=a.endpoint2[1],h=b.endpoint1[0],i=b.endpoint1[1],j=b.endpoint2[0],k=b.endpoint2[1],l=(d-f)*(i-k)-(e-g)*(h-j);return c=0===l?null:[((d*g-e*f)*(h-j)-(d-f)*(h*k-i*j))/l,((d*g-e*f)*(i-k)-(e-g)*(h*k-i*j))/l]}}(),function(){function a(){this.EventDispatcher_constructor(),this._activeQueues=[],this.activeQueue=null,this._soundFileExtRegex=/\.mp3|\.ogg/g,this.compositionsIDMap={},this.data={},this.lib={},this._loadedManifests=[],window.images=this.lib}var b=include("cm"),c=cjs.extend(a,cjs.EventDispatcher);c.setAssetsDictionary=function(a){this.assetsDictionary=a},c.unloadAsset=function(a){delete this.lib[a]},c.load=function(a,b,c,d){a=this._getManifestArray(a);var e,f,g,h;if(window.springroll){var i=window.springroll.Application.instance.sound;for(e=0,f=a.length;f>e;e++)for(g=0,h=a[e].length;h>g;g++)this._soundFileExtRegex.test(a[e][g].src)&&(a[e][g].src=a[e][g].src.replace(this._soundFileExtRegex,i.supportedSound))}if(a){var j=new cjs.LoadQueue;for(j.installPlugin(cjs.Sound),j.registerLoader(cjs.FlashAnimationLoader),j.setMaxConnections(10),j.onComplete=b,j.onError=c,j.onProgress=d,j.on("complete",this._handleComplete,this),j.on("error",this._handleError,this),j.on("progress",this._handleProgress,this),j.on("fileload",this._handleFileLoad,this),e=0;e<a.length;e++)j.loadManifest(a[e],!1);this.activeQueue=j,j.load()}},c._handleComplete=function(a){var b=a.target;b.onComplete(a),b.removeAllEventListeners(),b.destroy(),b.removeAll(),this.activeQueue=null},c._handleError=function(a){var b=a.target;b.onError&&b.onError(a)},c._handleProgress=function(a){var b=a.target;b.onProgress&&b.onProgress(a)},c.getCurrentProgress=function(){return this.activeQueue?this.activeQueue.progress:null},c._handleFileLoad=function(a){var c=a.item;switch(c.type){case cjs.LoadQueue.JAVASCRIPT:break;case"flash_animation":this.lib[c.id]=a.item.comp.getLibrary();break;case cjs.LoadQueue.SOUND:window.springroll&&b.app.sound._markLoaded({data:{id:c.id}});break;default:this.lib[c.id]=a.result}},c.unload=function(a){if(a)for(var b=0;b<a.length;b++){var c=a[b];c&&this._unloadManifest(c)}},c._unloadManifest=function(a){Array.isArray(a)||(a=a.manifest);for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c];"flash_animation"===e.type&&e.lib&&e.lib.properties.manifest?(this._unloadManifest(e.lib.properties.manifest),delete e.comp,delete e.lib):"sound"===e.type&&(window.springroll?window.springroll.Application.instance.sound.unload([e.id]):cjs.Sound.removeSound(e.id)),this.unloadAsset(e.id)}cjs.Sound.removeSounds(b)},c._getManifestArray=function(a){var b;if(Array.isArray(a)){b=[];for(var c=0;c<a.length;c++){var d=a[c];"string"==typeof d?b.push(this._getManifestByString(d)):b.push(d)}return b}return"string"==typeof a?[this._getManifestByString(a)]:!1},c._getManifestByString=function(a){return this.assetsDictionary[a]};var d=createjs.promote(a,"EventDispatcher");b.Assets=new d}(),function(){function a(){this.OS={kindle:!1,android:!1,chromeOS:!1,iOS:!1,iOSVersion:0,linux:!1,macOS:!1,windowsPhone:!1,windows:!1},this.browsers={cocoonJS:!1,cordova:!1,chrome:!1,chromeVersion:0,firefox:!1,firefoxVersion:0,ie:!1,ieVersion:0,ieEdge:!1,mobileSafari:!1,opera:!1,safari:!1,safariVersion:0,webApp:!1,silk:!1},this.audio={audioTags:!1,webAudio:!1,ogg:!1,opus:!1,mp3:!1,wav:!1,m4a:!1,webm:!1,dolby:!1},this.video={oggVideo:!1,h264Video:!1,mp4Video:!1,webmVideo:!1,vp9Video:!1,hlsVideo:!1},this.desktop=!1,this.mobile=!1,this.iPhone=!1,this.iPhone4=!1,this.iPad=!1,this.pixelRatio=0,this.file=!1,this.fileSystem=!1,this.localStorage=!1,this.worker=!1,this.vibration=!1,this.touch=!1,this.fullscreen=!1,this.fullscreenKeyboard=!1,this.requestFullscreen="",this.cancelFullscreen="",this.performChecks()}var b=include("cm"),c=a.prototype;c.performChecks=function(){this.checkOS(),this.checkBrowser(),this.checkDevice()},c.checkOS=function(){var a=navigator.userAgent;this.OS.kindle=/Kindle/.test(a)||/\bKF[A-Z][A-Z]+/.test(a)||/Silk/.test(a),this.OS.android=/Android/.test(a),this.OS.chromeOS=/CrOS/.test(a),this.OS.iOS=/iP[ao]d|iPhone/i.test(a),this.OS.linux=/Linux/.test(a),this.OS.macOS=/Mac OS/.test(a),this.OS.windowsPhone=/Windows Phone/i.test(a)||/IEMobile/i.test(a),this.OS.windows=this.OS.windowsPhone||/Windows/.test(a),(this.OS.iOS||this.OS.android)&&(this.mobile=!0),!this.mobile&&(this.OS.windows||this.OS.macOS||this.OS.linux&&!this.kindle||this.OS.chromeOS)&&(this.desktop=!0),this.OS.iOS&&(navigator.appVersion.match(/OS (\d+)/),this.OS.iOSVersion=parseInt(RegExp.$1,10)),this.mobile=!this.desktop},c.checkBrowser=function(){var a=navigator.userAgent,b=this.browsers,c=this.OS;/Edge\/\d+/.test(a)?b.edge=!0:/Chrome\/(\d+)/.test(a)&&!c.windowsPhone?(b.chrome=!0,b.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(a)?(b.firefox=!0,b.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(a)&&c.iOS?b.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(a)?(b.ie=!0,b.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(a)?b.opera=!0:/Safari\/(\d+)/.test(a)&&!c.windowsPhone&&(b.safari=!0,/Version\/(\d+)\./.test(a)&&(b.safariVersion=parseInt(RegExp.$1,10))),/Silk/.test(a)&&(b.silk=!0),navigator.standalone&&(b.webApp=!0),"undefined"!=typeof window.cordova&&(b.cordova=!0),navigator.isCocoonJS&&(b.cocoonJS=!0)},c.checkDevice=function(){var a=navigator.userAgent;this.pixelRatio=window.devicePixelRatio||1,this.iPhone=-1!==a.toLowerCase().indexOf("iphone"),this.iPhone4=2===this.pixelRatio&&this.iPhone,this.iPad=-1!==a.toLowerCase().indexOf("ipad"),this.vibration=!!(navigator.vibrate||navigator.webkitVibrate||navigator.mozVibrate||navigator.msVibrate);try{var b="DC";localStorage.setItem(b,b),localStorage.removeItem(b),this.features.localStorage=!0}catch(c){}this.file=!!(window.File&&window.FileList&&window.FileReader),this.fileSystem=!!window.requestFileSystem,this.worker=!!window.Worker,this.touch="ontouchstart"in document.documentElement||window.navigator.maxTouchPoints&&window.navigator.maxTouchPoints>=1,this.audioTags=!!window.Audio,this.webAudio=!(!window.AudioContext&&!window.webkitAudioContext)},b.Device=new a}(),function(){"use strict";function a(){throw"Keyboard cannot be instantiated."}var b=include("cm");a.isUsingKeyboard=!1,a.bindings={},a.actions={},a.presses={},a.locks={},a.delayedKeyup={},a.KEYS={BACKSPACE:8,TAB:9,ENTER:13,PAUSE:19,CAPS:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,INSERT:45,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,NUMPAD_0:96,NUMPAD_1:97,NUMPAD_2:98,NUMPAD_3:99,NUMPAD_4:100,NUMPAD_5:101,NUMPAD_6:102,NUMPAD_7:103,NUMPAD_8:104,NUMPAD_9:105,MULTIPLY:106,ADD:107,SUBSTRACT:109,DECIMAL:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,SHIFT:16,CTRL:17,ALT:18,PLUS:187,COMMA:188,MINUS:189,PERIOD:190},a.start=function(){a.isUsingKeyboard||(a.isUsingKeyboard=!0,window.addEventListener("keydown",a.keydown.bind(a),!1),window.addEventListener("keyup",a.keyup.bind(a),!1))},a.keydown=function(b){var c=b.nativeEvent||b,d=c.target.tagName;if("INPUT"!==d&&"TEXTAREA"!==d){var e=c.keyCode,f=a.bindings[e];f&&(a.actions[f]=!0,a.locks[f]||(a.presses[f]=!0,a.locks[f]=!0),b.stopPropagation(),b.preventDefault())}},a.keyup=function(b){var c=b.nativeEvent||b,d=c.target.tagName;if("INPUT"!==d&&"TEXTAREA"!==d){var e=c.keyCode,f=a.bindings[e];f&&(a.delayedKeyup[f]=!0,b.stopPropagation(),b.preventDefault())}},a.bind=function(b,c){a.start(),a.bindings[b]=c},a.unbind=function(b){var c=a.bindings[b];a.delayedKeyup[c]=!0,a.bindings[b]=null},a.unbindAll=function(){a.bindings={},a.actions={},a.presses={},a.locks={},a.delayedKeyup={}},a.state=function(b){return a.actions[b]},a.pressed=function(b){return a.presses[b]},a.released=function(b){return!!a.delayedKeyup[b]},a.clearPressed=function(){for(var b in a.delayedKeyup)a.actions[b]=!1,a.locks[b]=!1;a.delayedKeyup={},a.presses={}},b.Keyboard=a}(),function(){function a(b,c,d){this.Container_constructor(),this.name=b,this.px=c,this.py=d,a.s[b]=this}var b=include("cm"),c=createjs.extend(a,cjs.Container);a.s={},a.alignLayers=function(b,c){var d=new cjs.Point;for(var e in a.s){var f=a.s[e];if(f.parent&&f.px&&f.py){var g=b*f.px,h=c*f.py;f.parent.globalToLocal(g,h,d),f.x=d.x,f.y=d.y}}},c.destroy=function(){delete a.s[this.name]},b.Layer=cjs.promote(a,"Container")}(),function(){"use strict";if(cm.Device.OS.iOS===!0){var a=window.AudioContext||window.webkitAudioContext;if(a)try{var b=new a,c=b.createBuffer(1,1,44100),d=b.createBufferSource();d.buffer=c,d.connect(b.destination),d.start(0),d.disconnect(),b&&b.close&&b.close()}catch(e){}}}(),function(){function a(a){this.soundPlayer=a,this.soundArray=[],this.lastSound=""}var b=a.prototype;b.add=function(){var a,b=arguments.length;for(a=0;b>a;a++)this.soundArray.push(arguments[a])},b.play=function(){if(this.soundArray.length<=1)throw"EncouragementPlayer Array requires more then one sound added to it to play";var a,b=0;do a=this._getRandomAudio(),b++;while(a===this.lastSound&&100>b);this.lastSound=a,this.soundPlayer.play(a)},b._getRandomAudio=function(){return this.soundArray.random()},cm.Tools.EncouragementPlayer=a}(),function(){function a(a){this.Container_constructor(),a=a||{},this.x=a.pos&&a.pos.x?a.pos.x:0,this.y=a.pos&&a.pos.y?a.pos.y:0,this.particleContainer=a.particleContainer?a.particleContainer:null,this.count=a.count?a.count:5,this.rate=a.rate?a.rate:0,this.loop=void 0!==a.loop?a.loop:!1,this.burst=void 0!==a.burst?a.burst:!1,this.spawn=0,this.particle=a.particle,this.particles=[],a.startOn?this.ready=!0:this.ready=!1,this.particleTracker=0,this.rateTracker=0,this.createPool()}var b=cjs.extend(a,cjs.Container);b._tick=function(a){var b,c=.001*a.delta;for(b=0;b<this.particles.length;b++)this.particles[b].isPlaying&&this.particles[b].update(c);if(this.ready){if(this.burst){if(!this.checkReady())return;for(b=0;b<this.count;b++)this.particles[b].play(this.particleContainer);this.loop||this.stop()}else{if(this.spawn-=c,this.spawn<=0){if(!this.particles[this.rateTracker].isReady)return;this.particles[this.rateTracker].play(this.particleContainer),this.spawn=this.rate,this.rateTracker++,this.rateTracker>this.count-1&&(this.rateTracker=0),this.loop||this.particleTracker++}!this.loop&&this.particleTracker>=this.count&&this.stop()}this.Container__tick(a)}},b.play=function(){this.loop||(this.particleTracker=0),this.ready=!0},b.stop=function(){this.ready=!1},b.createPool=function(){for(var a=0;a<this.count;a++){var b=new cm.Particle(this.particle,this);b.set(),this.particles.push(b),this.particleContainer?this.particleContainer.addChild(b.shape):this.addChild(b.shape)}},b.checkReady=function(){var a,b=0;for(a=0;a<this.particles.length;a++)this.particles[a].isReady&&b++;return b>=this.count?!0:!1},b.change=function(a){this.stop(),this.particles=[],this.particle=a;for(var b=0;b<this.count;b++){var c=new cm.Particle(this.particle,this);c.set(),this.particles.push(c),this.particleContainer?this.particleContainer.addChild(c.shape):this.addChild(c.shape)}this.play()},window.cm=window.cm||{},cm.ParticleEmitter=cjs.promote(a,"Container")}(),function(){function a(a,b){a.shape instanceof Array?this.shape=a.shape.random().clone():this.shape=a.shape.clone(),this.lifetime=a.lifetime,this.currentLifetime=0,this.speed=a.speed,this.currentSpeed=0,this.rotateSpeed=a.rotateSpeed,this.currentRotateSpeed=0,this.scale=a.scale,this.opacity=a.opacity,this.force=a.force,this.gravity=a.gravity,this.position={x:0,y:0},this.velocity={x:0,y:0},this.container=a.container,this.emitter=b}var b=a.prototype;b.update=function(a){this.currentLifetime-=a,this.gravity.on&&(this.velocity.y+=a*this.gravity.speed),this.shape.x=this.position.x,this.shape.y=this.position.y,this.shape.rotation+=this.currentRotateSpeed,this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.scale.start!==this.scale.end&&(this.shape.scaleX=this.shape.scaleY=Math.map(this.currentLifetime,this.lifetime.max,0,this.scale.start,this.scale.end)),this.opacity.start!==this.opacity.end&&(this.shape.alpha=Math.map(this.currentLifetime,this.lifetime.max,0,this.opacity.start,this.opacity.end)),this.isDead()},b.isDead=function(){this.currentLifetime<0&&this.set()},b.randomDir=function(){var a=Math.random(),b=Math.random();return.5>b&&(a=-a),a},b.randomRot=function(){return 360*Math.random()},b.set=function(){this.shape.x=this.position.x=0,this.shape.y=this.position.y=0,this.shape.scaleX=this.shape.scaleY=this.scale.start,this.shape.alpha=this.opacity.start,this.velocity={x:this.randomDir(),y:this.randomDir()},this.shape.rotation=this.randomRot(),this.lifetime.min!==this.lifetime.max?this.currentLifetime=Math.random()*(this.lifetime.max-this.lifetime.min)+this.lifetime.min:this.currentLifetime=this.lifetime.min,this.speed.min!==this.speed.max?this.currentSpeed=Math.random()*(this.speed.max-this.speed.min)+this.speed.min:this.currentSpeed=this.speed.min,0!==this.currentSpeed&&(this.velocity.x*=this.currentSpeed,this.velocity.y*=this.currentSpeed),(0!==this.force.x||0!==this.force.y)&&(this.velocity.x+=this.force.x,this.velocity.y+=this.force.y),this.rotateSpeed.min!==this.rotateSpeed.max?this.currentRotateSpeed=Math.random()*(this.rotateSpeed.max-this.rotateSpeed.min)+this.rotateSpeed.min:this.currentRotateSpeed=this.rotateSpeed.min,this.stop()},b.setPosition=function(a){var b=a.localToLocal(0,0,this.emitter);this.shape.x=this.position.x=b.x,this.shape.y=this.position.y=b.y},b.play=function(a){a&&this.setPosition(a),this.isPlaying=!0,this.shape.visible=!0,this.isReady=!1},b.stop=function(){this.isPlaying=!1,this.shape.visible=!1,this.isReady=!0},window.cm=window.cm||{},cm.Particle=a}(),function(){function a(){this.Container_constructor(),this.prevPoint=null,this.numPoints=0,cm.Keyboard.bind(cm.Keyboard.KEYS.D,"dKey"),this.setActive(!0),this.stagePoints=[],this.localPoints=[]}var b=cjs.extend(a,cjs.Container);b.show=function(){this.visible=!0},b.hide=function(){this.visible=!1},b._tick=function(){cm.Keyboard.state("dKey")?this.show():this.hide()},b.setActive=function(a){a?app.stage.on("stagemousedown",this.btnHandler,this):app.stage.removeAllEventListeners()},b.btnHandler=function(a){switch(a.type){case"stagemousedown":this.createDot(a.stageX,a.stageY)}},b.clear=function(){this.prevPoint=null,this.numPoints=0,this.stagePoints=[],this.localPoints=[],this.removeAllChildren()},b.createDot=function(a,b){this.numPoints++;var c=this.globalToLocal(a,b);a=Math.floor(a),b=Math.floor(b),this.stagePoints.push({x:a,y:b}),this.visible,a=Math.floor(c.x),b=Math.floor(c.y),this.localPoints.push({x:a,y:b}),this.visible;var d=new createjs.Shape;d.regX=d.regY=0,d.graphics.beginFill("#fff").drawCircle(c.x,c.y,4);var e=new createjs.Text(this.numPoints,"15px Arial","#000");if(e.x=c.x,e.y=c.y+2,this.prevPoint){var f=new createjs.Shape;f.graphics.setStrokeStyle(1),f.graphics.beginStroke("black"),f.graphics.moveTo(c.x,c.y),f.graphics.lineTo(this.prevPoint.x,this.prevPoint.y),f.graphics.endStroke(),this.addChild(f)}this.prevPoint=c,this.addChild(d,e)},cm.Tools.PositionTool=cjs.promote(a,"Container")}(),function(){function a(a,b){this.Container_constructor(),this.name=a,this.collected=!1,this.type="Distractor",b=void 0!==b?b:!0,b&&(this.sprite=new cjs.Sprite(cm.Assets.lib.GameSS),this.sprite.gotoAndStop(a),this.sprite.center(),this.addChild(this.sprite))}var b=cjs.extend(a,cjs.Container);b.startIdle=function(){},b.collect=function(){},cm.Entities.Distractors=cjs.promote(a,"Container")}(),function(){function a(a){this.Container_constructor(),this.name=a,this.stroke=new createjs.Text(a,"30px Didact Gothic","#000000"),this.stroke.outline=2,this.word=new createjs.Text(a,"30px Didact Gothic","#000000"),this.addChild(this.stroke,this.word),this.center()}var b=cjs.extend(a,cjs.Container);b.updateText=function(a){this.stroke.text=a,this.word.text=a,this.center()},b.animate=function(a,b,c){return a=a||0,b=b||500,c=c||cjs.Ease.cubicInOut,cjs.Tween.get(this).wait(a).to({scaleX:1.2,scaleY:1.6},b,c).to({scaleX:1,scaleY:1},b,c)},cm.Entities.Words=cjs.promote(a,"Container")}(),function(){function a(a){this.Distractors_constructor(a),this.scale=.6,this.name=a,this.type="boost"}var b=cjs.extend(a,cm.Entities.Distractors);b.collect=function(){return app.sound.play("sfx_boost"),this.collected=!0,cjs.Tween.get(this).to({alpha:0},250,cjs.Ease.sineInOut).set({visible:!1},this)},cm.Entities.Boost=cjs.promote(a,"Distractors")}(),function(){function a(a){this.Distractors_constructor(a),this.name=a,this.type="bubble",this.startIdle()}var b=cjs.extend(a,cm.Entities.Distractors);b.startIdle=function(){this.scaleX=.7,this.scaleY=.5,cjs.Tween.get(this,{loop:-1}).to({scaleX:.5,scaleY:.7},500).to({scaleX:.7,scaleY:.5},500)},b.collect=function(){return app.sound.play("sfx_bubble"),this.collected=!0,cjs.Tween.get(this).to({alpha:0},250,cjs.Ease.sineInOut).set({visible:!1},this)},cm.Entities.Bubble=cjs.promote(a,"Distractors")}(),function(){function a(a,b,c){this.Sprite_constructor(a),this.gotoAndStop(b),this.name=b,this.playIdle=c}var b=cjs.extend(a,cjs.Sprite);b.setActive=function(a){a?cm.Device.mobile||(this.on("mouseover",this.handlePlayBtnMouseOver,this),this.on("mouseout",this.handlePlayBtnMouseOut,this)):this.removeAllEventListeners()},b.handlePlayBtnMouseOver=function(a){app.isPaused||cjs.Tween.get(this,{override:!0}).to({scale:1.1},250,cjs.Ease.backOut)},b.handlePlayBtnMouseOut=function(a){app.isPaused||cjs.Tween.get(this,{override:!0}).to({scale:1},250,cjs.Ease.backIn).call(this.idle,null,this)},b.idle=function(){this.playIdle&&cjs.Tween.get(this,{loop:-1}).to({scale:1.1},2e3,cjs.Ease.sineInOut).to({scale:1},2e3,cjs.Ease.sineInOut)},b.show=function(a,b,c,d){return a=a||0,b=b||500,c=c||cjs.Ease.sineInOut,d=d||1,cjs.Tween.get(this,{override:!0}).wait(a).to({scale:d},b,c).call(this.idle,null,this)},b.hide=function(a,b,c){return a=a||0,b=b||500,c=c||cjs.Ease.sineInOut,cjs.Tween.get(this,{override:!0}).wait(a).to({scale:0},b,c)},cm.Entities.Button=cjs.promote(a,"Sprite")}(),function(){function a(a){this.Distractors_constructor(a),this.scale=.6,this.name=a,this.type="cloud",this.startIdle()}var b=cjs.extend(a,cm.Entities.Distractors);b.startIdle=function(){this.scaleY=.6,cjs.Tween.get(this,{loop:-1}).to({scaleY:.65},500).to({scaleY:.6},500)},b.collect=function(){return app.sound.play("sfx_cloud"),this.collected=!0,cjs.Tween.get(this).to({alpha:0},250,cjs.Ease.sineInOut).set({visible:!1},this)},cm.Entities.Cloud=cjs.promote(a,"Distractors")}(),function(){function a(){this.Container_constructor(),this.url="";var a=cm.Assets.lib.GameSS;this.exitBtn=new cjs.Sprite(a,"x_button"),this.exitBtn.center(),this.exitBtn.set({x:app.width/2-55,y:-(app.height/2)+55,alpha:0,name:"Exit Button"}),this.restartButton=new cjs.Sprite(a,"home_button"),this.restartButton.center(),this.restartButton.set({x:-(app.width/2)+55,y:-(app.height/2)+55,alpha:0,visible:!1,mouseEnabled:!1}),this.whiteBackground=new cjs.Shape,this.whiteBackground.graphics.beginFill("#ffffff").drawRect(-app.maxWidth/2,-app.maxHeight/2,app.maxWidth,app.maxHeight),this.whiteBackground.alpha=0,this.whiteBackground.setBounds(-app.maxWidth/2,-app.maxHeight/2,app.maxWidth,app.maxHeight),this.whiteBackground.hitbox(),this.whiteBackground.mouseEnabled=!1,this.whiteBackground.name="White Background",this.panelContainer=new cjs.Container,this.panel=new cjs.Sprite(a),this.panel.gotoAndStop("panel"),this.panel.center(),this.panel.mouseEnabled=!1,this.panel.name="Panel",this.exitText=new cjs.Text("Are you sure you want to exit?","50px Didact Gothic","#ffffff"),this.exitText.set({lineWidth:500,textAlign:"center",y:-150}),this.exitText.mouseEnabled=!1,this.exitText.name="Exit Text",this.yesBtn=new cm.Entities.ModeButtons(a,"button_green","Yes"),this.yesBtn.type="Yes",this.yesBtn.button.scale=.65,this.yesBtn.set({x:-125,y:100,name:"Yes Button"}),this.noBtn=new cm.Entities.ModeButtons(a,"button_red","No"),this.noBtn.type="No",this.noBtn.button.scale=.65,this.noBtn.set({x:125,y:100,name:"No Button"}),this.panelContainer.addChild(this.panel,this.exitText,this.yesBtn,this.noBtn),/packageName=org\.pbskids\.gamesapp/.test(window.location.search)||this.addChild(this.exitBtn),this.addChild(this.restartButton,this.whiteBackground,this.panelContainer),this.panelContainer.scale=0}var b=cjs.extend(a,cjs.Container);b.setActive=function(a){a?(this.restartButton.on("mousedown",this.handleRestartButton,this),/packageName=org\.pbskids\.gamesapp/.test(window.location.search)||(this.exitBtn.on("mousedown",this.handleExitButton,this),cm.Device.mobile||(this.restartButton.on("mouseover",function(){cjs.Tween.get(this,{override:!0}).to({scale:1.1},150,cjs.Ease.backOut)}),this.restartButton.on("mouseout",function(){cjs.Tween.get(this,{override:!0}).to({scale:1},150,cjs.Ease.backIn)}),this.exitBtn.on("mouseover",function(){cjs.Tween.get(this,{override:!0}).to({scale:1.1},150,cjs.Ease.backOut)}),this.exitBtn.on("mouseout",function(){cjs.Tween.get(this,{override:!0}).to({scale:1},150,cjs.Ease.backIn)})))):(this.restartButton.removeAllEventListeners(),this.exitBtn.removeAllEventListeners(),this.yesBtn.removeAllEventListeners(),this.noBtn.removeAllEventListeners())},b.setPanelActive=function(a){this.yesBtn.setActive(a),this.noBtn.setActive(a),a?(this.yesBtn.on("mousedown",this.confirm,this),cm.Device.mobile||this.yesBtn.on("rollover",function(a){
app.sound.play("sw_yes"),app.captions.play("sw_yes")}),this.noBtn.on("mousedown",this.cancel,this),cm.Device.mobile||this.noBtn.on("rollover",function(a){app.sound.play("sw_no"),app.captions.play("sw_no")})):(this.yesBtn.removeAllEventListeners(),this.noBtn.removeAllEventListeners())},b.handleRestartButton=function(){this.show()},b.handleHomeButton=function(a){a.stopImmediatePropagation(),this.show("http://pbskids.org/superwhy/")},b.handleExitButton=function(a){a.stopImmediatePropagation(),this.show("http://pbskids.org/superwhy/")},b.confirm=function(){cm.Device.mobile||/packageName=org\.pbskids\.gamesapp/.test(window.location.search)?(app.sound.play("sw_yes",this.handleConfirmButtonClicked.bind(this)),app.captions.play("sw_yes")):this.handleConfirmButtonClicked()},b.handleConfirmButtonClicked=function(){if(this.url)window.top.location.href=this.url;else{var a=this.hide();a.call(app.resumeGame,null,app),this.hideRestartButton(),app.restartGame("ModeSelect")}},b.cancel=function(){(cm.Device.mobile||/packageName=org\.pbskids\.gamesapp/.test(window.location.search))&&(app.sound.play("sw_no"),app.captions.play("sw_no"));var a=this.hide();a.call(app.resumeGame,null,app)},b.showButtons=function(){cjs.Tween.get(this.exitBtn).to({alpha:1},250,cjs.Ease.quadOut)},b.showRestartButton=function(){this.restartButton.mouseEnabled=!0,cjs.Tween.get(this.restartButton).set({visible:!0},this.restartButton).to({alpha:1},250,cjs.Ease.quadInOut)},b.hideRestartButton=function(){this.restartButton.mouseEnabled=!1,cjs.Tween.get(this.restartButton).to({alpha:0},250,cjs.Ease.quadInOut).set({visible:!1},this.restartButton)},b.show=function(a){return app.isPaused?void 0:(app.pauseGame(),app.sound.play("sw_exit"),app.captions.play("sw_exit"),this.url=a,cjs.Tween.get(this.whiteBackground,{ignoreGlobalPause:!0}).to({alpha:.5},500,cjs.Ease.sineIn),cjs.Tween.get(this.panelContainer,{ignoreGlobalPause:!0}).to({scale:1},500,cjs.Ease.backOut).call(this.setPanelActive,[!0],this))},b.hide=function(){return this.setPanelActive(!1),cjs.Tween.get(this.whiteBackground,{ignoreGlobalPause:!0}).to({alpha:0},500,cjs.Ease.sineIn),cjs.Tween.get(this.panelContainer,{ignoreGlobalPause:!0}).to({scale:0},500,cjs.Ease.backIn)},b.resize=function(a,b){/packageName=org\.pbskids\.gamesapp/.test(window.location.search)?this.restartButton.x=-(a/2)+55:(this.exitBtn.x=a/2-55,this.restartButton.x=-(a/2)+55)},cm.Entities.ExitPanel=cjs.promote(a,"Container")}(),function(){function a(a,b,c){this.Container_constructor(),this.topLane=a,this.middleLane=b,this.bottomLane=c,this.spawnTimer=0,this.speed=250,this.speedModifier=1,this.lastLane=null,this.guaranteeLetter=0,this.dispatcher=new cjs.EventDispatcher}var b=cjs.extend(a,cjs.Container);b.createLetters=function(a){this.itemPool=[];for(var b=0,c=a.length;c>b;b++){var d=a[b].toUpperCase(),e=new cm.Entities.Letters(d);e.y=this.middleLane,e.visible=!1,this.addChild(e)}},b.addLetters=function(a){for(var b=0,c=a.length;c>b;b++){var d=a[b];d.scale=1,d.y=this.middleLane,this.addChild(d)}},b.createDistractors=function(){var a=new cm.Entities.Bubble("Bubble");a.visible=!1,this.addChild(a);var b=new cm.Entities.Rocket("Rocket");b.visible=!1,this.addChild(b);var c=new cm.Entities.Cloud("cloud1");c.visible=!1,this.addChild(c);var d=new cm.Entities.Cloud("cloud2");d.visible=!1,this.addChild(d);var e=new cm.Entities.Boost("powerup_speed");e.visible=!1,this.addChild(e)},b.clearLetters=function(){for(var a=0,b=this.children.length;b>a;a++){var c=this.children[a];"Letter"===c.type&&this.removeChild(c)}},b.getRandomLane=function(){var a=["top","middle","bottom"];if(this.lastLane){var b=a.indexOf(this.lastLane);a.splice(b,1)}return a.random()},b.playSprite=function(a){switch(a.visible=!0,a.alpha=1,a.collected=!1,a.lane=this.getRandomLane(),"Letter"===a.type?this.guaranteeLetter=0:this.guaranteeLetter++,this.lastLane=a.lane,a.x=app.maxWidth,a.lane){case"top":a.y=this.topLane;break;case"middle":a.y=this.middleLane;break;case"bottom":a.y=this.bottomLane}return"Rocket"===a.name&&a.startIdle(),a},b.getRandomSprite=function(){var a,b,c=[];for(a=0,b=this.children.length;b>a;a++)this.children[a].visible===!1&&c.push(this.children[a]);return c.length>0?this.playSprite(c.random()):void 0},b.getRandomLetter=function(){var a,b,c=[];for(a=0,b=this.children.length;b>a;a++)this.children[a].visible===!1&&"Letter"===this.children[a].type&&c.push(this.children[a]);return c.length>0?this.playSprite(c.random()):void 0},b.play=function(){this._active=!0},b.stop=function(){this._active=!1},b.setModifier=function(a){var b=a||1;cjs.Tween.get(this).to({speedModifier:b},1e3,cjs.Ease.quadInOut)},b._tick=function(a){var b=.001*a.delta;if(this._active){if(this.spawnTimer-=b*this.speedModifier,this.spawnTimer<0)if(this.spawnTimer=3,this.firstSpawn)this.guaranteeLetter<3?this.getRandomSprite():(this.guaranteeLetter=0,this.getRandomLetter());else{this.firstSpawn=!0;var c=this.getRandomLetter(),d=new Event("FirstSpawn");d.firstLetter=c,this.dispatcher.dispatchEvent(d),this.dispatcher.removeAllEventListeners(),this.dispatcher=null}for(var e=0,f=this.children.length;f>e;e++){var g=this.children[e];g.visible&&!g.collected&&(g.x-=this.speed*this.speedModifier*b,g.x<-app.maxWidth&&(g.visible=!1))}}this.Container__tick(a)},cm.Entities.ItemContainer=cjs.promote(a,"Container")}(),function(){function a(){this.Container_constructor();var a=cm.Assets.lib.GameSS;this.leftCap=new cjs.Sprite(a),this.leftCap.gotoAndStop("letter_tray_left"),this.leftCap.regs(1,.5),this.addChild(this.leftCap),this.rightCap=new cjs.Sprite(a),this.rightCap.gotoAndStop("letter_tray_right"),this.rightCap.regs(0,.5),this.addChild(this.rightCap),this.trayCenterContainer=new cjs.Container,this.addChild(this.trayCenterContainer);for(var b=0;7>b;b++){var c=new cjs.Sprite(a);c.gotoAndStop("letter_tray_center"),c.center(),this.trayCenterContainer.addChild(c)}this.isOnScreen=!1}var b=cjs.extend(a,cjs.Container);b.createLetters=function(a){for(var b=[],c=0,d=a.length;d>c;c++){var e=a[c].toUpperCase(),f=new cm.Entities.Letters(e);f.scale=.7,f.x=this.trayCenterContainer.children[c].x,f.y=this.trayCenterContainer.children[c].y-15,f.startX=f.x,f.startY=f.y,f.visible=!1,this.trayCenterContainer.addChild(f),b.push(f)}return b},b.adjustTray=function(a){var b,c=a.length,d=this.trayCenterContainer,e=d.children[0].getBounds();for(b=0,l=d.children.length;b<l;b++)d.children[b].visible=!1;for(b=0;c>b;b++)d.children[b].visible=!0,d.children[b].x=(e.width-2)*b;var f=d.getBounds();return d.regX=f.width/2-e.width/2,this.leftCap.visible=!0,this.leftCap.x=-(f.width/2)+2,this.rightCap.visible=!0,this.rightCap.x=f.width/2-2,this},b.hide=function(a,b,c){a=a||0,b=b||500,c=c||cjs.Ease.cubicInOut;var d=this.getBounds().height;return cjs.Tween.get(this,{override:!0}).wait(a).to({y:app.height/2+d},b,c).set({isOnScreen:!1},this)},b.show=function(a,b,c){return a=a||0,b=b||500,c=c||cjs.Ease.cubicInOut,cjs.Tween.get(this,{override:!0}).wait(a).to({y:app.height/2},b,c).set({isOnScreen:!0},this)},b.clearTray=function(){for(var a=this.trayCenterContainer.children.length-1;a>=0;a--){var b=this.trayCenterContainer.children[a];"Letter"===b.type&&this.trayCenterContainer.removeChild(b)}},cm.Entities.LetterTray=cjs.promote(a,"Container")}(),function(){function a(a){this.Container_constructor(),this.collected=!1,this.lane="middle",this.type="Letter",this.name=a,this.stroke=new createjs.Text(a,"100px Didact Gothic","#ffffff"),this.stroke.outline=8,this.stroke.center(),this.letter=new createjs.Text(a,"100px Didact Gothic","#ff0000"),this.letter.center(),this.stars=new cjs.Sprite(cm.Assets.lib.GameSS),this.stars.gotoAndStop("starsTurn"),this.stars.center(),this.stars.alpha=0,this.stars.visible=!1,this.addChild(this.stroke,this.letter,this.stars)}var b=cjs.extend(a,cjs.Container);b.collect=function(){return app.sound.play("sfx_collect-letter"),this.collected=!0,cjs.Tween.get(this.stroke).to({scale:1.25},600,cjs.Ease.backOut).to({scale:1},600,cjs.Ease.backIn),cjs.Tween.get(this.letter).to({scale:1.25},600,cjs.Ease.backOut).to({scale:1},600,cjs.Ease.backIn),this.stars.set({visible:!0,scale:.75,alpha:0}),cjs.Tween.get(this.stars).to({alpha:1,rotation:45,scale:1},600).to({alpha:0,rotation:90,scale:1.25},600)},cm.Entities.Letters=cjs.promote(a,"Container")}(),function(){function a(a,b,c){this.Container_constructor(),this.button=new cjs.Sprite(a),this.button.gotoAndStop(b),this.button.center(),this.text=new createjs.Text(c,"50px Didact Gothic","#ffffff"),this.text.set({textAlign:"center",textBaseline:"middle"}),this.text.y-=4,this.addChild(this.button,this.text),this.name=b}var b=cjs.extend(a,cjs.Container);b.setActive=function(a){a?cm.Device.mobile||(this.on("mouseover",this.handlePlayBtnMouseOver,this),this.on("mouseout",this.handlePlayBtnMouseOut,this)):this.removeAllEventListeners()},b.animate=function(){var a=this.handlePlayBtnMouseOver();a.call(this.handlePlayBtnMouseOut,[3e3],this)},b.handlePlayBtnMouseOver=function(a,b){return a=a||0,b=b||300,cjs.Tween.get(this,{override:!0}).wait(a).to({scale:1.1},b,cjs.Ease.getBackOut(.2))},b.handlePlayBtnMouseOut=function(a,b){return a=a||0,b=b||300,cjs.Tween.get(this,{override:!0}).wait(a).to({scale:1},b,cjs.Ease.getBackOut(.2))},cm.Entities.ModeButtons=cjs.promote(a,"Container")}(),function(){function a(){this.Container_constructor();var a=cm.Assets.lib.GameSS;this.panel=new cjs.Sprite(a),this.panel.gotoAndStop("panel"),this.panel.center(),this.easyBtn=new cm.Entities.ModeButtons(a,"whyatt_popupbutton","Easy"),this.easyBtn.y=-100,this.easyBtn.type="easy",this.hardBtn=new cm.Entities.ModeButtons(a,"whyatt_popupbutton","Hard"),this.hardBtn.y=100,this.hardBtn.type="hard",this.addChild(this.panel,this.easyBtn,this.hardBtn),this.visible=!1,this.scale=0}var b=cjs.extend(a,cjs.Container);b.setActive=function(a){this.easyBtn.setActive(a),this.hardBtn.setActive(a)},b.show=function(a,b,c){return a=a||0,b=b||500,c=c||cjs.Ease.cubicInOut,this.visible=!0,this.mouseEnabled=!0,this.easyBtn.mouseEnabled=!0,this.hardBtn.mouseEnabled=!0,cjs.Tween.get(this,{override:!0}).wait(a).to({scale:1},b,c)},b.hide=function(a,b,c){return a=a||0,b=b||500,c=c||cjs.Ease.cubicInOut,this.mouseEnabled=!1,this.easyBtn.mouseEnabled=!1,this.hardBtn.mouseEnabled=!1,cjs.Tween.get(this,{override:!0}).wait(a).to({scale:0},b,c).set({visible:!1},this)},cm.Entities.ModeContainer=cjs.promote(a,"Container")}(),function(){function a(a){this.Distractors_constructor(a,!1),this.scale=.6,this.name=a,this.type="fireworks",this.rocket=new cm.Assets.lib.RocketAnim.RocketAnim,this.rocket.framerate=24,this.rocket.gotoAndPlay("Idle"),this.addChild(this.rocket)}var b=cjs.extend(a,cm.Entities.Distractors);b.startIdle=function(){var a=this.y,b=this.y+10;cjs.Tween.get(this,{loop:-1,override:!0}).to({y:b},350).to({y:a},350)},b.collect=function(){app.sound.play("sfx_fireworks"),this.collected=!0,this.rocket.gotoAndPlay("Hit"),this.rocket.callback=this.reset.bind(this)},b.reset=function(){this.visible=!1,this.rocket.gotoAndPlay("Idle")},cm.Entities.Rocket=cjs.promote(a,"Distractors")}(),function(){function a(a){this.Words_constructor(a),this.stroke.set({textAlign:"center",textBaseline:"middle"}),this.word.set({textAlign:"center",textBaseline:"middle"}),this.stroke.hitbox(15),this.word.hitbox(15),this.regs(0,0)}var b=cjs.extend(a,cm.Entities.Words);b.updateText=function(a){this.stroke.text=a,this.word.text=a},b.setActive=function(a,b){a?this.on("click",b):this.removeAllEventListeners()},b.animate=function(a,b,c){return a=a||0,b=b||500,c=c||cjs.Ease.cubicInOut,cjs.Tween.get(this).wait(a).to({scale:1.2},b,c).to({scale:1},b,c)},b.hide=function(){this.mouseEnabled=!1,cjs.Tween.get(this).to({alpha:0},500,cjs.Ease.sineInOut).set({visible:!1},this)},cm.Entities.SelectableWords=cjs.promote(a,"Words")}(),function(){function a(a){this.Container_constructor();var b=cm.Assets.lib.TitleSS;this.letterS1=new cjs.Sprite(b),this.letterS1.gotoAndStop("txt_S"),this.letterS1.center(),this.letterS1.scale=.9,this.letterA1=new cjs.Sprite(b),this.letterA1.gotoAndStop("txt_A"),this.letterA1.center(),this.letterA1.set({x:90,y:-5,scale:.8}),this.letterV=new cjs.Sprite(b),this.letterV.gotoAndStop("txt_V"),this.letterV.center(),this.letterV.set({x:155,y:-8,scale:.8}),this.letterE1=new cjs.Sprite(b),this.letterE1.gotoAndStop("txt_E"),this.letterE1.center(),this.letterE1.set({x:220,y:-4,scale:.8}),this.letterS2=new cjs.Sprite(b),this.letterS2.gotoAndStop("txt_S"),this.letterS2.center(),this.letterS2.set({x:275,y:-5,scale:.6}),this.letterT=new cjs.Sprite(b),this.letterT.gotoAndStop("txt_T"),this.letterT.center(),this.letterT.set({x:110,y:80,scale:.9}),this.letterH=new cjs.Sprite(b),this.letterH.gotoAndStop("txt_H"),this.letterH.center(),this.letterH.set({x:160,y:80,scale:.9}),this.letterE2=new cjs.Sprite(b),this.letterE2.gotoAndStop("txt_E"),this.letterE2.center(),this.letterE2.set({x:205,y:80,scale:.6}),this.letterD=new cjs.Sprite(b),this.letterD.gotoAndStop("txt_D"),this.letterD.center(),this.letterD.set({x:55,y:160,scale:.9}),this.letterA2=new cjs.Sprite(b),this.letterA2.gotoAndStop("txt_A"),this.letterA2.center(),this.letterA2.set({x:155,y:160,scale:.9}),this.letterY=new cjs.Sprite(b),this.letterY.gotoAndStop("txt_Y"),this.letterY.center(),this.letterY.set({x:225,y:160,scale:.9}),this.exclamation=new cjs.Sprite(b),this.exclamation.gotoAndStop("txt_exclamation"),this.exclamation.center(),this.exclamation.set({x:285,y:150,scale:.9,rotation:15}),this.addChild(this.exclamation,this.letterY,this.letterA2,this.letterD,this.letterE2,this.letterH,this.letterT,this.letterS2,this.letterE1,this.letterV,this.letterA1,this.letterS1),this.hideAll()}var b=cjs.extend(a,cjs.Container);b.hideAll=function(){for(var a=0,b=this.children.length;b>a;a++){var c=this.children[a];c.startScale=c.scale,c.visible=!1,c.scale=0}},b.animate=function(a){var b,c=1e3;a=a||0;for(var d=this.children.length-1;d>=0;d--){var e=this.children[d];b=cjs.Tween.get(e).wait(a).set({visible:!0},e).to({scale:e.startScale},c,cjs.Ease.elasticOut),a+=100}return b},cm.Entities.SubTitle=cjs.promote(a,"Container")}(),function(){function a(){this.Container_constructor(),this.whyatt=new cm.Assets.lib.WhyattMC.SuperWhyMC,this.whyatt.center(),this.whyatt.gotoAndPlay("Fly"),this.whyatt.set({framerate:24}),this.bubble=new cm.Assets.lib.BubbleAnim.Bubble,this.bubble.framerate=24,this.bubble.visible=!1,this.cloud=new cm.Assets.lib.CloudAnim.CloudAnim,this.cloud.framerate=24,this.cloud.visible=!1,this.addChild(this.whyatt,this.bubble,this.cloud),this.scale=.9}var b=cjs.extend(a,cjs.Container);b.playBubble=function(){this.bubble.gotoAndPlay("Hit"),this.bubble.visible=!0,this.bubble.callback=function(){this.visible=!1}},b.playCloud=function(){this.cloud.gotoAndPlay("Hit"),this.cloud.visible=!0,this.cloud.callback=function(){this.visible=!1}},b.flyOnScreen=function(a){return cjs.Tween.get(this).to({x:a},2e3,cjs.Ease.quadOut)},b.flyOffScreen=function(){var a=this.x+app.maxWidth;return cjs.Tween.get(this).to({x:a},2e3,cjs.Ease.backIn)},cm.Entities.Whyatt=cjs.promote(a,"Container")}(),function(){function a(a){this.Container_constructor(),this.textChoices=[],this.atom=new cm.Assets.lib.atom.atom,this.atom.framerate=24,this.addChild(this.atom),this.wordLocations=[{x:0,y:-75},{x:0,y:-5},{x:0,y:65}];for(var b=0;3>b;b++){var c=new cm.Entities.SelectableWords(a[b]);c.set({x:this.wordLocations[b].x,y:this.wordLocations[b].y}),this.textChoices.push(c),this.addChild(c)}}var b=cjs.extend(a,cjs.Container);b.setActive=function(a,b){for(var c=0,d=this.textChoices.length;d>c;c++)this.textChoices[c].setActive(a,b)},b.setMouseEnabled=function(a){for(var b=0,c=this.textChoices.length;c>b;b++)this.textChoices[b].mouseEnabled=a},b.animateWords=function(){for(var a,b=0,c=this.textChoices.length;c>b;b++){var d=this.textChoices[b];d.visible&&d.mouseEnabled&&(a=a?d.animate(a.duration+1e3):d.animate())}a.call(cm.whyMouth.gotoAndPlay,[0],cm.whyMouth)},b.show=function(a,b,c){return a=a||0,b=b||500,c=c||cjs.Ease.cubicInOut,this.visible=!0,cjs.Tween.get(this).wait(a).to({scale:1},b,c)},b.hide=function(a,b,c){return a=a||0,b=b||500,c=c||cjs.Ease.cubicInOut,cjs.Tween.get(this).wait(a).to({scale:0},b,c).set({visible:!1},this)},cm.Entities.WordSelector=cjs.promote(a,"Container")}(),function(){function a(a,b,c,d){this.Container_constructor();var e=cm.Assets.lib.GameSS;this.centerTray=new cjs.Sprite(e),this.centerTray.gotoAndStop("sentence_center"),this.centerTray.center(),this.addChild(this.centerTray),this.leftCap=new cjs.Sprite(e),this.leftCap.gotoAndStop("sentence_side"),this.leftCap.regs(1,.5),this.addChild(this.leftCap),this.rightCap=new cjs.Sprite(e),this.rightCap.gotoAndStop("sentence_side"),this.rightCap.scaleX=-1,this.rightCap.regs(0,.5),this.addChild(this.rightCap),this.sentenceContainer=new cjs.Container,this.sentenceContainer.y=-10,this.startSentence=new cm.Entities.Words(a),this.replacableWord=new cm.Entities.Words(b),this.endSentence=new cm.Entities.Words(c),this.correctText=new cm.Entities.Words(d),this.correctText.visible=!1,this.correctText.x=-10,this.correctText.y=-10,this.zap=new cjs.Sprite(e),this.zap.gotoAndPlay("wave"),this.zap.center(),this.zap.framerate=12;this.zap.getBounds();this.zap.scaleX=0,this.zap.scaleY=0,this.zap.set({x:this.replacableWord.x,y:this.replacableWord.y}),this.zap.set({alpha:0}),this.sentenceContainer.addChild(this.zap,this.startSentence,this.replacableWord,this.endSentence),this.addChild(this.sentenceContainer),this.addChild(this.correctText),this.isOnScreen=!1}var b=cjs.extend(a,cjs.Container);b.zapWord=function(){return cjs.Tween.get(this.zap).to({alpha:1},150)},b.unZapWord=function(){return cjs.Tween.get(this.zap).to({alpha:0},150)},b.adjustText=function(a){this.startSentence.center(),this.replacableWord.center(),this.endSentence.center();var b=this.startSentence.getBounds(),c=this.replacableWord.getBounds(),d=this.endSentence.getBounds(),e=(b.width+c.width+a.first)/2;this.replacableWord.x=e;var f=(c.width+d.width+a.second)/2;this.endSentence.x=e+f;var g=this.sentenceContainer.getBounds();this.sentenceContainer.x=-(g.width/2)+b.width/2-5;var h=this.zap.getBounds();return this.zap.scaleX=c.width/h.width*1.3,this.zap.scaleY=c.height/h.height*3,this.zap.set({x:this.replacableWord.x-2,y:this.replacableWord.y-10}),this},b.adjustTray=function(a){a=a||this.sentenceContainer;var b=this.centerTray.getBounds(),c=a.getBounds();this.centerTray.scaleX=c.width/(b.width-10);var d=this.leftCap.getBounds();return this.leftCap.x=-(b.width/2)*this.centerTray.scaleX+2,this.rightCap.x=b.width/2*this.centerTray.scaleX+d.width-2,this},b.showCorrectText=function(){this.startSentence.visible=!1,this.replacableWord.visible=!1,this.endSentence.visible=!1,this.correctText.visible=!0,this.correctText.x=0,this.adjustTray(this.correctText)},b.update=function(a){this.adjustText(a).adjustTray()},b.updateText=function(a,b){this.replacableWord.updateText(a),this.update(b)},b.animateText=function(){return this.replacableWord.animate()},b.hide=function(a,b,c){a=a||0,b=b||500,c=c||cjs.Ease.cubicInOut;var d=this.getBounds().height;return cjs.Tween.get(this,{override:!0}).wait(a).to({y:app.height/2+d},b,c).set({isOnScreen:!1},this)},b.show=function(a,b,c){return a=a||0,b=b||500,c=c||cjs.Ease.cubicInOut,cjs.Tween.get(this,{override:!0}).wait(a).to({y:app.height/2},b,c).set({isOnScreen:!0},this)},cm.Entities.WordTray=cjs.promote(a,"Container")}(),function(){function a(a,b){this.Container_constructor();var c,d,e,f;this.groundSpeed=30,this.backgroundSpeed=50,this.midgroundSpeed=80,this.foregroundSpeed=100,this.speedModifier=1,this.backgroundTimer=Math.getRandomArbitrary(0,1),this.midgroundTimer=Math.getRandomArbitrary(0,1),this.foregroundTimer=Math.getRandomArbitrary(0,1),this.background=new cjs.Container,this.background.y=app.config[app.currentBook].bgY||40,this.sky=new cjs.Sprite(a),this.sky.gotoAndStop("bg_sky"),this.sky.center(),c=this.sky.getBounds(),this.sky.scaleX=app.maxWidth/c.width,this.sky.scaleY=app.maxHeight/2/c.height,this.sky.y=-(app.maxHeight/2)+c.height/2*this.sky.scaleY;var g=app.currentBook;for(app.config[g].sun&&(this.sun=new cjs.Sprite(a),this.sun.gotoAndStop("bg_sun"),this.sun.center(),c=this.sun.getBounds(),this.sun.x=app.config[g].sunPos.x,this.sun.y=app.config[g].sunPos.y),this.ground=new cjs.Sprite(a),this.ground.gotoAndStop("bg_ground"),this.ground.center(),c=this.ground.getBounds(),this.ground.scaleX=app.maxWidth/c.width,this.ground.scaleY=app.maxHeight/2/c.height,this.ground.y=app.maxHeight/2-c.height/2*this.ground.scaleY,this.ground2=new cjs.Sprite(a),this.ground2.gotoAndStop("bg_ground"),this.ground2.center(),c=this.ground2.getBounds(),this.ground2.scaleX=app.maxWidth/c.width,this.ground2.scaleY=app.maxHeight/2/c.height,this.ground2.y=app.maxHeight/2-c.height/2*this.ground2.scaleY,this.ground2.x=this.ground.x+c.width*this.ground2.scaleX,this.groundEdgeBounds=app.maxWidth-1,d=0,e=b.background.length;e>d;d++)f=new cjs.Sprite(a),f.gotoAndStop(b.background[d].id),f.name=b.background[d].id,-1!==f.name.indexOf("cloud")?f.yHeight=-200:f.yHeight=0,f.type=b.background[d].type,f.scale=b.background[d].scale,f.minY=b.background[d].minY,f.maxY=b.background[d].maxY,f.regs(.5,1),f.visible=!1,-1!==f.name.indexOf("silhouette")?this.background.addChildAt(f,0):this.background.addChild(f);for(this.midground=new cjs.Container,this.midground.y=app.config[app.currentBook].mgY||200,d=0,e=b.midground.length;e>d;d++)f=new cjs.Sprite(a),f.gotoAndStop(b.midground[d].id),f.name=b.midground[d].id,f.yHeight=0,f.type=b.midground[d].type,f.scale=b.midground[d].scale,f.minY=b.midground[d].minY,f.maxY=b.midground[d].maxY,f.regs(.5,1),f.visible=!1,this.midground.addChild(f);for(this.foreground=new cjs.Container,this.foreground.y=app.config[app.currentBook].fgY||385,d=0,e=b.foreground.length;e>d;d++)f=new cjs.Sprite(a),f.gotoAndStop(b.foreground[d].id),f.name=b.foreground[d].id,f.yHeight=0,f.type=b.foreground[d].type,f.scale=b.foreground[d].scale,f.minY=b.foreground[d].minY,f.maxY=b.foreground[d].maxY,f.regs(.5,1),f.visible=!1,this.foreground.addChild(f);this.setInitialPositions(),this.addChild(this.sky,this.ground,this.ground2,this.background,this.midground,this.foreground),this.sun&&this.addChildAt(this.sun,1)}var b=cjs.extend(a,cjs.Container);b.setInitialPositions=function(){var a=-(app.maxWidth/4),b=app.maxWidth/2,c=this.background.children.random(),d=this.midground.children.random(),e=this.foreground.children.random();if(c){c.x=Math.range(a,b);var f=Math.range(-50*c.minY,50*c.maxY);c.y=c.yHeight+f,c.scale=Math.map(f,-50*c.minY,50*c.maxY,.8,1),c.visible=!0}if(d){d.x=Math.range(a,b);var g=Math.range(-50*d.minY,50*d.maxY);d.y=d.yHeight+g,d.scale=Math.map(g,-50*d.minY,50*d.maxY,.8,1),d.visible=!0}if(e){e.x=Math.range(a,b);var h=Math.range(0,10*e.maxY);e.y=0+h,e.scale=.6,e.visible=!0}},b.setPosition=function(a){if(a.x=app.maxWidth,"foreground"===a.type){var b=Math.range(0,10*a.maxY);a.y=0+b,a.scale=1}else{var c=Math.range(-50*a.minY,50*a.maxY);a.y=a.yHeight+c,a.scale=Math.map(c,-50*a.minY,50*a.maxY,.8,1)}this.handleSpecialPieces(a)},b.handleSpecialPieces=function(a){"pigs"===app.currentBook&&-1!==a.name.indexOf("cloud")&&(a.y=-this.background.y)},b.reset=function(a){a.visible=!1},b.play=function(a){return this.setPosition(a),a.visible=!0,a},b.getRandomSprite=function(a){var b,c,d=[];for(b=0,c=a.children.length;c>b;b++)a.children[b].visible===!1&&d.push(a.children[b]);return d.length>0?this.play(d.random()):void 0},b.setModifier=function(a){var b=a||1;cjs.Tween.get(this).to({speedModifier:b},1e3,cjs.Ease.quadInOut)},b._tick=function(a){var b,c,d,e=.001*a.delta;for(this.backgroundTimer-=e*this.speedModifier,this.backgroundTimer<=0&&(this.getRandomSprite(this.background),this.backgroundTimer=Math.getRandomArbitrary(5,8)),this.midgroundTimer-=e*this.speedModifier,this.midgroundTimer<=0&&(this.getRandomSprite(this.midground),this.midgroundTimer=Math.getRandomArbitrary(5,8)),this.foregroundTimer-=e*this.speedModifier,this.foregroundTimer<=0&&(this.getRandomSprite(this.foreground),this.foregroundTimer=Math.getRandomArbitrary(5,8)),this.ground.x-=this.groundSpeed*this.speedModifier*e,this.ground2.x-=this.groundSpeed*this.speedModifier*e,this.ground.x<=-this.groundEdgeBounds&&(this.ground.x=this.groundEdgeBounds),this.ground2.x<=-this.groundEdgeBounds&&(this.ground2.x=this.groundEdgeBounds),this.ground.x<this.ground2.x?this.ground2.x=this.ground.x+this.groundEdgeBounds:this.ground2.x<this.ground.x&&(this.ground.x=this.ground2.x+this.groundEdgeBounds),b=0,c=this.background.children.length;c>b;b++)d=this.background.children[b],d.visible&&(d.x-=this.backgroundSpeed*this.speedModifier*e,d.x<-app.maxWidth&&this.reset(d));for(b=0,c=this.midground.children.length;c>b;b++)d=this.midground.children[b],d.visible&&(d.x-=this.midgroundSpeed*this.speedModifier*e,d.x<-app.maxWidth&&this.reset(d));for(b=0,c=this.foreground.children.length;c>b;b++)d=this.foreground.children[b],d.visible&&(d.x-=this.foregroundSpeed*this.speedModifier*e,d.x<-app.maxWidth&&this.reset(d));this.Container__tick(a)},cm.Entities.World=cjs.promote(a,"Container")}(),function(){function a(){this.View_constructor();var a=app.currentBook,b=cm.Assets.lib[a+"SS"],c=a+"End",d=new createjs.Bitmap(cm.Assets.lib[c]);d.center();var e=d.getBounds();d.scale=app.maxHeight/e.height,this.idlePlayBound=this.playIdleVO.bind(this),this.gameComplete=!1,this.whyatt=new cm.Assets.lib.WhyattMC.SuperWhyMC,this.whyatt.gotoAndStop("Enter"),this.whyatt.set({x:-370,y:120,framerate:24}),this.book=a,this.wordToChange=app.config[a].sentence.wordToChange,this.correctWord=app.config[a].sentence.correctWord,this.encouragements=["01","02","03"],this.listOfWords=app.config[a].words.clone(),this.listOfWords.shuffle(),this.wordSelector=new cm.Entities.WordSelector(this.listOfWords),this.wordSelector.set({x:-75,y:-75,scale:0,visible:!1}),this.storyCharacter=new cjs.Sprite(b),this.storyCharacter.gotoAndStop("characterStart"),this.storyCharacter.regs(.5,1),this.storyCharacter.set({x:app.config[a].characterLocation.x,y:app.config[a].characterLocation.y,scale:app.config[a].characterLocation.scale}),this.characterScale=this.storyCharacter.scale;var f=app.config[a].sentence.beginning;this.wordToChange=app.config[a].sentence.wordToChange;var g=app.config[a].sentence.end,h=app.config[a].sentence.correct;this.wordTray=new cm.Entities.WordTray(f,this.wordToChange,g,h),this.wordTray.regs(0,.5),this.wordTray.update(app.config[a].sentence.wordSpacing);var i=this.wordTray.getBounds().height;this.wordTray.y=app.height/2+i,this.newGameBtn=new cm.Entities.Button(cm.Assets.lib.GameSS,"play_button",!0),this.newGameBtn.center(),this.newGameBtn.set({x:app.width/2-150,y:191,scale:0,mouseEnabled:!1}),this.addChild(d,this.storyCharacter,this.whyatt,this.wordSelector,this.wordTray,this.newGameBtn)}var b=cjs.extend(a,cm.View);b.start=function(){var a=this.wordTray.show(500);this.whyatt.gotoAndPlay("Enter"),a.call(function(){app.voPlayer.play(["end/sw_read",this.book+"/sw_"+this.book+"_sentence","end/sw_changestory","end/sw_change_word"],this.animateWord.bind(this))},null,this)},b.adjustText=function(){this.wordTray.update(app.config[app.currentBook].sentence.wordSpacing)},b.setActive=function(a){this.wordSelector.setActive(a,this.checkWordSelected.bind(this)),this.newGameBtn.setActive(a),a&&this.newGameBtn.on("click",this.handleNewGameBtn,this)},b.animateWord=function(){this.wordTray.animateText(),app.voPlayer.play(["words/sw_"+this.wordToChange.toLowerCase(),"end/sw_ready_set"],this.zapWord.bind(this))},b.zapWord=function(){app.voPlayer.play("end/sw_zap",this.callWhyWriter.bind(this)),this.wordTray.zapWord(),this.whyatt.gotoAndPlay("Action")},b.callWhyWriter=function(){cjs.Tween.get(this).wait(1e3).call(function(){this.whyatt.gotoAndPlay("Action"),app.voPlayer.play("end/sw_write",this.showWhyWriter.bind(this))},null,this)},b.showWhyWriter=function(){this.wordSelector.show(null,1200,cjs.Ease.backOut),app.voPlayer.play(this.book+"/sw_objective_"+this.book,this.playWords.bind(this))},b.playWords=function(){if("easy"===app.mode){for(var a=[],b=[],c=0,d=this.wordSelector.textChoices.length;d>c;c++){var e=this.wordSelector.textChoices[c];if(e.visible&&e.mouseEnabled){a.push(e);var f="words/sw_"+e.word.text;f=f.toLowerCase(),b.push(f),b.push(500)}}for(c=0,d=a.length;d>c;c++)a[c].animate(2e3*c,500);app.voPlayer.play(b)}this.idleTimer=20},b.checkWordSelected=function(a){var b=a.currentTarget;b.word.text===this.correctWord?this.playCorrectWord(b):this.playIncorrectWord(b)},b.playCorrectWord=function(a){this.gameComplete=!0,this.wordSelector.setActive(!1),app.voPlayer.play(["words/sw_"+this.correctWord.toLowerCase(),"end/sw_ready_set"],this.changeSentence.bind(this))},b.changeSentence=function(){this.wordSelector.hide(null,1200,cjs.Ease.backIn),this.wordTray.showCorrectText(),this.wordTray.unZapWord(),this.whyatt.gotoAndPlay("Jump"),app.voPlayer.play(["end/sw_zap","end/sw_read",this.book+"/sw_"+this.book+"_sentence_new"],this.changeStory.bind(this))},b.changeStory=function(){cjs.Tween.get(this.storyCharacter).to({scale:.5},500,cjs.Ease.cubicInOut).call(cm.ViewControl.transitionShape.flash,null,cm.ViewControl.transitionShape).call(this.storyCharacter.gotoAndStop,["characterEnd"],this.storyCharacter).call(app.sound.play,["sfx_scale_up"],app.sound).to({scale:this.characterScale},500,cjs.Ease.cubicInOut).call(this.playSuperJob,null,this)},b.playSuperJob=function(){app.voPlayer.play(["end/sw_payoff_01","end/sw_payoff_02"],function(){var a=this.newGameBtn.show();a.set({mouseEnabled:!0},this.newGameBtn)}.bind(this))},b.playIdleVO=function(){app.voPlayer.play([this.book+"/sw_"+this.book+"_sentence","end/sw_change_word","words/sw_"+this.wordToChange.toLowerCase(),this.book+"/sw_objective_"+this.book],this.playWords.bind(this)),this.idlePlayBound=this.playNeedHelp.bind(this)},b.playNeedHelp=function(){app.voPlayer.play("end/sw_idle"),this.idlePlayBound=this.playIdleVO.bind(this)},b.playIncorrectWord=function(a){this.idleTimer=20;var b=this.encouragements.random(),c=this.encouragements.indexOf(b);this.encouragements.splice(c,1),app.voPlayer.play(["words/sw_"+a.word.text.toLowerCase(),this.book+"/sw_incorrect_"+this.book,"end/sw_encouragement_"+b,this.book+"/sw_objective_"+this.book],this.playWords.bind(this)),a.hide()},b._tick=function(a){if(!app.isPaused){var b=.001*a.delta;app.voPlayer.playing&&0===cm.whyMouth.currentFrame?cm.whyMouth.gotoAndPlay(1):app.voPlayer.playing||0===cm.whyMouth.currentFrame||cm.whyMouth.gotoAndPlay(0),this.idleTimer&&!this.gameComplete&&(this.idleTimer-=b,this.idleTimer<=0&&(this.idleTimer=20,this.idlePlayBound())),this.View__tick(a)}},b.resize=function(a,b){if(this.newGameBtn.x=app.width/2-150,this.wordTray.isOnScreen)this.wordTray.y=b/2;else{var c=this.wordTray.getBounds().height;this.wordTray.y=b/2+c}},b.handleNewGameBtn=function(){app.isPaused||(app.sound.play("sfx-click"),this.newGameBtn.mouseEnabled=!1,app.newGame("ModeSelect"))},cm.View.End=cjs.promote(a,"View")}(),function(){function a(){this.View_constructor();var a=app.currentBook,b=cm.Assets.lib[a+"SS"];this.listOfWords=app.config[a].words.clone(),this.listOfWords.shuffle();var c=this.listOfWords[0];this.bookData=app.config[a],this.lettersNeeded=c.length,this.totalLetters=0,this.wordsFinished=0,this.wordsNeeded=this.bookData.words.length,this.playerMoving=!1,this.gameComplete=!1,this.topLane=-210,this.middleLane=-40,this.bottomLane=100,this.currentLane="middle";var d=app.maxHeight/3;this.topLaneSpacing={min:-app.maxHeight/2,max:-app.maxHeight/2+d},this.middleLaneSpacing={min:-app.maxHeight/2+d-1,max:-app.maxHeight/2+2*d-50},this.bottomLaneSpacing={min:-app.maxHeight/2+2*d-49,max:app.maxHeight/2},this.world=new cm.Entities.World(b,this.bookData),this.player=new cm.Entities.Whyatt,this.player.x=-app.maxWidth,this.player.y=this.middleLane,this.playerShadow=new cjs.Sprite(cm.Assets.lib.GameSS),this.playerShadow.gotoAndStop("why_flyshadow"),this.playerShadow.center(),this.playerShadow.x=this.player.x-50,this.playerShadow.y=300,this.letterTray=new cm.Entities.LetterTray,this.letterTray.regs(0,.5);var e=this.letterTray.getBounds().height;this.letterTray.y=app.height/2+e;
var f=this.letterTray.adjustTray(c).createLetters(c);this.itemContainer=new cm.Entities.ItemContainer(this.topLane,this.middleLane,this.bottomLane),this.itemContainer.createDistractors(),this.itemContainer.addLetters(f),this.addChild(this.world,this.playerShadow,this.player,this.letterTray,this.itemContainer),this.hand=new cjs.Sprite(cm.Assets.lib.GameSS),this.hand.gotoAndStop("hand"),this.hand.visible=!1,this.hand.rotation=90,this.hand.scale=.25,this.hand.x=app.maxWidth,this.hand.center(),this.handTween=cjs.Tween.get(this.hand,{loop:-1}).to({scale:.35},500).to({scale:.25},500),this.addChild(this.hand),this.itemContainer.dispatcher.on("FirstSpawn",function(a){this.firstLetter=a.firstLetter,this.hand.visible=!0}.bind(this))}var b=cjs.extend(a,cm.View);b.start=function(){var a=cm.Device.mobile?"sw_tutorial_mobile":"sw_tutorial_desktop";this.player.x=-app.maxWidth;var b=this.player.flyOnScreen(-300);cjs.Tween.get(this.playerShadow).to({x:-250},2e3,cjs.Ease.quadOut),b.call(function(){this.player.whyatt.gotoAndPlay("Talk"),app.voPlayer.play(["game/sw_flying_objective","game/"+a],this.startGame.bind(this))},null,this)},b.startGame=function(){var a=this.letterTray.show();a.call(this.itemContainer.play,null,this.itemContainer)},b.setActive=function(a){a?(app.stage.on("stagemousedown",this.handleMouseDown.bind(this)),app.stage.on("stagemousemove",this.handleMouseMove.bind(this)),app.stage.on("stagemouseup",this.handleMouseUp.bind(this))):app.stage.removeAllEventListeners()},b.handleMouseDown=function(a){if(!app.isPaused&&cm.Device.mobile){var b=this.globalToLocal(a.stageX,a.stageY),c=app.exitPanel.getObjectUnderPoint(b.x,b.y,1);if(!c){this.clicked=!0;var d=this.checkLane(a);this.moveWhyatt(d)}}},b.handleMouseMove=function(a){if(!app.isPaused){var b;cm.Device.mobile?this.clicked&&(b=this.checkLane(a),this.moveWhyatt(b)):(b=this.checkLane(a),this.moveWhyatt(b))}},b.handleMouseUp=function(a){app.isPaused||cm.Device.mobile&&(this.clicked=!1)},b.checkLane=function(a){var b=this.globalToLocal(a.stageX,a.stageY),c="";return b.y>=this.topLaneSpacing.min&&b.y<=this.topLaneSpacing.max&&(c="top"),b.y>=this.middleLaneSpacing.min&&b.y<=this.middleLaneSpacing.max&&(c="middle"),b.y>=this.bottomLaneSpacing.min&&b.y<=this.bottomLaneSpacing.max&&(c="bottom"),c},b.moveWhyattKeyboard=function(a){"UP"===a&&("bottom"===this.currentLane?this.moveWhyatt("middle"):"middle"===this.currentLane&&this.moveWhyatt("top")),"DOWN"===a&&("top"===this.currentLane?this.moveWhyatt("middle"):"middle"===this.currentLane&&this.moveWhyatt("bottom"))},b.moveWhyatt=function(a){if(this.currentLane!==a){var b,c;switch(a){case"top":b=this.topLane,c=this.player.x-100;break;case"middle":b=this.middleLane,c=this.player.x-50;break;case"bottom":b=this.bottomLane,c=this.player.x;break;default:b=this.middleLane,c=this.player.x-50}return this.currentLane=a,cjs.Tween.get(this.playerShadow).to({x:c},1e3,cjs.Ease.quadInOut),cjs.Tween.get(this.player).set({playerMoving:!0},this).to({y:b},1e3,cjs.Ease.quadInOut).set({playerMoving:!1},this)}},b.checkObjectPosition=function(a){return a.x>this.collisionMin&&a.x<this.collisionMax&&a.lane===this.currentLane?!0:!1},b.checkDistance=function(a){return Math.distance(a,this.player)<120?!0:!1},b.collectIntoTray=function(a){var b=a.collect();b.call(function(){this.player.whyatt.gotoAndPlay("Talk"),app.voPlayer.play("letters/sw_"+a.name.toLowerCase(),app.encouragementPlayer.play.bind(app.encouragementPlayer))},null,this);var c=this.itemContainer.localToLocal(a.x,a.y,this.letterTray.trayCenterContainer);this.letterTray.trayCenterContainer.addChild(a),a.x=c.x,a.y=c.y;var d=a.startX,e=a.startY;cjs.Tween.get(a).wait(b.duration).to({x:d,y:e,scale:.7},1200,cjs.Ease.backIn).call(this.checkNumLettersCollected,null,this)},b.checkNumLettersCollected=function(){this.totalLetters++,this.totalLetters>=this.lettersNeeded&&(this.totalLetters=0,this.checkNextWord())},b.collectedDistractor=function(a){switch(a.collect(),app.voPlayer.play("game/sw_"+a.type),a.type){case"bubble":this.player.playBubble();break;case"cloud":this.player.playCloud()}"boost"===a.type?(this.player.whyatt.gotoAndPlay("Boost"),this.applySpeedBoost()):this.boosting||this.player.whyatt.gotoAndPlay("Talk")},b.applySpeedBoost=function(){this.boosting=!0,cjs.Tween.get(this).call(function(){this.world.setModifier(5),this.itemContainer.setModifier(5)},null,this).wait(5e3).call(function(){this.world.setModifier(),this.itemContainer.setModifier()},null,this).set({boosting:!1},this)},b.checkNextWord=function(){if(this.wordsFinished++,this.wordsFinished>=this.wordsNeeded)this.endGame();else{var a=this.listOfWords[this.wordsFinished],b=this.letterTray.hide(500,1e3);b.call(this.populateNewLetters,[a],this),b.call(this.letterTray.show,[250,1e3],this.letterTray)}},b.populateNewLetters=function(a){var b=this.letterTray.adjustTray(a).createLetters(a);this.itemContainer.addLetters(b),this.lettersNeeded=a.length},b.endGame=function(){this.gameComplete=!0,app.voPlayer.play("game/sw_flying_complete",this.gotoNext.bind(this)),this.player.flyOffScreen();var a=this.player.x+app.maxWidth;cjs.Tween.get(this.playerShadow).to({x:a},2e3,cjs.Ease.backIn),this.letterTray.hide()},b.gotoNext=function(){cm.ViewControl.gotoView("End")},b.stopHand=function(){this.hand.visible=!1,this.hand=null,this.handTween.paused=!0,this.handTween=null},b._tick=function(a){if(app.isPaused)return void(this.clicked=!1);app.voPlayer.playing&&0===cm.whyMouth.currentFrame?cm.whyMouth.gotoAndPlay(1):app.voPlayer.playing||0===cm.whyMouth.currentFrame||cm.whyMouth.gotoAndPlay(0),this.playerMoving||(cm.Keyboard.state("UP")&&this.moveWhyattKeyboard("UP"),cm.Keyboard.state("DOWN")&&this.moveWhyattKeyboard("DOWN"));for(var b=this.itemContainer.children.length-1;b>=0;b--){var c=this.itemContainer.children[b];if(!c.collected){var d=this.checkDistance(c);d&&!this.gameComplete&&("Letter"===c.type?this.collectIntoTray(c):this.collectedDistractor(c))}}this.hand&&this.hand.visible&&(this.hand.x<=-app.maxWidth+200?this.stopHand():this.firstLetter&&!this.firstLetter.collected?(this.hand.x=this.firstLetter.x-100,this.hand.y=this.firstLetter.y+25):this.stopHand()),this.View__tick(a)},b.resize=function(a,b){if(this.letterTray.isOnScreen)this.letterTray.y=b/2;else{var c=this.letterTray.getBounds().height;this.letterTray.y=b/2+c}},cm.View.Game=cjs.promote(a,"View")}(),function(){function a(){this.View_constructor();var a=cm.Assets.lib.LoaderSS;this.background=new cjs.Shape,this.background.graphics.beginFill("#4b81c2").drawRect(-app.maxWidth/2,-app.maxHeight/2,app.maxWidth,app.maxHeight),this.loaderContainer=new cjs.Container,this.loaderContainer.y=100,this.frame=new cjs.Sprite(a),this.frame.gotoAndStop("loading_frame"),this.frame.center(),this.leftCap=new cjs.Sprite(a),this.leftCap.gotoAndStop("loading_bar_end"),this.leftCap.regs(0,.5),this.leftCap.set({x:-83}),this.rightCap=new cjs.Sprite(a),this.rightCap.gotoAndStop("loading_bar_end"),this.rightCap.scaleX=-1,this.rightCap.regs(0,.5),this.rightCap.set({x:84}),this.rightCap.visible=!1,this.loaderBar=new cjs.Sprite(a),this.loaderBar.gotoAndStop("loading_bar_image"),this.loaderBar.regs(0,.5),this.loaderBar.set({x:-74,scaleY:.1,scaleX:0}),this.loadingText=new cjs.Sprite(a),this.loadingText.gotoAndStop("txt_loading"),this.loadingText.center(),this.loadingText.x=5,this.loadingBook=new cm.Assets.lib.LoadingBook.loading_book,this.loadingBook.y-=100,this.loadingBook.center(),this.loadingBook.framerate=24,this.loaderContainer.addChild(this.frame,this.leftCap,this.loaderBar,this.rightCap,this.loadingText),this.addChild(this.background,this.loadingBook,this.loaderContainer)}var b=createjs.extend(a,cm.View);b.onProgress=function(a){this.loaderBar.scaleX=a.progress,a.progress>=1&&(this.rightCap.visible=!0)},cm.View.Loader=cjs.promote(a,"View")}(),function(){function a(){this.View_constructor();var a=new cjs.Bitmap(cm.Assets.lib.BookshelfBG);a.center();var b=a.getBounds();a.scale=app.maxHeight/b.height,this.modeContainer=new cm.Entities.ModeContainer,this.whyatt=new cm.Assets.lib.WhyattMC.SuperWhyMC,this.whyatt.gotoAndPlay("FlyIdle"),this.whyatt.set({x:-200,y:140,framerate:24}),this.whyatt.on("click",function(){app.isPaused?app.resumeGame():app.pauseGame()}),this.book=new cm.Assets.lib.books[app.currentBook+"_animation"],this.book.gotoAndStop(0),this.book.framerate=24,this.book.set({x:30,y:-app.maxHeight,scale:.8}),this.addChild(a,this.whyatt,this.book,this.modeContainer)}var b=cjs.extend(a,cm.View);b.start=function(){app.exitPanel.showRestartButton();var a=this.modeContainer.show();a.call(this.playIntro,null,this)},b.playIntro=function(){app.voPlayer.play(["mode/sw_mode_intro"],this.clickEasy.bind(this))},b.clickEasy=function(){var a=cm.Device.mobile?"mode/sw_mode_easy_tap":"mode/sw_mode_easy_click";this.modeContainer.easyBtn.animate(),app.voPlayer.play(a,this.clickHard.bind(this))},b.clickHard=function(){var a=cm.Device.mobile?"mode/sw_mode_hard_tap":"mode/sw_mode_hard_click";this.modeContainer.hardBtn.animate(),app.voPlayer.play(a,function(){this.introDone=!0}.bind(this))},b.setActive=function(a){this.modeContainer.setActive(a),a&&(this.modeContainer.easyBtn.on("click",this.handleClick.bind(this)),cm.Device.mobile||this.modeContainer.easyBtn.on("rollover",this.handleMouseOver.bind(this)),this.modeContainer.hardBtn.on("click",this.handleClick.bind(this)),cm.Device.mobile||this.modeContainer.hardBtn.on("rollover",this.handleMouseOver.bind(this)))},b.handleClick=function(a){if(!app.isPaused){app.sound.play("sfx-click"),app.mode=a.currentTarget.type,app.voPlayer.play("mode/sw_"+a.currentTarget.type),this.modeContainer.setActive(!1);var b=this.modeContainer.hide();b.wait(1e3),b.call(this.showBook,null,this)}},b.handleMouseOver=function(a){app.isPaused||this.introDone&&app.voPlayer.play("mode/sw_"+a.currentTarget.type)},b.showBook=function(){cjs.Tween.get(this.book).to({y:30},2e3,cjs.Ease.backOut).call(this.storyIntroductions,null,this)},b.storyIntroductions=function(){var a=app.currentBook,b=a+"/sw_"+a+"_setup",c=Math.random()<.5?"mode/sw_letsfly":"mode/sw_letsfly_alt";app.voPlayer.play([b,c,"mode/sw_rescue"],this.animateOffscreen.bind(this))},b.animateOffscreen=function(){this.whyatt.callback=this.slideWhyattOffScreen.bind(this),this.whyatt.gotoAndPlay("FlyOut")},b.slideWhyattOffScreen=function(){cjs.Tween.get(this.whyatt).to({y:-app.maxHeight},250).call(this.openBook,null,this)},b.openBook=function(){this.book.gotoAndPlay(0),this.book.callback=this.animateBookScale.bind(this)},b.animateBookScale=function(){cjs.Tween.get(this.book).to({scale:3},1e3,cjs.Ease.sineInOut).call(this.gotoNext,null,this)},b.gotoNext=function(){cm.ViewControl.gotoView("Game")},b._tick=function(a){if(!app.isPaused){.001*a.delta;app.voPlayer.playing&&0===cm.whyMouth.currentFrame?cm.whyMouth.gotoAndPlay(1):app.voPlayer.playing||0===cm.whyMouth.currentFrame||cm.whyMouth.gotoAndPlay(0),this.View__tick(a)}},cm.View.ModeSelect=cjs.promote(a,"View")}(),function(){function a(){this.View_constructor();var a=new createjs.Bitmap(cm.Assets.lib.TitleBG);a.center();var b=a.getBounds();a.scale=app.maxHeight/b.height,this.burst=new cjs.Sprite(cm.Assets.lib.TitleSS,"home_burst"),this.burst.center(),this.burst.set({x:90,y:-200}),this.title=new cjs.Sprite(cm.Assets.lib.TitleSS),this.title.gotoAndStop("txt_superwhys"),this.title.center(),this.title.set({x:-app.maxWidth,y:-229}),this.subtitle=new cm.Assets.lib.SubTitleAnim.gametitle_superwhy,this.subtitle.gotoAndStop(0),this.subtitle.center(),this.subtitle.callback=this.showPlayBtn.bind(this),this.subtitle.set({x:-255,y:-50,framerate:24,scale:.8}),this.playBtn=new cm.Entities.Button(cm.Assets.lib.TitleSS,"play_button",!0),this.playBtn.center(),this.playBtn.set({x:-250,y:275,scale:0}),this.superWhy=new cm.Assets.lib.TitleSuperWhy.intro_superwhy,this.superWhy.gotoAndStop(0),this.superWhy.set({x:210,y:120,scale:.6,framerate:24}),this.mouth=this.superWhy.instance_5.instance_1.instance,this.addChild(a,this.burst,this.title,this.subtitle,this.playBtn,this.superWhy)}var b=cjs.extend(a,cm.View);b.start=function(){app.exitPanel.visible=!0,app.exitPanel.showButtons(),app.exitPanel.setActive(!0),app.resumeGame(),/packageName=org\.pbskids\.gamesapp/.test(window.location.search)?(app.music="music_loop_superwhy_game",app.voPlayer.play("sw_title"),this.mouth.gotoAndPlay(1)):cm.Device.OS.iOS||(app.music="music_loop_superwhy_game",app.voPlayer.play("sw_title"),this.mouth.gotoAndPlay(1));cjs.Tween.get(this.title).to({x:-289},750,cjs.Ease.quadInOut).call(this.animateSubTitle,null,this);this.superWhy.gotoAndPlay(0)},b.setActive=function(a){this.playBtn.setActive(a),a&&this.playBtn.on("click",this.handleClick.bind(this))},b.animateSubTitle=function(){this.subtitle.gotoAndPlay(0)},b.showPlayBtn=function(){var a=this.playBtn.show();a.call(function(){this.superWhy.gotoAndStop(56),this.subtitle.gotoAndStop(44),this.playBtn.scale=1,this.playBtn.visible=!0}.bind(this))},b.handleClick=function(){if(!app.isPaused){this.playBtn.setActive(!1),this.playBtn.mouseEnabled=!1;var a=this.playBtn.hide();app.sound.play("sfx-click"),/packageName=org\.pbskids\.gamesapp/.test(window.location.search)?a.call(this.gotoNext,null,this):cm.Device.OS.iOS?(app.music="music_loop_superwhy_game",app.voPlayer.play("sw_title",function(){this.mouth.gotoAndPlay(0),cjs.Tween.get(this).wait(100).call(this.gotoNext,null,this)}.bind(this)),this.mouth.gotoAndPlay(1)):a.call(this.gotoNext,null,this)}},b.gotoNext=function(){cm.ViewControl.gotoView("ModeSelect")},b._tick=function(a){if(!app.isPaused){.001*a.delta;app.voPlayer.playing&&0===this.mouth.currentFrame?this.mouth.gotoAndPlay(1):app.voPlayer.playing||0===this.mouth.currentFrame||this.mouth.gotoAndPlay(0),this.View__tick(a)}},cm.View.Title=cjs.promote(a,"View")}(),function(){var a=include("springroll.Application"),b=include("springroll.easeljs.EaselJSDisplay"),c=new a({name:"Super Why Saves The Day",canvasId:"stage",configPath:"assets/config/config.json",captionsPath:"assets/config/captions.json",captions:"captions",display:b,displayOptions:{clearView:!0},maxWidth:1664,maxHeight:768});c.width=1664,c.height=768,c.maxWidth=1664,c.maxHeight=768,c.debug=!1,c.currentBook=null,c.bookList=[],c.mode="easy",c.on("init",function(){this.initialSetup(),this.phoneCallFix(),this.createLayers(),this.registerViews(),this.triggerResize(),cm.Assets.load([this.config.assets.preload],this.preloadComplete.bind(this),this.onError.bind(this))}),c.initialSetup=function(){this.stage=this.display.stage,this.stage.snapToPixelEnabled=!0,cm.Device.mobile&&cjs.Touch.isSupported()?(cjs.Touch.enable(this.stage),this.stage.enableDOMEvents(!1)):this.stage.enableMouseOver(20),cjs.Ticker.timingMode="raf",cjs.LoadItem.LOAD_TIMEOUT_DEFAULT=6e4,cm.Keyboard.bind(cm.Keyboard.KEYS.UP_ARROW,"UP"),cm.Keyboard.bind(cm.Keyboard.KEYS.DOWN_ARROW,"DOWN")},c.phoneCallFix=function(){cm.Device.OS.iOS&&this.stage.on("stagemouseup",function(a){var b=cjs.Sound.activePlugin.context;if(b){if("running"===b.state)return;"interrupted"===b.state&&(b.resume(),cjs.Sound.activePlugin.playEmptySound(),"running"===b.state&&a.remove())}})},c.createLayers=function(){this.stage.addChild(new cm.Layer("Game",.5,.5),new cm.Layer("Storybook",.5,.5),new cm.Layer("Exit",.5,.5),new cm.Layer("Transition",.5,.5)),this.debug&&this.stage.addChild(new cm.Layer("Debug",.5,.5)),cm.Layer.alignLayers(this.stage.width,this.stage.height),cm.ViewControl.setViewLayer(cm.Layer.s.Game),cm.ViewControl.setTransitionLayer(cm.Layer.s.Transition),cm.ViewControl.addTransitionShape(new cm.ViewTransition)},c.registerViews=function(){cm.ViewControl.registerView("Loader",cm.View.Loader,!1),cm.ViewControl.registerView("Title",cm.View.Title,!1),cm.ViewControl.registerView("ModeSelect",cm.View.ModeSelect,!1),cm.ViewControl.registerView("Game",cm.View.Game,!1),cm.ViewControl.registerView("End",cm.View.End,!1)},c.onError=function(a){},c.preloadComplete=function(){cm.ViewControl.gotoView("Loader");var a=cm.ViewControl.current;cm.Assets.load([this.config.assets.load],this.loadComplete.bind(this),this.onError.bind(this),a.onProgress.bind(a))},c.loadComplete=function(){this.debug&&(this.positionTool=new cm.Tools.PositionTool,cm.Layer.s.Debug.addChild(this.positionTool)),this.encouragementPlayer=new cm.Tools.EncouragementPlayer(this.voPlayer),this.encouragementPlayer.add("game/sw_kudos_01","game/sw_kudos_02","game/sw_kudos_03","game/sw_kudos_04","game/sw_kudos_05","game/sw_kudos_06","game/sw_kudos_07","game/sw_kudos_08","game/sw_kudos_09"),this.exitPanel=new cm.Entities.ExitPanel,this.exitPanel.visible=!1,cm.Layer.s.Exit.addChild(this.exitPanel),cm.whyMouth=new cm.Assets.lib.WhyattMC._Why_mouthMC,cm.whyMouth.framerate=18,c.resumeGame(),this.newGame("Title")},c.restartGame=function(a){cm.ViewControl.gotoView(a)},c.newGame=function(a){this.currentBook=this.getRandomBook(),cm.ViewControl.gotoView(a)},c.getRandomBook=function(){0===this.bookList.length&&(this.bookList=this.config.config.books.clone());var a=this.bookList.random(),b=this.bookList.indexOf(a);return this.bookList.splice(b,1),a},c.pauseGame=function(){c.sound.pauseAll(),this.voPlayer.pause(),cjs.Ticker.paused=!0,this.isPaused=!0},c.resumeGame=function(){c.sound.unpauseAll(),this.voPlayer.resume(),cjs.Ticker.paused=!1,this.isPaused=!1},c.on("resize",function(a,b){this.width=a,this.height=b,cm.Layer.alignLayers(a,b),cm.ViewControl.resize(a,b),this.exitPanel&&this.exitPanel.resize(a,b)}),c.on("update",function(a){cm.Keyboard.clearPressed()}),window.app=c}();