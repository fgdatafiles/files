function getQueryString(a,b){null==b&&(b=""),a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),d=c.exec(window.location.href);return null==d?b:d[1]}var NeoGame=NeoGame||{};if(NeoGame.DomUtils={hasClass:function(a,b){return a.classList?a.classList.contains(b):!!a.className.match(new RegExp("(\\s|^)"+b+"(\\s|$)"))},addClass:function(a,b){a.classList?a.classList.add(b):NeoGame.DomUtils.hasClass(a,b)||(a.className+=" "+b)},removeClass:function(a,b){if(a.classList)a.classList.remove(b);else if(NeoGame.DomUtils.hasClass(a,b)){var c=new RegExp("(\\s|^)"+b+"(\\s|$)");a.className=a.className.replace(c," ")}},getQueryString:function(a,b){null==b&&(b=""),a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var c=new RegExp("[\\?&]"+a+"=([^&#]*)"),d=c.exec(window.location.href);return null==d?b:d[1]},setDebug:function(a){if(a)window.debug={log:window.console.log.bind(window.console),error:window.console.error.bind(window.console,"[ERROR]: %s"),info:window.console.info.bind(window.console,"[INFO]: %s"),warn:window.console.warn.bind(window.console,"[WARN]: %s"),debug:window.console.debug.bind(window.console)};else{var b=function(){};window.debug={log:b,error:b,warn:b,info:b,debug:b,clear:b}}}},null===NP||"object"!=typeof NP)var NP={};var ua=navigator.userAgent,isiPad=null!=ua.match(/iPad/i),iPadVersion=null,isiPhone=null!=ua.match(/iPhone/i)||"true"==getQueryString("isiPhone"),isiPhoneX=isiPhone&&window.innerHeight>=635,isiPod=null!=ua.match(/iPod/i),isAndroid=null!=ua.match(/Android/i),isMobileWebkit=/WebKit/.test(ua)&&/Mobile/.test(ua),isAndroidTablet=isAndroid&&null==ua.match(/Mobile/i),isMobile=isiPad||isiPhone||isiPod||isAndroid||isMobileWebkit,isAndroidPhone=!(!isAndroid||isAndroidTablet),isTablet=isiPad||isAndroidTablet,isIE11=Object.hasOwnProperty.call(window,"ActiveXObject")&&!window.ActiveXObject,isIE=null!=ua.match(/MSIE/i)||null!=ua.match(/Trident/i)||isIE11,isChrome=null!=ua.match(/Chrome/i),isIosChrome=null!=ua.match("CriOS"),isSafari=-1!=ua.indexOf("Safari")&&!isChrome,iOS=parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(ua)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||!1,isFireFox=navigator.userAgent.toLowerCase().indexOf("firefox")>-1;clickEvent=isiPad||isiPhone||isAndroid||isMobileWebkit?"touchend":"click",isiPad&&(iPadVersion=3,window.ondevicemotion=function(a){if(-1!=navigator.platform.indexOf("iPad")){var b=1;a.acceleration&&(b+=window.devicePixelRatio),iPadVersion=b}window.ondevicemotion=null}),NP.Crossbrowser={debug:!1,debugMobile:!1,ua:ua,isiPad:isiPad,iPadVersion:0,isiPhone:isiPhone,isiPhoneX:isiPhoneX,isiPod:isiPod,isAndroid:isAndroid,isMobileWebkit:isMobileWebkit,isAndroidTablet:isAndroidTablet,isMobile:isMobile,isAndroidPhone:isAndroidPhone,isTablet:isTablet,isIE11:isIE11,isIE:isIE,isChrome:isChrome,isIosChrome:isIosChrome,isFireFox:isFireFox,isSafari:isSafari,clickEvent:clickEvent,iOS:iOS};var NeoGame=NeoGame||{};NeoGame.Utils={addRectangle:function(a,b,c){var b=b>0?b:NeoGame.game.width,c=c>0?c:NeoGame.game.height,a=a>=0?a:16777215,d=NeoGame.game.make.graphics(0,0);return d.beginFill(a,1),d.drawRect(0,0,b,c),d.endFill(),d},mobilecheck:function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a},getString:function(a,b){var c="";return NeoGame.copy[a]&&NeoGame.copy[a]?c=NeoGame.copy[a]:debug.warn("Did't find string of: "+a),b?c.capitalize():c},commaFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},stretchyScale:function(a,b){var c=b||0;NeoGame.game.add.tween(a).from({alpha:0},200,Phaser.Easing.Linear.None,!0,c),NeoGame.game.add.tween(a.scale).from({x:.5},1e3,Phaser.Easing.Elastic.Out,!0,c),NeoGame.game.add.tween(a.scale).from({y:.5},1e3,Phaser.Easing.Elastic.Out,!0,c+75)},clamp:function(a,b,c){if(b>c){var d=c;c=b,b=d}return a<b?b:a>c?c:a},translateRange:function(a,b,c,d,e){return(e-a)*(d-c)/(b-a)+c},rnd:function(a,b){return Math.round(a*Math.pow(10,b))/Math.pow(10,b)},getRandomFloat:function(a,b){return Math.random()*(b-a)+a},smoothEase:function(a,b,c){var d=c||.1,e=b.x-a.x,f=b.y-a.y;Math.sqrt(e*e+f*f)>1&&(a.x+=e*d,a.y+=f*d)},playSound:function(a,b,c){return NeoGame.game.sound.play(a,b,c)},playMainButtonSound:function(){return NeoGame.Utils.playSound("ui-click",.5)},getRotationAngle:function(a,b){return Phaser.Math.radToDeg(a.input.activePointer.position.angle(b))},snapAngle:function(a,b){return Math.floor((a%360+b/2)/b)*b},bezierPoint:function(a,b,c,d,e){v;var f=3*(b.x-a.x),g=3*(c.x-b.x)-f,h=d.x-a.x-f-g,i=3*(b.y-a.y),j=3*(c.y-b.y)-i,k=d.y-a.y-i-j;return{x:h*Math.pow(e,3)+g*Math.pow(e,2)+f*e+a.x,y:k*Math.pow(e,3)+j*Math.pow(e,2)+i*e+a.y}},drawBezierPoints:function(a,b){var c;c=a.add.graphics(0,0),c.clear(),c.lineStyle(2,34816,1),c.moveTo(b[1].x,b[1].y),c.lineTo(b[0].x,b[0].y),c.lineStyle(2,8912896,1),c.moveTo(b[3].x,b[3].y),c.lineTo(b[2].x,b[2].y),c.lineStyle(4,16776960,1),c.moveTo(b[0].x,b[0].y);for(var d=0;d<1;d+=.01){var e=NeoGame.Utils.bezierPoint(b[0],b[1],b[2],b[3],d);c.lineTo(e.x,e.y)}return c},duplicateArray:function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c].slice();return b},replaceTokenInString:function(a,b,c){return c.replace(new RegExp(a,"g"),b)}},Array.prototype.random=function(){return this[Math.floor(Math.random()*this.length)]},Array.prototype.shuffle=function(){for(var a,b,c=this.length;0!==c;)b=Math.floor(Math.random()*c),c-=1,a=this[c],this[c]=this[b],this[b]=a;return this},String.prototype.capitalize=function(){return this.charAt(0).toUpperCase()+this.slice(1)};var NeoGame=NeoGame||{};NeoGame.ScreenUtils={ScreenMetrics:function(){return function(){}}(),Orientation:{PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},calculateScreenMetrics:function(a,b,c,d,e){void 0===c&&(c=1);var f=window.innerWidth,g=window.innerHeight;if(f<g&&1===c||g<f&&0===c){var h=f;f=g,g=h}var i=8,j=5;void 0!==d&&void 0!==e||(c===NeoGame.ScreenUtils.Orientation.LANDSCAPE?(d=Math.round(1420*a/i),e=Math.round(960*b/j)):(d=Math.round(960*a/j),e=Math.round(1420*b/i)));var k=c===NeoGame.ScreenUtils.Orientation.LANDSCAPE?i/j:j/i,l=f/g,m=0,n=0,o=0,p=0;l>k?(p=b,o=2*Math.ceil(p*l/2),o=Math.min(o,d),m=(o-a)/2,n=0):(o=a,p=2*Math.ceil(o/l/2),p=Math.min(p,e),m=0,n=(p-b)/2);var q=f/o,r=g/p;return this.screenMetrics=new NeoGame.ScreenUtils.ScreenMetrics,this.screenMetrics.windowWidth=f,this.screenMetrics.windowHeight=g,this.screenMetrics.defaultGameWidth=a,this.screenMetrics.defaultGameHeight=b,this.screenMetrics.maxGameWidth=d,this.screenMetrics.maxGameHeight=e,this.screenMetrics.gameWidth=o,this.screenMetrics.gameHeight=p,this.screenMetrics.scaleX=q,this.screenMetrics.scaleY=r,this.screenMetrics.offsetX=m,this.screenMetrics.offsetY=n,this.screenMetrics.skinny=this.screenMetrics.gameWidth<=this.screenMetrics.defaultGameWidth,this.screenMetrics.widthScale=this.screenMetrics.skinny?640/722:1,this.screenMetrics.heightScale=this.screenMetrics.skinny?960/1140:1,this.screenMetrics}};var NeoGame=NeoGame||{};NeoGame.PlatformGenerator={lastHeight:0,platformAmount:0,parentGroup:null,lastPlatformType:null,platformCodes:["1---","2---","3---","4---","4004","2032","2032b","0220","2013","3004","0004","0040","3000","0330","0403","4334","0003","stepsRight","stepsLeft"],init:function(a,b,c){debug.debug("!!!!!!! NeoGame.PlatformGenerator init"),NeoGame.PlatformGenerator.parentGroup&&NeoGame.PlatformGenerator.parentGroup.destroy(),NeoGame.PlatformGenerator.obstacleGroup&&NeoGame.PlatformGenerator.obstacleGroup.destroy(),NeoGame.PlatformGenerator.questionGroup&&NeoGame.PlatformGenerator.questionGroup.destroy(),NeoGame.PlatformGenerator.parentGroup=a,NeoGame.PlatformGenerator.obstacleGroup=b,NeoGame.PlatformGenerator.questionGroup=c},addMultiple:function(a){debug.debug("Creating "+a+" platforms...");for(var b=0;b<a;b++)NeoGame.PlatformGenerator.add()},add:function(a,b){var c,d=NeoGame.PlatformGenerator.parentGroup,e=NeoGame.PlatformGenerator.obstacleGroup,f=NeoGame.PlatformGenerator.questionGroup;if(null==a&&(a=this.platformCodes.random()),"moving"==a&&"true"!=NeoGame.settings.allowMovingPlatforms)return debug.debug("moving platform requested on level 1, getting a new one instead..."),void this.add();if(NeoGame.Model.getLevel()<NeoGame.settings.showSinglePlatformStartingAtLevel&&"1---"==a)return debug.debug("1--- platform requested on level 1, getting a new one instead..."),void this.add();var g=NeoGame.PlatformGenerator.parentGroup.length>0?NeoGame.PlatformGenerator.parentGroup.length-1:0,h=NeoGame.PlatformGenerator.parentGroup.getChildAt(g);if(NeoGame.PlatformGenerator.lastHeight=h?h.y-h.height:0,"string"==typeof b)"single"==b?(lastPlatformType="single",b=NeoGame.PlatformGenerator.lastHeight-NeoGame.settings.platformSingleJumpDistance):"double"==b?(lastPlatformType="double",b=NeoGame.PlatformGenerator.lastHeight-NeoGame.settings.platformDoubleJumpDistance):"running"==b?(lastPlatformType="running",b=NeoGame.PlatformGenerator.lastHeight-NeoGame.settings.platformRunningJumpDistance):(lastPlatformType="custom",b=parseInt(b)+NeoGame.PlatformGenerator.lastHeight);else if(null==b){var i=Math.random();i>=0&&i<.7?(lastPlatformType="single",b=NeoGame.PlatformGenerator.lastHeight-NeoGame.settings.platformSingleJumpDistance):i>=.7&&i<.85?(lastPlatformType="double",b=NeoGame.PlatformGenerator.lastHeight-NeoGame.settings.platformDoubleJumpDistance):i>=.85&&(lastPlatformType="running",b=NeoGame.PlatformGenerator.lastHeight-NeoGame.settings.platformRunningJumpDistance)}switch(a){case"breakaway":c=new NeoGame.Platform(NeoGame.game,NeoGame.game.rnd.integerInRange(65,315),b,[2,3,4].random()),d.add(c);var j=this.determineCoin(c,c.x+.5*c.width,!0,c);c.InitBreakAway();break;case"moving":c=new NeoGame.Platform(NeoGame.game,NeoGame.game.rnd.integerInRange(65,315),b,[3,4].random()),d.add(c);var j=this.determineCoin(c,c.x+.5*c.width,!0,c);c.StartMoving();break;case"level":c=new NeoGame.LevelPlatform(NeoGame.game,0,b-110),d.add(c),c.init();break;case"4---":c=new NeoGame.Platform(NeoGame.game,NeoGame.game.rnd.integerInRange(65,315),b,4),d.add(c),this.determineCoinAndObstacle(c,c.x+.5*c.width,!1);break;case"3---":c=new NeoGame.Platform(NeoGame.game,NeoGame.game.rnd.integerInRange(65,315),b,3),d.add(c),this.determineCoinAndObstacle(c,c.x+.5*c.width,!1);break;case"2---":c=new NeoGame.Platform(NeoGame.game,NeoGame.game.rnd.integerInRange(65,380),b,2),d.add(c),this.determineCoinOrObstacle(c,c.x+.5*c.width,!1);break;case"1---":c=new NeoGame.Platform(NeoGame.game,NeoGame.game.rnd.integerInRange(65,510),b,1),d.add(c),this.determineCoin(c,c.x+.5*c.width,!1);break;case"0003":c=new NeoGame.Platform(NeoGame.game,446,b,3),d.add(c),this.determineCoinAndObstacle(c,null,!1);break;case"0220":c=new NeoGame.Platform(NeoGame.game,130,b,2),d.add(c),this.determineCoinOrObstacle(c,null,!1),c=new NeoGame.Platform(NeoGame.game,380,b,2),d.add(c);break;case"2013":c=new NeoGame.Platform(NeoGame.game,0,b,2),d.add(c),this.determineCoinOrObstacle(c,null,!1),c=new NeoGame.Platform(NeoGame.game,260,b,1),d.add(c),c=new NeoGame.Platform(NeoGame.game,446,b,3),d.add(c),this.determineCoinAndObstacle(c,null,!1);break;case"3004":c=new NeoGame.Platform(NeoGame.game,0,b,3),d.add(c),this.determineCoinOrObstacle(c,null,!1),c=new NeoGame.Platform(NeoGame.game,380,b,4),d.add(c),this.determineCoinAndObstacle(c,null,!1);break;case"2032":c=new NeoGame.Platform(NeoGame.game,510,b,2),d.add(c),c=new NeoGame.Platform(NeoGame.game,223,b-60,3),d.add(c),this.determineCoinAndObstacle(c,null,!1),c=new NeoGame.Platform(NeoGame.game,0,b-120,2),d.add(c),this.determineCoin(c,null,!1);break;case"2032b":c=new NeoGame.Platform(NeoGame.game,0,b,2),d.add(c),this.determineCoin(c,null,!1),c=new NeoGame.Platform(NeoGame.game,223,b-60,3),d.add(c),this.determineCoinAndObstacle(c,null,!1),c=new NeoGame.Platform(NeoGame.game,510,b-120,2),d.add(c),this.determineCoin(c,null,!1);break;case"4004":c=new NeoGame.Platform(NeoGame.game,380,b,4),d.add(c),this.determineCoinOrObstacle(c,null,!1),c=new NeoGame.Platform(NeoGame.game,0,b-70,4),d.add(c),this.determineCoinOrObstacle(c,null,!1);break;case"0004":c=new NeoGame.Platform(NeoGame.game,380,b,4),d.add(c);var k=new NeoGame.Obstacle(NeoGame.game,c.x+230,c.y+4,"game-assets","obstacle-rocks1");k.scale.x=-1,e.add(k);var j=new NeoGame.CollectCoin(NeoGame.game,c.x+100,c.y-60);e.add(j);break;case"0040":c=new NeoGame.Platform(NeoGame.game,195,b,4),d.add(c);break;case"3000":c=new NeoGame.Platform(NeoGame.game,0,b,3),d.add(c),this.determineCoinOrObstacle(c,null,!1);break;case"0330":c=new NeoGame.Platform(NeoGame.game,65,b,3),d.add(c),this.determineCoinAndObstacle(c,null,!1),c=new NeoGame.Platform(NeoGame.game,380,b,3),d.add(c),this.determineCoin(c,null,!1);break;case"0403":c=new NeoGame.Platform(NeoGame.game,65,b,4),d.add(c),this.determineCoinAndObstacle(c,null,!1),c=new NeoGame.Platform(NeoGame.game,445,b,3),d.add(c);break;case"4334":c=new NeoGame.Platform(NeoGame.game,0,b-100,4),d.add(c),this.determineCoinAndObstacle(c,null,!1),c=new NeoGame.Platform(NeoGame.game,220,b,3),d.add(c),c=new NeoGame.Platform(NeoGame.game,380,b-100,4),d.add(c),this.determineCoinAndObstacle(c,null,!1);break;case"stepsRight":c=new NeoGame.Platform(NeoGame.game,0,b,2),d.add(c),this.determineCoin(c,c.x+.5*c.width,!1),c=new NeoGame.Platform(NeoGame.game,178,b-40,1),d.add(c),this.determineObstacle(c,c.x+.5*c.width,!1),c=new NeoGame.Platform(NeoGame.game,288,b-80,1),d.add(c),this.determineCoin(c,c.x+.5*c.width,!1),c=new NeoGame.Platform(NeoGame.game,398,b-120,1),d.add(c),this.determineObstacle(c,c.x+.5*c.width,!1),c=new NeoGame.Platform(NeoGame.game,510,b-160,2),d.add(c),this.determineCoin(c,c.x+.5*c.width,!1);break;case"stepsLeft":c=new NeoGame.Platform(NeoGame.game,510,b,2),d.add(c),this.determineCoin(c,c.x+.5*c.width,!1),c=new NeoGame.Platform(NeoGame.game,398,b-40,1),d.add(c),this.determineObstacle(c,c.x+.5*c.width,!1),c=new NeoGame.Platform(NeoGame.game,288,b-80,1),d.add(c),this.determineCoin(c,c.x+.5*c.width,!1),c=new NeoGame.Platform(NeoGame.game,178,b-120,1),d.add(c),this.determineObstacle(c,c.x+.5*c.width,!1),c=new NeoGame.Platform(NeoGame.game,0,b-160,2),d.add(c),this.determineCoin(c,c.x+.5*c.width,!1);break;case"doubleTapTut":c=new NeoGame.Platform(NeoGame.game,0,b,3),d.add(c);var l=new NeoGame.DoubleTapCTA(NeoGame.game,c.x,c.y);d.add(l);break;default:c=new NeoGame.Platform(NeoGame.game,195,b,4),d.add(c)}return NeoGame.PlatformGenerator.platformAmount++,NeoGame.PlatformGenerator.lastHeight=d.getChildAt(d.length>0?d.length-1:0).y,f.setAll("body.allowGravity",!1),f.setAll("body.immovable",!0),f.setAll("body.checkCollision.up",!0),f.setAll("body.checkCollision.down",!1),f.setAll("body.checkCollision.left",!1),f.setAll("body.checkCollision.right",!1),f.setAll("body.velocity.y",50),c},reset:function(){NeoGame.PlatformGenerator.platformAmount=0},determineObstacle:function(a,b,c){if(Phaser.Utils.chanceRoll(50)||c){var d,e=NeoGame.PlatformGenerator.obstacleGroup,f=a.y+4;switch(a.platformSize){case 1:case 2:d=["obstacle-rocks1","obstacle-helmet"];break;case 3:d=["obstacle-rocks1","obstacle-rocks2","obstacle-helmet"];break;case 4:d=["obstacle-trident","obstacle-rocks1","obstacle-rocks2","obstacle-helmet"];break;default:d=["obstacle-rocks1"]}var g=d.random();switch(g){case"obstacle-rocks2":f=a.y+4;break;case"obstacle-trident":f=a.y+3;break;case"obstacle-helmet":f=a.y+6}var h=new NeoGame.Obstacle(NeoGame.game,0,f,"game-assets",g);return h.x=NeoGame.game.rnd.integerInRange(a.x+.5*h.width+20,a.x+a.width-.5*h.width-20),h.scale.x=Phaser.Utils.chanceRoll(50)?1:-1,e.add(h),h}},determineCoin:function(a,b,c,d){if(Phaser.Utils.chanceRoll(85)||c){var e=NeoGame.PlatformGenerator.obstacleGroup,f=new NeoGame.CollectCoin(NeoGame.game,0,a.y-60,d);return f.x=NeoGame.game.rnd.integerInRange(a.x+.5*f.width,a.x+a.width-.5*f.width),e.add(f),f}},determineCoinOrObstacle:function(a,b,c){Phaser.Utils.chanceRoll(60)?this.determineCoin(a,b,c):this.determineObstacle(a,b,c)},determineCoinAndObstacle:function(a,b,c){if(Phaser.Utils.chanceRoll(20))return void this.determineCoinOrObstacle(a,null,c);var d=this.determineCoin(a,null,c);d&&d.updateTransform();var e=this.determineObstacle(a,null,c);if(e&&e.updateTransform(),d&&e){var f=d.getBounds(),g=e.getBounds();Phaser.Rectangle.intersects(f,g)&&(Phaser.Utils.chanceRoll(50)?d.destroy(!0):e.destroy(!0))}},incrementMovingProbability:function(){"true"==NeoGame.settings.allowMovingPlatforms&&NeoGame.Model.getLevel()<NeoGame.settings.movingPlatformLastLevelToIncreaseProbability&&(debug.debug("increment moving platform probability..."),this.platformCodes.push("moving"))},forceMovingPlatform:function(){debug.debug("forcing a moving platform"),debug.debug("platformAmount: "+NeoGame.PlatformGenerator.platformAmount),NeoGame.PlatformGenerator.add("moving","single"),NeoGame.level2MovingForced=!0},resetPlatformCodes:function(){for(var a=this.platformCodes.length-1;a>=0;a--)"moving"===this.platformCodes[a]&&this.platformCodes.splice(a,1);debug.debug("removing platformCodes... "+this.platformCodes)}};var NeoGame=NeoGame||{};NeoGame.QuestionController={game:null,questionData:null,isAsking:!1,init:function(a,b){this.game=a,this.shuffle=b,this.initialQuestionData=null,NeoGame.QuestionController.questionData||(NeoGame.QuestionController.questionData=Array.from(this.game.cache.getJSON("data").questions),this.shuffle&&NeoGame.QuestionController.questionData.shuffle(),this.initialQuestionData=Array.from(NeoGame.QuestionController.questionData),NeoGame.QuestionController.onAnswered=new Phaser.Signal,NeoGame.QuestionController.onContinue=new Phaser.Signal,NeoGame.QuestionController.onNewQuestion=new Phaser.Signal)},add:function(){function a(a){i.input.enabled=!1,m.input.enabled=!1;var c=NeoGame.game.time.events.add(.2*Phaser.Timer.SECOND,function(){var d;a?(debug.debug("CORRECT!"),NeoGame.QuestionController.onAnswered.dispatch(!0),d=!0):(debug.debug("INCORRECT!"),NeoGame.QuestionController.onAnswered.dispatch(!1),d=!1);var e=new NeoGame.Feedback(NeoGame.game,d);NeoGame.game.add.existing(e),NeoGame.game.time.events.remove(c),b.destroy(!0)},this)}var b=this.game.add.group(),c=Phaser.Utils.chanceRoll();0==this.questionData.length&&(NeoGame.QuestionController.questionData=Array.from(this.initialQuestionData));var d,e,f=this.questionData.shift();c?(d=f.correct,e=f.incorrect):(d=f.incorrect,e=f.correct);var g=NeoGame.game.add.bitmapText(this.game.world.centerX,128,"Blue_52","QUESTION:",32);g.align="center",g.anchor.setTo(.5,0),b.add(g);var h=NeoGame.game.add.bitmapText(this.game.world.centerX,175,"Blue_52",f.question,52);h.align="center",h.anchor.setTo(.5,0),h.wordWrap=!0,h.maxWidth=610,b.add(h);var i=this.game.add.button(68,h.y+h.height+80,"ui-assets",function(){a(c?!0:!1)},this,"answer-A-selected","answer-A","answer-A-selected");i.anchor.set(.5),b.add(i);var j=NeoGame.Utils.addRectangle("0xff0000",i.width+20,i.height);j.alpha=0,j.x=.5*-j.width,j.y=.5*-j.height,i.addChild(j);var k=NeoGame.game.add.bitmapText(55,-40,"White_65",d,36);k.align="left",k.wordWrap=!0,k.maxWidth=180,i.addChild(k);var l=NeoGame.Utils.addRectangle("0xff0000",k.width,k.height);l.alpha=0,k.addChild(l);var m=this.game.add.button(368,h.y+h.height+80,"ui-assets",function(){a(c?!1:!0)},this,"answer-B-selected","answer-B","answer-B-selected");m.anchor.set(.5),b.add(m);var n=NeoGame.Utils.addRectangle("0xff0000",m.width+20,m.height);n.alpha=0,n.x=.5*-n.width,n.y=.5*-n.height,m.addChild(n);var o=NeoGame.game.add.bitmapText(55,-40,"White_65",e,36);o.align="left",o.wordWrap=!0,o.maxWidth=180,m.addChild(o);var p=NeoGame.Utils.addRectangle("0xff0000",o.width,o.height);p.alpha=0,o.addChild(p),NeoGame.config.cheat&&(c?k.tint="0xffd800":o.tint="0xffd800"),NeoGame.QuestionController.isAsking=!0}};var NeoGame=NeoGame||{};NeoGame.BackgroundController={currentNum:1,totalAmount:6,next:function(){this.currentNum++,debug.debug("BackgroundController.next: "+this.currentNum),this.currentNum>this.totalAmount&&(this.currentNum=1),document.getElementById("bg1").classList.remove("show"),document.getElementById("bg2").classList.remove("show"),document.getElementById("bg3").classList.remove("show"),document.getElementById("bg4").classList.remove("show"),document.getElementById("bg5").classList.remove("show"),document.getElementById("bg6").classList.remove("show"),document.getElementById("bg"+this.currentNum).classList.add("show")},reset:function(){this.currentNum=1,debug.debug("BackgroundController.reset: "+this.currentNum),document.getElementById("bg1").classList.add("show"),document.getElementById("bg2").classList.remove("show"),document.getElementById("bg3").classList.remove("show"),document.getElementById("bg4").classList.remove("show"),document.getElementById("bg5").classList.remove("show"),document.getElementById("bg6").classList.remove("show")}};var NeoGame=NeoGame||{};NeoGame.BootState=function(a){},NeoGame.BootState.prototype={init:function(){if(window.scrollTo(0,0),this.stage.backgroundColor=NeoGame.config.backgroundColor,this.load.baseURL=NeoGame.config.assetsPath,(this.game.device.desktop||NP.Crossbrowser.iOS&&NP.Crossbrowser.isChrome>-1)&&(this.game.stage.disableVisibilityChange=!1),"1"==getQueryString("fps")&&(this.game.time.advancedTiming=!0),this.game.device.desktop)debug.log("Running on DESKTOP"),this.game.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.minWidth=NeoGame.config.minWidth,this.game.scale.minHeight=NeoGame.config.minHeight,this.game.scale.maxWidth=NeoGame.config.maxWidth,this.game.scale.maxHeight=NeoGame.config.maxHeight,this.game.scale.pageAlignHorizontally=!0,NeoGame.DomUtils.removeClass(document.getElementById("game"),"mobile");else{debug.log("Running on MOBILE");var a=this;this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.game.scale.maxWidth=NeoGame.config.maxWidth,this.game.scale.maxHeight=NeoGame.config.maxHeight,this.scale.pageAlignHorizontally=!0,this.game.scale.enterIncorrectOrientation.add(this.enterIncorrectOrientation,this),this.game.scale.leaveIncorrectOrientation.add(this.leaveIncorrectOrientation,this),"1"!=getQueryString("norotate")&&this.game.scale.forceOrientation(!1,!0),window.addEventListener("message",function(b){var c=b.data.orientation;if(void 0==c)return void debug.debug("orientation change from iFrame: "+c,", returning");debug.debug("orientation change from iFrame: "+c),a.game.scale.forceOrientation(!1,!0),0==c?(that.windowResize(),a.game.scale.updateLayout(),a.leaveIncorrectOrientation()):(a.windowResize(),a.enterIncorrectOrientation())},!1)}this.game.scale.updateLayout(),$(window).resize($.proxy(this.windowResize,this)),window.onkeydown=function(a){32==a.keyCode&&a.target==document.body&&a.preventDefault()}},windowResize:function(){debug.debug("windowResize");var a=this.game.device.desktop?0:500;if(NeoGame.game.time.events.add(a,function(){this.game.scale.updateLayout()},this),!this.game.device.desktop){var b=parseFloat(this.game.canvas.style.width.slice(0,-2)),c=parseFloat(this.game.canvas.style.height.slice(0,-2));debug.debug("canvasStyleWidth: "+b),debug.debug("canvasStyleHeight: "+c);this.game.width,this.game.height;b<NeoGame.config.width?(debug.debug("TURN OFF COLUMNS"),NeoGame.DomUtils.addClass(document.getElementById("game"),"mobile")):NeoGame.DomUtils.removeClass(document.getElementById("game"),"mobile")}},preload:function(){this.windowResize(),this.load.path="images/game/",this.load.atlas("preloader-assets"),this.load.images([])},create:function(){this.game.state.start("preload")},shutdown:function(){},enterIncorrectOrientation:function(){NeoGame.Model.getPaused()||NeoGame.initGamePause.dispatch(),document.getElementById("game").classList.add("hide"),document.getElementById("non-orientation").classList.add("show")},leaveIncorrectOrientation:function(){document.getElementById("game").classList.remove("hide"),document.getElementById("non-orientation").classList.remove("show"),NeoGame.game.time.events.add(10,function(){this.windowResize()},this)}};var NeoGame=NeoGame||{};NeoGame.PreloadState=function(a){},NeoGame.PreloadState.prototype={loadText:null,init:function(){},preload:function(){var a=this.game.add.sprite(this.game.world.centerX,(40+this.world.centerY-200)/2,"preloader-assets","title-logo"),b=.006*a.y;a.scale.set(b),a.anchor.set(.5),this.game.add.tween(a).from({alpha:0},300,Phaser.Easing.Linear.None,!0);var c=this.game.add.group();c.x=this.game.world.centerX,c.y=this.game.world.centerY-65,this.loading=this.game.add.image(0,0,"preloader-assets","loading-text"),this.loading.anchor.set(.5,0),c.add(this.loading),this.preloaderLine=this.game.make.image(-180,35,"preloader-assets","loading-bold-bg"),this.preloaderLine.anchor.set(0,0),c.add(this.preloaderLine),this.preloaderFill=this.game.make.image(-180,35,"preloader-assets","loading-bold-fill"),this.preloaderFill.anchor.set(0,0),c.add(this.preloaderFill),this.cropShape=this.game.add.graphics(this.preloaderFill.x,this.preloaderFill.y),this.cropShape.beginFill(16776960),this.cropShape.drawRect(0,0,this.preloaderFill.width,this.preloaderFill.height),this.cropShape.endFill(),this.cropShape.scale.set(0,1),this.cropShape.alpha=.4,c.add(this.cropShape),this.preloaderFill.mask=this.cropShape,this.load.path="images/game/",this.load.atlas("game-assets"),this.load.atlas("ui-assets"),this.load.atlas("player-assets"),this.load.atlas("landingScreenIdle-assets"),this.load.atlas("athena-assets"),this.load.atlas("landingScreenIdle-assets"),this.load.atlas("uncompressed-assets"),this.load.path="images/temp-images/",this.load.images([]),this.load.path="images/",this.load.path="audio/",this.load.audio("zeus-jump",["zeus-jump.ogg","zeus-jump.m4a","zeus-jump.mp3"]),this.load.audio("zeus-run-steps",["zeus-run-steps_2.0.ogg","zeus-run-steps_2.0.m4a","zeus-run-steps_2.0.mp3"]),this.load.audio("zeus-fall",["zeus-fall.ogg","zeus-fall.m4a","zeus-fall.mp3"]),this.load.audio("ui-click",["ui-click.ogg","ui-click.m4a","ui-click.mp3"]),this.load.audio("sfx-coin",["sfx-coin.ogg","sfx-coin.m4a","sfx-coin.mp3"]),this.load.audio("sfx-coin-loss",["sfx-coin-loss.ogg","sfx-coin-loss.m4a","sfx-coin-loss.mp3"]),this.load.audio("obstacle-trident",["obstacle-trident.ogg","obstacle-trident.m4a","obstacle-trident.mp3"]),this.load.audio("obstacle-rocks",["obstacle-rocks.ogg","obstacle-rocks.m4a","obstacle-rocks.mp3"]),this.load.audio("question-correct-answer",["question-correct-answer.ogg","question-correct-answer.m4a","question-correct-answer.mp3"]),this.load.audio("question-incorrect-answer",["question-incorrect-answer.ogg","question-incorrect-answer.m4a","question-incorrect-answer.mp3"]),this.load.audio("game-music",["music-loop.ogg","music-loop.m4a","music-loop.mp3"]),this.load.audio("extra-life",["extra-life.ogg","extra-life.m4a","extra-life.mp3"]),this.load.path="fonts/",this.load.bitmapFont("White_65","White_65.png","White_65.xml"),this.load.bitmapFont("White_84","White_84.png","White_84.xml"),this.load.bitmapFont("White_Shadow_84","White_Shadow_84.png","White_Shadow_84.xml"),this.load.bitmapFont("Yellow_78","Yellow_78.png","Yellow_78.xml"),this.load.bitmapFont("Red_78","Red_78.png","Red_78.xml"),this.load.bitmapFont("Yellow_84","Yellow_84.png","Yellow_84.xml"),this.load.bitmapFont("Blue_52","Blue_52.png","Blue_52.xml"),this.load.path="config/",this.load.json(["data"]),this.load.onFileComplete.add(this.onFileComplete,this)},onFileComplete:function(a,b,c,d,e){this.game.add.tween(this.cropShape.scale).to({x:.01*a},200,Phaser.Easing.Default,!0)},create:function(){"1"==getQueryString("mute")&&(NeoGame.game.sound.mute=!0),NeoGame.game.cache.getBitmapFont("White_84").font.lineHeight=78,NeoGame.game.cache.getBitmapFont("Blue_52").font.lineHeight=55,NeoGame.game.cache.getBitmapFont("White_65").font.lineHeight=65,NeoGame.copy=this.game.cache.getJSON("data").copy,NeoGame.settings=this.game.cache.getJSON("data").settings,(!this.game.device.desktop&&"true"==NeoGame.settings.allowMobileScroll||"1"==getQueryString("allowscroll"))&&(Phaser.Canvas.setTouchAction(this.game.canvas,"auto"),this.game.input.touch.preventDefault=!1),NeoGame.gameMusic=this.game.add.audio("game-music"),NeoGame.gameMusic.loop=!0,NeoGame.gameMusic.volume=NeoGame.settings.musicVolume,NeoGame.gameMusic.play(),this.game.add.tween(this.loading).to({alpha:0},500,Phaser.Easing.Linear.None,!0,500),this.game.add.tween(this.preloaderLine).to({alpha:0},500,Phaser.Easing.Linear.None,!0,500),this.game.add.tween(this.preloaderFill).to({alpha:0},500,Phaser.Easing.Linear.None,!0,500).onComplete.addOnce(function(){getQueryString("state")&&NeoGame.game.state.checkState(getQueryString("state"))?this.game.state.start(getQueryString("state")):this.game.state.start("landing")},this)},update:function(){},render:function(){"1"==getQueryString("fps")&&this.game.debug.text(this.game.time.fps+"fps"||"--",10,this.game.world.height-20,"#00FF00")},shutdown:function(){}};var NeoGame=NeoGame||{};NeoGame.LandingState=function(a){},NeoGame.LandingState.prototype={preload:function(){},create:function(){var a=this.game.add.sprite(this.game.world.centerX,(40+this.world.centerY-200)/2,"preloader-assets","title-logo"),b=.006*a.y;a.scale.set(b),a.anchor.set(.5);var c=this.game.add.sprite(this.game.world.centerX,this.game.world.height,"game-assets","platform-ground-large");c.anchor.set(.5,1),c.width=this.game.width,this.game.add.tween(c).from({y:"500"},500,Phaser.Easing.Quadratic.Out,!0);var d=this.game.add.group();d.y=this.game.height-686,this.game.add.tween(d).from({x:-800},800,Phaser.Easing.Quintic.Out,!0,500);var e=this.game.add.sprite(75,2,"landingScreenIdle-assets");e.animations.add("wave",Phaser.Animation.generateFrameNames("landingScreenIdle/landingScreenIdle",1,12,"",4),12,!0),e.animations.play("wave"),d.add(e);var f=this.game.add.sprite(332,0,"ui-assets","landing-hero-pose-no-cape");f.anchor.set(.5,0),d.add(f);var g=NeoGame.game.add.bitmapText(this.game.world.centerX,this.game.world.height-267,"White_84",NeoGame.copy.LANDING_COPY,40);g.align="center",g.wordWrap=!0,g.maxWidth=560,g.anchor.setTo(.5,0),this.game.add.tween(g).from({alpha:0,y:"20"},800,Phaser.Easing.Quadratic.Out,!0,800)
;var h=this.game.add.button(this.game.world.centerX,g.y+165,"ui-assets",function(){NeoGame.Utils.playMainButtonSound(),h.inputEnabled=!1;var a=new NeoGame.HelpOverlay(this.game,"how");this.game.add.existing(a)},this,"button-start","button-start","button-start-up","button-start");h.anchor.set(.5),this.game.add.tween(h).from({alpha:0},1e3,Phaser.Easing.Linear.None,!0,1500)},update:function(){},render:function(){"1"==getQueryString("fps")&&this.game.debug.text(this.game.time.fps+"fps"||"--",10,this.game.world.height-20,"#00FF00")},shutdown:function(){}};var NeoGame=NeoGame||{};NeoGame.PlayState=function(a){},NeoGame.PlayState.prototype={resetValues:function(){NeoGame.PlayState.onLevelReached=new Phaser.Signal,NeoGame.PlayState.onLevelLanded=new Phaser.Signal,this.gameIsOver=!1,this.dead=!1,this.player=null,this.platformGroup=null,this.obstacleGroup=null,this.questionGroup=null,this.travelSpeed=20,this.allowTravel=!1,this.waitingForQuestion=!1,this.waitingToStopLevelPlatform=!1,this.coinCounter=0,NeoGame.PauseOverlay.isOpen=!1,NeoGame.PlatformGenerator.platformAmount=0,debug.debug("resetValue()"),NeoGame.Model.setPaused(!1)},init:function(a){this.stateData=a,debug.debug("this.stateData: ",this.stateData),"1"==getQueryString("flappy")&&(NeoGame.settings.doubleJumpAmount=99999,NeoGame.settings.platformsPerLevel=5,NeoGame.settings.travelSpeedIncreaseRate=1),NeoGame.gameMusic.isPlaying||NeoGame.gameMusic.play(),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.game.forceSingleUpdate=!1,this.resetValues(),NeoGame.PlayState.onLevelLanded.add(this.dropLevel,this),NeoGame.PlayState.onLevelReached.add(function(a,b){if(debug.debug("onLevelReached: "+a),NeoGame.Model.setLevel(NeoGame.Model.getLevel()+1),NeoGame.PlatformGenerator.incrementMovingProbability(),NeoGame.game.time.events.add(1500,function(){this.player.goThink()},this),this.stopPlatforms(),this.showQuestion(a),2==NeoGame.Model.getLevel()&&!NeoGame.firstQuestionCtaDidShow){var c=new NeoGame.FirstQuestionCta(this.game);this.game.add.existing(c),NeoGame.firstQuestionCtaDidShow=!0}},this),NeoGame.initGamePause.add(function(a){if("play"==NeoGame.game.state.current){if(!NeoGame.Model.getPaused()&&!NeoGame.PauseOverlay.isOpen){var b=new NeoGame.PauseOverlay(this.game);this.game.add.existing(b)}NeoGame.QuestionController.isAsking||(NeoGame.Model.setPaused(!0),NeoGame.onGamePaused.dispatch(NeoGame.Model.getPaused()))}},this),NeoGame.onGamePaused.add(function(a){!this.waitingForQuestion&&NeoGame.startedTraveling&&(this.allowTravel=!a,this.userControls.allowControls=!a,NeoGame.game.physics.arcade.isPaused=a,a?this.stopPlatforms():this.resumePlatforms())},this),NeoGame.Model.coinsChangeSignal.add(function(a){var b=a-NeoGame.lastCoinAmount;if(this.coinCounter+=b,NeoGame.lastCoinAmount=a,debug.debug("coinCounter: "+this.coinCounter),this.coinCounter>=NeoGame.settings.coinAmountForExtraLife){NeoGame.Model.setLives(NeoGame.Model.getLives()+1),this.coinCounter=0;var c=new NeoGame.ExtraLife(this.game,this.player.x,this.player.y-90);this.game.add.existing(c)}},this)},create:function(){this.player=new NeoGame.Player(this.game,-100,700),NeoGame.PlayState.player=this.player,this.player.body.velocity.x=this.player.SPEED,this.setParticles(),NeoGame.QuestionController.init(this.game,"true"==NeoGame.settings.shuffleQuestions),NeoGame.QuestionController.onContinue.add(function(){NeoGame.startedTraveling=!0,this.userControls.show(),this.allowTravel=!0,this.travelSpeed=20,this.userControls.allowControls=!0,this.waitingForQuestion=!1,this.waitingToStopLevelPlatform=!1},this),NeoGame.QuestionController.onAnswered.add(function(a){this.player.goIdle()},this),NeoGame.QuestionController.onNewQuestion.add(function(a){"tryingAgain"==a&&this.player.goThink()},this),this.initLevel(),this.game.add.existing(this.player),this.player.y=this.ground.y-this.ground.height-30,this.hud=new NeoGame.Hud(this.game,0,0),this.game.add.existing(this.hud),this.hud.visible=!1,this.hud.alpha=0,this.userControls=new NeoGame.UserControls(this.game,this.player,0,this.game.height-100),this.game.add.existing(this.userControls),this.stateData&&"tryAgain"==this.stateData.mode?(NeoGame.Model.setLevel(NeoGame.Model.getLevel()),NeoGame.Model.setLives(NeoGame.Model.getLives())):(NeoGame.Model.setLevel(1),NeoGame.Model.setLives(NeoGame.settings.totalLives),NeoGame.BackgroundController.reset())},initLevel:function(){this.bounds=this.game.add.group(),this.bounds.enableBody=!0;var a=this.bounds.create(-10,-500);a.width=10,a.height=this.game.world.height+500;var b=this.bounds.create(this.game.world.bounds.right,a.y);if(b.width=a.width,b.height=a.height,this.bounds.setAll("body.allowGravity",!1),this.bounds.setAll("body.immovable",!0),this.deathTrap=this.game.add.sprite(0,0),this.deathTrap.width=this.game.world.width,this.deathTrap.height=200,this.deathTrap.y=this.game.world.height+this.player.height,this.game.physics.arcade.enable(this.deathTrap),this.deathTrap.body.allowGravity=!1,this.deathTrap.body.immovable=!0,"true"==NeoGame.settings.allowClouds){this.bgCloudsGroup=this.game.add.group();var c=new NeoGame.Clouds(this.game,this.bgCloudsGroup);this.game.add.existing(c)}this.platformGroup=this.game.add.group(),this.platformGroup.enableBody=!0;var d=this.platformGroup.create(0,this.game.height,"game-assets","platform-ground");this.game.physics.arcade.enable(d),d.enableBody=!0,d.body.allowGravity=!1,d.body.immovable=!0,d.body.checkCollision.up=!0,d.body.checkCollision.down=!1,d.body.checkCollision.left=!1,d.body.checkCollision.right=!1,d.anchor.set(1,1);var e=this.platformGroup.create(0,this.game.height,"game-assets","platform-ground");this.game.physics.arcade.enable(e),e.enableBody=!0,e.body.allowGravity=!1,e.body.immovable=!0,e.body.checkCollision.up=!0,e.body.checkCollision.down=!1,e.body.checkCollision.left=!1,e.body.checkCollision.right=!1,e.anchor.set(0,1);var f=new NeoGame.LevelPlaque(this.game,this.game.world.centerX,-217,NeoGame.Model.getLevel());if(f.anchor.set(.5,0),e.addChild(f),this.ground=e,this.obstacleGroup=this.game.add.group(),this.obstacleGroup.enableBody=!0,"true"==NeoGame.settings.allowClouds){this.fgCloudsGroup=this.game.add.group();var g=new NeoGame.Clouds(this.game,this.fgCloudsGroup,!0);this.game.add.existing(g)}this.questionGroup=this.game.add.group(),this.questionGroup.enableBody=!0,NeoGame.PlatformGenerator.init(this.platformGroup,this.obstacleGroup,this.questionGroup),1==NeoGame.Model.getLevel()?(NeoGame.PlatformGenerator.add("0004","-180"),NeoGame.PlatformGenerator.add("0040","single"),1==NeoGame.Model.getLevel()?NeoGame.PlatformGenerator.add("doubleTapTut","double"):NeoGame.PlatformGenerator.add(),NeoGame.PlatformGenerator.addMultiple(3)):NeoGame.PlatformGenerator.addMultiple(10),this.stopPlatforms(),this.player.onFirstJump.add(function(){this.allowTravel=!0,NeoGame.startedTraveling=!0,this.cta&&this.cta.hide()},this),this.player.onDamage.add(function(){this.userControls.allowControls=!1,this.takeHit()},this),this.player.onDamageRecover.add(function(){this.gameIsOver||(this.userControls.allowControls=!0)},this),this.startingLine=this.game.add.sprite(200,e.y-229,"game-assets","platform-1"),this.startingLine.alpha=0,this.startingLine.tint=16711680,this.game.physics.arcade.enable(this.startingLine),this.startingLine.body.immovable=!0,this.startingLine.body.allowGravity=!1,this.startingLine.body.checkCollision.up=!1,this.startingLine.body.checkCollision.down=!1,this.startingLine.body.checkCollision.left=!1,this.startingLine.body.checkCollision.right=!1,this.startingLine.anchor.set(.5,1),this.platformGroup.add(this.startingLine)},setParticles:function(){this.dustEmitter=this.game.add.emitter(0,50,0),this.dustEmitter.makeParticles("game-assets","dust"),this.dustEmitter.setXSpeed(-100,100),this.dustEmitter.minParticleScale=.2,this.dustEmitter.maxParticleScale=.7,this.dustEmitter.minParticleAlpha=0,this.dustEmitter.maxParticleAlpha=1,this.dustEmitter.gravity=-(NeoGame.settings.gravity-100),this.dustEmitter.setAlpha(1,0,1e3),this.dustEmitter.setRotation(-90,90),this.coinEmitter=this.game.add.emitter(0,50,300),this.coinEmitter.makeParticles("game-assets",["coin_0001","coin_0002","coin_0006"]),this.coinEmitter.setYSpeed(-400,-600),this.coinEmitter.minParticleScale=.4,this.coinEmitter.maxParticleScale=.6,this.coinEmitter.minParticleAlpha=0,this.coinEmitter.maxParticleAlpha=1,this.coinEmitter.gravity=-1e3,this.coinEmitter.setAlpha(1),this.coinEmitter.setRotation(-90,90,1e3)},resumePlatforms:function(){this.waitingForQuestion||(this.platformGroup.setAll("body.velocity.y",this.travelSpeed),this.obstacleGroup.setAll("body.velocity.y",this.travelSpeed),this.questionGroup.setAll("body.velocity.y",this.travelSpeed),this.bgCloudsGroup&&this.bgCloudsGroup.setAll("body.velocity.y",this.travelSpeed*NeoGame.Clouds.BGSPEED),this.fgCloudsGroup&&this.fgCloudsGroup.setAll("body.velocity.y",this.travelSpeed*NeoGame.Clouds.FGSPEED))},dropLevel:function(a,b){debug.debug("dropLevel:"+a),NeoGame.BackgroundController.next(),this.platformGroup.setAll("body.velocity.y",NeoGame.settings.levelLandedDropSpeed),this.obstacleGroup.setAll("body.velocity.y",NeoGame.settings.levelLandedDropSpeed),this.questionGroup.setAll("body.velocity.y",NeoGame.settings.levelLandedDropSpeed),this.waitingForQuestion=!0,this.allowTravel=!1,this.userControls.allowControls=!1,this.userControls.hide(),this.player.runningToAthena=!0,this.player.goIdle(!0),NeoGame.game.time.events.add(1e3,function(){this.standingXPos=this.game.world.centerX+20,this.player.x>this.standingXPos+20?(debug.debug("run left"),this.player.body.velocity.x=-Math.abs(this.player.SPEED),this.player.goLeft()):this.player.x<this.standingXPos-20?(debug.debug("run right"),this.player.body.velocity.x=Math.abs(this.player.SPEED),this.player.goRight()):(this.player.body.velocity.x=0,this.player.goLeft(),this.player.goIdle(!0))},this)},stopPlatforms:function(){this.platformGroup.setAll("body.velocity.y",0),this.obstacleGroup.setAll("body.velocity.y",0),this.questionGroup.setAll("body.velocity.y",0),this.bgCloudsGroup&&this.bgCloudsGroup.setAll("body.velocity.y",0),this.fgCloudsGroup&&this.fgCloudsGroup.setAll("body.velocity.y",0)},checkCollisions:function(){this.player.ready&&this.game.physics.arcade.collide(this.player,this.bounds),this.game.physics.arcade.collide(this.player,this.platformGroup,function(a,b){!this.player.onFloor&&a.y<b.y+20&&(this.dustEmitter.x=this.player.x,this.dustEmitter.y=this.player.y,this.dustEmitter.setYSpeed(this.travelSpeed),this.dustEmitter.start(!0,1e3,null,12)),this.player.onFloor=!0},null,this),this.game.physics.arcade.overlap(this.player,this.deathTrap,this.fallToDeath,null,this),this.game.physics.arcade.overlap(this.player,this.startingLine,function(){this.player.playAnim("idleRight"),this.player.ready=!0,this.userControls.allowControls=!0,this.startingLine.destroy(),NeoGame.ctaDidShow||(this.cta=new NeoGame.Cta(this.game),this.game.add.existing(this.cta),NeoGame.ctaDidShow=!0),this.hud.visible=!0,this.game.add.tween(this.hud).to({alpha:1},1500,Phaser.Easing.Linear.None,!0)},null,this),this.player.runningToAthena&&NeoGame.LevelPlatform.standingPosition&&this.player.x<this.standingXPos+20&&this.player.x>this.standingXPos-20&&(debug.debug("reached Athena!"),this.player.body.velocity.x=0,this.player.goLeft(),NeoGame.QuestionController.isAsking?this.player.goThink():this.player.goIdle(!0),this.player.runningToAthena=!1,NeoGame.LevelPlatform.standingPosition.destroy(),NeoGame.LevelPlatform.standingPosition=null)},update:function(){if(NeoGame.allowTravel=this.allowTravel,NeoGame.travelSpeed=this.travelSpeed,this.checkCollisions(),!NeoGame.Model.getPaused()){if(this.allowTravel&&NeoGame.startedTraveling){var a=NeoGame.settings.travelSpeedIncreaseRate;NeoGame.Model.getLevel()>1&&(a=NeoGame.settings.travelSpeedIncreaseRate+NeoGame.settings.travelSpeedIncreaseRate*NeoGame.Model.getLevel()*NeoGame.settings.travelSpeedIncreaseLevelMultipler),this.travelSpeed=Math.min(this.travelSpeed+=+a,NeoGame.settings.travelSpeedMax),this.platformGroup.setAll("body.velocity.y",this.travelSpeed),this.obstacleGroup.setAll("body.velocity.y",this.travelSpeed),this.questionGroup.setAll("body.velocity.y",this.travelSpeed),this.bgCloudsGroup&&this.bgCloudsGroup.setAll("body.velocity.y",this.travelSpeed*NeoGame.Clouds.BGSPEED),this.fgCloudsGroup&&this.fgCloudsGroup.setAll("body.velocity.y",this.travelSpeed*NeoGame.Clouds.FGSPEED)}this.platformGroup.forEach(function(a){a.updatePhysics&&a.updatePhysics(),a.y>=this.game.height+a.height&&(a.destroy(!0),this.checkForLevelBreak())},this),this.obstacleGroup.forEach(function(a){a.y>=this.game.height+a.height&&a.destroy(!0)},this)}},checkForLevelBreak:function(){this.waitingToStopLevelPlatform||(NeoGame.PlatformGenerator.platformAmount>=NeoGame.settings.platformsPerLevel?(debug.debug("Add level question now"),NeoGame.PlatformGenerator.add("level","-100"),this.waitingToStopLevelPlatform=!0):NeoGame.PlatformGenerator.add())},showQuestion:function(a){debug.debug("showQuestion: "+a),NeoGame.QuestionController.add()},fallToDeath:function(){if(!this.dead){debug.debug("Dead: ",this.dead),this.dead=!0,this.stopPlatforms(),this.allowTravel=!1,NeoGame.game.sound.stopAll(),NeoGame.Utils.playSound("zeus-fall");var a;if("all"==NeoGame.settings.coinAmountLostForFalling){a=Math.abs(NeoGame.Model.getCoins());var b=NeoGame.Model.getCoins()>15?15:NeoGame.Model.getCoins();if(NeoGame.Model.getCoins()>0){this.coinEmitter.x=this.player.x,this.coinEmitter.y=this.game.height,this.coinEmitter.start(!0,2e3,null,Math.min(b,Math.abs(NeoGame.Model.getCoins()))),NeoGame.Model.setCoins(Math.max(0,NeoGame.Model.getCoins()-Number.MAX_VALUE));var c=new NeoGame.LoseCoins(this.game,this.player.x,this.game.height-50,a);this.game.add.existing(c)}}else if(Math.abs(NeoGame.settings.coinAmountLostForFalling)>0&&(a=Math.min(NeoGame.Model.getCoins(),NeoGame.settings.coinAmountLostForFalling),NeoGame.Model.getCoins()>0)){this.coinEmitter.x=this.player.x,this.coinEmitter.y=this.game.height,this.coinEmitter.start(!0,2e3,null,Math.min(Math.abs(NeoGame.settings.coinAmountLostForFalling),Math.abs(NeoGame.Model.getCoins()))),NeoGame.Model.setCoins(Math.max(0,NeoGame.Model.getCoins()-NeoGame.settings.coinAmountLostForFalling));var c=new NeoGame.LoseCoins(this.game,this.player.x,this.game.height-70,a);this.game.add.existing(c)}this.prepareForEndGame(),NeoGame.game.time.events.add(1200,function(){var a=new NeoGame.LoseLifeAlert(this.game);this.game.add.existing(a)},this)}},takeHit:function(){if(NeoGame.settings.coinAmountForObstacleHit>0){NeoGame.Model.setCoins(NeoGame.Model.getCoins()-NeoGame.settings.coinAmountForObstacleHit);var a=new NeoGame.LoseCoins(this.game,this.player.x,this.player.y-160,NeoGame.settings.coinAmountForObstacleHit);this.game.add.existing(a),this.coinEmitter.x=this.player.x,this.coinEmitter.y=this.player.y-20,this.coinEmitter.start(!0,2e3,null,Math.abs(NeoGame.settings.coinAmountForObstacleHit)),this.game.time.events.repeat(.05*Phaser.Timer.SECOND,5,function(){NeoGame.Utils.playSound("sfx-coin-loss",.65)},this)}this.shakeEffect()},endGame:function(){this.prepareForEndGame(),NeoGame.game.time.events.add(1500,function(){NeoGame.game.state.start("gameover",!0,!1)},this)},prepareForEndGame:function(){this.userControls.allowControls=!1,this.allowTravel=!1,this.gameIsOver=!0},shakeEffect:function(){var a=NeoGame.game.rnd.integerInRange(5,12),b=20;this.game.add.tween(this.platformGroup).to({y:"-"+a},b).to({y:"+"+2*a},2*b).to({y:"-"+a},b).to({y:"-"+a},b).to({y:"+"+2*a},2*b).to({y:"-"+a},b).to({y:"-"+a/2},b).to({y:"+"+a},2*b).to({y:"-"+a/2},b).start(),this.game.add.tween(this.obstacleGroup).to({y:"-"+a},b).to({y:"+"+2*a},2*b).to({y:"-"+a},b).to({y:"-"+a},b).to({y:"+"+2*a},2*b).to({y:"-"+a},b).to({y:"-"+a/2},b).to({y:"+"+a},2*b).to({y:"-"+a/2},b).start()},render:function(){"1"==getQueryString("fps")&&this.game.debug.text(this.game.time.fps+"fps"||"--",10,this.game.world.height-20,"#00FF00")},shutdown:function(){NeoGame.Model.coinsChangeSignal.removeAll()}};var NeoGame=NeoGame||{};NeoGame.GameOver=function(a){},NeoGame.GameOver.prototype={preload:function(){},create:function(){if(1==getQueryString("debug")&&0!=getQueryString("levelTest")){var a=parseInt(getQueryString("levelTest"));NeoGame.Model.setLevel(a)}NeoGame.BackgroundController.reset();var b=this.game.add.sprite(0,0,"uncompressed-assets","gameover-bg");b.height=this.game.height;var c=this.game.add.sprite(this.game.world.centerX+20,135,"ui-assets","cloud");c.alpha=.8,c.anchor.set(.5);var d=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY,"ui-assets","badge-dialog");d.anchor.set(.5),this.game.add.tween(d).from({alpha:0},1e3,Phaser.Easing.Linear.None,!0),this.game.add.tween(d.scale).from({x:.5,y:.5},1500,Phaser.Easing.Sinusoidal.Out,!0);var e,f;NeoGame.Model.getLevel()<=NeoGame.settings.levelMaxForLowResultsFeedback?(e=NeoGame.copy.RESULTS_TITLE_OPTIONS_LOW.random(),f=NeoGame.copy.RESULTS_OPTIONS_LOW.random()):NeoGame.Model.getLevel()<=NeoGame.settings.levelMaxForMediumResultsFeedback?(e=NeoGame.copy.RESULTS_TITLE_OPTIONS_MEDIUM.random(),f=NeoGame.copy.RESULTS_OPTIONS_MEDIUM.random()):(e=NeoGame.copy.RESULTS_TITLE_OPTIONS_HIGH.random(),f=NeoGame.copy.RESULTS_OPTIONS_HIGH.random());var g=NeoGame.game.add.bitmapText(0,-110,"White_65",e,65);g.align="center",g.anchor.set(.5,1),d.addChild(g);var h=NeoGame.game.add.bitmapText(0,-70,"White_65",f,36);h.align="center",h.anchor.set(.5,1),d.addChild(h);var i=this.game.add.sprite(0,-34,"ui-assets","bolt-small");i.scale.set(.7),i.anchor.set(.5),d.addChild(i);var j=new NeoGame.CoinGlow(this.game,-117,-38);d.addChild(j);var k=this.game.add.sprite(0,-0,"ui-assets","hud-coin");k.anchor.set(.5),k.scale.set(1.1),j.addChild(k);var l=NeoGame.game.add.bitmapText(135,-58,"Yellow_78",NeoGame.copy.LEVEL,41);l.align="center",l.anchor.set(.5,0),d.addChild(l);var m=NeoGame.Model.getLevel()>999?65:78,n=NeoGame.game.add.bitmapText(135,-22,"Yellow_78",NeoGame.Model.getLevel().toString(),m);n.align="center",n.anchor.set(.5,0),d.addChild(n);var o=NeoGame.Model.getCoins()>999?65:78,p=NeoGame.game.add.bitmapText(-120,-22,NeoGame.Model.getCoins()<0?"Red_78":"Yellow_78",NeoGame.Model.getCoins().toString(),o);p.align="center",p.anchor.set(.5,0),d.addChild(p);var q=this.game.add.group(),r=NeoGame.game.add.bitmapText(47,93,"White_65","YOUR",72),s=this.game.add.sprite(74,170,"ui-assets","bolt-small"),t=this.game.add.sprite(208,98,"ui-assets","text-score");q.add(r),q.add(s),q.add(t);var u=this.game.add.sprite(this.game.world.centerX,this.game.height,"ui-assets","pedestal");u.anchor.set(.5,1);var v=this.game.add.group();v.x=-285,v.y=-485,v.scale.set(.85),u.addChild(v);var w=this.game.add.sprite(75,0,"landingScreenIdle-assets");w.animations.add("wave",Phaser.Animation.generateFrameNames("landingScreenIdle/landingScreenIdle",1,12,"",4),12,!0),w.animations.play("wave"),v.add(w);var x=this.game.add.sprite(332,0,"ui-assets","landing-hero-pose-no-cape");x.anchor.set(.5,0),v.add(x);var y=this.game.add.button(this.game.world.centerX-5,this.game.height-103,"ui-assets",function(){NeoGame.Utils.playMainButtonSound(),NeoGame.Model.setLevel(1),NeoGame.Model.setCoins(0),NeoGame.PlatformGenerator.resetPlatformCodes(),NeoGame.lastCoinAmount=0,this.game.state.start("play",!0,!1)},this,"button-play-again","button-play-again","button-play-again-up","button-play-again");y.anchor.set(.5),this.game.add.tween(b).from({alpha:0},500,Phaser.Easing.Linear.None,!0),this.game.add.tween(c).from({alpha:0},500,Phaser.Easing.Linear.None,!0),this.game.add.tween(q).from({alpha:0},700,Phaser.Easing.Linear.None,!0,300),this.game.add.tween(q).from({y:"-50"},700,Phaser.Easing.Back.Out,!0,300),this.game.add.tween(u).from({y:"500"},1e3,Phaser.Easing.Sinusoidal.Out,!0,500),NeoGame.Utils.stretchyScale(y,2e3)},update:function(){},render:function(){"1"==getQueryString("fps")&&this.game.debug.text(this.game.time.fps+"fps"||"--",10,this.game.world.height-20,"#00FF00")},shutdown:function(){}};var NeoGame=NeoGame||{};NeoGame.QuestionsState=function(a){},NeoGame.QuestionsState.prototype={resetValues:function(){NeoGame.PlayState.onLevelReached=new Phaser.Signal,NeoGame.PlayState.onLevelLanded=new Phaser.Signal,this.gameIsOver=!1,this.dead=!1,this.player=null,this.platformGroup=null,this.obstacleGroup=null,this.questionGroup=null,this.travelSpeed=20,this.allowTravel=!1,this.waitingForQuestion=!1,this.waitingToStopLevelPlatform=!1,NeoGame.PlatformGenerator.platformAmount=0,NeoGame.BackgroundController.reset()},init:function(a){this.resetValues(),NeoGame.onGamePaused.add(function(a){this.waitingForQuestion||(this.allowTravel=!a,this.userControls.allowControls=!a,NeoGame.Model.setPaused(a),a?this.stopPlatforms():this.resumePlatforms())},this),this.stateData=a,debug.debug("this.stateData: ",this.stateData),this.game.physics.startSystem(Phaser.Physics.ARCADE)},create:function(){this.player=new NeoGame.Player(this.game,-100,700),NeoGame.PlayState.player=this.player,this.player.body.velocity.x=this.player.SPEED,this.player.goIdle(),NeoGame.Model.setLevel(0),NeoGame.QuestionController.init(this.game,!1),this.initLevel(),this.hud=new NeoGame.Hud(this.game,0,0),this.game.add.existing(this.hud),NeoGame.Model.setCoins(0),NeoGame.Model.setLevel(1),NeoGame.Model.setLives(NeoGame.settings.totalLives),this.blocker=this.game.add.sprite(0,0,"game-assets","platform-1"),this.blocker.width=this.game.width,this.blocker.height=this.game.height,this.blocker.alpha=0,this.blocker.inputEnabled=!0,this.buildQuestions()},initLevel:function(){this.bounds=this.game.add.group(),this.bounds.enableBody=!0;var a=this.bounds.create(-10,-500);a.width=10,a.height=this.game.world.height+500;var b=this.bounds.create(this.game.world.bounds.right,a.y);b.width=a.width,b.height=a.height,this.bounds.setAll("body.allowGravity",!1),this.bounds.setAll("body.immovable",!0),this.platformGroup=this.game.add.group(),this.platformGroup.enableBody=!0,this.platformGroup.create(0,740,"game-assets","platform-ground").anchor.set(1,0),this.obstacleGroup=this.game.add.group(),this.obstacleGroup.enableBody=!0,this.questionGroup=this.game.add.group(),this.questionGroup.enableBody=!0,NeoGame.PlatformGenerator.init(this.platformGroup,this.obstacleGroup,this.questionGroup),NeoGame.PlatformGenerator.add("level",this.game.height-20),this.stopPlatforms()},dropLevel:function(a,b){debug.debug("dropLevel:"+a),NeoGame.BackgroundController.next(),this.platformGroup.setAll("body.velocity.y",NeoGame.settings.levelLandedDropSpeed),this.obstacleGroup.setAll("body.velocity.y",NeoGame.settings.levelLandedDropSpeed),this.questionGroup.setAll("body.velocity.y",NeoGame.settings.levelLandedDropSpeed),this.waitingForQuestion=!0,this.allowTravel=!1,this.userControls.allowControls=!1,this.userControls.hide(),this.player.goIdle(!0)},stopPlatforms:function(){this.platformGroup.setAll("body.velocity.y",0),this.obstacleGroup.setAll("body.velocity.y",0),this.questionGroup.setAll("body.velocity.y",0)},update:function(){NeoGame.Model.getPaused()||this.allowTravel&&(this.travelSpeed=Math.min(this.travelSpeed+=+NeoGame.settings.travelSpeedIncreaseRate,NeoGame.settings.travelSpeedMax),this.platformGroup.setAll("body.velocity.y",this.travelSpeed),this.obstacleGroup.setAll("body.velocity.y",this.travelSpeed),this.questionGroup.setAll("body.velocity.y",this.travelSpeed))},buildQuestions:function(){var a=this.game.add.group(),b=NeoGame.game.add.bitmapText(this.game.world.centerX,128,"Blue_52","QUESTION:",32);b.align="center",b.anchor.setTo(.5,0),a.add(b),this.questionText=NeoGame.game.add.bitmapText(this.game.world.centerX,175,"Blue_52","-",52),this.questionText.align="center",this.questionText.anchor.setTo(.5,0),this.questionText.wordWrap=!0,this.questionText.maxWidth=610,a.add(this.questionText),this.left_btn=this.game.add.button(68,this.questionText.y+this.questionText.height+80,"ui-assets",function(){},this,"answer-A-selected","answer-A","answer-A-selected"),this.left_btn.anchor.set(.5),a.add(this.left_btn),this.left_btn.inputEnabled=!1,this.answerA=NeoGame.game.add.bitmapText(55,-40,"White_65","-",36),this.answerA.align="left",this.answerA.wordWrap=!0,this.answerA.maxWidth=185,this.left_btn.addChild(this.answerA),this.right_btn=this.game.add.button(368,this.questionText.y+this.questionText.height+80,"ui-assets",function(){},this,"answer-B-selected","answer-B","answer-B-selected"),this.right_btn.anchor.set(.5),a.add(this.right_btn),this.right_btn.inputEnabled=!1,this.answerB=NeoGame.game.add.bitmapText(55,-40,"White_65","-",36),this.answerB.align="left",this.answerB.wordWrap=!0,this.answerB.maxWidth=185,this.right_btn.addChild(this.answerB),this.currentQuestionNum=0;var c=[];this.cachedQuestionData=NeoGame.game.cache.getJSON("data").questions,this.cachedQuestionData.forEach(function(a){c.push(a)},this),this.counterText=NeoGame.game.add.bitmapText(this.game.world.centerX,this.game.world.height-60,"White_65","-",30),this.counterText.align="center",this.counterText.anchor.setTo(.5,0),this.setQuestion(this.cachedQuestionData[0]);var d=this.game.add.button(this.game.world.centerX+110,this.game.height-45,"ui-assets",function(){this.currentQuestionNum++,this.currentQuestionNum>this.cachedQuestionData.length-1&&(this.currentQuestionNum=0),this.setQuestion(this.cachedQuestionData[this.currentQuestionNum])},this,"button-mobile-controls-right-up","button-mobile-controls-right","button-mobile-controls-right-up","button-mobile-controls-right");d.anchor.set(.5),d.scale.set(.5);var e=this.game.add.button(this.game.world.centerX-110,this.game.height-45,"ui-assets",function(){this.currentQuestionNum--,this.currentQuestionNum<=0&&(this.currentQuestionNum=this.cachedQuestionData.length-1),this.setQuestion(this.cachedQuestionData[this.currentQuestionNum])},this,"button-mobile-controls-left-up","button-mobile-controls-left","button-mobile-controls-left-up","button-mobile-controls-left");e.anchor.set(.5),e.scale.set(.5)},setQuestion:function(a){this.counterText.text=this.currentQuestionNum+1+" of "+this.cachedQuestionData.length;var b,c,d=Phaser.Utils.chanceRoll();d?(b=a.correct,c=a.incorrect,this.answerA.tint="0xffd800",this.answerB.tint="0xffffff"):(b=a.incorrect,c=a.correct,this.answerA.tint="0xffffff",this.answerB.tint="0xffd800"),this.answerA.text=b,this.answerB.text=c,this.questionText.text=a.question,this.left_btn.y=this.questionText.y+this.questionText.height+80,this.right_btn.y=this.questionText.y+this.questionText.height+80},render:function(){"1"==getQueryString("fps")&&this.game.debug.text(this.game.time.fps+"fps"||"--",10,this.game.world.height-20,"#00FF00")},shutdown:function(){}};var NeoGame=NeoGame||{};NeoGame.MuteButton=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"ui-assets","audio-on"),this.isMuted=!1,this.inputEnabled=!0,this.input.useHandCursor=!0,this.events.onInputUp.add(function(){this.game.sound.mute=!this.game.sound.mute,this.game.sound.mute?this.frameName="audio-off":this.frameName="audio-on"},this)},NeoGame.MuteButton.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.MuteButton.prototype.constructor=NeoGame.MuteButton;var NeoGame=NeoGame||{};NeoGame.Player=function(a,b,c,d,e){Phaser.Sprite.call(this,a,b,c,"player-assets"),this.touchingDown=!1,this.immune=!1,this.hurtVelocityX=0,this.hurtVelocityY=0,this.runSound=a.add.audio("zeus-run-steps"),this.runSound.loop=!0,this.runSound.play(),this.runSound.volume=.25,this.runSound.allowMultiple=!1,this.anchor.setTo(.5,1),this.scale.setTo(NeoGame.settings.playerScale),this.smoothed=!0,this.currentAnim="",this.verticalDirection=0,this.onFloor=!1,this.facing="right",this.ready=!1,this.runningToAthena=!1,this.didJumpFirstTime=!1,this.onFirstJump=new Phaser.Signal,this.onDamage=new Phaser.Signal,this.onDamageRecover=new Phaser.Signal,this.game.physics.arcade.enable(this),this.body.setSize(50,114,68,60),this.GRAVITY=NeoGame.settings.gravity,this.SPEED=NeoGame.settings.playerSpeed,this.JUMP_HEIGHT=NeoGame.settings.playerJumpVelocity,this.DOUBLE_JUMP_AMOUNT=NeoGame.settings.doubleJumpAmount,this.animations.add("idleRight",Phaser.Animation.generateFrameNames("idleRIght/idleRIght",1,11,"",4),12,!0),this.animations.add("runRight",["runRIght/runRIght0004","runRIght/runRIght0005","runRIght/runRIght0006","runRIght/runRIght0007","runRIght/runRIght0008","runRIght/runRIght0001","runRIght/runRIght0002","runRIght/runRIght0003"],12,!0),this.animations.add("runLeft",["runLeft/runLeft0004","runLeft/runLeft0005","runLeft/runLeft0006","runLeft/runLeft0007","runLeft/runLeft0008","runLeft/runLeft0001","runLeft/runLeft0002","runLeft/runLeft0003"],12,!0),this.animations.add("idleLeft",Phaser.Animation.generateFrameNames("idleLeft/idleLeft",1,11,"",4),12,!0),this.animations.add("jumpLeft",["jumpLeft/jumpLeft0001","jumpLeft/jumpLeft0002","jumpLeft/jumpLeft0003","jumpLeft/jumpLeft0004","jumpLeft/jumpLeft0005","fallLeft/fallLeft0001","fallLeft/fallLeft0002","fallLeft/fallLeft0003","fallLeft/fallLeft0004"],12,!1,!1),this.animations.add("jumpRight",["jumpRight/jumpRight0001","jumpRight/jumpRight0002","jumpRight/jumpRight0003","jumpRight/jumpRight0004","jumpRight/jumpRight0005","fallRight/fallRight0001","fallRight/fallRight0002","fallRight/fallRight0003","fallRight/fallRight0004"],12,!1,!1),this.animations.add("fallLeft",Phaser.Animation.generateFrameNames("fallLeft/fallLeft",1,4,"",4),12,!0),this.animations.add("fallRight",Phaser.Animation.generateFrameNames("fallRight/fallRight",1,4,"",4),12,!0),this.animations.add("thinkLeft",Phaser.Animation.generateFrameNames("thinkLeft/thinkLeft",1,11,"",4),12,!0),this.animations.add("thinkRight",Phaser.Animation.generateFrameNames("thinkRIght/thinkRIght",1,11,"",4),12,!0),this.playAnim("runRight"),this.game.physics.arcade.gravity.y=this.GRAVITY,NeoGame.Player.player=this},NeoGame.Player.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.Player.prototype.constructor=NeoGame.Player,NeoGame.Player.prototype.die=function(a){debug.debug("KILL HERO"),NeoGame.G.gameReady=!1,NeoGame.G.allowDig=!1,NeoGame.game.tweens.removeFrom(NeoGame.G.hero),this.animations.stop(),this.playAnim("die"),NeoGame.game.time.events.add(500,function(){NeoGame.G.music.stop(),NeoGame.G.music.destroy(),NeoGame.Utils.playSound("game-over",1)},NeoGame.game),NeoGame.game.time.events.add(2e3,function(){NeoGame.game.state.start("gameover")},NeoGame.game)},NeoGame.Player.prototype.playAnim=function(a){this.animations.stop(),this.currentAnim=a,this.animations.play(this.currentAnim)},NeoGame.Player.prototype.updatePlayerMovement=function(){this.ready&&!this.runningToAthena&&(this.body.velocity.x=0+this.hurtVelocityX),this.body.velocity.y>0?this.verticalDirection=1:this.body.velocity.y<0?this.verticalDirection=-1:this.verticalDirection=0},NeoGame.Player.prototype.goLeft=function(){this.facing="left",this.touchingDown?(this.animations.play("runLeft"),this.playRunSound()):this.verticalDirection<0?this.animations.play("jumpLeft"):(this.animations.play("fallLeft"),this.onFloor=!1),this.body.velocity.x=-this.SPEED},NeoGame.Player.prototype.goRight=function(){this.facing="right",this.touchingDown?(this.animations.play("runRight"),this.playRunSound()):this.verticalDirection<0?this.animations.play("jumpRight"):(this.animations.play("fallRight"),this.onFloor=!1),this.body.velocity.x=this.SPEED},NeoGame.Player.prototype.playRunSound=function(a){this.runSound.isPlaying||(this.runSound.volume=.2,this.runSound.restart("",0,.5))},NeoGame.Player.prototype.stopRunSound=function(a){this.runSound.pause()},NeoGame.Player.prototype.doJump=function(a){this.onFloor=!1,this.stopRunSound(),this.didJumpFirstTime||(this.didJumpFirstTime=!0,this.onFirstJump.dispatch()),"left"==this.facing?this.playAnim("jumpLeft"):this.playAnim("jumpRight"),NeoGame.Utils.playSound("zeus-jump");var b=a?this.JUMP_HEIGHT*NeoGame.settings.doubleJumpHeightMultiplier:this.JUMP_HEIGHT;b-=NeoGame.travelSpeed,this.body.velocity.y=-b-Math.abs(this.body.velocity.x*NeoGame.settings.playerRunningJumpVelocityMultiplier)+this.hurtVelocityY},NeoGame.Player.prototype.goIdle=function(a){this.stopRunSound(),
(this.body.touching.down||a)&&("left"==this.facing?this.animations.play("idleLeft"):this.animations.play("idleRight"))},NeoGame.Player.prototype.goThink=function(){this.stopRunSound(),this.body.touching.down&&("left"==this.facing?this.animations.play("thinkLeft"):this.animations.play("thinkRight"))},NeoGame.Player.prototype.goHurt=function(){this.stopRunSound(),"left"==this.facing?this.animations.play("fallLeft"):this.animations.play("fallRight")},NeoGame.Player.prototype.takeDamage=function(a,b){if(!this.immune&&NeoGame.allowTravel){if("1"==getQueryString("flappy"))return;"obstacle-trident"==b.frameName?NeoGame.Utils.playSound("obstacle-trident"):NeoGame.Utils.playSound("obstacle-rocks"),this.immune=!0,this.game.add.tween(this).from({alpha:.5},90,Phaser.Easing.Linear.None,!0,null,8,!0).onComplete.add(function(){this.immune=!1,this.alpha=1},this),this.onDamage.dispatch(),this.body.position.x<b.body.position.x?this.hurtVelocityX=-NeoGame.settings.playerHurtVelocityX:this.hurtVelocityX=NeoGame.settings.playerHurtVelocityX,this.body.velocity.y=NeoGame.settings.playerHurtVelocityY,this.goHurt(),NeoGame.game.time.events.add(500,function(){this.hurtVelocityX=0,this.hurtVelocityY=0,this.onDamageRecover.dispatch()},this)}};var NeoGame=NeoGame||{};NeoGame.Athena=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"athena-assets"),this.isAthena=!0,this.anchor.setTo(.5,1),this.scale.setTo(NeoGame.settings.athenaScale),this.smoothed=!0,this.currentAnim="",this.game.physics.arcade.enable(this),this.body.checkCollision.up=!1,this.body.checkCollision.down=!1,this.body.checkCollision.left=!1,this.body.checkCollision.right=!1,this.body.allowGravity=!1,this.body.immovable=!1,this.happyLoop=this.animations.add("happy",Phaser.Animation.generateFrameNames("happyLoop/happyLoop",1,15,"",4),12,!0),this.animations.add("sad",Phaser.Animation.generateFrameNames("happyToSad/happyToSad",1,13,"",4),12,!1),this.sadToHappy=this.animations.add("sadToHappy",Phaser.Animation.generateFrameNames("sadToHappy/sadToHappy",1,7,"",4),12,!1),this.makeHappy(),NeoGame.QuestionController.onAnswered.add(function(a){a||this.makeSad()},this),NeoGame.QuestionController.onNewQuestion.add(function(a){"tryingAgain"==a&&this.resetHappy()},this)},NeoGame.Athena.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.Athena.prototype.constructor=NeoGame.Athena,NeoGame.Athena.prototype.makeSad=function(){this.happyLoop.loop=!1},NeoGame.Athena.prototype.resetHappy=function(){this.playAnim("sadToHappy"),this.sadToHappy.onComplete.add(function(){this.makeHappy()},this)},NeoGame.Athena.prototype.makeHappy=function(){this.happyLoop.loop=!0,this.playAnim("happy"),this.happyLoop.onComplete.add(function(){this.playAnim("sad")},this)},NeoGame.Athena.prototype.playAnim=function(a){this.currentAnim=a,this.animations.play(this.currentAnim)};var NeoGame=NeoGame||{};NeoGame.Hud=function(a,b,c,d,e){Phaser.Sprite.call(this,a,b,c,d,e);var f=this.game.add.sprite(this.game.world.centerX,0,"uncompressed-assets","top-gradient");f.width=1.5*this.game.width,f.anchor.set(.5,0),f.alpha=.7;var g=this.game.add.sprite(this.game.world.centerX,this.game.world.height,"uncompressed-assets","bottom-gradient");g.width=1.5*this.game.world.width,g.anchor.set(.5,1);var h=this.game.add.button(60,50,"ui-assets",function(){NeoGame.Utils.playMainButtonSound(),NeoGame.initGamePause.dispatch()},this,"button-pause","button-pause","button-pause-up","button-pause");h.anchor.set(.5),this.addChild(h);var i=NeoGame.game.add.bitmapText(h.x+45,h.y+20,"Yellow_78",NeoGame.copy.LEVEL,30);i.align="left",i.anchor.set(0,1),this.addChild(i),this.levelText=NeoGame.game.add.bitmapText(i.x+i.width+8,i.y+2,"Yellow_78","-",40),this.levelText.align="left",this.levelText.anchor.set(0,1),this.addChild(this.levelText);var j=this.game.add.sprite(this.game.world.centerX-40,25,"ui-assets","hud-coin");this.addChild(j),this.coinScoreText=NeoGame.game.add.bitmapText(j.x+50,12,"Yellow_78",NeoGame.Model.getCoins(),64),this.coinScoreText.align="left",this.coinScoreText.anchor.setTo(0,0),this.addChild(this.coinScoreText);var k=this.game.add.sprite(this.game.width-53,28,"ui-assets","hud-heart");k.anchor.set(1,0),this.addChild(k),this.livesText=NeoGame.game.add.bitmapText(k.x-58,k.y+43,"Yellow_78",NeoGame.Model.getLives(),44),this.livesText.align="right",this.livesText.anchor.setTo(1,1),this.addChild(this.livesText),NeoGame.Model.levelChangeSignal.add(function(a){this.levelText.text=a},this),NeoGame.Model.coinsChangeSignal.add(function(a){this.coinScoreText.font=a<0?"Red_78":"Yellow_78",this.coinScoreText.text=NeoGame.Utils.commaFormatNumber(a)},this),NeoGame.Model.livesChangeSignal.add(function(a){this.livesText.text=a},this),this.events.onDestroy.addOnce(this.cleanUp)},NeoGame.Hud.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.Hud.prototype.constructor=NeoGame.Hud,NeoGame.Hud.prototype.cleanUp=function(){debug.debug("cleaning up the HUD"),NeoGame.Model.levelChangeSignal.removeAll(),NeoGame.Model.coinsChangeSignal.removeAll(),NeoGame.Model.livesChangeSignal.removeAll()};var NeoGame=NeoGame||{};NeoGame.Platform=function(a,b,c,d){var e;switch(d){case 1:case 2:case 3:case 4:e="platform-"+d.toString();break;default:e="platform-4"}Phaser.Sprite.call(this,a,b,c,"game-assets",e),this.minX=null,this.maxX=null,this.isMoving=!1,this.isBreakAway=!1,this.isBreaking=!1,this.speed=100,this.platformSize=d,this.game.physics.arcade.enable(this),this.body.allowGravity=!1,this.body.immovable=!0,this.body.checkCollision.up=!0,this.body.checkCollision.down=!1,this.body.checkCollision.left=!1,this.body.checkCollision.right=!1},NeoGame.Platform.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.Platform.prototype.constructor=NeoGame.Platform,NeoGame.Platform.prototype.InitBreakAway=function(){this.isBreakAway=!0,this.tint=12452097},NeoGame.Platform.prototype.StartMoving=function(a,b){this.minX=a||0,this.maxX=b||NeoGame.game.world.width-this.width,this.isMoving=!0,this.body.velocity.x=Phaser.Utils.chanceRoll(50)?-this.speed:this.speed},NeoGame.Platform.prototype.drop=function(){this.game.add.tween(this).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,500).onComplete.add(function(){this.destroy()},this)},NeoGame.Platform.prototype.updatePhysics=function(){if(this.isMoving&&(this.x<=this.minX?this.body.velocity.x=this.speed:this.x>=this.maxX&&(this.body.velocity.x=-this.speed)),this.isBreakAway&&!this.isBreaking){this.game.physics.arcade.collide(NeoGame.Player.player,this,function(a,b){a.touchingDown&&(debug.debug("!!!!!!!!!!!!player landed on breakaway platform"),this.drop(),b.isBreaking=!0)},null,this)}};var NeoGame=NeoGame||{};NeoGame.LevelPlatform=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"game-assets","platform-level"),this.isLevel=!0,this.reached=!1,this.landed=!1,this.hitArea=null,this.game.physics.arcade.enable(this),this.enableBody=!0,this.body.allowGravity=!1,this.body.immovable=!0,this.body.checkCollision.up=!0,this.body.checkCollision.down=!1,this.body.checkCollision.left=!1,this.body.checkCollision.right=!1},NeoGame.LevelPlatform.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.LevelPlatform.prototype.constructor=NeoGame.LevelPlatform,NeoGame.LevelPlatform.prototype.init=function(){var a=new NeoGame.LevelPlaque(this.game,this.game.world.centerX,12,NeoGame.Model.getLevel()+1);a.anchor.set(.5,0),this.addChild(a),this.hitArea=this.game.make.sprite(this.game.world.centerX,.5*-NeoGame.PlayState.player.height,"game-assets","level-plaque"),this.hitArea.alpha=0,this.hitArea.anchor.set(.5,1),this.hitArea.width=this.game.width,this.hitArea.height=150,this.game.physics.arcade.enable(this.hitArea),this.hitArea.body.immovable=!0,this.hitArea.body.allowGravity=!1,this.addChild(this.hitArea),NeoGame.PlatformGenerator.reset(),this.firstPlatform=NeoGame.PlatformGenerator.add(["0004","0003"].random(),"-100"),NeoGame.PlatformGenerator.add(),NeoGame.PlatformGenerator.add(),NeoGame.PlatformGenerator.add(),1!=NeoGame.Model.getLevel()||NeoGame.level2MovingForced||(NeoGame.PlatformGenerator.incrementMovingProbability(),NeoGame.PlatformGenerator.forceMovingPlatform()),NeoGame.PlatformGenerator.add(),NeoGame.PlatformGenerator.add();var b=this.game.add.sprite(0,this.y,"ui-assets","level-platform-bg");b.height=this.game.height,b.anchor.set(0,1),NeoGame.PlatformGenerator.questionGroup.add(b);var c=this.game.add.sprite(0,this.y-120,"uncompressed-assets","question-bg");c.alpha=0,c.height=this.game.height,c.anchor.set(0,1),NeoGame.PlatformGenerator.questionGroup.add(c),NeoGame.PlayState.onLevelReached.addOnce(function(a,b){this&&this.game&&this.game.add.tween(c).to({alpha:1},200,Phaser.Easing.Linear.None,!0)},this),NeoGame.QuestionController.onContinue.addOnce(function(a){if(this&&this.game){NeoGame.game.add.tween(c).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,0).onComplete.addOnce(function(){c.destroy()})}},this),NeoGame.QuestionController.onAnswered.addOnce(function(a){this&&this.game&&this.game.add.tween(c).to({alpha:0},500,Phaser.Easing.Linear.None,!0)},this),NeoGame.QuestionController.onNewQuestion.addOnce(function(a){"tryingAgain"==a&&this&&this.game&&this.game.add.tween(c).to({alpha:1},200,Phaser.Easing.Linear.None,!0)},this);var d=new NeoGame.Athena(this.game,110,this.y+5);NeoGame.PlatformGenerator.questionGroup.add(d),NeoGame.QuestionController.onContinue.addOnce(function(){if(this&&this.game){this.firstPlatform.body.checkCollision.up=!0,this.isfirstPlatformBodyEnabled=!0;NeoGame.game.add.tween(d).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,2e3).onComplete.addOnce(function(){d.destroy()});NeoGame.game.add.tween(b).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,0).onComplete.addOnce(function(){b.destroy()})}},this),this.standingPosition=this.game.add.sprite(this.game.world.centerX+50,0,"game-assets","platform-1"),this.standingPosition.alpha=0,this.standingPosition.tint=16711680,this.game.physics.arcade.enable(this.standingPosition),this.standingPosition.body.immovable=!0,this.standingPosition.body.allowGravity=!1,this.standingPosition.body.checkCollision.up=!1,this.standingPosition.body.checkCollision.down=!1,this.standingPosition.body.checkCollision.left=!1,this.standingPosition.body.checkCollision.right=!1,this.standingPosition.anchor.set(.5,1),this.addChild(this.standingPosition),NeoGame.LevelPlatform.standingPosition=this.standingPosition,this.events.onDestroy.addOnce(this.cleanUp)},NeoGame.LevelPlatform.prototype.update=function(){this.firstPlatform&&!this.isfirstPlatformBodyEnabled&&(this.firstPlatform.body.checkCollision.up=!1),!this.reached&&this.y>=this.game.height-this.height&&(this.reached=!0,NeoGame.PlayState.onLevelReached.dispatch(NeoGame.Model.getLevel(),this)),!this.landed&&this.y>0&&this.game.physics.arcade.overlap(NeoGame.PlayState.player,this.hitArea,function(){this.landed=!0,NeoGame.PlayState.onLevelLanded.dispatch(NeoGame.Model.getLevel(),this)},null,this)},NeoGame.LevelPlatform.prototype.cleanUp=function(){NeoGame.QuestionController.onContinue.removeAll(this),NeoGame.QuestionController.onAnswered.removeAll(this),NeoGame.QuestionController.onNewQuestion.removeAll(this),NeoGame.PlayState.onLevelReached.removeAll(this),NeoGame.LevelPlatform.standingPosition=null};var NeoGame=NeoGame||{};NeoGame.UserControls=function(a,b,c,d){Phaser.Sprite.call(this,a,c,d),this.player=b,this.allowControls=!1,this.downKey=null,this.upKey=null,this.leftKey=null,this.rightKey=null,this.spaceKey=null,this.face="left",this.game.device.desktop?this.initKeyboardControls():(this.isJumpKeyUp=!0,this.initMobileControls())},NeoGame.UserControls.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.UserControls.prototype.constructor=NeoGame.UserControls,NeoGame.UserControls.prototype.update=function(){NeoGame.Model.getPaused()||(this.player.updatePlayerMovement(),this.allowControls&&this.inputControlsMethod(),this.player.body.touching.down?this.player.touchingDown=!0:this.player.touchingDown=!1)},NeoGame.UserControls.prototype.initKeyboardControls=function(){this.inputControlsMethod=this.updateDesktopControls,this.cursors=this.game.input.keyboard.createCursorKeys(),this.KeyA=this.game.input.keyboard.addKey(Phaser.Keyboard.A),this.KeyD=this.game.input.keyboard.addKey(Phaser.Keyboard.D),this.KeyW=this.game.input.keyboard.addKey(Phaser.Keyboard.W),this.game.input.keyboard.callbackContext=this,this.game.input.keyboard.onDownCallback=function(a){a.keyCode!=Phaser.Keyboard.UP&&a.keyCode!=Phaser.Keyboard.SPACEBAR&&a.keyCode!=Phaser.Keyboard.W||(this.jump(),this.isJumpKeyUp=!1)},this.game.input.keyboard.onUpCallback=function(a){a.keyCode!=Phaser.Keyboard.UP&&a.keyCode!=Phaser.Keyboard.SPACEBAR&&a.keyCode!=Phaser.Keyboard.W||this.jumpKeyUp()}},NeoGame.UserControls.prototype.jumpKeyUp=function(){this.isJumpKeyUp=!0},NeoGame.UserControls.prototype.initMobileControls=function(){this.inputControlsMethod=this.updateMobileControls;var a=this.game.make.button(512,0,"ui-assets",null,this,"button-mobile-controls-jump-up","button-mobile-controls-jump","button-mobile-controls-jump-up","button-mobile-controls-jump");this.addChild(a),a.anchor.set(.5),a.alpha=.8,a.onInputDown.add(function(){this.jump()},this);var b=this.game.make.button(282,0,"ui-assets",null,this,"button-mobile-controls-right-up","button-mobile-controls-right","button-mobile-controls-right-up","button-mobile-controls-right");this.addChild(b),b.anchor.set(.5),b.alpha=.8,b.events.onInputDown.add(function(){this.rightIsDown=!0,this.leftIsDown=!1},this),b.events.onInputUp.add(function(){this.rightIsDown=!1,this.leftIsDown=!1},this),b.events.onInputOver.add(function(){this.rightIsDown=!0,this.leftIsDown=!1},this),b.events.onInputOut.add(function(){this.rightIsDown=!1,this.leftIsDown=!1},this);var c=this.game.make.button(122,0,"ui-assets",null,this,"button-mobile-controls-left-up","button-mobile-controls-left","button-mobile-controls-left-up","button-mobile-controls-left");this.addChild(c),c.anchor.set(.5),c.alpha=.8,c.events.onInputDown.add(function(){this.leftIsDown=!0,this.rightIsDown=!1},this),c.events.onInputUp.add(function(){this.leftIsDown=!1,this.rightIsDown=!1},this),c.events.onInputOver.add(function(){this.leftIsDown=!0,this.rightIsDown=!1},this),c.events.onInputOut.add(function(){this.leftIsDown=!1,this.rightIsDown=!1},this)},NeoGame.UserControls.prototype.updateDesktopControls=function(){this.cursors.left.isDown||this.KeyA.isDown?this.player.goLeft():this.cursors.right.isDown||this.KeyD.isDown?this.player.goRight():this.player.goIdle()},NeoGame.UserControls.prototype.updateMobileControls=function(){this.leftIsDown?this.player.goLeft():this.rightIsDown?this.player.goRight():this.player.goIdle()},NeoGame.UserControls.prototype.jump=function(){this.allowControls&&(this.player.body.touching.down?(this.DOUBLE_JUMP_AMOUNT=NeoGame.settings.doubleJumpAmount,this.player.doJump()):this.DOUBLE_JUMP_AMOUNT>0&&this.isJumpKeyUp&&(this.DOUBLE_JUMP_AMOUNT--,this.DOUBLE_JUMP_AMOUNT<0&&(this.DOUBLE_JUMP_AMOUNT=0),this.player.doJump(!0)))},NeoGame.UserControls.prototype.show=function(){this.visible=!0},NeoGame.UserControls.prototype.hide=function(){this.visible=!1};var NeoGame=NeoGame||{};NeoGame.LevelPlaque=function(a,b,c,d){Phaser.Sprite.call(this,a,b,c,"game-assets","level-plaque");var e=this.game.make.bitmapText(0,0,"Yellow_84",NeoGame.copy.LEVEL+" "+d,30);e.align="center",e.anchor.setTo(.5,0),this.addChild(e)},NeoGame.LevelPlaque.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.LevelPlaque.prototype.constructor=NeoGame.LevelPlaque;var NeoGame=NeoGame||{};NeoGame.Feedback=function(a,b){Phaser.Sprite.call(this,a,a.world.centerX,a.world.centerY-90),this.anchor.set(.5),this.visible=!1,1==b?(this.correct(),this.visible=!0,NeoGame.Utils.stretchyScale(this,100)):(this.incorrect(),this.visible=!0,this.game.add.tween(this).from({alpha:0},1e3,Phaser.Easing.Linear.None,!0,100),this.game.add.tween(this.scale).from({x:.5,y:.5},1e3,Phaser.Easing.Linear.None,!0,100))},NeoGame.Feedback.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.Feedback.prototype.constructor=NeoGame.Feedback,NeoGame.Feedback.prototype.correct=function(){NeoGame.Utils.playSound("question-correct-answer"),NeoGame.game.time.events.add(1e3,function(){this.game.time.events.repeat(.1*Phaser.Timer.SECOND,NeoGame.settings.questionCoinReward,function(){NeoGame.Utils.playSound("sfx-coin-loss",.65);var a=this.game.add.sprite(-44+NeoGame.game.rnd.integerInRange(-10,10),-80,"ui-assets","hud-coin");a.anchor.set(.5),a.scale.set(NeoGame.Utils.getRandomFloat(.5,1)),this.addChild(a),this.game.add.tween(a).to({x:-10,y:-300},250,Phaser.Easing.Linear.None,!0).onComplete.add(function(){NeoGame.Model.setCoins(NeoGame.Model.getCoins()+1)},this),this.game.add.tween(a).to({alpha:0},100,Phaser.Easing.Linear.None,!0,150)},this),NeoGame.game.time.events.add(100*NeoGame.settings.questionCoinReward,function(){g.visible=!0,this.game.add.tween(g).to({alpha:1},300,Phaser.Easing.Linear.None,!0),this.game.add.tween(g.scale).from({x:.5,y:.5},300,Phaser.Easing.Back.Out,!0)},this)},this);var a=this.game.add.sprite(0,0,"ui-assets","badge-correct");a.anchor.set(.5),this.addChild(a);var b=new NeoGame.CoinGlow(this.game,-44,-80);this.addChild(b);var c=this.game.add.sprite(-44,-80,"ui-assets","hud-coin");c.anchor.set(.5),c.scale.set(1.1),this.addChild(c);var d=NeoGame.game.add.bitmapText(-9,-124,"Yellow_84","+",61);d.align="right",d.anchor.setTo(0),this.addChild(d);var e=NeoGame.game.add.bitmapText(20,-124,"Yellow_84",NeoGame.settings.questionCoinReward,83);e.align="left",e.anchor.setTo(0),this.addChild(e);var f=NeoGame.game.add.bitmapText(0,-5,"White_65",NeoGame.copy.POSITIVE_FEEDBACK_OPTIONS.random(),64);f.align="center",f.anchor.setTo(.5),this.addChild(f);var g=this.game.add.button(0,80,"ui-assets",function(){g.inputEnabled=!1,NeoGame.Model.setPaused(!1),NeoGame.onGamePaused.dispatch(NeoGame.Model.getPaused()),NeoGame.QuestionController.isAsking=!1,NeoGame.QuestionController.onContinue.dispatch(),this.destroy()},this,"button-continue","button-continue","button-continue-up","button-continue");g.alpha=0,g.visible=!1,g.anchor.set(.5),this.addChild(g)},NeoGame.Feedback.prototype.incorrect=function(){NeoGame.Utils.playSound("question-incorrect-answer"),NeoGame.Model.setLives(NeoGame.Model.getLives()-1);var a=this.game.add.sprite(0,0,"ui-assets","badge-incorrect");a.anchor.set(.5),this.addChild(a);var b=NeoGame.game.add.bitmapText(-48,-140,"Yellow_84","-",61);b.align="right",b.anchor.setTo(0),this.addChild(b);var c=this.game.add.sprite(6,-106,"ui-assets","hud-heart");c.anchor.set(.5),this.addChild(c);var d=NeoGame.game.add.bitmapText(0,-58,"White_65",NeoGame.copy.YOU_LOST_A_LIFE,36);d.align="center",d.anchor.setTo(.5),this.addChild(d);var e=NeoGame.game.add.bitmapText(0,-5,"White_65",NeoGame.copy.NEGATIVE_FEEDBACK_OPTIONS.random(),64);e.align="center",e.anchor.setTo(.5),this.addChild(e);var f=this.game.add.button(0,88,"ui-assets",function(){f.inputEnabled=!1,NeoGame.Model.getLives()<=0?this.game.state.start("gameover",!0,!1):(NeoGame.QuestionController.add(),NeoGame.QuestionController.onNewQuestion.dispatch("tryingAgain")),this.destroy()},this,"button-ok","button-ok","button-ok-up","button-ok");f.anchor.set(.5),this.addChild(f),this.game.add.tween(f).from({alpha:0},300,Phaser.Easing.Linear.None,!0,300),this.game.add.tween(f.scale).from({x:.5,y:.5},300,Phaser.Easing.Back.Out,!0,300)};var NeoGame=NeoGame||{};NeoGame.Coin=function(a,b,c){Phaser.Sprite.call(this,a,b,c,"game-assets"),this.anchor.set(.5),this.scale.set(.5),this.animations.add("loop",["coin_0001","coin_0002","coin_0003","coin_0004","coin_0005","coin_0006"],8,!0),this.animations.play("loop")},NeoGame.Coin.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.Coin.prototype.constructor=NeoGame.Coin;var NeoGame=NeoGame||{};NeoGame.CoinGlow=function(a,b,c){Phaser.Sprite.call(this,a,b,c),this.anchor.set(.5);var d=2e4;this.glow1=this.game.add.sprite(0,0,"ui-assets","coin-glow"),this.glow1.anchor.set(.5),this.glow1.scale.set(.9,.9),this.glow1.alpha=.65,this.addChild(this.glow1),this.game.add.tween(this.glow1).to({angle:360},d,Phaser.Easing.Linear.None,!0).loop(!0),this.glow2=this.game.add.sprite(0,0,"ui-assets","coin-glow"),this.glow2.anchor.set(.5),this.glow2.scale.set(-.9,.9),this.glow2.alpha=.65,this.addChild(this.glow2),this.game.add.tween(this.glow2).to({angle:-360},d,Phaser.Easing.Linear.None,!0).loop(!0);var e=this.game.add.tween(this.glow1.scale).to({x:1.1,y:1.1},1500,Phaser.Easing.Sinusoidal.InOut,!0,NeoGame.game.rnd.integerInRange(0,1e3),-1);e.yoyo(!0);var e=this.game.add.tween(this.glow2.scale).to({x:-1.1,y:1.1},1500,Phaser.Easing.Sinusoidal.InOut,!0,NeoGame.game.rnd.integerInRange(0,1e3),-1);e.yoyo(!0)},NeoGame.CoinGlow.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.CoinGlow.prototype.constructor=NeoGame.CoinGlow;var NeoGame=NeoGame||{};NeoGame.GlowingCoin=function(a,b,c){Phaser.Sprite.call(this,a,b,c),this.anchor.set(.5);var d=new NeoGame.CoinGlow(this.game,0,0);d.alpha=.5,this.addChild(d);var e=new NeoGame.Coin(this.game,0,0);e.scale.set(.8),this.addChild(e)},NeoGame.GlowingCoin.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.GlowingCoin.prototype.constructor=NeoGame.GlowingCoin;var NeoGame=NeoGame||{};NeoGame.Obstacle=function(a,b,c,d,e){Phaser.Sprite.call(this,a,b,c,d,e),this.anchor.set(.5,1),this.game.physics.arcade.enable(this),this.body.immovable=!0,this.body.allowGravity=!1},NeoGame.Obstacle.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.Obstacle.prototype.constructor=NeoGame.Obstacle,NeoGame.Obstacle.prototype.update=function(){NeoGame.Player.player.y>this.y+10||this.game.physics.arcade.overlap(NeoGame.Player.player,this,NeoGame.Player.player.takeDamage,null,NeoGame.Player.player)};var NeoGame=NeoGame||{};NeoGame.CollectCoin=function(a,b,c,d){Phaser.Sprite.call(this,a,b,c),this.anchor.set(.5),this.game.physics.arcade.enable(this),this.body.immovable=!0,this.body.allowGravity=!1,this.collected=!1,this.platform=d,this.platform&&(this.originalX=NeoGame.game.rnd.integerInRange(.5*this.width,this.platform.width-.5*this.width)),this.coinGlow=new NeoGame.GlowingCoin(this.game,0,0),this.addChild(this.coinGlow)},NeoGame.CollectCoin.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.CollectCoin.prototype.constructor=NeoGame.CollectCoin,NeoGame.CollectCoin.prototype.update=function(){this.platform&&(this.x=this.platform.x+this.originalX,this.y=this.platform.y-40),this.game.physics.arcade.overlap(NeoGame.Player.player,this,function(){if(!this.collected){var a=450;this.collected=!0;var b=NeoGame.game.world.centerX;debug.debug("playing coin sound"),NeoGame.Utils.playSound("sfx-coin"),NeoGame.Model.setCoins(NeoGame.Model.getCoins()+1),NeoGame.game.add.tween(this).to({alpha:0},a,Phaser.Easing.Linear.None,!0,.5*a),NeoGame.game.add.tween(this).to({x:b,y:40},a,Phaser.Easing.Quadratic.Out,!0).onComplete.add(function(){this.destroy()},this)}},null,this)};var NeoGame=NeoGame||{};NeoGame.DoubleTapCTA=function(a,b,c){Phaser.Sprite.call(this,a,b,c),this.triggered=!1,NeoGame.game.physics.arcade.enable(this),this.body.immovable=!0,this.body.allowGravity=!1,this.body.checkCollision.up=!0,this.body.checkCollision.down=!0,this.body.checkCollision.left=!0,this.body.checkCollision.right=!0,this.alpha=0;var d=NeoGame.game.add.bitmapText(NeoGame.game.world.centerX,90,"White_65",NeoGame.copy.DOUBLE_TAP_TO_JUMP,53);d.align="center",d.wordWrap=!0,d.maxWidth=400,d.anchor.setTo(.5,0),this.addChild(d);var e=NeoGame.game.add.sprite(NeoGame.game.world.centerX,d.y+d.height+15,"ui-assets","bolt-small");e.scale.set(.6),e.anchor.set(.5,0),this.addChild(e);var f=NeoGame.game.add.sprite(NeoGame.game.world.centerX-40,d.y-70,"ui-assets","arrow-yellow01");f.anchor.set(.5,0),this.addChild(f),this.trigger=NeoGame.game.add.sprite(0,250,"game-assets","platform-4"),this.trigger.width=this.game.width,NeoGame.game.physics.arcade.enable(this.trigger),this.trigger.body.immovable=!0,this.trigger.body.allowGravity=!1,this.trigger.alpha=0,this.trigger.body.checkCollision.up=!0,this.trigger.body.checkCollision.down=!0,this.trigger.body.checkCollision.left=!0,this.trigger.body.checkCollision.right=!0,this.addChild(this.trigger),NeoGame.Model.firstPlatformReached.addOnce(this.show)},NeoGame.DoubleTapCTA.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.DoubleTapCTA.prototype.constructor=NeoGame.DoubleTapCTA,NeoGame.DoubleTapCTA.prototype.update=function(){this.game.physics.arcade.overlap(NeoGame.Player.player,this.trigger,function(){this.triggered||(this.show(),this.triggered=!0)},null,this)},NeoGame.DoubleTapCTA.prototype.show=function(){this.game.add.tween(this).to({alpha:1},1500,Phaser.Easing.Linear.None,!0)};var NeoGame=NeoGame||{};NeoGame.PauseOverlay=function(a){Phaser.Sprite.call(this,a,0,0),NeoGame.gameMusic.pause(),NeoGame.PauseOverlay.isOpen=!0,NeoGame.startedTraveling=NeoGame.allowTravel;var b=NeoGame.Utils.addRectangle(1907997);b.inputEnabled=!0,b.alpha=.85,this.addChild(b);var c=this.game.add.group(),d=NeoGame.game.make.bitmapText(26,93,"White_65","GAME",72),e=this.game.make.sprite(44,170,"ui-assets","bolt-small"),f=this.game.make.sprite(195,98,"ui-assets","text-paused");c.add(d),c.add(e),c.add(f),this.addChild(c);var g=this.game.make.button(this.game.world.centerX,350,"ui-assets",function(){NeoGame.Utils.playMainButtonSound(),g.inputEnabled=!1,this.close()},this,"button-resume","button-resume","button-resume-up","button-resume");g.anchor.set(.5),this.addChild(g);var h=this.game.make.button(this.game.world.centerX,510,"ui-assets",function(){NeoGame.Utils.playMainButtonSound();var a=new NeoGame.HelpOverlay(this.game,"help");this.game.add.existing(a)},this,"button-help","button-help","button-help-up","button-help");h.anchor.set(.5),this.addChild(h);var i=this.game.make.button(this.game.world.centerX,680,"ui-assets",function(){NeoGame.Utils.playMainButtonSound(),NeoGame.ctaDidShow=!1,NeoGame.Model.setLevel(1),NeoGame.Model.setCoins(0),NeoGame.PlatformGenerator.resetPlatformCodes(),NeoGame.game.state.start("play",!0,!1)},this,"button-start-over","button-start-over","button-start-over-up","button-start-over");i.anchor.set(.5),this.addChild(i),this.mute_btn=this.game.make.button(this.game.world.centerX,840,"ui-assets",function(){NeoGame.Utils.playMainButtonSound(),this.toggleMute()},this,"audio-on","audio-on","audio-on","audio-on"),this.mute_btn.anchor.set(.5),this.addChild(this.mute_btn),this.checkMute(),this.game.add.tween(c).from({y:"-30"},300,Phaser.Easing.Quadratic.Out,!0),this.game.add.tween(this).from({alpha:0},300,Phaser.Easing.Linear.None,!0),NeoGame.Utils.stretchyScale(g,200),NeoGame.Utils.stretchyScale(h,300),NeoGame.Utils.stretchyScale(i,400),NeoGame.Utils.stretchyScale(this.mute_btn,500)},NeoGame.PauseOverlay.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.PauseOverlay.prototype.constructor=NeoGame.PauseOverlay,NeoGame.PauseOverlay.prototype.toggleMute=function(){NeoGame.game.sound.mute=!NeoGame.game.sound.mute,this.checkMute()},NeoGame.PauseOverlay.prototype.checkMute=function(){NeoGame.game.sound.mute?this.mute_btn.setFrames("audio-off","audio-off","audio-off","audio-off"):this.mute_btn.setFrames("audio-on","audio-on","audio-on","audio-on")},NeoGame.PauseOverlay.prototype.close=function(){"play"==this.game.state.current&&NeoGame.gameMusic.resume(),this.game.add.tween(this).to({alpha:0},300,Phaser.Easing.Linear.None,!0).onComplete.add(function(){NeoGame.QuestionController.isAsking||(NeoGame.Model.setPaused(!1),NeoGame.onGamePaused.dispatch(NeoGame.Model.getPaused())),NeoGame.PauseOverlay.isOpen=!1,this.destroy()},this)};var NeoGame=NeoGame||{};NeoGame.HelpOverlay=function(a,b){Phaser.Sprite.call(this,a,0,0),NeoGame.onGamePaused.dispatch(!0);var c=this.game.make.sprite(0,0,"uncompressed-assets","gameover-bg");c.height=this.game.height,this.addChild(c);var d=NeoGame.Utils.addRectangle(1907997);d.inputEnabled=!0,d.alpha=0,this.addChild(d);var e=this.game.add.image(this.game.world.centerX+20,140,"ui-assets","cloud");e.anchor.set(.5),e.alpha=.8,this.addChild(e);var f=this.game.add.group(),g=this.game.make.bitmapText(46,93,"White_65","HOW TO",72),h=this.game.make.sprite(110,170,"ui-assets","bolt-small"),i=this.game.make.sprite(290,98,"ui-assets","text-play");f.add(g),f.add(h),f.add(i),this.addChild(f);var j=44,k=90,l=265,m=150,n=320;this.game.device.desktop&&(j=40,l=255);var o=this.game.make.group();this.addChild(o),o.x=0,o.y=l;var p=this.game.make.image(k,5,"ui-assets","how-to-button1");p.anchor.set(.5,0),o.add(p);var q=this.game.make.bitmapText(m,0,"White_65",this.game.device.desktop?NeoGame.copy.HELP_BULLET_1_DESKTOP:NeoGame.copy.HELP_BULLET_1_MOBILE,40);q.wordWrap=!0,q.maxWidth=n,o.add(q);var r=this.game.make.image(this.game.width-40,10,"ui-assets",this.game.device.desktop?"how-to-icon-1-desktop":"how-to-icon-1-mobile");r.anchor.set(1,0),o.add(r);var s=this.game.make.group();this.addChild(s),s.x=0,s.y=o.y+q.height+j;var t=this.game.make.image(k,5,"ui-assets","how-to-button2");t.anchor.set(.5,0),s.add(t);var u=this.game.make.bitmapText(m,0,"White_65",NeoGame.copy.HELP_BULLET_2,40);u.wordWrap=!0,u.maxWidth=n,s.add(u);var v=this.game.make.image(this.game.width-40,10,"ui-assets","how-to-icon-2");v.anchor.set(1,0),s.add(v);var w=this.game.make.group();this.addChild(w),w.x=0,w.y=s.y+u.height+j;var x=this.game.make.image(k,5,"ui-assets","how-to-button3");x.anchor.set(.5,0),w.add(x);var y=this.game.make.bitmapText(m,0,"White_65",NeoGame.copy.HELP_BULLET_3,40);y.wordWrap=!0,y.maxWidth=n,w.add(y);var z=this.game.make.image(this.game.width-40,10,"ui-assets","how-to-icon-3");z.anchor.set(1,0),w.add(z);var A=this.game.make.group();this.addChild(A),A.x=0,A.y=w.y+y.height+j;var B=this.game.make.image(k,5,"ui-assets","how-to-button4");B.anchor.set(.5,0),A.add(B);var C=this.game.make.bitmapText(m,0,"White_65","",40);C.text=NeoGame.Utils.replaceTokenInString("##COIN_AMOUNT##",NeoGame.settings.coinAmountForExtraLife,NeoGame.copy.HELP_BULLET_4),C.wordWrap=!0,C.maxWidth=n,A.add(C);var D=this.game.make.image(this.game.width-40,10,"ui-assets","how-to-icon-4");D.anchor.set(1,0),A.add(D);var E=this.game.make.button(this.game.world.centerX,870,"ui-assets",function(){NeoGame.Utils.playMainButtonSound(),E.inputEnabled=!1,"help"==b?this.close():this.game.state.start("play",!0,!1)},this,"button-close","button-close","button-close-up","button-close");"help"==b?E.setFrames("button-close","button-close","button-close-up","button-close"):E.setFrames("button-play","button-play","button-play-up","button-play"),E.anchor.set(.5),this.addChild(E),this.game.add.tween(o).from({alpha:0,y:"-60"},200,Phaser.Easing.Quadratic.Out,!0,200),this.game.add.tween(s).from({alpha:0,y:"-60"},200,Phaser.Easing.Quadratic.Out,!0,300),this.game.add.tween(w).from({alpha:0,y:"-60"},200,Phaser.Easing.Quadratic.Out,!0,400),this.game.add.tween(A).from({alpha:0,y:"-60"},200,Phaser.Easing.Quadratic.Out,!0,500),this.game.add.tween(f).from({y:"-30"},300,Phaser.Easing.Quadratic.Out,!0),this.game.add.tween(this).from({alpha:0},300,Phaser.Easing.Linear.None,!0),NeoGame.Utils.stretchyScale(E,700)},NeoGame.HelpOverlay.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.HelpOverlay.prototype.constructor=NeoGame.HelpOverlay,NeoGame.HelpOverlay.prototype.close=function(){this.game.add.tween(this).to({alpha:0},300,Phaser.Easing.Linear.None,!0).onComplete.add(function(){this.destroy()},this)};var NeoGame=NeoGame||{};NeoGame.Cta=function(a,b,c,d,e){Phaser.Sprite.call(this,a,b,c,d,e);var f=this.game.add.image(this.game.world.centerX,this.game.world.centerY-80,"ui-assets","badge-correct");f.anchor.set(.5),this.addChild(f);var g=NeoGame.game.add.bitmapText(0,-5,"White_Shadow_84",NeoGame.copy.TUTORIAL_BEGIN,84);g.align="center",g.wordWrap=!0,g.maxWidth=270,g.anchor.setTo(.5),f.addChild(g),NeoGame.Utils.stretchyScale(f),this.game.add.tween(this).from({alpha:0},300,Phaser.Easing.Linear.None,!0),this.game.device.desktop?this.createDesktop():this.createMobile()},NeoGame.Cta.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.Cta.prototype.constructor=NeoGame.Cta,NeoGame.Cta.prototype.createMobile=function(){var a=this.game.add.group();this.addChild(a),
a.position.set(0,this.game.height-172);var b=this.game.add.image(457,-65,"ui-assets","finger-point");b.anchor.setTo(.5),b.angle=150,a.add(b),this.game.add.tween(a).from({alpha:0},500,Phaser.Easing.Quadratic.Out,!0,700),this.game.add.tween(b).from({alpha:0,x:"-20",y:"-50"},500,Phaser.Easing.Quadratic.Out,!0,700)},NeoGame.Cta.prototype.createDesktop=function(){var a=this.game.add.group();this.addChild(a),a.position.set(0,this.game.height-172);var b=this.game.add.image(392,0,"ui-assets","desktop-key-left");a.add(b);var c=this.game.add.image(512,0,"ui-assets","desktop-key-right");a.add(c),this.addChild(a);var d=this.game.add.image(10,0,"ui-assets","desktop-key-space-bar");a.add(d);var e=NeoGame.game.add.bitmapText(.5*d.width,.5*d.height,"White_Shadow_84",NeoGame.copy.SPACE_BAR,54);e.align="center",e.anchor.setTo(.5),d.addChild(e),this.game.add.tween(a).from({alpha:0,y:"20"},500,Phaser.Easing.Quadratic.Out,!0,800)},NeoGame.Cta.prototype.hide=function(){this.game&&this.game.add.tween(this).to({alpha:0},300,Phaser.Easing.Linear.None,!0).onComplete.add(function(){this.destroy(!0)},this)};var NeoGame=NeoGame||{};NeoGame.FirstQuestionCta=function(a){Phaser.Sprite.call(this,a),this.blueBg=this.game.add.sprite(0,0,"ui-assets","level-platform-bg"),this.blueBg.height=this.game.height,this.blueBg.inputEnabled=!0,this.addChild(this.blueBg),this.badge=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY-90,"ui-assets","badge-incorrect"),this.badge.anchor.set(.5),this.addChild(this.badge);var b=this.game.add.sprite(0,-100,"ui-assets","bolt-small");b.anchor.set(.5),b.scale.set(.65),this.badge.addChild(b);var c=NeoGame.game.add.bitmapText(0,-15,"White_65",NeoGame.copy.TUTORIAL_FIRST_QUESTION,40);c.align="center",c.wordWrap=!0,c.maxWidth=260,c.anchor.setTo(.5),this.badge.addChild(c);var d=this.game.add.button(0,100,"ui-assets",function(){d.input.enabled=!1,this.close()},this,"button-ok","button-ok","button-ok-up","button-ok");d.anchor.set(.5),this.badge.addChild(d),this.game.add.tween(this.blueBg).from({alpha:0},300,Phaser.Easing.Linear.None,!0),NeoGame.Utils.stretchyScale(this.badge,300)},NeoGame.FirstQuestionCta.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.FirstQuestionCta.prototype.constructor=NeoGame.FirstQuestionCta,NeoGame.FirstQuestionCta.prototype.close=function(){this.game.add.tween(this.blueBg).to({alpha:0},500,Phaser.Easing.Linear.None,!0),this.game.add.tween(this.badge.scale).to({x:.5,y:.5},500,Phaser.Easing.Back.In,!0),this.game.add.tween(this.badge).to({alpha:0},500,Phaser.Easing.Linear.None,!0).onComplete.addOnce(function(){this.destroy()},this)};var NeoGame=NeoGame||{};NeoGame.LoseLifeAlert=function(a){Phaser.Sprite.call(this,a);var b=this.game.add.sprite(0,0,"ui-assets","level-platform-bg");b.height=this.game.height,this.addChild(b),NeoGame.Model.setLives(NeoGame.Model.getLives()-1);var c=this.game.add.sprite(this.game.world.centerX,this.game.world.centerY-90,"ui-assets","badge-incorrect");c.anchor.set(.5),this.addChild(c);var d=NeoGame.game.add.bitmapText(-48,-140,"Yellow_84","-",61);d.align="right",d.anchor.setTo(0),c.addChild(d);var e=this.game.add.sprite(6,-106,"ui-assets","hud-heart");e.anchor.set(.5),c.addChild(e);var f=NeoGame.game.add.bitmapText(0,-58,"White_65",NeoGame.copy.YOU_LOST_A_LIFE,36);f.align="center",f.anchor.setTo(.5),c.addChild(f);var g=NeoGame.game.add.bitmapText(0,-5,"White_65",NeoGame.copy.NEGATIVE_FEEDBACK_OPTIONS.random(),64);g.align="center",g.anchor.setTo(.5),c.addChild(g);var h=this.game.add.button(0,88,"ui-assets",function(){NeoGame.Model.getLives()<=0?this.game.state.start("gameover",!0,!1):("true"==NeoGame.settings.loseAllCoinsWhenFall?NeoGame.Model.setCoins(0):NeoGame.Model.getCoins()<=0?NeoGame.Model.setCoins(0):NeoGame.Model.setCoins(NeoGame.Model.getCoins()),this.game.state.start("play",!0,!1,{mode:"tryAgain"}))},this,"button-ok","button-ok","button-ok-up","button-ok");h.anchor.set(.5),c.addChild(h),this.game.add.tween(h).from({alpha:0},300,Phaser.Easing.Linear.None,!0,300),this.game.add.tween(h.scale).from({x:.5,y:.5},300,Phaser.Easing.Back.Out,!0,300)},NeoGame.LoseLifeAlert.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.LoseLifeAlert.prototype.constructor=NeoGame.LoseLifeAlert;var NeoGame=NeoGame||{};NeoGame.ExtraLife=function(a,b,c){Phaser.Sprite.call(this,a,b,c),NeoGame.game.time.events.add(200,function(){NeoGame.Utils.playSound("extra-life")},this);var d=this.game.add.sprite(0,0,"ui-assets","hud-heart");d.anchor.set(.5),this.addChild(d),this.game.add.tween(d).to({x:"50"},700,Phaser.Easing.Quadratic.InOut,!0,null,-1).yoyo(!0),this.game.add.tween(d).to({y:"-150"},3e3,Phaser.Easing.Linear.None,!0),this.game.add.tween(d).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,2e3).onComplete.add(function(){this.destroy()},this);var e=this.game.add.group();this.addChild(e);var f=NeoGame.game.add.bitmapText(0,0,"Yellow_78",NeoGame.settings.coinAmountForExtraLife,40);f.align="left",e.add(f);var g=NeoGame.game.add.bitmapText(-15,5,"Yellow_78","+",32);g.align="left",e.add(g),this.game.add.tween(e).to({y:"-100"},3e3,Phaser.Easing.Linear.None,!0),this.game.add.tween(e).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,2e3)},NeoGame.ExtraLife.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.ExtraLife.prototype.constructor=NeoGame.ExtraLife;var NeoGame=NeoGame||{};NeoGame.LoseCoins=function(a,b,c,d){Phaser.Sprite.call(this,a,b,c);var e=this.game.add.sprite(0,0,"ui-assets","hud-coin");e.anchor.set(.5),this.addChild(e);var f=(this.game.add.tween(e).to({y:"-100"},3e3,Phaser.Easing.Linear.None,!0),this.game.add.tween(e).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,1e3).onComplete.add(function(){this.destroy()},this),this.game.add.group());this.addChild(f);var g=NeoGame.game.add.bitmapText(0,0,"Red_78","-"+d,40);g.align="left",f.add(g);this.game.add.tween(f).to({y:"-50"},2e3,Phaser.Easing.Linear.None,!0),this.game.add.tween(f).to({alpha:0},1e3,Phaser.Easing.Linear.None,!0,1e3)},NeoGame.LoseCoins.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.LoseCoins.prototype.constructor=NeoGame.LoseCoins;var NeoGame=NeoGame||{};NeoGame.Clouds=function(a,b,c){Phaser.Sprite.call(this,a),NeoGame.Clouds.BGSPEED=.7,NeoGame.Clouds.FGSPEED=1.5,this.isForeground=c,this.group=b,this.group.position.set(0,0),this.group.enableBody=!0,this.group.createMultiple(10,"game-assets","clouds"),this.group.setAll("body.velocity.y",0),this.group.setAll("body.allowGravity",!1),this.group.setAll("body.immovable",!0),this.revive().y=-50,this.revive().y=100,this.revive().y=200,this.revive().y=350,this.revive().y=450},NeoGame.Clouds.prototype=Object.create(Phaser.Sprite.prototype),NeoGame.Clouds.prototype.constructor=NeoGame.Clouds,NeoGame.Clouds.prototype.update=function(){this.group.forEach(function(a){a.alive&&a.y>this.game.height+.5*a.height&&(debug.debug("kill the cloud"),a.kill(),this.revive())},this)},NeoGame.Clouds.prototype.revive=function(){var a=this.group.getFirstExists(!1,!0);if(a){a.revive(),a.anchor.set(.5),a.x=this.game.rnd.integerInRange(0,this.game.width),a.y=-a.height,a.alpha=0;var b;if(this.isForeground){b=.2;var c=[1,1.5,2].random();a.scale.set([c,-c].random(),c)}else{b=.6;var c=[.2,.3,.4,.5,.6].random();a.scale.set([c,-c].random(),c)}this.game.add.tween(a).to({alpha:b},1e3,Phaser.Easing.Linear.None,!0),debug.debug("cloud.y",a.y)}return a},$(document).ready(function(){NeoGame.init()});var NeoGame=NeoGame||{};NeoGame.config={width:640,height:960,minWidth:320,minHeight:480,maxWidth:null,maxHeight:null,renderer:Phaser.AUTO,antialias:!0,state:"boot",parentContainer:"game",transparent:!0,physicsConfig:null,debug:!0,backgroundColor:0,assetsPath:"media/"},NeoGame.init=function(){NeoGame.config.debug=1==NeoGame.DomUtils.getQueryString("debug"),NeoGame.config.cheat=1==NeoGame.DomUtils.getQueryString("cheat"),NeoGame.DomUtils.setDebug(NeoGame.config.debug);var a=NeoGame.config.width,b=NeoGame.config.height;isMobile&&(NeoGame.config.renderer=Phaser.CANVAS,NeoGame.screenMetrics=NeoGame.ScreenUtils.calculateScreenMetrics(NeoGame.config.width,NeoGame.config.height,NeoGame.ScreenUtils.Orientation.PORTRAIT),debug.debug("Screen Metrics:",JSON.stringify(NeoGame.screenMetrics)),b=NeoGame.screenMetrics.gameHeight),"1"==getQueryString("webgl")&&(NeoGame.config.renderer=Phaser.WEBGL),"1"==getQueryString("canvas")&&(NeoGame.config.renderer=Phaser.CANVAS);var c=new Phaser.Game(a,b,NeoGame.config.renderer,NeoGame.config.parentContainer,NeoGame.config.state,NeoGame.config.transparent,NeoGame.config.antialias,NeoGame.config.physicsConfig);NeoGame.game=c,NeoGame.lastCoinAmount=0,NeoGame.onGamePaused=new Phaser.Signal,NeoGame.initGamePause=new Phaser.Signal,c.state.onStateChange.add(function(){debug.debug("%cRunning "+c.state.getCurrentState().state.current+" state  ","color:white;background:red")}),c.state.add("boot",NeoGame.BootState),c.state.add("preload",NeoGame.PreloadState),c.state.add("landing",NeoGame.LandingState),c.state.add("play",NeoGame.PlayState),c.state.add("gameover",NeoGame.GameOver),c.state.add("questions",NeoGame.QuestionsState)};var NeoGame=NeoGame||{};NeoGame.Model=function(){function a(){return o}function b(a){o=a}function c(){return k}function d(a){k=a,p.dispatch(k)}function e(){return n}function f(a){n=a}function g(){return l}function h(a){l=a,q.dispatch(l)}function i(){return m}function j(a){m=a,r.dispatch(m)}var k=1,l=0,m=0,n="",o=!1,p=new Phaser.Signal,q=new Phaser.Signal,r=new Phaser.Signal,s=new Phaser.Signal;return{getLevel:c,setLevel:d,getMode:e,setMode:f,setPaused:b,getPaused:a,getLives:g,setLives:h,getCoins:i,setCoins:j,levelChangeSignal:p,livesChangeSignal:q,coinsChangeSignal:r,firstPlatformReached:s}}();