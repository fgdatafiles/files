!function(){"use strict";var a=include("springroll.Application"),b=include("springroll.pixi.PixiDisplay"),c=new a({name:"Wonder Red's Rhyme Racer",canvasId:"stage",configPath:"assets/config/config.json",display:b,displayOptions:{autoPreventDefault:!platypus.supports.ie,clearView:!0,backgroundColor:10079487},enableHiDPI:!0,keepFocus:!0,preload:[],resizeElement:"content",responsive:!0,uniformResize:!1,state:"title"});c.on("init",function(){}),window.app=c}(),function(){"use strict";var a=include("platypus"),b="super-why.wonder-reds-rhyme-racer",c=null,d=function(){var a="";return c||(a=localStorage.getItem(b),c=a?JSON.parse(a):{}),c},e=function(){localStorage.setItem(b,JSON.stringify(c))};a.storage={setItem:function(a,b){d()[a]=b,e()},getItem:function(a){return d()[a]},getAll:function(){return d()},save:function(a){a&&(c=a),e()},log:function(){a.debug.olive('"'+b+'" stores: ',d())}}}(),function(){"use strict";return platypus.createComponentClass({id:"BackPulse",properties:{magnitude:.05},constructor:function(){this.scaleX=this.owner.scaleX||1,this.scaleY=this.owner.scaleY||1,this.time=0,this.cycle=1e3},events:{"handle-logic":function(a){this.time+=a.delta,this.owner.scaleX=this.scaleX*(1+Math.sin(this.time/this.cycle*Math.PI*2)*this.magnitude),this.owner.scaleY=this.scaleY*(1+Math.sin(this.time/this.cycle*Math.PI*2)*this.magnitude)}}})}(),function(){"use strict";var a=include("createjs.Ease"),b=include("platypus.Entity"),c=include("createjs.Tween"),d=function(a,b,c,e){var f=a[c];f&&(f!==b&&e(a[c]),d(a,b,c+1,e))};return platypus.createComponentClass({id:"EndManager",properties:{},publicProperties:{},constructor:function(){this.basket=null,this.item=null,this.red=null},events:{"scene-loaded":function(a){var b=function(a){c+=1,i[a+"-is-wrong"]=[{sound:"wr_words/wr_"+a,voice:"aaaam"},{sound:"wr_encouragement_"+c,voice:"aammaammaammaammaammaammaamm"}]},c=1,e=[],f=[],g=[],h=[],i={"open-door":[1e3,{sound:"wr_grandmas_arrive",voice:"wemaditogranmasmmmmmmmm"},{sound:{sound:platypus.supports.mobile?"wr_door_press":"wr_door_click",events:[{event:"twinkle",time:15e3}]},voice:"likontedoortoosegranmammmmmmmmmmmm"}],"list-choices":e,choice1:f,choice2:g,choice3:h,"still-there":{sound:"wr_idle",voice:"silfaarmmm"},"announce-win":[500,{sound:"wr_objective_"+a.word+"/wr_payoff_"+a.word,voice:"aammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaamm"},{sound:{sound:"wr_payoff_01",events:[{event:"ready-to-return",time:15e3}]},voice:"aammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaamm"}]},j=a.words;this.wordList=j,this.correctWord=a.word,this.item.triggerEvent(this.correctWord),this.words={},e.push({sound:{sound:"wr_objective_"+this.correctWord+"/wr_objective_"+this.correctWord,events:[{event:"say1",time:15e3}]},voice:"aammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaamm"}),f.push(250,{sound:{sound:"wr_words/wr_"+j[0],events:[{event:{event:"highlight-word",message:j[0]},time:0},{event:"say2",time:15e3}]},voice:"aaaam"}),g.push(250,{sound:{sound:"wr_words/wr_"+j[1],events:[{event:{event:"highlight-word",message:j[1]},time:0},{event:"say3",time:15e3}]},voice:"aaaam"}),h.push(250,{sound:{sound:"wr_words/wr_"+j[2],events:[{event:{event:"highlight-word",message:j[2]},time:0}]},voice:"aaaam"}),d(j,this.correctWord,0,b),this.red=this.owner.addEntity({type:"red-vo-instructions",properties:{scaleX:.85,scaleY:.85,voiceOverMap:i,y:260}}),this.red.triggerEvent("at-grandmas")},"child-entity-added":function(a){"grandmas-item"===a.type?this.item=a:"basket"===a.type&&(this.basket=a)},"grandma-here":function(){this.red.triggerEvent("grandma-here")},"announce-win":function(){this.red.triggerEvent("announce-win")},"add-word":function(a){var b=this.wordList[a];this.words[b]=this.owner.addEntity({type:"word-option",properties:{events:{pressed:{event:"selected-word",message:b}},text:b.toUpperCase(),y:50*a-150}})},"highlight-word":function(a){this.words[a].triggerEvent("highlight-word")},"finished-announcement":function(){this.owner.addEntity({type:"ðŸ”™"})},"selected-word":function(){var b=function(){this.basket.triggerEvent("open-up-for-good"),this.item.triggerEvent("show-item"),this.owner.addEntity({type:"correct-sparkle",properties:{x:this.basket.x,y:this.basket.y}})};return function(d){var e=null,f="",g=this.words;if(d===this.correctWord)for(f in g)g.hasOwnProperty(f)&&(d===f?(e=g[f],e.triggerEvent("disable"),this.owner.addEntity({type:"correct-sparkle",properties:{scaleX:.75,scaleY:.75,x:e.x,y:e.y}}),c.get(e).wait(1e3).to({x:-50,y:265},750,a.backInOut).call(b.bind(this))):setTimeout(function(a){this.removeEntity(a)}.bind(this.owner,g[f]),1));else this.red.triggerEvent("remove-choice",this.wordList.indexOf(d)),this.red.triggerEvent(d+"-is-wrong"),setTimeout(function(a){this.removeEntity(a)}.bind(this.owner,g[d]),1),delete g[d]}}(),twinkle:function(){this.owner.addEntity({type:"door-sparkle"})}},methods:{destroy:function(){}},publicMethods:{},getAssetList:function(){var a=Array.setUp("red-vo-instructions","door-sparkle","correct-sparkle","ðŸ”™"),c=platypus.game.settings.entities,d=a.length-1,e=null,f=null;for(f=b.getAssetList(c[a[d]]);d--;)e=b.getAssetList(c[a[d]]),f.union(e),e.recycle();return a.recycle(),f}})}(),function(){"use strict";return platypus.createComponentClass({id:"Hover",constructor:function(){this.begun=!1,this.y=this.owner.y,this.time=0,this.cycle=4e3,this.magnitude=3,this.rotation=2},events:{"begin-hovering":function(){this.y=this.owner.y,this.begun=!0},"handle-logic":function(a){this.begun&&(this.time+=a.delta,this.owner.rotation=Math.sin(this.time/this.cycle*Math.PI*2)*this.rotation,this.owner.y=this.y+Math.cos(this.time/this.cycle*Math.PI*2)*this.magnitude)}},methods:{destroy:function(){}},publicMethods:{}})}(),function(){"use strict";var a=include("platypus.AABB");return platypus.createComponentClass({id:"Jump",publicProperties:{x:0,y:0,scaleX:1,scaleY:1},constructor:function(){this.aabb=a.setUp(this.x,this.y,150,10),this.red=null,this.racer=a.setUp(),this.jumped=!1},events:{"peer-entity-added":function(a){"red-racer"===a.type&&(this.red=a,this.racer.setAll(a.x,a.y,150,10))},"handle-logic":function(){var a=this.aabb,b=this.racer;a.setAll(this.x,this.y+40,150*this.scaleX,10*this.scaleY),!this.jumped&&b&&b.intersects(a)&&(this.jumped=!0,this.red.triggerEvent("jump"))},"winning-lap":function(){this.owner.parent.removeEntity(this.owner)}},methods:{destroy:function(){this.aabb.recycle(),this.aabb=null,this.racer.recycle(),this.racer=null,this.red=null}},publicMethods:{}})}(),function(){"use strict";return platypus.createComponentClass({id:"PersonPulse",properties:{magnitude:.01},constructor:function(){this.scaleY=this.owner.scaleY||1,this.time=0,this.cycle=2e3},events:{"handle-logic":function(a){this.time+=a.delta,this.owner.scaleY=this.scaleY*(1+Math.sin(this.time/this.cycle*Math.PI*2)*this.magnitude)},jump:function(){this.owner.triggerEvent("play-animation","off")},"animation-ended":function(a){"jump"===a&&this.owner.triggerEvent("play-animation","default")}},methods:{destroy:function(){}},publicMethods:{}})}(),function(){"use strict";var a=2e3,b=include("platypus.Entity"),c=function(a){for(var b=a.length,c=0,d="";b--;)c=Math.floor(Math.random()*(1+b)),c!==b&&(d=a[b],a[b]=a[c],a[c]=d);return a},d=0;return platypus.createComponentClass({id:"Populator",properties:{curriculum:null,sequence:null,decorations:null},constructor:function(){var b=null,d=this.curriculum,e="",f=0,g=0,h=platypus.storage.getItem("curriculum")||[];if(!h.length)for(e in d)d.hasOwnProperty(e)&&h.push(e);this.wordSuffix=h.greenSplice(Math.random()*h.length>>0),platypus.storage.setItem("curriculum",h),this.otherWords=Array.setUp();for(e in d)d.hasOwnProperty(e)&&e!==this.wordSuffix&&this.otherWords.union(d[e]);for(c(this.otherWords),this.correctWords=d[this.wordSuffix].greenSlice(),this.wordSet=this.correctWords.greenSlice(),this.currentWordList=Array.setUp(),b=c(this.decorations.left),f=b.length,g=a/f;f--;)this.owner.addEntity({type:b[f],properties:{x:-300-300*Math.random(),y:g*(f+.5),loop:!0}});for(b=c(this.decorations.right),f=b.length,g=a/f;f--;)this.owner.addEntity({type:b[f],properties:{x:300+300*Math.random(),y:g*(f+.5),loop:!0}});for(b=c(this.decorations.grass),f=b.length,g=a/f;f--;)this.owner.addEntity({type:b[f],properties:{x:300+600*Math.random(),y:g*(f+.5),loop:!0}});for(b=c(this.decorations.grass),f=b.length,g=a/f;f--;)this.owner.addEntity({type:b[f],properties:{x:-300-600*Math.random(),y:g*(f+.5),loop:!0}});for(b=c(this.decorations.middle),f=b.length,g=a/f;f--;)this.owner.addEntity({type:b[f],properties:{x:Math.random()>=.5?75:-75,y:g*(f+.5),loop:!0}});this.alreadyStarted=!1,this.basket=null,this.console=Array.setUp(),this.wordPause=0,this.wordWindow=600,this.stepLength=.06,this.sequenceIndex=0,this.lastX=-1,this.wasntX=0,this.wordsLeft=0,this.moving=!1,this.wolf=null},events:{"child-entity-added":function(a){"basket"===a.type?this.basket=a:"red-racer"===a.type?this.red=a:"wolf-tree"===a.type?this.wolf=this.owner.addEntity({type:"wolf",properties:{x:a.x-26,y:a.y}}):a.type.indexOf("console")>=0&&this.console.push(a)},load:function(){var a=platypus.game.app;a.music="",setTimeout(function(){a.music="music_loop_wondred_intro_skating",a.musicInstance.volume=.1},1500),this.owner.addEntity({type:"red-vo-instructions",properties:{voiceOverMap:{"roll-in":[1e3,{sound:"wr_press_01",voice:"hisuperyumm"},{sound:{sound:"wr_objective_"+this.correctWords[0]+"/wr_intro_"+this.correctWords[0],events:[{event:"thought-bubble",time:0},{event:"destroy-me",time:15e3}]},voice:"aammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaammaamm"}]}}})},"logic-tick":function(a){var b="",c="",d=0;this.moving&&(this.wordPause-=a.delta*this.stepLength,this.wordPause<0&&(this.wordPause+=this.wordWindow,b=this.sequence[this.sequenceIndex],this.sequenceIndex=(this.sequenceIndex+1)%this.sequence.length,d=(3*Math.random()>>0)-1,d===this.lastX&&(d=this.wasntX),this.wasntX=-(this.lastX+d),this.lastX=d,"word"===b?(c=this.getWord(),this.owner.addEntity({type:"word",properties:{text:c.toUpperCase(),x:150*d,valid:this.correctWords.indexOf(c)>-1}})):this.owner.addEntity({type:b,properties:{x:150*d}})),this.wolf&&!this.wolf.activated&&!platypus.game.app.voPlayer.playing&&this.wolf.y>50&&this.wolf.y<150&&(this.wolf.activated=!0,this.wolf.triggerEvent("roar")))},"word-captured":function(a){var b=a.toLowerCase(),c=this.currentWordList.indexOf(b);c>=0&&this.currentWordList.greenSplice(b),this.wordSet.greenSplice(this.wordSet.indexOf(b)),this.owner.addEntity({type:"star-burst"}),this.wordSet.length<=this.wordsLeft?(this.owner.triggerEventOnChildren("collected-"+b+"-finale"),this.owner.triggerEventOnChildren("winning-lap"),this.moving=!1):this.owner.triggerEventOnChildren("collected-"+b)},"reached-the-end":function(){platypus.game.loadScene("ending",{word:this.correctWords[0],words:c(this.correctWords.greenSlice())})},"pick-easy":function(){this.alreadyStarted||(this.alreadyStarted=!0,this.wordsLeft=0,this.owner.triggerEventOnChildren("give-instructions"),this.owner.triggerEvent("picked-mode"))},"pick-hard":function(){this.alreadyStarted||(this.alreadyStarted=!0,this.wordsLeft=3,this.wordSet.push(this.otherWords.greenSplice(0),this.otherWords.greenSplice(0),this.otherWords.greenSplice(0)),this.owner.triggerEventOnChildren("give-instructions"),this.owner.triggerEvent("picked-mode"))},"picked-mode":function(){var a=0,b={},c=null;for(b["start-moving-first-time"]=[500,"wr_roll",500,"wr_objective_1",{sound:"wr_objective_"+this.correctWords[0]+"/wr_"+this.wordSuffix+"_words",events:[{event:"pulse",time:0}]},"wr_objective_b",500,{sound:platypus.supports.mobile?"wr_swipe":"wr_mouse",events:[{event:"spawn-arrow",time:0},{event:"step-it-up",time:1e4}]}],a=this.wordSet.length;a--;)a>=3?b["collected-"+this.wordSet[a]]=["wr_words/wr_"+this.wordSet[a],"wr_incorrect","wr_objective_"+this.correctWords[0]+"/wr_"+this.wordSuffix+"_word","wr_encouragement_"+(a-2)]:(c=b["collected-"+this.wordSet[a]]=[{sound:"wr_words/wr_"+this.wordSet[a],events:[{event:"pulse",message:this.owner.addEntity({type:"console-word-caught",properties:{text:this.wordSet[a].toUpperCase()}}),time:0}]},"wr_kudos_"+(d+1)],d=(d+1)%5,c=c.slice(),c.push(1e3,"wr_skating_complete_A_0"+(d%2+1),"wr_objective_"+this.correctWords[0]+"/wr_"+this.wordSuffix+"_words",{sound:"wr_skating_complete_B",events:[{event:"at-grandmas",time:2e4}]}),b["collected-"+this.wordSet[a]+"-finale"]=c);this.owner.addEntity({type:"console-word",properties:{text:"â€“"+this.wordSuffix.toUpperCase(),audioMap:b}})},"show-word":function(a){a&&(this.wordSet.length<=this.wordsLeft?a.triggerEvent("pulse-perm"):a.triggerEvent("pulse"))},"ready-to-roll":function(){for(var a=this.console,b=a.length;b--;)a[b].x=0;this.basket.x=-315,this.red.x=0,a.recycle(),this.console=null,this.owner.removeEntity(this.thoughtBubble),this.owner.triggerEventOnChildren("start-moving-first-time"),this.owner.triggerEventOnChildren("start-moving"),this.moving=!0},mousedown:function(a){a.x>0?this.owner.triggerEventOnChildren("go-right",{triggered:!0}):this.owner.triggerEventOnChildren("go-left",{triggered:!0})},"inactive-so-stopped":function(){this.owner.triggerEventOnChildren("stop-moving"),this.moving=!1},"active-so-start":function(){this.owner.triggerEventOnChildren("start-moving"),this.moving=!0},"add-arrow":function(){this.owner.addEntity({type:"arrow-pointer"})},"step-it-up":function(){this.stepLength=this.wordsLeft?.13:.1,this.owner.triggerEventOnChildren("faster!",this.stepLength)},"thought-bubble":function(){this.thoughtBubble=this.owner.addEntity({type:"thought-bubble"})}},methods:{getWord:function(){return this.currentWordList.length||(this.currentWordList.recycle(),this.currentWordList=c(this.wordSet.greenSlice())),this.currentWordList.greenSplice(0)},destroy:function(){var a=platypus.game.app;a.music="",setTimeout(function(){a.music="music_loop_wonderred_grandma",a.musicInstance.volume=.1},1500),this.otherWords.recycle(),this.otherWords=null,this.currentWordList.recycle(),this.currentWordList=null}},publicMethods:{},getAssetList:function(){var a=Array.setUp("console-word","star-burst","red-vo-instructions","thought-bubble","arrow-pointer","purple-tree","orange-tree","pink-tree","little-tree","big-tree","wolf-tree","wolf","grass","tulip"),c=platypus.game.settings.entities,d=a.length-1,e=null,f=null;for(f=b.getAssetList(c[a[d]]);d--;)e=b.getAssetList(c[a[d]]),f.union(e),e.recycle();return a.recycle(),f}})}(),function(){"use strict";var a=function(b,c){b!==this.stage||platypus.game.app.voPlayer.playing?setTimeout(a.bind(this,b,c),1e3):this.owner.triggerEvent(c)};return platypus.createComponentClass({id:"RedCycle",constructor:function(){this.choices=Array.setUp(!0,!0,!0),this.stage=0,this.triggerWithoutInterrupting=a.bind(this)},events:{"roll-in":function(){0===this.stage&&(this.stage=1,this.owner.triggerEvent("consider-door"))},"roll-in-idle":function(){this.triggerWithoutInterrupting(1,"still-there")},"roll-again":function(){this.triggerWithoutInterrupting(1,"consider-door")},"grandma-here":function(){1===this.stage&&(this.stage=2,this.owner.triggerEvent("consider-list"))},"list-again":function(){this.triggerWithoutInterrupting(2,"consider-list")},"grandma-here-idle":function(){this.triggerWithoutInterrupting(2,"still-there")},"announce-win":function(){this.stage=3},"remove-choice":function(a){this.choices[a]=!1},say1:function(){this.says(0,"choice1","say2")},say2:function(){this.says(1,"choice2","say3")},say3:function(){this.says(2,"choice3","say4")}},methods:{destroy:function(){this.choices.recycle(),this.choices=null},says:function(a,b,c){this.owner.triggerEvent(this.choices[a]?b:c)}},publicMethods:{}})}(),function(){"use strict";var a=include("PIXI.Graphics");return platypus.createComponentClass({id:"RenderGraphics",properties:{offsetX:0,offsetY:0,offsetZ:0},publicProperties:{color:16776960,width:100,height:100,x:0,y:0,z:0},constructor:function(){"string"==typeof this.color&&(this.color=parseInt(this.color.replace("#","0x"),16)),this.shape=(new a).beginFill(this.color).drawRect(-this.width/2,-this.height/2,this.width,this.height),this.shape.x=this.x,this.shape.y=this.y,this.shape.z=this.z+this.offsetZ},events:{"handle-render-load":function(a){!this.parentContainer&&a&&a.container&&(this.parentContainer=a.container,this.parentContainer.addChild(this.shape))},"handle-render":function(){this.shape.x=this.x+this.offsetX,this.shape.y=this.y+this.offsetY,this.shape.z=this.z+this.offsetZ}},methods:{}})}(),function(){"use strict";var a=include("platypus.Data"),b=include("PIXI.Graphics"),c=include("platypus.components.Interactive"),d=include("PIXI.Matrix"),e=include("PIXI.Point"),f=include("PIXI.Text"),g={horizontal:{top:0,middle:.5,center:.5,bottom:1},vertical:{left:0,middle:.5,center:.5,right:1}},h=new d,i=function(){var a=function(a,b){var c=b.indexOf("("),d=b.substring(0,c),e=b.substring(c+1,b.indexOf(")"));e.length?a[d].apply(a,e.split(",")):a[d]()};return function(b,c){var d=0,e=c.split(".");for(d=0;d<e.length;d++)a(b,e[d])}}();return platypus.createComponentClass({id:"RenderText",properties:{interactive:!1,offsetX:0,offsetY:0,mask:null,offsetZ:0,rotate:!1,mirror:!1,flip:!1,visible:!0,cache:!1,text:"",style:{}},publicProperties:{scaleX:1,scaleY:1,skewX:0,skewY:0,rotation:0,x:0,y:0,z:0},constructor:function(){var b=null;this.parentContainer=null,this.wasVisible=this.visible,this.lastX=this.owner.x,this.lastY=this.owner.y,this.camera=new platypus.AABB,this.sprite=new f(this.text,this.style),this.sprite.updateText(),this.sprite.texture.baseTexture.realWidth=this.sprite.texture.baseTexture.width,this.sprite.texture.baseTexture.realHeight=this.sprite.texture.baseTexture.height,this.sprite.texture._updateUvs(),this.sprite.anchor=new e(g.horizontal[this.style.align]||.5,g.vertical[this.style["vertical-align"]]||1),this.affine=new d,this.sprite.transformMatrix=new d,this.isOnCamera=!0,this.interactive&&(b=a.setUp("container",this.sprite,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover),this.owner.addComponent(new c(this.owner,b)),b.recycle()),this.cache&&(this.updateSprite(!1),this.owner.cacheRender=this.sprite)},events:{cache:function(){this.updateSprite(!1),this.owner.cacheRender=this.sprite,this.cache=!0,this.owner.parent&&this.owner.parent.triggerEventOnChildren&&this.owner.parent.triggerEventOnChildren("cache-sprite",this.owner)},"camera-update":function(a){this.camera.set(a.viewport),this.sprite&&this.checkCameraBounds()},"handle-render-load":function(a){!this.parentContainer&&a&&a.container&&(this.addStage(a.container),this.updateSprite(!0))},"handle-render":function(a){return this.sprite?this.parentContainer||this.addStage(a.container)?void this.updateSprite(!0):void this.owner.removeComponent(this):void 0},"hide-sprite":function(){this.visible=!1},"show-sprite":function(){this.visible=!0},"set-mask":function(a){this.setMask(a)}},methods:{checkCameraBounds:function(){var a=null,b=this.sprite,c=null;c=b.transformMatrix.copy(h),b._currentBounds=null,a=b.getBounds(c),a&&(a.x+a.width<this.camera.left||a.x>this.camera.right||a.y+a.height<this.camera.top||a.y>this.camera.bottom)?this.isOnCamera=!1:this.isOnCamera=!0},addStage:function(a){return a?(this.parentContainer=a,this.parentContainer.addChild(this.sprite),this.mask&&this.setMask(this.mask),this.owner.triggerEvent("input-on"),a):null},updateSprite:function(){var a=0,b=0,c=null,e=0,f=1,g=1,h=null,i=this.affine.copy(this.sprite.transformMatrix),j=d.TEMP_MATRIX;a=this.owner.x,b=this.owner.y,this.rotate&&(e=this.rotation),this.sprite.z!==this.owner.z+this.offsetZ&&(this.parentContainer&&(this.parentContainer.reorder=!0),this.sprite.z=this.owner.z+this.offsetZ),(this.owner.opacity||0===this.owner.opacity)&&(this.sprite.alpha=this.owner.opacity),(this.mirror||this.flip)&&(h=this.rotation%360,this.mirror&&h>90&&270>h&&(f=-1),this.flip&&180>h&&(g=-1)),this.owner.state.has("visible")&&(this.visible=this.owner.state.visible),e&&i.rotate(e/180*Math.PI),this.owner.orientationMatrix&&(c=this.owner.orientationMatrix,j.tx=c[0][2],j.ty=c[1][2],j.a=c[0][0],j.b=c[1][0],j.c=c[0][1],j.d=c[1][1],i.prepend(j)),j.tx=a+this.offsetX,j.ty=b+this.offsetY,j.a=this.scaleX*f,j.b=this.owner.skewX,j.c=this.owner.skewY,j.d=this.scaleY*g,i.prepend(j),this.sprite&&(!this.wasVisible&&this.visible||this.lastX!==this.owner.x||this.lastY!==this.owner.y)&&this.checkCameraBounds(),this.lastX=this.owner.x,this.lastY=this.owner.y,this.wasVisible=this.visible,this.sprite.visible=this.visible&&this.isOnCamera},setMask:function(a){var c=null;return this.mask&&this.parentContainer&&this.parentContainer.removeChild(this.mask),a?(a instanceof b?c=a:(c=new b,c.beginFill(0,1),"string"==typeof a?i(c,a):a.radius?c.dc(a.x||0,a.y||0,a.radius):a.width&&a.height&&c.r(a.x||0,a.y||0,a.width,a.height),c.endFill()),c.isMask=!0,this.mask=this.sprite.mask=c,void(this.parentContainer&&this.parentContainer.addChild(this.mask))):void(this.mask=this.sprite.mask=null)},destroy:function(){var a=function(){this.parentContainer.removeChild(this.sprite),this.parentContainer=null,this.sprite=null};return function(){this.parentContainer&&(this.sprite.mouseTarget?(this.sprite.visible=!1,this.sprite.removeDisplayObject=a.bind(this)):(this.parentContainer.removeChild(this.sprite),this.parentContainer=null,this.cache||this.sprite.destroy())),this.sprite=null}}()}})}(),function(){"use strict";return platypus.createComponentClass({id:"RotateAndRemove",constructor:function(){this.time=0,this.cycle=4e3,this.magnitude=100,this.rotation=30},events:{"begin-hovering":function(){this.begun=!0},"handle-logic":function(a){this.owner.z=3500,this.time<this.cycle?(this.time+=a.delta,this.owner.rotation=Math.cos(this.time/this.cycle*Math.PI*2)*this.rotation,this.owner.x=Math.cos(this.time/this.cycle*Math.PI*2)*this.magnitude):this.owner.parent.removeEntity(this.owner)}},methods:{destroy:function(){}},publicMethods:{}})}(),function(){"use strict";return platypus.createComponentClass({id:"RotateIn",constructor:function(){this.begun=!1,this.time=0,this.cycle=4e3},events:{roar:function(){this.begun=!0},"updated-3d":function(a){this.begun?(this.time+=a,this.owner.rotation=-Math.max(0,Math.min(45,135*Math.sin(this.time/this.cycle*Math.PI*2)+22.5))):this.owner.rotation=0}},methods:{destroy:function(){}},publicMethods:{}})}(),function(){"use strict";return platypus.createComponentClass({id:"ScaleButton",properties:{scale:1.25,ignoreUserInput:!1,overCount:0},publicProperties:{},constructor:function(){this.originalScaleX=this.owner.scaleX,this.originalScaleY=this.owner.scaleY},events:{mouseover:function(){this.overCount++,this.ignoreUserInput||this.owner.state.get("disabled")||this.owner.triggerEvent("grow")},mouseout:function(){this.overCount--,this.ignoreUserInput||this.owner.state.get("disabled")||this.owner.triggerEvent("shrink")},grow:function(){createjs.Tween.get(this.owner,{override:!0}).to({scaleX:this.originalScaleX*this.scale,scaleY:this.originalScaleX*this.scale},200,createjs.Ease.getElasticOut(1,1.3))},shrink:function(){createjs.Tween.get(this.owner,{override:!0}).to({scaleX:this.originalScaleX,scaleY:this.originalScaleX},200,createjs.Ease.getElasticOut(1,1.3))},"highlight-word":function(){createjs.Tween.get(this.owner,{override:!0}).to({scaleX:this.originalScaleX*this.scale,scaleY:this.originalScaleX*this.scale},200,createjs.Ease.getElasticOut(1,1.3)).wait(750).to({scaleX:this.originalScaleX,scaleY:this.originalScaleX},200,createjs.Ease.getElasticOut(1,1.3)).call(function(){this.owner.triggerEvent("enable")}.bind(this))},disable:function(){this.owner.triggerEvent("shrink")},"ignore-user-toggle":function(){this.ignoreUserInput=!this.ignoreUserInput,this.ignoreUserInput||(this.originalScaleX=this.owner.scaleX,this.originalScaleY=this.owner.scaleY,this.overCount&&this.owner.triggerEvent("grow"))}},methods:{destroy:function(){}},publicMethods:{}})}(),function(){"use strict";var a=include("createjs.Ease"),b=include("platypus.Vector");return platypus.createComponentClass({id:"Scroller3D",properties:{inactiveAfter:12e3},publicProperties:{step:.06},constructor:function(){this.alreadyWon=!1,this.readyToPlay=!1,this.lane=0,this.entities=Array.setUp(),this.easeX=a.getPowInOut(2),this.easeY=a.circIn,this.deltaX=0,this.easeTimeX=0,this.originalX=0,this.red=null,this.viewport=b.setUp(0,-5e3,200),this.removals=Array.setUp(),this.moving=!1,this.inactiveCounter=0},events:{"faster!":function(a){this.step=a},"peer-entity-added":function(a){a.in3D?(this.entities.push(a),a.planeLocation=b.setUp(a.x,200,a.y),this.update(a,0)):"red-racer"===a.type&&(this.red=a,a.planeLocation=b.setUp(a.x,200,a.y),this.update(a,0),a.x=-3e4,a.z+=1e3)},"remove-from-3d":function(a){this.remove(a)},"peer-entity-removed":function(a){this.remove(a)},"prepare-logic":function(){for(var a=this.removals,b=a.length;b--;)this.owner.parent.removeEntity(a[b]);a.length=0},"handle-logic":function(a){var b=this.entities,c=0,d=b.length;if(this.deltaX!==this.lane&&(this.easeTimeX+=a.delta/700,c=this.easeX(this.easeTimeX),this.deltaX=this.originalX*(1-c)+this.lane*c),this.moving){for(;d--;)this.update(b[d],a.delta);this.inactiveCounter>0&&(platypus.game.app.voPlayer.playing||(this.inactiveCounter-=a.delta,this.inactiveCounter<=0&&this.owner.trigger("idle-stop"))),this.owner.skewY=.775*this.deltaX}else this.alreadyWon?(this.red.planeLocation.x=150*-(this.owner.skewY/.775),this.update(this.red,-a.delta),this.red.x=-this.red.x):this.owner.skewY=.775*this.deltaX},"go-left":function(a){!this.alreadyWon&&this.readyToPlay&&!this.moving&&this.inactiveCounter<=0&&this.owner.triggerEvent("start"),(this.moving||this.alreadyWon)&&(this.inactiveCounter=this.inactiveAfter,a.triggered&&this.lane<1&&(this.lane+=1,this.easeTimeX=0,this.originalX=this.deltaX))},"go-right":function(a){!this.alreadyWon&&this.readyToPlay&&!this.moving&&this.inactiveCounter<=0&&this.owner.triggerEvent("start"),(this.moving||this.alreadyWon)&&(this.inactiveCounter=this.inactiveAfter,a.triggered&&this.lane>-1&&(this.lane-=1,this.easeTimeX=0,this.originalX=this.deltaX))},"start-moving":function(){this.readyToPlay=!0,this.moving=!0,this.inactiveCounter=this.inactiveAfter},"stop-moving":function(){this.moving=!1},"winning-lap":function(){this.moving=!1,this.alreadyWon=!0}},methods:{remove:function(a){var b=0;a.in3D&&(b=this.entities.indexOf(a),b&&(a.planeLocation.recycle(),a.planeLocation=null,this.entities.greenSplice(b)),a.in3D=!1)},update:function(a,b){var c=a.planeLocation,d=this.viewport,e=c.z;if(e-=b*this.step,0>e){if(!a.loop)return void this.removals.push(a);e+=2e3}c.z=e,e>1700?1900>e?a.opacity=.005*(1900-e):a.opacity=0:a.opacity=1,a.x=d.z*(c.x+150*this.deltaX)/e,a.y=d.z*c.y/e,a.z=2e3-e>>0,a.scaleX=a.scaleY=d.z*a.height/(e*(a.components[1]||a.components[0]).sprite._texture._frame.height),a.rotation=(2e3-e)*a.x*1e-5,a.triggerEvent("updated-3d",b)},destroy:function(){this.removals.recycle(),this.removals=null}},publicMethods:{}})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("createjs.Ease"),c=include("createjs.Tween");return platypus.createComponentClass({id:"Word",properties:{valid:!1,text:""},publicProperties:{x:0,y:0,scaleX:1,scaleY:1},constructor:function(){this.aabb=a.setUp(this.x,this.y,150,10),this.basket=null,this.console=null,this.racer=a.setUp(),this.captured=!1,this.scroller=null},events:{"peer-entity-added":function(a){"red-racer"===a.type?this.racer.setAll(a.x,a.y,150,10):"console-word"===a.type?this.console=a:this.valid&&("basket"===a.type?this.basket=a:"path"===a.type&&(this.scroller=a))},"handle-logic":function(){var a=this.aabb,d=this.racer;a.setAll(this.x,this.y,150*this.scaleX,10*this.scaleY),!this.captured&&d&&d.intersects(a)&&(this.captured=!0,this.valid?(this.scroller.triggerEvent("remove-from-3d",this.owner),this.basket.triggerEvent("open-up"),this.owner.parent.triggerEvent("word-captured",this.text),this.owner.z=this.basket.z+5,c.get(this.owner).to({scaleX:1,scaleY:1,x:this.basket.x,y:this.basket.y+50},1e3,b.backIn).call(function(){this.parent&&this.parent.removeEntity&&this.parent.removeEntity(this)}.bind(this.owner))):(this.console.triggerEvent("collected-"+this.text.toLowerCase()),this.owner.parent.removeEntity(this.owner)))},"winning-lap":function(){this.captured||this.owner.parent.removeEntity(this.owner)}},methods:{destroy:function(){this.aabb.recycle(),this.aabb=null,this.racer.recycle(),this.racer=null}},publicMethods:{}})}(),function(){"use strict";return platypus.createComponentClass({id:"name-of-component",properties:{propertyName1:"property-value"},publicProperties:{propertyName2:"property-value"},constructor:function(){},events:{load:function(){}},methods:{destroy:function(){}},publicMethods:{}})}(),function(){"use strict";return platypus.createComponentClass({id:"no-drag",properties:{},publicProperties:{},constructor:function(){},events:{pressmove:function(a){a.event.preventDefault()}},methods:{destroy:function(){}},publicMethods:{}})}();