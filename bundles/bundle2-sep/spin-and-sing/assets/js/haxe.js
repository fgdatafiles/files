!function(){"use strict";function a(a,b){function c(){}c.prototype=a;var d=new c;for(var e in b)d[e]=b[e];return b.toString!==Object.prototype.toString&&(d.toString=b.toString),d}function b(a,b){if(null==b)return null;null==b.__id__&&(b.__id__=N++);var c;return null==a.hx__closures__?a.hx__closures__={}:c=a.hx__closures__[b.__id__],null==c&&(c=function(){return c.method.apply(c.scope,arguments)},c.scope=a,c.method=b,a.hx__closures__[b.__id__]=c),c}var c=function(){};c.__name__=!0,c.iter=function(a){return{cur:0,arr:a,hasNext:function(){return this.cur<this.arr.length},next:function(){return this.arr[this.cur++]}}},Math.__name__=!0;var d=function(){};d.__name__=!0,d.string=function(a){return D.__string_rec(a,"")};var e=function(){};e.__name__=!0;var f=function(){};f.__name__=!0,f.main=function(){if(window.SchellGames={},window.SchellGames.Games={},window.SchellGames.Games.Spinandsing={},f.audioManager=new J,window.SchellGames.audioManager=f.audioManager,f._isSpringroll="undefined"!=typeof springroll,f._isSpringroll)window.SchellGames.audioManager.useSpringroll(!0),window.SchellGames.Games={},window.SchellGames.Games.Spinandsing={},window.SchellGames.Games.Spinandsing.start=f.start;else{var a=new createjs.Stage("canvas");new i(a)}},f.start=function(a,b){f._springrollApp=b,f._game=new i(a,b),null!=b&&(f.app=f._springrollApp,f.learning=f._springrollApp.learning,null!=f.learning&&f.learning.startTimer(),f._scaleHandler=new F(b,f._game.container,a,960,500))};var g=function(a,b){createjs.Event.call(this,a,!1,!1),this._sceneid=b};g.__name__=!0,g.__super__=createjs.Event,g.prototype=a(createjs.Event.prototype,{get__sceneid:function(){return this._sceneid}});var h=function(a,c){this._springroll=!1,this._audioManager=window.SchellGames.audioManager;var d=this;this._stage=a,this.container=new createjs.Container,this._stage.addChild(this.container),this._loadLayer=new createjs.Container,this._gameLayer=new createjs.Container,this.container.addChild(this._gameLayer),this.container.addChild(this._loadLayer),createjs.Touch.enable(this._stage,!0),null!=c?(this._springroll=!0,c.on("update",function(a,b,c){d.update({delta:a})})):(createjs.Ticker.setFPS(30),createjs.Ticker.addEventListener("tick",b(this,this.update)))};h.__name__=!0,h.prototype={begin:function(){this._loadingScreen=new p(100,100),this._loadLayer.addEventListener("added",(M=this._loadingScreen,b(M,M.start))),this._loadLayer.addEventListener("removed",(M=this._loadingScreen,b(M,M.freeze))),this._loadLayer.addChild(this._loadingScreen)},update:function(a){this._stage.update(a)}};var i=function(a,b){this._spinnerMove=!1,h.call(this,a,b),this.begin();var c=new createjs.Shape;c.graphics.beginFill("black"),c.graphics.drawRect(-10,-10,980,520),c.graphics.endFill(),this._stage.addChildAt(c,0)};i.__name__=!0,i.__super__=h,i.prototype=a(h.prototype,{begin:function(){this._loadingScreen=new q,this._loadLayer.addEventListener("added",(M=this._loadingScreen,b(M,M.start))),this._loadLayer.addEventListener("removed",(M=this._loadingScreen,b(M,M.freeze))),this._loadLayer.addChild(this._loadingScreen),this.container.addChild(this._loadLayer),this._screen=new z(b(this,this.screenReady)),this._screen.addEventListener("loadScene",b(this,this.sceneLoadRequest))},onTitleComplete:function(a){this.container.removeChild(this._loadLayer),this._screen.removeEventListener("complete",b(this,this.onTitleComplete)),this._gameLayer.removeChild(this._screen),this._screen.destroy(),this._screen=null,this._screen=new u(b(this,this.screenReady)),this._screen.addEventListener("loadScene",b(this,this.sceneLoadRequest))},sceneLoadRequest:function(a){this.container.addChild(this._loadLayer),this._gameLayer.removeChild(this._screen),this._screen.destroy(),this._screen=null;var c=a.get__sceneid();switch(c){case 0:this._screen=new k(b(this,this.screenReady));break;case 1:this._screen=new A(b(this,this.screenReady));break;case 2:this._screen=new y(b(this,this.screenReady));break;case 3:this._screen=new s(b(this,this.screenReady));break;case 4:this._screen=new r(b(this,this.screenReady));break;case 5:this._screen=new v(b(this,this.screenReady));break;case 6:this._screen=new t(b(this,this.screenReady));break;case 7:this._screen=new n(b(this,this.screenReady));break;case 8:this._screen=new u(b(this,this.screenReady))}this._screen.addEventListener("loadScene",b(this,this.sceneLoadRequest))},screenReady:function(){this._gameLayer.addChild(this._screen),this._loadLayer.parent==this.container&&this.container.removeChild(this._loadLayer),this._screen.start()},onKeyDown:function(a){a.preventDefault()},spinArrow:function(){this._speed=Math.random()+1,this._spinnerMove=!0},update:function(a){h.prototype.update.call(this,a),null!=this._screen&&this._screen.update(a),window.dragonBones.animation.WorldClock.clock.advanceTime(a.delta/1e3)}});var j=function(){createjs.Container.call(this)};j.__name__=!0,j.__super__=createjs.Container,j.prototype=a(createjs.Container.prototype,{update:function(a){},destroy:function(){},start:function(){}});var k=function(a){this._blobsCleaned=0,this._cornArt=["corn1","corn2"],this._dirtSpotArt=["brown1","brown2","brown3","green1","green2","green3","orange1","orange2","orange3","orange4","orange5"],this._squeakFXPlaying=!1,this.BONE_EVENT=window.dragonBones.events.FrameEvent.BONE_FRAME_EVENT,this.ANIMATION_COMPLETE=window.dragonBones.events.AnimationEvent.COMPLETE,j.call(this),this._readyCallback=a,this._character=new G("Spinandsing_NewFoods","assets/db/bighelper/","Daniel_help",b(this,this.onRigReady))};k.__name__=!0,k.__super__=j,k.prototype=a(j.prototype,{omAnimationEvent:function(a){-1!=a.frameLabel.indexOf("vo_")?f.audioManager.playVO(a.frameLabel.split("vo_")[1]):-1!=a.frameLabel.indexOf("sfx_")?f.audioManager.playAudio(a.frameLabel.split("sfx_")[1]):f.audioManager.playAudio(a.frameLabel)},onRigReady:function(){dragonBones.animation.WorldClock.clock.add(this._character.armature),this._character.armature.addEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent)),this._assets=new K(this.getImageManifest(),this.getAudioManifest(),b(this,this.onPackageReady))},getImageManifest:function(){return[{type:"image",id:"bigHelperSheet",src:"assets/sheets/SpinnerBigHelper.png",sheet:!0},{type:"json",id:"bigHelperSheetJSON",src:"assets/sheets/SpinnerBigHelper.json"}]},getAudioManifest:function(){return[{id:"sponge"},{id:"squeak01"},{id:"squeak02"},{id:"squeak03"},{id:"squeak04"},{id:"magicalReveal"},{id:"dad_spin_03"},{id:"daniel_spin_14"}]},onPackageReady:function(){this._squeakFX=["squeak01","squeak02","squeak03","squeak04"];var a=new createjs.Shape;a.graphics.beginFill("#3ec5b8"),a.graphics.drawRect(0,0,960,500),a.graphics.endFill(),this.addChild(a),this.addChild(this._character),this._readyCallback()},destroy:function(){this.removeAllChildren(),this._readyCallback=null,this._assets.dispose(),this._assets=null,null!=this._character&&(this._character.dispose(),this._character=null),this._blobs=null,this._orangeArt=null,this._squeakFX=null,this._plate=null,this._sponge=null},killListeners:function(){null!=this._character&&(this._character.armature.removeEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onIntroComplete))),this.getStage().removeEventListener("mousedown",b(this,this.onSpongeDown)),this.getStage().removeEventListener("stagemousemove",b(this,this.onSpongeMove)),this.getStage().removeEventListener("mousedown",b(this,this.onSpongeDown))},start:function(){this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.onIntroComplete)),this._character.armature.animation.gotoAndPlay("helpIdle")},startClean:function(a){this.getStage().addEventListener("mousedown",b(this,this.onSpongeDown))},onIntroComplete:function(a){this.removeChild(this._character),this._character.armature.removeEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onIntroComplete)),dragonBones.animation.WorldClock.clock.remove(this._character.armature),this._character.dispose(),this._character=null,this._sponge=this._assets.getImageFromSheets("sponge"),this._plate=this._assets.getImageFromSheets("plate");var c=960-this._plate.getBounds().width;this._plate.x=.5*c,this.addChild(this._plate),this.temp=new createjs.Shape,this.temp.graphics.beginFill("blue").drawCircle(480,250,260),this._blobs=[],this.makeSpots(),this.makeBigOrangeblob(),this.populateCorn();var d=1.2*this._sponge.getBounds().width;this._sponge.x=960-d;var e=1.2*this._sponge.getBounds().height;this._sponge.y=500-e,this.addChild(this._sponge),this.startClean(),f.audioManager.playVO("daniel_spin_14")},populateCorn:function(){},makeSpots:function(){for(var a=0;25>a;){var b=(a++,this._dirtSpotArt[Math.floor(Math.random()*(this._dirtSpotArt.length-1))]),c=this._assets.getImageFromSheets(b),d=this.findPoint(480-c.getBounds().width);c.x=480+d.x,c.y=250+d.y,this._blobs.push(c),this.addChild(c)}},makeBigOrangeblob:function(){var a=new l(this._assets),b=this.findPoint(400);a.attachTo(this,480+b.x,250+b.y),this._blobs=this._blobs.concat(a.pieces)},makeSparkles:function(){this.removeChild(this._sponge);for(var a=0;7>a;){var b=(a++,this.findPoint(510),new m(this._assets));this.addChild(b)}},findPoint:function(a){null==a&&(a=510);var b=3.283*Math.random(),c=Math.random()*a-.5*a,d=new createjs.Point(c*Math.cos(b),c*Math.sin(b));return d},onSpongeDown:function(a){f.audioManager.playAudio("sponge");var c=a.stageX/F.scale,d=.5*this._sponge.getBounds().width;this._sponge.x=c-d;var e=a.stageY/F.scale,g=.5*this._sponge.getBounds().height;this._sponge.y=e-g,this.getStage().removeEventListener("mousedown",b(this,this.onSpongeDown)),this.getStage().addEventListener("stagemousemove",b(this,this.onSpongeMove))},onSpongeMove:function(a){var b=a.stageX/F.scale,c=a.stageY/F.scale;this.checkForClean(this._sponge.x+.5*this._sponge.getBounds().width,this._sponge.y+.5*this._sponge.getBounds().height,b,c);var d=.5*this._sponge.getBounds().width;this._sponge.x=b-d;var e=.5*this._sponge.getBounds().height;this._sponge.y=c-e},checkForClean:function(a,c,d,e){for(var g=this._blobs.length-1;g>=0;){if(1==this._blobs[g].visible&&this.collides(this._blobs[g].x,this._blobs[g].x+this._blobs[g].scaleX*this._blobs[g].getBounds().width,this._blobs[g].y,this._blobs[g].y+this._blobs[g].scaleY*this._blobs[g].getBounds().height,a,c,d,e)){if(!this._squeakFXPlaying){var h=this._squeakFX.shift();f.audioManager.playAudio(h,b(this,this.squeakComplete)),this._squeakFX.push(h),this._squeakFXPlaying=!0}this._blobs[g].visible=!1,this._blobsCleaned+=1,this._blobsCleaned>=this._blobs.length&&(this.makeSparkles(),f.audioManager.playVO("daniel_spin_18",b(this,this.onCompleteAudio)))}--g}},onCompleteAudio:function(){this.killListeners(),this.dispatchEvent(new g("loadScene",8))},squeakComplete:function(){this._squeakFXPlaying=!1},checkIntersection:function(a,b,c,d,e,f,g){Math.abs((c-a)*(f-b)-(e-a)*(d-b)),this.getDistance(a,b,c,d)},getDistance:function(a,b,c,d){return Math.sqrt((c-a)*(c-a)+(d-b)*(d-b))},collides:function(a,b,c,d,e,f,g,h){for(var i=[-(g-e),g-e,-(h-f),h-f],j=[e-a,b-e,f-c,d-f],k=-(1/0),l=1/0,m=0;4>m;){var n=m++;if(0==i[n]){if(j[n]<0)return!1}else{var o=j[n]/i[n];i[n]<0&&o>k?k=o:i[n]>0&&l>o&&(l=o)}}return k>l||k>1||0>k?!1:!0}});var l=function(a){this.bounds=new createjs.Rectangle(0,0,0,0),this.pieces=[],this.addPiece(a.getImageFromSheets("bigorange6"),39,41),this.addPiece(a.getImageFromSheets("bigorange5"),25,29),this.addPiece(a.getImageFromSheets("bigorange4"),63,69),this.addPiece(a.getImageFromSheets("bigorange1"),38,0),this.addPiece(a.getImageFromSheets("bigorange2"),0,62),this.addPiece(a.getImageFromSheets("bigorange3"),89,25)};l.__name__=!0,l.prototype={attachTo:function(a,b,c){for(var d=0,e=this.pieces.length;e>d;){var f=d++;this.pieces[f].x+=b-.5*this.bounds.width,this.pieces[f].y+=c-.5*this.bounds.height,a.addChild(this.pieces[f])}},addPiece:function(a,b,c){a.x=b,a.y=c,this.pieces.push(a),a.x+a.getBounds().width>this.bounds.width&&(this.bounds.width=a.x+a.getBounds().width),a.y+a.getBounds().height>this.bounds.height&&(this.bounds.height=a.y+a.getBounds().height),this.fauxRadius=Math.sqrt(this.bounds.width/2*(this.bounds.width/2)+this.bounds.height/2*(this.bounds.height/2))}};var m=function(a){createjs.Container.call(this),this._sparkle=a.getImageFromSheets("sparkle");var b=this._sparkle.x,c=.5*this._sparkle.getBounds().width;this._sparkle.x=b-c;var d=this._sparkle.y,e=.5*this._sparkle.getBounds().height;this._sparkle.y=d-e;var f=this.findPoint(510);this.addChild(this._sparkle),this.x=480+f.x,this.y=250+f.y,this.tweenSize()};m.__name__=!0,m.__super__=createjs.Container,m.prototype=a(createjs.Container.prototype,{tweenSize:function(){var a=Math.random();a*=500;var c=Math.floor(a);createjs.Tween.get(this).wait(c).to({scaleX:.6,scaleY:.6},130,createjs.Ease.linear).to({scaleX:1.4,scaleY:1.4},130,createjs.Ease.linear).to({scaleX:0,scaleY:0},130,createjs.Ease.linear).call(b(this,this.tweenPlace))},tweenPlace:function(){var a=this.findPoint(510);this.x=480+a.x,this.y=250+a.y,this.tweenSize()},findPoint:function(a){null==a&&(a=510);var b=3.283*Math.random(),c=Math.random()*a-.5*a,d=new createjs.Point(c*Math.cos(b),c*Math.sin(b));return d}});var n=function(a){j.call(this),this._readyCallback=a,this._assets=new K(this.getImageManifest(),null,b(this,this.onPackageReady))};n.__name__=!0,n.__super__=j,n.prototype=a(j.prototype,{destroy:function(){this._tile.cleanUp(),this._tile=null,this.removeAllChildren(),this._tileFrame=null,this._assets.dispose(),this._assets=null,this._readyCallback=null,n._songFinished=!1},getImageManifest:function(){return[{type:"image",id:"disappointedSheet",src:"assets/sheets/SpinnerGameDisappointedSprites.png",sheet:!0},{type:"json",id:"disappointedSheetJSON",src:"assets/sheets/SpinnerGameDisappointedSprites.json"}]},getAudioManifest:function(){return[{id:"magicReveal"}]},onPackageReady:function(){this._assets.getImageFromSheets("disappointed_tileSide");this._tile=new o(this._assets.getImageFromSheets("disappointed_00B"),this._assets.getImageFromSheets("disappointed_00A"),this._assets.getImageFromSheets("disappointed_tileSide"),b(this,this.onTileFlipped)),this._tile.x=480,this._tile.y=22.5;var a=new createjs.Shape;a.graphics.beginFill("#2d86e4"),a.graphics.drawRect(0,0,960,500),a.graphics.endFill(),this._tileFrame=this._assets.getImageFromSheets("disappointed_Frame");var c=960-this._tileFrame.getBounds().width;this._tileFrame.x=.5*c;var d=500-this._tileFrame.getBounds().height;this._tileFrame.y=.5*d,this.addChild(a),this.addChild(this._tileFrame),this.addChild(this._tile),this._readyCallback()},start:function(){f.audioManager.loopAudio("rainLoop"),f.audioManager.playVO("daniel_spin_19",b(this,this.songFinished))},songFinished:function(){f.audioManager.playVO("daniel_spin_07a",b(this,this.lastSongFinished))},lastSongFinished:function(){n._songFinished=!0},onTileFlipped:function(){var a=f.audioManager.playAudio("magicReveal",b(this,this.onRevealFinished));n._songFinished||(a.volume=.5)},onRevealFinished:function(){f.audioManager.playVO("daniel_spin_07b",b(this,this.endScene))},endScene:function(){f.audioManager.stopAudio("rainLoop"),this.dispatchEvent(new g("loadScene",8))},update:function(a){null!=this._tile&&this._tile.update(a)}});var o=function(a,c,d,e){this._wiggleOffset=0,this._tileTouched=!1,this._finishSpin=!1,this._sinCount=0,this._diffOffset=0,this._flipped=!1,createjs.Container.call(this),this._completeHandler=e,this._tileContainer=new createjs.Container,this._goodTile=a,this._goodTile.x-=.5*this._goodTile.getBounds().width,this._badTile=c,this._badTile.x-=.5*this._goodTile.getBounds().width,this._seperator=d,this._seperator.x-=.5*this._seperator.getBounds().width,this._activeTile=this._badTile,this._goodTile.visible=!1,this._tileWidth=this._activeTile.getBounds().width,this._tileContainer.addChild(this._badTile),this._tileContainer.addChild(this._goodTile),this._seperator.scaleX=1-this._tileContainer.scaleX,this.addChild(this._tileContainer),this.addChild(this._seperator),this._tileContainer.addEventListener("mousedown",b(this,this.onTileTouch))};o.__name__=!0,o.__super__=createjs.Container,o.prototype=a(createjs.Container.prototype,{cleanUp:function(){this._goodTile=null,this._badTile=null,this._seperator=null,this._activeTile=null,this.removeAllChildren(),this._tileContainer.removeEventListener("mousedown",b(this,this.onTileTouch))},onTileTouch:function(a){n._songFinished&&(this._tileTouched=!0,this._tileContainer.removeEventListener("mousedown",b(this,this.onTileTouch)),this._touchPoint=new createjs.Point(a.stageX,a.stageY),this._lastXPos=this._touchPoint.x,this._startScale=this._tileContainer.scaleX,this._speed=5,this._tileContainer.getStage().addEventListener("pressmove",b(this,this.onTileDrag)),this._tileContainer.getStage().addEventListener("pressup",b(this,this.onTileRelease)),this._tileContainer.getStage().addEventListener("mouseleave",b(this,this.onTileRelease)))},onTileRelease:function(a){this._finishSpin=!0,this._diffOffset=a.stageX-this._touchPoint.x+this._diffOffset,null==this._speed&&(this._speed=5),this._tileContainer.getStage().removeEventListener("pressmove",b(this,this.onTileDrag)),this._tileContainer.getStage().removeEventListener("pressup",b(this,this.onTileRelease)),this._tileContainer.getStage().removeEventListener("mouseleave",b(this,this.onTileRelease))},onTileDrag:function(a){this._speed=L.clamp(a.stageX-this._lastXPos,1,20),this._lastXPos=a.stageX;var b=a.stageX-this._touchPoint.x+this._diffOffset;this.adjustTile(b)},adjustTile:function(a){if(Math.abs(a)<=.6666*this._tileWidth){var c=Math.sin(3*a/this._tileWidth*1.5707-1.5707);if(this._tileContainer.scaleX=Math.abs(c),this._seperator.scaleX=1-this._tileContainer.scaleX,0>=c?this._activeTile!=this._badTile&&(this._activeTile.visible=!1,this._activeTile=this._badTile,this._activeTile.visible=!0):this._activeTile!=this._goodTile&&(this._activeTile.visible=!1,this._activeTile=this._goodTile,this._activeTile.visible=!0),a>0)if(0>=c){var d=this._tileContainer.x-this._tileContainer.getBounds().width*Math.abs(c)*.5,e=this._seperator.getBounds().width*this._seperator.scaleX;this._seperator.x=d-e}else{var f=this._tileContainer.x,g=this._tileContainer.getBounds().width;this._seperator.x=f+g*Math.abs(c)*.5}else if(0>=c){var h=this._tileContainer.x,i=this._tileContainer.getBounds().width;this._seperator.x=h+i*Math.abs(c)*.5}else{var j=this._tileContainer.x-this._tileContainer.getBounds().width*Math.abs(c)*.5,k=this._seperator.getBounds().width*this._seperator.scaleX;this._seperator.x=j-k}}else this._activeTile==this._goodTile&&(this._tileContainer.scaleX=1,this._seperator.scaleX=0,this._tileContainer.getStage().removeEventListener("pressmove",b(this,this.onTileDrag)),this._tileContainer.getStage().removeEventListener("pressup",b(this,this.onTileRelease)),this._tileContainer.getStage().removeEventListener("mouseleave",b(this,this.onTileRelease)),this._finishSpin=!1,this._completeHandler())},update:function(a){this._finishSpin?(this.adjustTile(this._diffOffset),this._diffOffset<0?this._diffOffset-=this._speed:this._diffOffset+=this._speed,this._speed*=1.02):n._songFinished&&!this._tileTouched&&(this.adjustTile(30*Math.sin(this._wiggleOffset)),this._wiggleOffset+=.05)}});var p=function(a,c){j.call(this),this._assets=new K(this.getImageManifest(),this.getAudioManifest(),b(this,this.onPackageReady))};p.__name__=!0,p.__super__=j,p.prototype=a(j.prototype,{onPackageReady:function(){},start:function(){},freeze:function(){},getImageManifest:function(){return[]},getAudioManifest:function(){return[]}});var q=function(){p.call(this,960,500),this._bg=new createjs.Shape,this._bg.graphics.beginFill("#fff48b"),this._bg.graphics.drawRect(0,0,960,500),this._bg.graphics.endFill(),this.addChild(this._bg),this._trolley=new createjs.Container,this.addChild(this._trolley)};q.__name__=!0,q.__super__=p,q.prototype=a(p.prototype,{start:function(){this._trolley.scaleX=.9,this._trolley.scaleY=1.1,createjs.Tween.get(this._trolley,{loop:!0}).to({scaleX:1.05,scaleY:.95},400,createjs.Ease.backIn).to({scaleX:.95,scaleY:1.05},300,createjs.Ease.cubicInOut)},freeze:function(){this._trolley.scaleX=this._trolley.scaleY=1,createjs.Tween.removeTweens(this._trolley)},onPackageReady:function(){var a=this._assets.getImageFromSheets("loadingTrolley"),b=this._assets.getImageFromSheets("loadingText");a.y=-1*a.getBounds().height,a.x=a.getBounds().width*-.5,this._trolley.addChild(a),this._trolley.x=480,this._trolley.y=225,this._text=b;var c=960-b.getBounds().width;this._text.x=.5*c;var d=500-b.getBounds().height;this._text.y=.55*d,this.addChild(this._text)},getImageManifest:function(){return[{type:"image",id:"playerSelectSheet",src:"assets/sheets/loading.png",sheet:!0},{type:"json",id:"playerSelectSheetJSON",src:"assets/sheets/loading.json"}]}});var r=function(a){this.BONE_EVENT=window.dragonBones.events.FrameEvent.BONE_FRAME_EVENT,this.ANIMATION_COMPLETE=window.dragonBones.events.AnimationEvent.COMPLETE,j.call(this),this._readyCallback=a,this._character=new G("Spinandsing_NewFoods","assets/db/mad/","Daniel_mad",b(this,this.onRigReady))};r.__name__=!0,r.__super__=j,r.prototype=a(j.prototype,{destroy:function(){createjs.Tween.removeTweens(this),this.removeAllChildren(),this.killListeners(),this._character.dispose(),this._character=null,this._assets.dispose(),this._assets=null,this._readyCallback=null},killListeners:function(){this._character.armature.removeEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onNeedIdle)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onMadComplete)),this._character.armature.getSlot("OL1").getDisplay().removeEventListener("mousedown",b(this,this.onBalloonTouched))},omAnimationEvent:function(a){f.audioManager.playVO(a.frameLabel)},onRigReady:function(){dragonBones.animation.WorldClock.clock.add(this._character.armature),this._character.armature.addEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent)),this._assets=new K(this.getImageManifest(),this.getAudioManifest(),b(this,this.onPackageReady))},getImageManifest:function(){return[]},getAudioManifest:function(){return[{id:"daniel_spin_10"},{id:"daniel_spin_11a"},{id:"daniel_spin_11b"},{id:"daniel_spin_11c"},{id:"daniel_spin_11d"},{id:"balloonPop01"},{id:"balloonPop02"},{id:"balloonPop03"},{id:"balloonPop04"}]},onPackageReady:function(){var a=new createjs.Shape;a.graphics.beginFill("#f4a8c2"),a.graphics.drawRect(0,0,960,500),a.graphics.endFill(),this.addChild(a),this.addChild(this._character),this._readyCallback()},start:function(){window.character=this._character,this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.onNeedIdle)),this._character.armature.getSlot("OL1").getDisplay().addEventListener("mousedown",b(this,this.onBalloonTouched)),this._character.armature.animation.gotoAndPlay("madSing"),this._atBalloon=1},onNeedIdle:function(a){this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onNeedIdle));var c=this._atBalloon;switch(c){case 1:this._character.armature.animation.gotoAndPlay("madSingIdle");break;case 2:this._character.armature.animation.gotoAndPlay("mad1Idle");break;case 3:this._character.armature.animation.gotoAndPlay("mad2Idle");break;case 4:this._character.armature.animation.gotoAndPlay("mad3Idle")}this._character.armature.getSlot("OL1").getDisplay().addEventListener("mousedown",b(this,this.onBalloonTouched))},onBalloonTouched:function(a){this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onNeedIdle)),this._character.armature.getSlot("OL1").getDisplay().removeEventListener("mousedown",b(this,this.onBalloonTouched)),this._character.armature.animation.gotoAndPlay("mad"+this._atBalloon),f.audioManager.playAudio("balloonPop0"+this._atBalloon),this._atBalloon++,this._atBalloon<5?(this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.onNeedIdle)),createjs.Tween.get(this).wait(200).call(b(this,this.addBallonTouchListener))):this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.onMadComplete))},addBallonTouchListener:function(){createjs.Tween.removeTweens(this),this._character.armature.getSlot("OL1").getDisplay().addEventListener("mousedown",b(this,this.onBalloonTouched))},onMadComplete:function(a){this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onMadComplete)),this.dispatchEvent(new g("loadScene",8))}});var s=function(a){this._foodChosen="",this._introComplete=!1,this._characterBusy=!1,this.BONE_EVENT=window.dragonBones.events.FrameEvent.BONE_FRAME_EVENT,this.ANIMATION_COMPLETE=window.dragonBones.events.AnimationEvent.COMPLETE,j.call(this),this._readyCallback=a,this._character=new G("Spinandsing_NewFoods","assets/db/newfoods/","Daniel_eat",b(this,this.onRigReady))};s.__name__=!0,s.__super__=j,s.prototype=a(j.prototype,{destroy:function(){this.killListeners(),this.removeAllChildren(),this._tomato=null,this._broccli=null,this._pepper=null,this._readyCallback=null,this._character.dispose(),this._character=null,this._assets.dispose(),this._assets=null},killListeners:function(){this._character.armature.removeEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent)),this._tomato.removeEventListener("mousedown",b(this,this.onFoodTouch)),this._tomato.removeEventListener("pressmove",b(this,this.onFoodMove)),this._tomato.removeEventListener("pressup",b(this,this.onFoodRelease)),this._broccli.removeEventListener("mousedown",b(this,this.onFoodTouch)),this._broccli.removeEventListener("pressmove",b(this,this.onFoodMove)),this._broccli.removeEventListener("pressup",b(this,this.onFoodRelease)),this._pepper.removeEventListener("mousedown",b(this,this.onFoodTouch)),this._pepper.removeEventListener("pressmove",b(this,this.onFoodMove)),this._pepper.removeEventListener("pressup",b(this,this.onFoodRelease)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.foodEatComplete)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onOutroComplete))},omAnimationEvent:function(a){-1!=a.frameLabel.indexOf("vo_")?f.audioManager.playVO(a.frameLabel.split("vo_")[1]):-1!=a.frameLabel.indexOf("sfx_")?f.audioManager.playAudio(a.frameLabel.split("sfx_")[1]):f.audioManager.playAudio(a.frameLabel)},onRigReady:function(){dragonBones.animation.WorldClock.clock.add(this._character.armature),this._character.armature.addEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent)),this._assets=new K(this.getImageManifest(),this.getAudioManifest(),b(this,this.onPackageReady))},getImageManifest:function(){return[{type:"image",id:"newFoodSheet",src:"assets/sheets/SpinnerTryNewFoods.png",sheet:!0},{type:"json",id:"newFoodSheetJSON",src:"assets/sheets/SpinnerTryNewFoods.json"}]},getAudioManifest:function(){return[{id:"daniel_spin_08"},{id:"daniel_spin_09"},{id:"mom_spin_01"}]},onPackageReady:function(){var a=new createjs.Shape;a.graphics.beginFill("#f1782e"),a.graphics.drawRect(0,0,960,500),a.graphics.endFill(),this._tomato=this._assets.getImageFromSheets("tomato");var b=960-this._tomato.getBounds().width;this._tomato.x=.7*b;var c=500-this._tomato.getBounds().height;this._tomato.y=.95*c,this._broccli=this._assets.getImageFromSheets("broccoli");var d=.5*(960-this._broccli.getBounds().width);this._broccli.x=d+300;var e=500-this._broccli.getBounds().height;this._broccli.y=.8*e,this._pepper=this._assets.getImageFromSheets("pepper");var f=.5*(960-this._pepper.getBounds().width);this._pepper.x=f-300;var g=500-this._pepper.getBounds().height;this._pepper.y=.8*g,this.addChild(a),this.addChild(this._character),this.addChild(this._tomato),this.addChild(this._broccli),this.addChild(this._pepper),this._readyCallback()},addFoodListeners:function(){this._tomato.addEventListener("mousedown",b(this,this.onFoodTouch)),this._broccli.addEventListener("mousedown",b(this,this.onFoodTouch)),this._pepper.addEventListener("mousedown",b(this,this.onFoodTouch)),this.getStage().addEventListener("mousedown",b(this,this.checkPress))},onFoodTouch:function(a){this._tomato.removeEventListener("mousedown",b(this,this.onFoodTouch)),this._broccli.removeEventListener("mousedown",b(this,this.onFoodTouch)),this._pepper.removeEventListener("mousedown",b(this,this.onFoodTouch)),a.target.addEventListener("pressmove",b(this,this.onFoodMove)),a.target.addEventListener("pressup",b(this,this.onFoodRelease)),this._tomato.visible=!1,this._broccli.visible=!1,this._pepper.visible=!1,a.target.visible=!0},onFoodRelease:function(a){this._characterBusy=!0,a.target.removeEventListener("pressmove",b(this,this.onFoodMove)),a.target.removeEventListener("pressup",b(this,this.onFoodRelease)),this._introComplete?(a.target.visible=!1,this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.foodEatComplete)),a.target==this._tomato?this._character.armature.animation.gotoAndPlay("eatTomato"):a.target==this._broccli?this._character.armature.animation.gotoAndPlay("eatBroccoli"):a.target==this._pepper&&this._character.armature.animation.gotoAndPlay("eatPepper")):a.target==this._tomato?(this._foodChosen="tomato",a.target.scaleX=a.target.scaleY=.4575,a.target.x=440,a.target.y=368):a.target==this._broccli?(this._foodChosen="broccoli",a.target.scaleX=a.target.scaleY=.4,a.target.x=439,a.target.y=372):a.target==this._pepper&&(this._foodChosen="pepper",a.target.scaleX=a.target.scaleY=.3925,a.target.x=439,a.target.y=342)},foodEatComplete:function(a){this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.foodEatComplete)),this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.onOutroComplete)),this._character.armature.animation.gotoAndPlay("eatOutro")},onOutroComplete:function(a){this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onOutroComplete)),this.dispatchEvent(new g("loadScene",8))},onFoodMove:function(a){var b=a.stageX/F.scale,c=.5*a.target.getBounds().width;a.target.x=b-c;var d=a.stageY/F.scale,e=.5*a.target.getBounds().height;a.target.y=d-e},start:function(){this._danielHitbox=new createjs.Rectangle(290,0,350,370),this._character.armature.animation.gotoAndPlay("eatIdle"),f.audioManager.playVO("mom_spin_01",b(this,this.introComplete)),this.addFoodListeners()},checkPress:function(a){if(this._danielHitbox.contains(a.rawX,a.rawY)&&!this._characterBusy){this._characterBusy=!0,this.killFoodListeners();var c=3*Math.random(),d=Math.floor(c)+1;switch(this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.foodEatComplete)),d){case 1:this._character.armature.animation.gotoAndPlay("eatTomato");break;case 2:this._character.armature.animation.gotoAndPlay("eatBroccoli");break;case 3:this._character.armature.animation.gotoAndPlay("eatPepper");break;default:this._character.armature.animation.gotoAndPlay("eatPepper")}}},introComplete:function(){if(this._introComplete=!0,""!=this._foodChosen){this._tomato.visible=!1,this._broccli.visible=!1,this._pepper.visible=!1,this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.foodEatComplete));var a=this._foodChosen;switch(a){case"broccoli":this._character.armature.animation.gotoAndPlay("eatBroccoli");break;case"pepper":this._character.armature.animation.gotoAndPlay("eatPepper");break;case"tomato":this._character.armature.animation.gotoAndPlay("eatTomato")}}},killFoodListeners:function(){this._tomato.visible=!1,this._broccli.visible=!1,this._pepper.visible=!1,this.getStage().removeEventListener("pressdown",b(this,this.checkPress)),this._tomato.removeEventListener("mousedown",b(this,this.onFoodTouch)),this._broccli.removeEventListener("mousedown",b(this,this.onFoodTouch)),this._pepper.removeEventListener("mousedown",b(this,this.onFoodTouch))},animationComplete:function(a){this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.animationComplete)),
this.dispatchEvent(new g("loadScene",8))}});var t=function(a){this._thingChosen="",this._introFinished=!1,this._characterBusy=!1,this.BONE_EVENT=window.dragonBones.events.FrameEvent.BONE_FRAME_EVENT,this.ANIMATION_COMPLETE=window.dragonBones.events.AnimationEvent.COMPLETE,j.call(this),this._readyCallback=a,this._character=new G("Daniel_Spinandsing","assets/db/onemore/","Daniel_more",b(this,this.onRigReady))};t.__name__=!0,t.__super__=j,t.prototype=a(j.prototype,{destroy:function(){this.finalKillListeners(),this.removeAllChildren(),this._character.dispose(),this._character=null,this._assets.dispose(),this._assets=null,this._readyCallback=null},finalKillListeners:function(){this._character.armature.getSlot("OL3").getDisplay().removeEventListener("mousedown",b(this,this.onXylophoneTouched)),this._character.armature.getSlot("OL4").getDisplay().removeEventListener("mousedown",b(this,this.onArtTouched)),this._character.armature.getSlot("OL2").getDisplay().removeEventListener("mousedown",b(this,this.onBubblesTouched)),this._character.armature.removeEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.animationComplete))},omAnimationEvent:function(a){-1!=a.frameLabel.indexOf("vo_")?f.audioManager.playVO(a.frameLabel.split("vo_")[1]):-1!=a.frameLabel.indexOf("sfx_")?f.audioManager.playAudio(a.frameLabel.split("sfx_")[1]):f.audioManager.playAudio(a.frameLabel)},onRigReady:function(){dragonBones.animation.WorldClock.clock.add(this._character.armature),this._character.armature.addEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent)),this._assets=new K(this.getImageManifest(),this.getAudioManifest(),b(this,this.onPackageReady))},getImageManifest:function(){return[]},getAudioManifest:function(){return[{id:"dad_spin_02"},{id:"daniel_spin_13"}]},onPackageReady:function(){var a=new createjs.Shape;a.graphics.beginFill("#a270da"),a.graphics.drawRect(0,0,960,500),a.graphics.endFill(),this.addChild(a),this.addChild(this._character),this._readyCallback()},start:function(){this._characterBusy=!0,this._character.armature.animation.gotoAndPlay("moreIdle"),f.audioManager.playVO("dad_spin_02",b(this,this.introFinished)),this._danielHitbox=new createjs.Rectangle(320,0,330,375),this.getStage().addEventListener("mousedown",b(this,this.stageTouch)),this._character.armature.getSlot("OL3").getDisplay().addEventListener("mousedown",b(this,this.onXylophoneTouched)),this._character.armature.getSlot("OL4").getDisplay().addEventListener("mousedown",b(this,this.onArtTouched)),this._character.armature.getSlot("OL2").getDisplay().addEventListener("mousedown",b(this,this.onBubblesTouched))},stageTouch:function(a){if(this._danielHitbox.contains(a.rawX,a.rawY)&&!this._characterBusy){this._characterBusy=!0,this.killListeners();var b=3*Math.random(),c=Math.floor(b)+1;switch(c){case 1:this.onXylophoneTouched(null);break;case 2:this.onArtTouched(null);break;case 3:this.onBubblesTouched(null);break;default:this.onXylophoneTouched(null)}}},introFinished:function(){this._introFinished=!0,this._characterBusy=!1;var a=this._thingChosen;switch(a){case"art":this.onArtTouched(null);break;case"bubbles":this.onBubblesTouched(null);break;case"xylophone":this.onXylophoneTouched(null)}},onXylophoneTouched:function(a){this.killListeners(),this._character.armature.getSlot("OL4").getDisplay().visible=!1,this._character.armature.getSlot("OL2").getDisplay().visible=!1,this._introFinished?(this._characterBusy=!0,this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.animationComplete)),this._character.armature.animation.gotoAndPlay("moreXylophone")):this._thingChosen="xylophone"},onArtTouched:function(a){this.killListeners(),this._character.armature.getSlot("OL3").getDisplay().visible=!1,this._character.armature.getSlot("OL2").getDisplay().visible=!1,this._introFinished?(this._characterBusy=!0,this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.animationComplete)),this._character.armature.animation.gotoAndPlay("moreSketch")):this._thingChosen="art"},onBubblesTouched:function(a){this.killListeners(),this._character.armature.getSlot("OL3").getDisplay().visible=!1,this._character.armature.getSlot("OL4").getDisplay().visible=!1,this._introFinished?(this._characterBusy=!0,this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.animationComplete)),this._character.armature.animation.gotoAndPlay("moreBubble")):this._thingChosen="bubbles"},animationComplete:function(a){this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.animationComplete)),this.getStage().removeEventListener("mousedown",b(this,this.stageTouch)),this.dispatchEvent(new g("loadScene",8))},killListeners:function(){this._character.armature.getSlot("OL3").getDisplay().removeEventListener("mousedown",b(this,this.onXylophoneTouched)),this._character.armature.getSlot("OL4").getDisplay().removeEventListener("mousedown",b(this,this.onArtTouched)),this._character.armature.getSlot("OL2").getDisplay().removeEventListener("mousedown",b(this,this.onBubblesTouched))}});var u=function(a){this._canPlayNote=!1,this._idleCounter=0,this._idleTimer=0,this._initialStart=!1,this._audioManager=window.SchellGames.audioManager,j.call(this),this._lastSoundPlay=(new Date).getTime(),this._readyCallback=a,this._notes=["melody1","melody1","melody1","melody1","melody2","melody1","melody3","melody4","melody3","melody3","melody3","melody3","melody1","melody3","melody4","melody3"],this._assets=new K(this.getImageManifest(),this.getAudioManifest(),b(this,this.onPackageReady))};u.__name__=!0,u.__super__=j,u.prototype=a(j.prototype,{getImageManifest:function(){return[{type:"image",id:"spinnerMenuSheet",src:"assets/sheets/SpinnerGameMenuSprites.png",sheet:!0},{type:"json",id:"spinnerMenuSheetJSON",src:"assets/sheets/SpinnerGameMenuSprites.json"}]},getAudioManifest:function(){return[{id:"melody1"},{id:"melody2"},{id:"melody3"},{id:"melody4"}]},destroy:function(){j.prototype.destroy.call(this),this.removeAllChildren(),this._bg.removeEventListener("mousedown",b(this,this.onStageClick)),this._spinnerArm.removeEventListener("mousedown",b(this,this.onSpinnerTouch)),this._spinnerArm.removeEventListener("pressmove",b(this,this.onSpinnerMove)),this._spinnerArm.removeEventListener("pressup",b(this,this.onSpinnerRelease)),this._assets.dispose(),this._assets=null,this._readyCallback=null,this._notes=null},start:function(){this.enable(),e.initial_start||(f.audioManager.playVO("daniel_spin_02"),e.initial_start=!0)},enable:function(){this._bg.addEventListener("mousedown",b(this,this.onStageClick)),this._spinnerArm.addEventListener("mousedown",b(this,this.onSpinnerTouch)),this._clickedSpinner=!1,this._goToTab=!1},onPackageReady:function(){if(this._bg=this._assets.getImageFromSheets("spinner_bg00"),this._spinnerArm=this._assets.getImageFromSheets("spinner_arrow2"),this._spinnerArm.x=-66,this._spinnerArm.y=-150,this._spinner=new createjs.Container,this._spinner.x=484,this._spinner.y=250,this._spinner.addChild(this._spinnerArm),this._spinner.rotation=i.menuPosition,0!=this._spinner.rotation)for(this._currentTile=Math.floor(this._spinner.rotation/45)%8;this._currentTile<0;)this._currentTile+=8;this._highlight=new createjs.Container;var a=new createjs.Shape;a.graphics.beginFill("red"),a.graphics.drawCircle(0,0,15),a.graphics.endFill(),this._highlight.addChild(a),this._highlightArt=this._assets.getImageFromSheets("Spinner_SongGlow"),this._highlightArt.y=-227,this._highlightArt.x=48,this._highlight.addChild(this._highlightArt),this._highlight.x=484,this._highlight.y=250,this._highlight.rotation=-45,this.addChild(this._bg),this.addChild(this._highlight),this.checkHighlight(),this.addChild(this._spinner),this._ready=!0,this._readyCallback()},onStageClick:function(a){this._canPlayNote=!0,this._idleTimer=0;var c=a.rawX/F.scale,d=a.rawY/F.scale,e=c-484,f=d-250,g=Math.atan(f/e),h=1;h=0>g?0>e?Math.abs(g)<.75?6:5:Math.abs(g)<.75?2:1:0>e?Math.abs(g)<.75?7:8:Math.abs(g)<.75?3:4,this._goalTile=h-1,this._currentTile==this._goalTile?(i.menuPosition=this._spinner.rotation,this._spinnerArm.removeEventListener("mousedown",b(this,this.onSpinnerTouch)),this._bg.removeEventListener("mousedown",b(this,this.onStageClick)),this._audioManager.playAudio("spinnerSelect",b(this,this.selectComplete))):(this._spinnerMove=!0,this._speed=.25)},onLeaveStage:function(a){this._spinnerArm.removeEventListener("pressmove",b(this,this.onSpinnerMove)),this._spinnerArm.removeEventListener("pressup",b(this,this.onSpinnerRelease)),this._spinnerArm.addEventListener("mousedown",b(this,this.onSpinnerTouch)),this._spinnerArm.getStage().removeEventListener("mouseleave",b(this,this.onLeaveStage))},onSpinnerTouch:function(a){this._canPlayNote=!0,this._spinnerArm.addEventListener("pressmove",b(this,this.onSpinnerMove)),this._spinnerArm.addEventListener("pressup",b(this,this.onSpinnerRelease)),this._spinnerArm.removeEventListener("mousedown",b(this,this.onSpinnerTouch)),this._spinnerArm.getStage().addEventListener("mouseleave",b(this,this.onLeaveStage)),this._spinnerMove=!1,this._speed=null,this._goalTile=null,this._previousTime=(new Date).getTime()},onSpinnerRelease:function(a){this._idleTimer=0,this._spinnerArm.removeEventListener("pressmove",b(this,this.onSpinnerMove)),this._spinnerArm.removeEventListener("pressup",b(this,this.onSpinnerRelease)),this._spinnerArm.addEventListener("mousedown",b(this,this.onSpinnerTouch)),this._spinnerArm.getStage().removeEventListener("mouseleave",b(this,this.onLeaveStage)),null==this._speed&&(this._speed=Math.random()+1),Math.abs(this._speed)>3&&(this._speed<1?this._speed=-3:this._speed=3),this._spinnerMove=!0},onSpinnerMove:function(a){var b=new createjs.Point(a.stageX/F.scale-this._spinner.x,a.stageY/F.scale-this._spinner.y),c=180*Math.atan2(b.y,b.x)/3.1416;this._angleDiff=c-this._angleMovement,this._angleMovement=c,this._spinner.rotation=this._angleMovement+90,this.checkHighlight(),this._speed=this._angleDiff/((new Date).getTime()-this._previousTime),this._previousTime=(new Date).getTime()},checkHighlight:function(){var a=45*Math.floor(this._spinner.rotation/45)-45;if(a!=this._highlight.rotation&&this._canPlayNote){if((new Date).getTime()-this._lastSoundPlay>100){var b=this._notes.shift();f.audioManager.playAudio(b),this._lastSoundPlay=(new Date).getTime(),this._notes.push(b)}this._highlight.rotation=a}},update:function(a){var c=a.delta;if(this._idleTimer+=a.delta,this._idleTimer>=12e3&&(this._idleCounter++,this._idleCounter%f._spinModulosHandler==0?f.audioManager.playVO("daniel_spin_04"):f.audioManager.playVO("daniel_spin_03"),this._idleTimer=0),this._ready&&this._spinnerMove){if(null!=this._goalTile){this._spinner.rotation+=this._speed*a.delta;for(var d=Math.floor(this._spinner.rotation/45)%8;0>d;)d+=8;if(d==this._goalTile)for(;c>0;)this._speed*=.8,c-=20;Math.abs(this._speed)<.02&&(this._speed=0,this._spinnerMove=!1,i.menuPosition=this._spinner.rotation,this._spinnerArm.removeEventListener("mousedown",b(this,this.onSpinnerTouch)),this._audioManager.playAudio("spinnerSelect",b(this,this.selectComplete)),this._bg.removeEventListener("mousedown",b(this,this.onStageClick)))}else{for(this._spinner.rotation+=this._speed*a.delta;c>0;)this._speed*=.98,c-=20;Math.abs(this._speed)<.02&&(this._speed=0,this._spinnerMove=!1,i.menuPosition=this._spinner.rotation,this._spinnerArm.removeEventListener("mousedown",b(this,this.onSpinnerTouch)),this._bg.removeEventListener("mousedown",b(this,this.onStageClick)),this._audioManager.playAudio("spinnerSelect",b(this,this.selectComplete)))}this.checkHighlight()}},loadScene:function(){this._spinner.removeEventListener("mousedown",b(this,this.onSpinnerTouch)),this._spinnerArm.getStage().removeEventListener("mouseleave",b(this,this.onLeaveStage)),this.getStage().removeEventListener("stagemouseup",b(this,this.onStageClick));for(var a=Math.floor(this._spinner.rotation/45)%8;0>a;)a+=8;f._spinModulosHandler=2,f.audioManager.killAll(),this.dispatchEvent(new g("loadScene",a))},selectComplete:function(){this.loadScene()}});var v=function(a){this._misses=0,this.BONE_EVENT=window.dragonBones.events.FrameEvent.BONE_FRAME_EVENT,this.ANIMATION_COMPLETE=window.dragonBones.events.AnimationEvent.COMPLETE,j.call(this),this._readyCallback=a,this._character=new G("Daniel_TryAgain","assets/db/staysafe/","Daniel_safe",b(this,this.onRigReady))};v.__name__=!0,v.__super__=j,v.prototype=a(j.prototype,{destroy:function(){this.killListeners(),this.removeAllChildren(),this._character.dispose(),this._character=null,this._assets.dispose(),this._assets=null,this._readyCallback=null},killListeners:function(){this._character.armature.getDisplay().removeEventListener("mousedown",b(this,this.onSignTouched)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onStopComplete)),this._character.armature.removeEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent))},omAnimationEvent:function(a){-1!=a.frameLabel.indexOf("vo_")?f.audioManager.playVO(a.frameLabel.split("vo_")[1]):-1!=a.frameLabel.indexOf("sfx_")?f.audioManager.playAudio(a.frameLabel.split("sfx_")[1]):f.audioManager.playAudio(a.frameLabel)},onRigReady:function(){dragonBones.animation.WorldClock.clock.add(this._character.armature),this._character.armature.addEventListener(this.BONE_EVENT,b(this,this.omAnimationEvent)),this._assets=new K(this.getImageManifest(),this.getAudioManifest(),b(this,this.onPackageReady))},getImageManifest:function(){return[]},getAudioManifest:function(){return[{id:"mom_spin_02"},{id:"whistle"},{id:"duckQuacks"},{id:"daniel_spin_21"}]},onPackageReady:function(){var a=new createjs.Shape;a.graphics.beginFill("#FBB1F4"),a.graphics.drawRect(0,0,960,500),a.graphics.endFill(),a.graphics.beginFill("#BE4DBE"),a.graphics.drawRect(0,250,960,250),a.graphics.endFill(),this.addChild(a),this.addChild(this._character),this._readyCallback()},start:function(){this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.introComplete)),this._character.armature.animation.gotoAndPlay("safeIntro")},introComplete:function(){this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.introComplete)),this._character.armature.animation.gotoAndPlay("safeRun"),this._character.armature.getDisplay().addEventListener("mousedown",b(this,this.onSignTouched))},onSignTouched:function(a){f.audioManager.playAudio("whistle"),this._character.armature.getDisplay().removeEventListener("mousedown",b(this,this.onSignTouched)),this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.onStopComplete)),this._character.armature.animation.gotoAndPlay("safeStop")},onStopComplete:function(a){this.dispatchEvent(new g("loadScene",8))}});var w=function(a,b,c){null==c&&(c=.75),this._time=1e3,this._canJiggle=!0,createjs.Container.call(this),this._sprite=a,this.addChild(this._sprite),null!=b&&(this._sprite.x=b.x,this._sprite.y=b.y),this._scaleFactor=c,this.scaleX=this.scaleY=this._scaleFactor};w.__name__=!0,w.__super__=createjs.Container,w.prototype=a(createjs.Container.prototype,{cleanUp:function(){this._sprite=null},setPosition:function(a,b){this._defaultPosition=new createjs.Point(a,b),this.x=a,this.y=b},adjustScale:function(a){this.scaleX=this.scaleY=this._scaleFactor+(1-this._scaleFactor)*a,this.scaleX>this._scaleFactor&&(this._canJiggle=!0,this.jiggle(new createjs.Point(10,3)))},jiggle:function(a){this._jiggleVec=a,this._jiggleFactor=1,this._jiggling=!0,this._canJiggle=!1,this.calculateJiggle()},calculateJiggle:function(){if(this._jiggling){var a=this._defaultPosition.x+this._jiggleVec.x*this._jiggleFactor,c=this._defaultPosition.y+this._jiggleVec.y*this._jiggleFactor;createjs.Tween.get(this).to({x:a,y:c},100).call(b(this,this.calculateJiggle)),this._jiggleFactor*=-.9,Math.abs(this._jiggleFactor)<=.05&&(this._jiggling=!1)}},reset:function(){this._jiggling=!1,this._canJiggle=!0,createjs.Tween.removeTweens(this),this.scaleX=this.scaleY=this._scaleFactor,this.x=this._defaultPosition.x,this.y=this._defaultPosition.y},killJiggle:function(){},trigger:function(){createjs.Tween.get(this).to({scaleX:1,scaleY:1},this._time,createjs.Ease.elasticOut)},setTime:function(a){this._time=a}});var x=function(){this._enabled=!1,this._wiggleOffset=0,this._clicked=!1,this._finishOpen=!1,this._diffOffset=0,createjs.Container.call(this),this._back=new createjs.Container,this._bits=new createjs.Container,this._front=new createjs.Container,this._bouncyBits=[],this.addChild(this._back),this.addChild(this._bits),this.addChild(this._front)};x.__name__=!0,x.__super__=createjs.Container,x.prototype=a(createjs.Container.prototype,{cleanUp:function(){this._outside=null,this._inside=null;for(var a=0,b=this._bouncyBits;a<b.length;){var c=b[a];++a,c.cleanUp()}this._bouncyBits=null},enable:function(){this._enabled=!0,this.addEventListener("mousedown",b(this,this.onCardTouch))},onCardTouch:function(a){this._clicked=!0,this.removeEventListener("mousedown",b(this,this.onCardTouch)),this._touchPoint=new createjs.Point(a.stageX,a.stageY),this._lastXPos=this._touchPoint.x,this.getStage().addEventListener("pressmove",b(this,this.onCardDrag)),this.getStage().addEventListener("pressup",b(this,this.onCardRelease))},onCardRelease:function(a){this._finishOpen=!0,this._diffOffset=a.stageX-this._touchPoint.x+this._diffOffset,null==this._speed&&(this._speed=5,f.audioManager.playAudio("cardOpen")),this.getStage().removeEventListener("pressmove",b(this,this.onCardDrag)),this.getStage().removeEventListener("pressup",b(this,this.onCardRelease)),this._diffOffset>0&&(this._diffOffset=-10)},onCardDrag:function(a){this._speed=L.clamp(a.stageX-this._lastXPos,1,100),this._lastXPos=a.stageX;var b=a.stageX-this._touchPoint.x+this._diffOffset;this.adjustCard(b)},adjustCard:function(a){if(0>a&&a>=-2*this._front.getBounds().width){var b=Math.sin(a/this._front.getBounds().width*1.5707+1.5707),c=L.clamp(b,-1,1);this._front.setTransform(0,0,c,1),c>0?this._outside.setTransform(0,0,1,1,0,0,-10*(1-Math.abs(c))):this._inside.setTransform(0,0,1,1,0,0,-10*(1-Math.abs(c))),c>=0?(this._inside.visible&&(this._inside.visible=!1),this._outside.visible||(this._outside.visible=!0)):(this._inside.visible||(this._inside.visible=!0),this._outside.visible&&(this._outside.visible=!1)),this.dispatchEvent(new createjs.Event("sizeChange",!1,!1))}},update:function(a){!this._clicked&&this._enabled?(this.adjustCard(80*Math.sin(this._wiggleOffset)),this._wiggleOffset+=.05):this._finishOpen&&(this._diffOffset<=0?this._diffOffset-=this._speed:this._diffOffset+=this._speed,this._speed*=1.1,this._diffOffset<-2*this._front.getBounds().width?(this._diffOffset=-2*this._front.getBounds().width,this.adjustCard(this._diffOffset),this._finishOpen=!1,this.addChildAt(this._front,this.getChildIndex(this._back)),this.triggerBouncyBits(),this.dispatchEvent(new createjs.Event("opened",!1,!1))):this.adjustCard(this._diffOffset))},triggerBouncyBits:function(){for(var a=0,b=this._bouncyBits.length;b>a;){var c=a++;this._bouncyBits[c].trigger()}},addCardBack:function(a){this._back.addChild(a)},addBouncyBit:function(a,b,c){null==c&&(c=1e3),a.setPosition(b.x,b.y),a.setTime(c),this._bits.addChild(a),this._bouncyBits.push(a)},addCardFront:function(a,b){this._outside=a,this._inside=b,this._front.addChild(this._outside),this._front.addChild(this._inside),this._inside.visible=!1}});var y=function(a){this._moveDelay=300,j.call(this),this._readyCallback=a,this._assets=new K(this.getImageManifest(),null,b(this,this.onPackageReady))};y.__name__=!0,y.__super__=j,y.prototype=a(j.prototype,{destroy:function(){this.killListeners(),this.removeAllChildren(),this._cardBack=null,this._readyCallback=null,this._card.cleanUp(),this._card=null,this._assets.dispose(),this._assets=null},killListeners:function(){this._card.removeEventListener("opened",b(this,this.onCardOpened))},getImageManifest:function(){return[{type:"image",id:"thankyouSheet",src:"assets/sheets/SpinnerGameThankYouSprites.png",sheet:!0},{type:"json",id:"thankyouSheetJSON",src:"assets/sheets/SpinnerGameThankYouSprites.json"}]},getAudioManifest:function(){return[{id:"melody1"},{id:"melody2"},{id:"melody3"},{id:"melody4"}]},onPackageReady:function(){var a=new createjs.Shape;a.graphics.beginFill("#f3d449"),a.graphics.drawRect(0,0,960,500),a.graphics.endFill(),this._card=new x,this._card.addEventListener("opened",b(this,this.onCardOpened)),this._card.addCardBack(this._assets.getImageFromSheets("cardInsideGrandpere")),this._card.addCardFront(this._assets.getImageFromSheets("cardFrontGrandpere"),this._assets.getImageFromSheets("cardFrontInsideGrandpere"));var c=this._assets.getImageFromSheets("cardInsidePopUpGrandpere01"),d=new w(c,new createjs.Point(c.getBounds().width*-.5,c.getBounds().height*-.3));this._card.addBouncyBit(d,new createjs.Point(.5*this._card.getBounds().width,.15*this._card.getBounds().height),900);var e=this._assets.getImageFromSheets("cardInsidePopUpGrandpere00"),g=new w(e,new createjs.Point(e.getBounds().width*-.5,e.getBounds().height*-.3));this._card.addBouncyBit(g,new createjs.Point(.5*this._card.getBounds().width,.45*this._card.getBounds().height),700),this._originalWidth=this._card.getBounds().width;var h=960-this._card.getBounds().width;this._card.x=.5*h;var i=500-this._card.getBounds().height;this._card.y=.5*i,this._dHand=this._assets.getImageFromSheets("DanielHand"),this._dThumb=this._assets.getImageFromSheets("DanielThumb"),this._gHand=this._assets.getImageFromSheets("GrandpereHand"),this.addChild(a),this._dHand.x=-225,this._dHand.y=150,this._dThumb.x=15,this._dThumb.y=150,this.addChild(this._dHand),this._gHand.y=120,this._gHand.x=770,this.addChild(this._gHand),this._card.x=70,this.addChild(this._card),this.addChild(this._dThumb),f.audioManager.playVO("daniel_spin_15"),createjs.Tween.get(this._dHand).wait(this._moveDelay).to({x:0},1e3,createjs.Ease.linear),createjs.Tween.get(this._dThumb).wait(this._moveDelay).to({x:240},1e3,createjs.Ease.linear),createjs.Tween.get(this._card).wait(this._moveDelay).to({x:295},1e3,createjs.Ease.linear),createjs.Tween.get(this._gHand).wait(this._moveDelay).to({x:570},1e3,createjs.Ease.linear).call(b(this,this.moveBack)),this._readyCallback()},moveBack:function(){createjs.Tween.get(this._dHand).to({x:-150},1e3,createjs.Ease.linear),createjs.Tween.get(this._dThumb).to({x:90},1e3,createjs.Ease.linear),createjs.Tween.get(this._card).to({x:495},1e3,createjs.Ease.linear),createjs.Tween.get(this._gHand).to({x:770},1e3,createjs.Ease.linear).call(b(this,this.moveComplete))},moveComplete:function(){this.removeChild(this._dThumb),this._card.enable()},onCardOpened:function(a){this.onSFXComplete()},onSFXComplete:function(){f.audioManager.playVO("daniel_spin_12",b(this,this.playGrandpere))},playGrandpere:function(){f.audioManager.playVO("grandpere_spin_01",b(this,this.onSongComplete))},onSongComplete:function(){createjs.Tween.get(this._card).wait(1500).call(b(this,this.endGame))},endGame:function(){createjs.Tween.removeTweens(this._card),this.dispatchEvent(new g("loadScene",8))},update:function(a){null!=this._card&&this._card.update(a)}});var z=function(a){j.call(this),this._readyCallback=a,this._assets=new K(this.getImageManifest(),null,b(this,this.onPackageReady))};z.__name__=!0,z.__super__=j,z.prototype=a(j.prototype,{start:function(){},onPackageReady:function(){this._bg=this._assets.getImageFromSheets("spinner_introBG00"),this.addChild(this._bg),this._play=new H(this._assets.getImageFromSheets("playBtn"),this._assets.getImageFromSheets("playBtnDown")),this._play.turnOn(),this._play.addEventListener("down",b(this,this.triggerAdvance)),this._play.x=370,this._play.y=390,this.addChild(this._play),f.audioManager.playVO("daniel_spin_01"),this._bg.addEventListener("mousedown",b(this,this.triggerAdvance)),this._readyCallback()},triggerAdvance:function(a){f.audioManager.killAll(),this._play.turnOff(),this._play.removeEventListener("activated",b(this,this.triggerAdvance)),this._bg.removeEventListener("mousedown",b(this,this.triggerAdvance)),this.dispatchEvent(new g("loadScene",8))},destroy:function(){j.prototype.destroy.call(this),this._play.removeEventListener("activated",b(this,this.triggerAdvance)),this._bg.removeEventListener("mousedown",b(this,this.triggerAdvance)),this.removeChild(this._bg),this.removeChild(this._play),this._play.destroy(),this._play=null,this._bg=null},getImageManifest:function(){return[{type:"image",id:"characterSelectSheet",src:"assets/sheets/SpinnerGameIntroSprite.png",sheet:!0},{type:"json",id:"characterSelectSheetJSON",src:"assets/sheets/SpinnerGameIntroSprite.json"}]},getAudioManifest:function(){return[]}});var A=function(a){this._clickedBuffer=!1,this._misses=0,this.BONE_EVENT=window.dragonBones.events.FrameEvent.BONE_FRAME_EVENT,this.ANIMATION_COMPLETE=window.dragonBones.events.AnimationEvent.COMPLETE,j.call(this),this._readyCallback=a,this._character=new G("Daniel_TryAgain","assets/db/tryagain/","Daniel_try",b(this,this.onRigReady))};A.__name__=!0,A.__super__=j,A.prototype=a(j.prototype,{destroy:function(){this.killListeners(),this.removeAllChildren(),this._character.dispose(),this._character=null,this._assets.dispose(),this._assets=null,this._readyCallback=null},killListeners:function(){this._character.armature.getSlot("ball").getDisplay().removeEventListener("mousedown",b(this,this.onBallTouched)),this._character.armature.getDisplay().removeEventListener("mousedown",b(this,this.onBallTouched)),this._character.armature.removeEventListener(this.BONE_EVENT,b(this,this.onAnimationEvent)),this._character.armature.getDisplay().removeEventListener("mousedown",b(this,this.inputBuffer)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onSuccessComplete)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onTryTrySongComplete))},onAnimationEvent:function(a){-1!=a.frameLabel.indexOf("vo_")?f.audioManager.playVO(a.frameLabel.split("vo_")[1]):-1!=a.frameLabel.indexOf("sfx_")?f.audioManager.playAudio(a.frameLabel.split("sfx_")[1]):f.audioManager.playAudio(a.frameLabel)},onRigReady:function(){dragonBones.animation.WorldClock.clock.add(this._character.armature),this._character.armature.addEventListener(this.BONE_EVENT,b(this,this.onAnimationEvent)),this._assets=new K(this.getImageManifest(),this.getAudioManifest(),b(this,this.onPackageReady))},getImageManifest:function(){return[]},getAudioManifest:function(){return[{id:"dad_spin_01"},{id:"daniel_spin_05"},{id:"daniel_spin_06"},{id:"basketballBounce"},{id:"basketballMiss"},{id:"basketballSuccess"}]},onPackageReady:function(){var a=new createjs.Shape;a.graphics.beginFill("#6ad66c"),a.graphics.drawRect(0,0,960,500),a.graphics.endFill(),this.addChild(a),this.addChild(this._character),this._readyCallback()},start:function(){this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.animComplete)),this._character.armature.animation.gotoAndPlay("tryMiss1"),this._character.armature.getDisplay().addEventListener("mousedown",b(this,this.inputBuffer))},inputBuffer:function(){this._clickedBuffer=!0},animComplete:function(a){this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.animComplete)),this._clickedBuffer?(this._clickedBuffer=!1,this.onBallTouched(null)):(this._character.armature.getDisplay().removeEventListener("mousedown",b(this,this.inputBuffer)),this._character.armature.animation.gotoAndPlay("tryIdle"),this._character.armature.getDisplay().addEventListener("mousedown",b(this,this.onBallTouched)))},onBallTouched:function(a){3==this._misses&&this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onTryTrySongComplete)),this._character.armature.getDisplay().removeEventListener("mousedown",b(this,this.onBallTouched));var c=!1;this._misses<1?c=!0:this._misses<2&&Math.random()<.5&&(c=!0),c?(this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.onMissComplete)),this._character.armature.animation.gotoAndPlay("tryMiss2"),this._misses+=1,this._character.armature.getDisplay().addEventListener("mousedown",b(this,this.inputBuffer))):(this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.onSuccessComplete)),this._character.armature.animation.gotoAndPlay("trySuccess"))},onSuccessComplete:function(a){this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onSuccessComplete)),this.dispatchEvent(new g("loadScene",8))},onMissComplete:function(a){this._character.armature.getDisplay().removeEventListener("mousedown",b(this,this.inputBuffer)),this._character.armature.getDisplay().addEventListener("mousedown",b(this,this.onBallTouched)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onMissComplete)),2==this._misses?(this._character.armature.getDisplay().removeEventListener("mousedown",b(this,this.onBallTouched)),this._character.armature.addEventListener(this.ANIMATION_COMPLETE,b(this,this.onTryTrySongComplete)),this._character.armature.animation.gotoAndPlay("tryTryTry"),this._character.armature.getDisplay().addEventListener("mousedown",b(this,this.inputBuffer))):(this._character.armature.animation.gotoAndPlay("tryIdle"),this._clickedBuffer&&(this._clickedBuffer=!1,this.onBallTouched(null)))},onTryTrySongComplete:function(a){this._character.armature.getDisplay().removeEventListener("mousedown",b(this,this.inputBuffer)),this._character.armature.removeEventListener(this.ANIMATION_COMPLETE,b(this,this.onTryTrySongComplete)),this._character.armature.animation.gotoAndPlay("tryIdle"),this._character.armature.getDisplay().addEventListener("mousedown",b(this,this.onBallTouched)),this._clickedBuffer&&(this._clickedBuffer=!1,this.onBallTouched(null))},onBallDrag:function(a){}});var B=function(){};B.__name__=!0;var C=function(){this.h={}};C.__name__=!0,C.__interfaces__=[B],C.prototype={setReserved:function(a,b){null==this.rh&&(this.rh={}),this.rh["$"+a]=b},getReserved:function(a){return null==this.rh?null:this.rh["$"+a]},remove:function(a){return null!=O[a]?(a="$"+a,null!=this.rh&&this.rh.hasOwnProperty(a)?(delete this.rh[a],!0):!1):this.h.hasOwnProperty(a)?(delete this.h[a],!0):!1},keys:function(){return c.iter(this.arrayKeys())},arrayKeys:function(){var a=[];for(var b in this.h)this.h.hasOwnProperty(b)&&a.push(b);if(null!=this.rh)for(var b in this.rh)36==b.charCodeAt(0)&&a.push(b.substr(1));return a}};var D=function(){};D.__name__=!0,D.__string_rec=function(a,b){if(null==a)return"null";if(b.length>=5)return"<...>";var c=typeof a;switch("function"==c&&(a.__name__||a.__ename__)&&(c="object"),c){case"function":return"<function>";case"object":if(a instanceof Array){if(a.__enum__){if(2==a.length)return a[0];var d=a[0]+"(";b+="	";for(var e=2,f=a.length;f>e;){var g=e++;d+=2!=g?","+D.__string_rec(a[g],b):D.__string_rec(a[g],b)}return d+")"}var h=a.length,i="[";b+="	";for(var j=0,k=h;k>j;){var l=j++;i+=(l>0?",":"")+D.__string_rec(a[l],b)}return i+="]"}var m;try{m=a.toString}catch(n){return"???"}if(null!=m&&m!=Object.toString&&"function"==typeof m){var o=a.toString();if("[object Object]"!=o)return o}var p=null,q="{\n";b+="	";var r=null!=a.hasOwnProperty;for(var p in a)(!r||a.hasOwnProperty(p))&&"prototype"!=p&&"__class__"!=p&&"__super__"!=p&&"__interfaces__"!=p&&"__properties__"!=p&&(2!=q.length&&(q+=", \n"),q+=b+p+" : "+D.__string_rec(a[p],b));return b=b.substring(1),q+="\n"+b+"}";case"string":return a;default:return String(a)}};var E=function(a,b,c){this._manifest=a,this._spriteSheetId=b,this._spriteSheetDataId=c};E.__name__=!0,E.prototype={loadSpriteSheet:function(a){null!=this._queue?a():(this._callback=a,this._queue=new createjs.LoadQueue(!0),this._queue.on("complete",b(this,this.createSpriteSheet)),this._queue.loadManifest(this._manifest))},createSpriteSheet:function(){var a=this._queue.getResult(this._spriteSheetDataId);a.images=[this._queue.getResult(this._spriteSheetId)],this._spriteSheet=new createjs.SpriteSheet(a),this._callback()},image:function(a){var b=new createjs.Sprite(this._spriteSheet);return b.gotoAndStop(a),b}};var F=function(a,c,d,e,f){
this._game=c,this._app=a,a.on("resize",b(this,this.onResize)),this.setBaseDimensions(new createjs.Rectangle(0,0,e,f)),this.onResize(d.canvas.width,d.canvas.height)};F.__name__=!0,F.prototype={setBaseDimensions:function(a){this._baseDimennsions=a},onResize:function(a,b){F.scale=a/this._baseDimennsions.width,this._game.scaleX=this._game.scaleY=F.scale,F.currentDimensions=new createjs.Rectangle(0,0,this._baseDimennsions.width*F.scale,this._baseDimennsions.height*F.scale)}};var G=function(a,c,d,e){createjs.Container.call(this),this._id=a,this._armatureName=d,this._readyCallback=e;var f=new createjs.LoadQueue;f.on("complete",b(this,this.onAssetsLoaded)),f.loadFile({id:"textureImage",src:c+"texture.png"},!1),f.loadFile({id:"textureData",src:c+"texture.json"},!1),f.loadFile({id:"skeletonData",src:c+"skeleton.json"},!1),f.load()};G.__name__=!0,G.__super__=createjs.Container,G.prototype=a(createjs.Container.prototype,{get_characterId:function(){return this._id},dispose:function(){this.removeAllEventListeners(),this.removeAllChildren(),this.removeChild(this.armature.getDisplay()),this.armature.animation.stop(),null!=this.armature&&(this.armature.removeAllEventListeners(),this.armature=null),this._readyCallback=null,this._texture=null,this._textureData=null,this._skeletonData=null,this._factory=null,this._id=null},onAssetsLoaded:function(a){this._texture=a.target.getResult("textureImage"),this._textureData=a.target.getResult("textureData"),this._skeletonData=a.target.getResult("skeletonData"),this.build()},build:function(){var a=window.dragonBones;this._factory=new a.factorys.CreateJSFactory,this._factory.addSkeletonData(a.objects.DataParser.parseSkeletonData(this._skeletonData));var b=new a.textures.CreateJSTextureAtlas(this._texture,this._textureData);this._factory.addTextureAtlas(b),this.armature=this._factory.buildArmature(this._armatureName),this.addChild(this.armature.getDisplay()),null!=this._readyCallback&&this._readyCallback()},getArmatureByName:function(a){return this._factory.buildArmature(a)}});var H=function(a,b,c,d){createjs.Container.call(this),null==d&&(d=a.getBounds()),this._hitbox=new createjs.Shape,this._hitbox.graphics.beginFill("#00ff00"),this._hitbox.graphics.drawRect(d.x,d.y,d.width,d.height),this._hitbox.graphics.endFill(),this._hitbox.alpha=.01,this._off=a,this.addChildAt(this._off,0),null!=b&&this.addOver(b),null==c&&null!=this._over&&(this._down=this._over),this.addChild(this._hitbox)};H.__name__=!0,H.__super__=createjs.Container,H.prototype=a(createjs.Container.prototype,{forceOver:function(){this._over.visible=!0,this._off.visible=!1},forceOut:function(){this._over.visible=!1,this._off.visible=!0},turnOn:function(){this._hitbox.addEventListener("mousedown",b(this,this.onDown)),null!=this._over&&(this._hitbox.addEventListener("mouseover",b(this,this.onOver)),this._hitbox.addEventListener("mouseout",b(this,this.onOut)))},turnOff:function(){this._hitbox.removeEventListener("mousedown",b(this,this.onDown)),null!=this._over&&(this._hitbox.removeEventListener("mouseover",b(this,this.onOver)),this._hitbox.removeEventListener("mouseout",b(this,this.onOut)))},onOut:function(a){this._over.visible=!1,this._off.visible=!0},onOver:function(a){this._over.visible=!0,this._off.visible=!1,this.dispatchEvent(new createjs.Event("over",!1,!1))},onDown:function(a){null!=this._down&&(this._over.visible=!1,this._off.visible=!1,this._down.visible=!0),this.dispatchEvent(new createjs.Event("down",!1,!1))},addOver:function(a,b,c){null==c&&(c=!1),this._over=a,null!=b&&(this._over.x=b.x,this._over.y=b.y),this.addChildAt(this._over,0),this._over.visible=!1,this._clearOnOver=c},destroy:function(){this.removeAllChildren(),this.turnOff()}});var I=function(){E.call(this,I.manifest(),"loadingSpriteSheet","loadingData")};I.__name__=!0,I.get_instance=function(){return null==I.instance&&(I.instance=new I),I.instance},I.manifest=function(){return[{src:"assets/sheets/loading.png",id:"loadingSpriteSheet"},{src:"assets/sheets/loading.json",id:"loadingData"}]},I.load=function(a){I.get_instance().loadSpriteSheet(a)},I.loadingAnimation=function(){return new createjs.Sprite(I.get_instance()._spriteSheet,"Loading")},I.__super__=E,I.prototype=a(E.prototype,{});var J=function(){this._callbacks=new C,this._soundMap=new C,this._sounds=new C,this.springrollExists=!1};J.__name__=!0,J.__super__=createjs.EventDispatcher,J.prototype=a(createjs.EventDispatcher.prototype,{useSpringroll:function(a){this.springrollExists=a},playAudio:function(a,c){if(this.springrollExists){var d=app.sound.play(a,c);return d}var e=createjs.Sound.createInstance(a);if(e.play(),null!=c){var f=e.uniqueId,g=this._callbacks;null!=O[f]?g.setReserved(f,c):g.h[f]=c}e.addEventListener("complete",b(this,this.handleComplete)),e.addEventListener("failed",b(this,this.handleFailed));var h=e.uniqueId,i=this._sounds;null!=O[h]?i.setReserved(h,e):i.h[h]=e;var j=this._soundMap,k=e.uniqueId;return null!=O[a]?j.setReserved(a,k):j.h[a]=k,e},loopAudio:function(a){if(this.springrollExists){var b={loop:-1};return app.sound.play(a,b)}var c=createjs.Sound.createInstance(a);c.play("none",0,0,-1);var d=c.uniqueId,e=this._sounds;null!=O[d]?e.setReserved(d,c):e.h[d]=c;var f=this._soundMap,g=c.uniqueId;return null!=O[a]?f.setReserved(a,g):f.h[a]=g,c},playVO:function(a,c){if(this._voCallback=null,this.springrollExists)app.voPlayer.play(a,c);else{var d=createjs.Sound.createInstance(a);if(d.play(),null!=c){var e=d.uniqueId,f=this._callbacks;null!=O[e]?f.setReserved(e,c):f.h[e]=c}d.addEventListener("complete",b(this,this.handleComplete)),d.addEventListener("failed",b(this,this.handleFailed));var g=d.uniqueId,h=this._sounds;null!=O[g]?h.setReserved(g,d):h.h[g]=d;var i=this._soundMap,j=d.uniqueId;null!=O[a]?i.setReserved(a,j):i.h[a]=j}},stopAudio:function(a){if(this.springrollExists)app.sound.stop(a);else{var b=this._sounds,c=this._soundMap,d=null!=O[a]?c.getReserved(a):c.h[a],e=b;if(null!=(null!=O[d]?e.getReserved(d):e.h[d])){var f=this._sounds,g=this._soundMap,h=null!=O[a]?g.getReserved(a):g.h[a],i=f;(null!=O[h]?i.getReserved(h):i.h[h]).volume=0}}},stopVO:function(a){if(this.springrollExists)app.voPlayer.stop();else{var b=this._sounds,c=this._soundMap,d=null!=O[a]?c.getReserved(a):c.h[a],e=b;if(null!=(null!=O[d]?e.getReserved(d):e.h[d])){var f=this._sounds,g=this._soundMap,h=null!=O[a]?g.getReserved(a):g.h[a],i=f;(null!=O[h]?i.getReserved(h):i.h[h]).volume=0}}},killAll:function(){if(this.springrollExists)app.voPlayer.stop(),app.sound.stopAll();else for(var a=this._sounds.keys();a.hasNext();){var c=a.next(),d=this._sounds;(null!=O[c]?d.getReserved(c):d.h[c]).stop();var e=this._sounds;(null!=O[c]?e.getReserved(c):e.h[c]).removeEventListener("complete",b(this,this.handleComplete));var f=this._sounds;(null!=O[c]?f.getReserved(c):f.h[c]).removeEventListener("failed",b(this,this.handleFailed));var g=this._sounds;null!=O[c]?g.setReserved(c,null):g.h[c]=null,this._sounds.remove(c)}},handleFailed:function(a){},handleComplete:function(a){var c=a.currentTarget.uniqueId,d=this._callbacks;if(null!=(null!=O[c]?d.getReserved(c):d.h[c])){var e=a.currentTarget.uniqueId,f=this._callbacks;(null!=O[e]?f.getReserved(e):f.h[e])()}var g=a.currentTarget.uniqueId,h=this._sounds;(null!=O[g]?h.getReserved(g):h.h[g]).stop();var i=a.currentTarget.uniqueId,j=this._sounds;(null!=O[i]?j.getReserved(i):j.h[i]).removeEventListener("complete",b(this,this.handleComplete));var k=a.currentTarget.uniqueId,l=this._sounds;(null!=O[k]?l.getReserved(k):l.h[k]).removeEventListener("failed",b(this,this.handleFailed));var m=a.currentTarget.uniqueId,n=this._sounds;null!=O[m]?n.setReserved(m,null):n.h[m]=null,this._sounds.remove(a.currentTarget.uniqueId);var o=a.currentTarget.uniqueId,p=this._callbacks;null!=O[o]?p.setReserved(o,null):p.h[o]=null,this._callbacks.remove(a.currentTarget.uniqueId)},loadAudio:function(a,b){if(this.springrollExists){for(var c=[],d=0;d<a.length;){var e=a[d];++d,c.push(e.id)}app.sound.preload(c,b)}else b()},queueLoaded:function(a){}});var K=function(a,c,d){this._completed=!1,this._sheetCount=0,this._imagesLoaded=!1,this._audioLoaded=!1,this._audioManager=window.SchellGames.audioManager,this._imgManifest=a,this._audioManifest=c,this._completeCallback=d,createjs.Sound.alternateExtensions=["ogg"],this._loadQueue=new createjs.LoadQueue(!0,""),this._loadQueue.installPlugin(createjs.Sound),this._audioManager.springrollExists&&null!=c?this._audioManager.loadAudio(c,b(this,this.onAudioLoaded)):this._audioLoaded=!0,this.loadManifest(a)};K.__name__=!0,K.prototype={dispose:function(){this._audioManager=null,this._loadQueue.removeAll(),this._loadQueue.close(),this._loadQueue=null,this._imgManifest=null,this._audioManifest=null;for(var a=0,c=this._sheets.length;c>a;){var d=a++;this._sheets[d].removeEventListener("complete",b(this,this.sheetComplete)),this._sheets[d]=null}this._sheets=null,this._completeCallback=null},getImageFromSheets:function(a){for(var b=0,c=this._sheets.length;c>b;){var d=b++;if(-1!=this._sheets[d].getAnimations().indexOf(a)){var e=new createjs.Sprite(this._sheets[d]);return e.gotoAndStop(a),e}}return null},getImage:function(a){return this._loadQueue.getResult(a)},onAudioLoaded:function(){this._audioLoaded=!0,this.checkForCompletion()},loadManifest:function(a,c){if(this._sheets=[],a.length>0){for(var d=0,e=this._sheets.length;e>d;){var f=d++;this._sheets[f]=null}this._loadQueue.removeAllEventListeners("complete"),this._loadQueue.removeAll(),this._loadQueue.installPlugin(createjs.Sound),this._loadQueue.on("complete",b(this,this.onQueueComplete)),this._loadQueue.loadManifest(a)}else this._imagesLoaded=!0,this.checkForCompletion()},onQueueComplete:function(){this.buildSpriteSheets(this._imgManifest)},buildSpriteSheets:function(a){for(var c=0,e=this._imgManifest;c<e.length;){var f=e[c];if(++c,f.sheet){this._sheetCount++;var g=this._loadQueue.getResult(d.string(f.id)+"JSON");g.images=[f.src];var h=new createjs.SpriteSheet(g);this._sheets.push(h),h.complete?(this._sheetCount--,0==this._sheetCount&&(window.console.warn("WARNING: Waiting for sheet instantiation"),this.onSheetsComplete())):h.addEventListener("complete",b(this,this.sheetComplete))}}0==this._sheetCount&&this.onSheetsComplete()},sheetComplete:function(a){a.target.removeEventListener("complete",b(this,this.sheetComplete)),this._sheetCount--,0==this._sheetCount&&this.onSheetsComplete()},onSheetsComplete:function(){this._imagesLoaded=!0,this.checkForCompletion()},checkForCompletion:function(){this._audioLoaded&&this._imagesLoaded&&!this._completed&&(this._completed=!0,this._completeCallback())}};var L=function(){};L.__name__=!0,L.clamp=function(a,b,c){return Math.min(Math.max(a,b),c)};var M,N=0;String.__name__=!0,Array.__name__=!0,Date.__name__=["Date"];var O={};e.GAME_WIDTH=960,e.GAME_HEIGHT=500,e.READY="ready",e.SPINNER_ROT=0,e.initial_start=!1,e.THANK_YOU_END_WAIT=1500,f._spinModulosHandler=1,g.LOAD_SCENE="loadScene",g.THANK_YOU=2,g.TRY_AGAIN=1,g.BIG_HELPER=0,g.NEW_FOODS=3,g.MAD=4,g.STAY_SAFE=5,g.ONE_MORE_THING=6,g.DISAPPOINTED=7,g.SPIN_MENU=8,i.menuPosition=0,j.COMPLETE="complete",n._songFinished=!1,p.READY="ready",s.TOMATO="tomato",s.BROCCOLI="broccoli",s.PEPPER="pepper",t.XYLOPHONE="xylophone",t.ART="art",t.BUBBLES="bubbles",u.LOAD_GAME="loadGame",x.SIZE_CHANGE="sizeChange",x.OPENED="opened",x.START_SCALE_AT=.75,F.scale=1,H.ACTIVATED="activated",H.DOWN="down",H.OVER="over",I.SPRITESHEET="loadingSpriteSheet",I.DATA="loadingData",f.main()}();