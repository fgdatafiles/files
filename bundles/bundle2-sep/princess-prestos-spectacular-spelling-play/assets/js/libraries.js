this.createjs=this.createjs||{},function(){"use strict";var a=createjs.PreloadJS=createjs.PreloadJS||{};a.version="0.6.3",a.buildDate="Tue, 15 Sep 2015 20:59:37 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(a,b){"use strict";function c(){this.constructor=a}return c.prototype=b.prototype,a.prototype=new c},this.createjs=this.createjs||{},createjs.promote=function(a,b){"use strict";var c=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(d){c[(b+="_")+"constructor"]=d.constructor;for(var e in d)c.hasOwnProperty(e)&&"function"==typeof d[e]&&(c[b+e]=d[e])}return a},this.createjs=this.createjs||{},createjs.indexOf=function(a,b){"use strict";for(var c=0,d=a.length;d>c;c++)if(b===a[c])return c;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}}}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"BrowserDetect cannot be instantiated"}var b=a.agent=window.navigator.userAgent;a.isWindowPhone=b.indexOf("IEMobile")>-1||b.indexOf("Windows Phone")>-1,a.isFirefox=b.indexOf("Firefox")>-1,a.isOpera=null!=window.opera,a.isChrome=b.indexOf("Chrome")>-1,a.isIOS=(b.indexOf("iPod")>-1||b.indexOf("iPhone")>-1||b.indexOf("iPad")>-1)&&!a.isWindowPhone,a.isAndroid=b.indexOf("Android")>-1&&!a.isWindowPhone,a.isBlackberry=b.indexOf("Blackberry")>-1,createjs.BrowserDetect=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.type=a,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!b,this.cancelable=!!c,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var b=a.prototype;b.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},b.stopPropagation=function(){this.propagationStopped=!0},b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},b.remove=function(){this.removed=!0},b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)},b.set=function(a){for(var b in a)this[b]=a[b];return this},b.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.Event_constructor("error"),this.title=a,this.message=b,this.data=c}var b=createjs.extend(a,createjs.Event);b.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(a,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this._listeners=null,this._captureListeners=null}var b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener,a.on=b.on,a.removeEventListener=a.off=b.removeEventListener,a.removeAllEventListeners=b.removeAllEventListeners,a.hasEventListener=b.hasEventListener,a.dispatchEvent=b.dispatchEvent,a._dispatchEvent=b._dispatchEvent,a.willTrigger=b.willTrigger},b.addEventListener=function(a,b,c){var d;d=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var e=d[a];return e&&this.removeEventListener(a,b,c),e=d[a],e?e.push(b):d[a]=[b],b},b.on=function(a,b,c,d,e,f){return b.handleEvent&&(c=c||b,b=b.handleEvent),c=c||this,this.addEventListener(a,function(a){b.call(c,a,e),d&&a.remove()},f)},b.removeEventListener=function(a,b,c){var d=c?this._captureListeners:this._listeners;if(d){var e=d[a];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==b){1==g?delete d[a]:e.splice(f,1);break}}},b.off=b.removeEventListener,b.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},b.dispatchEvent=function(a){if("string"==typeof a){var b=this._listeners;if(!b||!b[a])return!1;a=new createjs.Event(a)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(c){}if(a.bubbles&&this.parent){for(var d=this,e=[d];d.parent;)e.push(d=d.parent);var f,g=e.length;for(f=g-1;f>=0&&!a.propagationStopped;f--)e[f]._dispatchEvent(a,1+(0==f));for(f=1;g>f&&!a.propagationStopped;f++)e[f]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return a.defaultPrevented},b.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return!!(b&&b[a]||c&&c[a])},b.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;b=b.parent}return!1},b.toString=function(){return"[EventDispatcher]"},b._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d){var e=d[a.type];if(!e||!(c=e.length))return;try{a.currentTarget=this}catch(f){}try{a.eventPhase=b}catch(f){}a.removed=!1,e=e.slice();for(var g=0;c>g&&!a.immediatePropagationStopped;g++){var h=e[g];h.handleEvent?h.handleEvent(a):h(a),a.removed&&(this.off(a.type,h,1==b),a.removed=!1)}}},createjs.EventDispatcher=a}(),this.createjs=this.createjs||{},function(a){"use strict";function b(a,b){this.Event_constructor("progress"),this.loaded=a,this.total=null==b?1:b,this.progress=0==b?0:this.loaded/this.total}var c=createjs.extend(b,createjs.Event);c.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(b,"Event")}(window),function(){function a(b,d){function f(a){if(f[a]!==q)return f[a];var b;if("bug-string-char-index"==a)b="a"!="a"[0];else if("json"==a)b=f("json-stringify")&&f("json-parse");else{var c,e='{"a":[1,true,false,null,"\\u0000\\b\\n\\f\\r\\t"]}';if("json-stringify"==a){var i=d.stringify,k="function"==typeof i&&t;if(k){(c=function(){return 1}).toJSON=c;try{k="0"===i(0)&&"0"===i(new g)&&'""'==i(new h)&&i(s)===q&&i(q)===q&&i()===q&&"1"===i(c)&&"[1]"==i([c])&&"[null]"==i([q])&&"null"==i(null)&&"[null,null,null]"==i([q,s,null])&&i({a:[c,!0,!1,null,"\x00\b\n\f\r	"]})==e&&"1"===i(null,c)&&"[\n 1,\n 2\n]"==i([1,2],null,1)&&'"-271821-04-20T00:00:00.000Z"'==i(new j(-864e13))&&'"+275760-09-13T00:00:00.000Z"'==i(new j(864e13))&&'"-000001-01-01T00:00:00.000Z"'==i(new j(-621987552e5))&&'"1969-12-31T23:59:59.999Z"'==i(new j(-1))}catch(l){k=!1}}b=k}if("json-parse"==a){var m=d.parse;if("function"==typeof m)try{if(0===m("0")&&!m(!1)){c=m(e);var n=5==c.a.length&&1===c.a[0];if(n){try{n=!m('"	"')}catch(l){}if(n)try{n=1!==m("01")}catch(l){}if(n)try{n=1!==m("1.")}catch(l){}}}}catch(l){n=!1}b=n}}return f[a]=!!b}b||(b=e.Object()),d||(d=e.Object());var g=b.Number||e.Number,h=b.String||e.String,i=b.Object||e.Object,j=b.Date||e.Date,k=b.SyntaxError||e.SyntaxError,l=b.TypeError||e.TypeError,m=b.Math||e.Math,n=b.JSON||e.JSON;"object"==typeof n&&n&&(d.stringify=n.stringify,d.parse=n.parse);var o,p,q,r=i.prototype,s=r.toString,t=new j(-0xc782b5b800cec);try{t=-109252==t.getUTCFullYear()&&0===t.getUTCMonth()&&1===t.getUTCDate()&&10==t.getUTCHours()&&37==t.getUTCMinutes()&&6==t.getUTCSeconds()&&708==t.getUTCMilliseconds()}catch(u){}if(!f("json")){var v="[object Function]",w="[object Date]",x="[object Number]",y="[object String]",z="[object Array]",A="[object Boolean]",B=f("bug-string-char-index");if(!t)var C=m.floor,D=[0,31,59,90,120,151,181,212,243,273,304,334],E=function(a,b){return D[b]+365*(a-1970)+C((a-1969+(b=+(b>1)))/4)-C((a-1901+b)/100)+C((a-1601+b)/400)};if((o=r.hasOwnProperty)||(o=function(a){var b,c={};return(c.__proto__=null,c.__proto__={toString:1},c).toString!=s?o=function(a){var b=this.__proto__,c=a in(this.__proto__=null,this);return this.__proto__=b,c}:(b=c.constructor,o=function(a){var c=(this.constructor||b).prototype;return a in this&&!(a in c&&this[a]===c[a])}),c=null,o.call(this,a)}),p=function(a,b){var d,e,f,g=0;(d=function(){this.valueOf=0}).prototype.valueOf=0,e=new d;for(f in e)o.call(e,f)&&g++;return d=e=null,g?p=2==g?function(a,b){var c,d={},e=s.call(a)==v;for(c in a)e&&"prototype"==c||o.call(d,c)||!(d[c]=1)||!o.call(a,c)||b(c)}:function(a,b){var c,d,e=s.call(a)==v;for(c in a)e&&"prototype"==c||!o.call(a,c)||(d="constructor"===c)||b(c);(d||o.call(a,c="constructor"))&&b(c)}:(e=["valueOf","toString","toLocaleString","propertyIsEnumerable","isPrototypeOf","hasOwnProperty","constructor"],p=function(a,b){var d,f,g=s.call(a)==v,h=!g&&"function"!=typeof a.constructor&&c[typeof a.hasOwnProperty]&&a.hasOwnProperty||o;for(d in a)g&&"prototype"==d||!h.call(a,d)||b(d);for(f=e.length;d=e[--f];h.call(a,d)&&b(d));}),p(a,b)},!f("json-stringify")){var F={92:"\\\\",34:'\\"',8:"\\b",12:"\\f",10:"\\n",13:"\\r",9:"\\t"},G="000000",H=function(a,b){return(G+(b||0)).slice(-a)},I="\\u00",J=function(a){for(var b='"',c=0,d=a.length,e=!B||d>10,f=e&&(B?a.split(""):a);d>c;c++){var g=a.charCodeAt(c);switch(g){case 8:case 9:case 10:case 12:case 13:case 34:case 92:b+=F[g];break;default:if(32>g){b+=I+H(2,g.toString(16));break}b+=e?f[c]:a.charAt(c)}}return b+'"'},K=function(a,b,c,d,e,f,g){var h,i,j,k,m,n,r,t,u,v,B,D,F,G,I,L;try{h=b[a]}catch(M){}if("object"==typeof h&&h)if(i=s.call(h),i!=w||o.call(h,"toJSON"))"function"==typeof h.toJSON&&(i!=x&&i!=y&&i!=z||o.call(h,"toJSON"))&&(h=h.toJSON(a));else if(h>-1/0&&1/0>h){if(E){for(m=C(h/864e5),j=C(m/365.2425)+1970-1;E(j+1,0)<=m;j++);for(k=C((m-E(j,0))/30.42);E(j,k+1)<=m;k++);m=1+m-E(j,k),n=(h%864e5+864e5)%864e5,r=C(n/36e5)%24,t=C(n/6e4)%60,u=C(n/1e3)%60,v=n%1e3}else j=h.getUTCFullYear(),k=h.getUTCMonth(),m=h.getUTCDate(),r=h.getUTCHours(),t=h.getUTCMinutes(),u=h.getUTCSeconds(),v=h.getUTCMilliseconds();h=(0>=j||j>=1e4?(0>j?"-":"+")+H(6,0>j?-j:j):H(4,j))+"-"+H(2,k+1)+"-"+H(2,m)+"T"+H(2,r)+":"+H(2,t)+":"+H(2,u)+"."+H(3,v)+"Z"}else h=null;if(c&&(h=c.call(b,a,h)),null===h)return"null";if(i=s.call(h),i==A)return""+h;if(i==x)return h>-1/0&&1/0>h?""+h:"null";if(i==y)return J(""+h);if("object"==typeof h){for(G=g.length;G--;)if(g[G]===h)throw l();if(g.push(h),B=[],I=f,f+=e,i==z){for(F=0,G=h.length;G>F;F++)D=K(F,h,c,d,e,f,g),B.push(D===q?"null":D);L=B.length?e?"[\n"+f+B.join(",\n"+f)+"\n"+I+"]":"["+B.join(",")+"]":"[]"}else p(d||h,function(a){var b=K(a,h,c,d,e,f,g);b!==q&&B.push(J(a)+":"+(e?" ":"")+b)}),L=B.length?e?"{\n"+f+B.join(",\n"+f)+"\n"+I+"}":"{"+B.join(",")+"}":"{}";return g.pop(),L}};d.stringify=function(a,b,d){var e,f,g,h;if(c[typeof b]&&b)if((h=s.call(b))==v)f=b;else if(h==z){g={};for(var i,j=0,k=b.length;k>j;i=b[j++],h=s.call(i),(h==y||h==x)&&(g[i]=1));}if(d)if((h=s.call(d))==x){if((d-=d%1)>0)for(e="",d>10&&(d=10);e.length<d;e+=" ");}else h==y&&(e=d.length<=10?d:d.slice(0,10));return K("",(i={},i[""]=a,i),f,g,e,"",[])}}if(!f("json-parse")){var L,M,N=h.fromCharCode,O={92:"\\",34:'"',47:"/",98:"\b",116:"	",110:"\n",102:"\f",114:"\r"},P=function(){throw L=M=null,k()},Q=function(){for(var a,b,c,d,e,f=M,g=f.length;g>L;)switch(e=f.charCodeAt(L)){case 9:case 10:case 13:case 32:L++;break;case 123:case 125:case 91:case 93:case 58:case 44:return a=B?f.charAt(L):f[L],L++,a;case 34:for(a="@",L++;g>L;)if(e=f.charCodeAt(L),32>e)P();else if(92==e)switch(e=f.charCodeAt(++L)){case 92:case 34:case 47:case 98:case 116:case 110:case 102:case 114:a+=O[e],L++;break;case 117:for(b=++L,c=L+4;c>L;L++)e=f.charCodeAt(L),e>=48&&57>=e||e>=97&&102>=e||e>=65&&70>=e||P();a+=N("0x"+f.slice(b,L));break;default:P()}else{if(34==e)break;for(e=f.charCodeAt(L),b=L;e>=32&&92!=e&&34!=e;)e=f.charCodeAt(++L);a+=f.slice(b,L)}if(34==f.charCodeAt(L))return L++,a;P();default:if(b=L,45==e&&(d=!0,e=f.charCodeAt(++L)),e>=48&&57>=e){for(48==e&&(e=f.charCodeAt(L+1),e>=48&&57>=e)&&P(),d=!1;g>L&&(e=f.charCodeAt(L),e>=48&&57>=e);L++);if(46==f.charCodeAt(L)){for(c=++L;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==L&&P(),L=c}if(e=f.charCodeAt(L),101==e||69==e){for(e=f.charCodeAt(++L),(43==e||45==e)&&L++,c=L;g>c&&(e=f.charCodeAt(c),e>=48&&57>=e);c++);c==L&&P(),L=c}return+f.slice(b,L)}if(d&&P(),"true"==f.slice(L,L+4))return L+=4,!0;if("false"==f.slice(L,L+5))return L+=5,!1;if("null"==f.slice(L,L+4))return L+=4,null;P()}return"$"},R=function(a){var b,c;if("$"==a&&P(),"string"==typeof a){if("@"==(B?a.charAt(0):a[0]))return a.slice(1);if("["==a){for(b=[];a=Q(),"]"!=a;c||(c=!0))c&&(","==a?(a=Q(),"]"==a&&P()):P()),","==a&&P(),b.push(R(a));return b}if("{"==a){for(b={};a=Q(),"}"!=a;c||(c=!0))c&&(","==a?(a=Q(),"}"==a&&P()):P()),(","==a||"string"!=typeof a||"@"!=(B?a.charAt(0):a[0])||":"!=Q())&&P(),b[a.slice(1)]=R(Q());return b}P()}return a},S=function(a,b,c){var d=T(a,b,c);d===q?delete a[b]:a[b]=d},T=function(a,b,c){var d,e=a[b];if("object"==typeof e&&e)if(s.call(e)==z)for(d=e.length;d--;)S(e,d,c);else p(e,function(a){S(e,a,c)});return c.call(a,b,e)};d.parse=function(a,b){var c,d;return L=0,M=""+a,c=R(Q()),"$"!=Q()&&P(),L=M=null,b&&s.call(b)==v?T((d={},d[""]=c,d),"",b):c}}}return d.runInContext=a,d}var b="function"==typeof define&&define.amd,c={"function":!0,object:!0},d=c[typeof exports]&&exports&&!exports.nodeType&&exports,e=c[typeof window]&&window||this,f=d&&c[typeof module]&&module&&!module.nodeType&&"object"==typeof global&&global;if(!f||f.global!==f&&f.window!==f&&f.self!==f||(e=f),d&&!b)a(e,d);else{var g=e.JSON,h=e.JSON3,i=!1,j=a(e,e.JSON3={noConflict:function(){return i||(i=!0,e.JSON=g,e.JSON3=h,g=h=null),j}});e.JSON={parse:j.parse,stringify:j.stringify}}b&&define(function(){return j})}.call(this),function(){var a={};a.appendToHead=function(b){a.getHead().appendChild(b)},a.getHead=function(){return document.head||document.getElementsByTagName("head")[0]},a.getBody=function(){return document.body||document.getElementsByTagName("body")[0]},createjs.DomUtils=a}(),function(){var a={};a.parseXML=function(a,b){var c=null;try{if(window.DOMParser){var d=new DOMParser;c=d.parseFromString(a,b)}}catch(e){}if(!c)try{c=new ActiveXObject("Microsoft.XMLDOM"),c.async=!1,c.loadXML(a)}catch(e){c=null}return c},a.parseJSON=function(a){if(null==a)return null;try{return JSON.parse(a)}catch(b){throw b}},createjs.DataUtils=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin=null,this.loadTimeout=c.LOAD_TIMEOUT_DEFAULT}var b=a.prototype={},c=a;c.LOAD_TIMEOUT_DEFAULT=8e3,c.create=function(b){if("string"==typeof b){var d=new a;return d.src=b,d}if(b instanceof c)return b;if(b instanceof Object&&b.src)return null==b.loadTimeout&&(b.loadTimeout=c.LOAD_TIMEOUT_DEFAULT),b;throw new Error("Type not recognized.")},b.set=function(a){for(var b in a)this[b]=a[b];return this},createjs.LoadItem=c}(),function(){var a={};a.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,a.RELATIVE_PATT=/^[.\/]*?\//i,a.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,a.parseURI=function(b){var c={absolute:!1,relative:!1};if(null==b)return c;var d=b.indexOf("?");d>-1&&(b=b.substr(0,d));var e;return a.ABSOLUTE_PATT.test(b)?c.absolute=!0:a.RELATIVE_PATT.test(b)&&(c.relative=!0),(e=b.match(a.EXTENSION_PATT))&&(c.extension=e[1].toLowerCase()),c},a.formatQueryString=function(a,b){if(null==a)throw new Error("You must specify data.");var c=[];for(var d in a)c.push(d+"="+escape(a[d]));return b&&(c=c.concat(b)),c.join("&")},a.buildPath=function(a,b){if(null==b)return a;var c=[],d=a.indexOf("?");if(-1!=d){var e=a.slice(d+1);c=c.concat(e.split("&"))}return-1!=d?a.slice(0,d)+"?"+this._formatQueryString(b,c):a+"?"+this._formatQueryString(b,c)},a.isCrossDomain=function(a){var b=document.createElement("a");b.href=a.src;var c=document.createElement("a");c.href=location.href;var d=""!=b.hostname&&(b.port!=c.port||b.protocol!=c.protocol||b.hostname!=c.hostname);return d},a.isLocal=function(a){var b=document.createElement("a");return b.href=a.src,""==b.hostname&&"file:"==b.protocol},a.isBinary=function(a){switch(a){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},a.isImageTag=function(a){return a instanceof HTMLImageElement},a.isAudioTag=function(a){return window.HTMLAudioElement?a instanceof HTMLAudioElement:!1},a.isVideoTag=function(a){return window.HTMLVideoElement?a instanceof HTMLVideoElement:!1},a.isText=function(a){switch(a){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:case createjs.AbstractLoader.SPRITESHEET:return!0;default:return!1}},a.getTypeByExtension=function(a){if(null==a)return createjs.AbstractLoader.TEXT;switch(a.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=c,this.resultFormatter=null,a?this._item=createjs.LoadItem.create(a):this._item=null,this._preferXHR=b,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var b=createjs.extend(a,createjs.EventDispatcher),c=a;c.POST="POST",c.GET="GET",c.BINARY="binary",c.CSS="css",c.IMAGE="image",c.JAVASCRIPT="javascript",c.JSON="json",c.JSONP="jsonp",c.MANIFEST="manifest",c.SOUND="sound",c.VIDEO="video",c.SPRITESHEET="spritesheet",c.SVG="svg",c.TEXT="text",c.XML="xml",b.getItem=function(){return this._item},b.getResult=function(a){return a?this._rawResult:this._result},b.getTag=function(){return this._tag},b.setTag=function(a){this._tag=a},b.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var a=new createjs.Event("initialize");a.loader=this._request,this.dispatchEvent(a),this._request.load()},b.cancel=function(){this.canceled=!0,this.destroy()},b.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},b.getLoadedItems=function(){return this._loadedItems},b._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},b._createTag=function(a){return null},b._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},b._sendProgress=function(a){if(!this._isCanceled()){var b=null;"number"==typeof a?(this.progress=a,b=new createjs.ProgressEvent(this.progress)):(b=a,this.progress=a.loaded/a.total,b.progress=this.progress,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(b)}},b._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var a=new createjs.Event("complete");a.rawResult=this._rawResult,null!=this._result&&(a.result=this._result),this.dispatchEvent(a)}},b._sendError=function(a){!this._isCanceled()&&this.hasEventListener("error")&&(null==a&&(a=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(a))},b._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},b.resultFormatter=null,b.handleEvent=function(a){switch(a.type){case"complete":this._rawResult=a.target._response;var b=this.resultFormatter&&this.resultFormatter(this),c=this;b instanceof Function?b(function(a){c._result=a,c._sendComplete()}):(this._result=b||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(a);break;case"error":this._sendError(a);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_"+a.type.toUpperCase()+"_ERROR"))}},b.buildPath=function(a,b){return createjs.RequestUtils.buildPath(a,b)},b.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractLoader_constructor(a,b,c),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var b=createjs.extend(a,createjs.AbstractLoader);b.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},b._createTag=function(){},b._createRequest=function(){this._preferXHR?this._request=new createjs.XHRRequest(this._item):this._request=new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},b._formatResult=function(a){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(a.getTag().src=a.getResult(!0)),a.getTag()},createjs.AbstractMediaLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a){this._item=a},b=createjs.extend(a,createjs.EventDispatcher);b.load=function(){},b.destroy=function(){},b.cancel=function(){},createjs.AbstractRequest=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractRequest_constructor(a),this._tag=b,this._tagSrcAttribute=c,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var b=createjs.extend(a,createjs.AbstractRequest);b.load=function(){this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this),this._tag.onerror=createjs.proxy(this._handleError,this);var a=new createjs.Event("initialize");a.loader=this._tag,this.dispatchEvent(a),this._hideTag(),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag[this._tagSrcAttribute]=this._item.src,null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0)},b.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;("loaded"==a.readyState||"complete"==a.readyState)&&this._handleTagComplete()},b._handleError=function(){this._clean(),this.dispatchEvent("error")},b._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},b._handleTimeout=function(){this._clean(),this.dispatchEvent(new createjs.Event("timeout"))},b._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._tag.onerror=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag),clearTimeout(this._loadTimeout)},b._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},b._showTag=function(){this._tag.style.visibility=this._startTagVisibility},b._handleStalled=function(){},createjs.TagRequest=createjs.promote(a,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractRequest_constructor(a),this._tag=b,this._tagSrcAttribute=c,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var b=createjs.extend(a,createjs.TagRequest);b.load=function(){var a=createjs.proxy(this._handleStalled,this);this._stalledCallback=a;var b=createjs.proxy(this._handleProgress,this);this._handleProgress=b,this._tag.addEventListener("stalled",a),this._tag.addEventListener("progress",b),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;("loaded"==a.readyState||"complete"==a.readyState)&&this._handleTagComplete()},b._handleStalled=function(){},b._handleProgress=function(a){if(a&&!(a.loaded>0&&0==a.total)){var b=new createjs.ProgressEvent(a.loaded,a.total);this.dispatchEvent(b)}},b._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.removeEventListener("stalled",this._stalledCallback),this._tag.removeEventListener("progress",this._progressCallback),this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(a,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractRequest_constructor(a),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(a)}var b=createjs.extend(a,createjs.AbstractRequest);a.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],b.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response},b.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},b.load=function(){if(null==this._request)return void this._handleError();null!=this._request.addEventListener?(this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1)):(this._request.onloadstart=this._handleLoadStartProxy,this._request.onprogress=this._handleProgressProxy,this._request.onabort=this._handleAbortProxy,this._request.onerror=this._handleErrorProxy,this._request.ontimeout=this._handleTimeoutProxy,this._request.onload=this._handleLoadProxy,this._request.onreadystatechange=this._handleReadyStateChangeProxy),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(a){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,a))}},b.setResponseType=function(a){"blob"===a&&(a=window.URL?"blob":"arraybuffer",this._responseType=a),this._request.responseType=a},b.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},b.getResponseHeader=function(a){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(a):null},b._handleProgress=function(a){if(a&&!(a.loaded>0&&0==a.total)){var b=new createjs.ProgressEvent(a.loaded,a.total);this.dispatchEvent(b)}},b._handleLoadStart=function(a){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},b._handleAbort=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,a))},b._handleError=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(a.message))},b._handleReadyStateChange=function(a){4==this._request.readyState&&this._handleLoad()},b._handleLoad=function(a){if(!this.loaded){this.loaded=!0;var b=this._checkError();if(b)return void this._handleError(b);if(this._response=this._getResponse(),"arraybuffer"===this._responseType)try{this._response=new Blob([this._response])}catch(c){if(window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder,"TypeError"===c.name&&window.BlobBuilder){var d=new BlobBuilder;d.append(this._response),this._response=d.getBlob()}}this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},b._handleTimeout=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,a))},b._checkError=function(){var a=parseInt(this._request.status);switch(a){case 404:return new Error(a);case 0:return this._getResponse()?null:new Error(a)}return null},b._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(a){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(a){}return null},b._createXHR=function(a){var b=createjs.RequestUtils.isCrossDomain(a),c={},d=null;if(window.XMLHttpRequest)d=new XMLHttpRequest,b&&void 0===d.withCredentials&&window.XDomainRequest&&(d=new XDomainRequest);else{for(var e=0,f=s.ACTIVEX_VERSIONS.length;f>e;e++){var g=s.ACTIVEX_VERSIONS[e];try{d=new ActiveXObject(g);break}catch(h){}}if(null==d)return!1}null==a.mimeType&&createjs.RequestUtils.isText(a.type)&&(a.mimeType="text/plain; charset=utf-8"),a.mimeType&&d.overrideMimeType&&d.overrideMimeType(a.mimeType),this._xhrLevel="string"==typeof d.responseType?2:1;var i=null;if(i=a.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(a.src,a.values):a.src,d.open(a.method||createjs.AbstractLoader.GET,i,!0),b&&d instanceof XMLHttpRequest&&1==this._xhrLevel&&(c.Origin=location.origin),a.values&&a.method==createjs.AbstractLoader.POST&&(c["Content-Type"]="application/x-www-form-urlencoded"),b||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),a.headers)for(var j in a.headers)c[j]=a.headers[j];for(j in c)d.setRequestHeader(j,c[j]);return d instanceof XMLHttpRequest&&void 0!==a.withCredentials&&(d.withCredentials=a.withCredentials),this._request=d,!0},b._clean=function(){clearTimeout(this._loadTimeout),null!=this._request.removeEventListener?(this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)):(this._request.onloadstart=null,this._request.onprogress=null,this._request.onabort=null,this._request.onerror=null,this._request.ontimeout=null,this._request.onload=null,this._request.onreadystatechange=null)},b.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(a,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractLoader_constructor(),this._plugins=[],this._typeCallbacks={},this._extensionCallbacks={},this.next=null,this.maintainScriptOrder=!0,this.stopOnError=!1,this._maxConnections=1,this._availableLoaders=[createjs.ImageLoader,createjs.JavaScriptLoader,createjs.CSSLoader,createjs.JSONLoader,createjs.JSONPLoader,createjs.SoundLoader,createjs.ManifestLoader,createjs.SpriteSheetLoader,createjs.XMLLoader,createjs.SVGLoader,createjs.BinaryLoader,createjs.VideoLoader,createjs.TextLoader],this._defaultLoaderLength=this._availableLoaders.length,
this.init(a,b,c)}var b=createjs.extend(a,createjs.AbstractLoader),c=a;b.init=function(a,b,c){this.useXHR=!0,this.preferXHR=!0,this._preferXHR=!0,this.setPreferXHR(a),this._paused=!1,this._basePath=b,this._crossOrigin=c,this._loadStartWasDispatched=!1,this._currentlyLoadingScript=null,this._currentLoads=[],this._loadQueue=[],this._loadQueueBackup=[],this._loadItemsById={},this._loadItemsBySrc={},this._loadedResults={},this._loadedRawResults={},this._numItems=0,this._numItemsLoaded=0,this._scriptOrder=[],this._loadedScripts=[],this._lastProgress=NaN},c.loadTimeout=8e3,c.LOAD_TIMEOUT=0,c.BINARY=createjs.AbstractLoader.BINARY,c.CSS=createjs.AbstractLoader.CSS,c.IMAGE=createjs.AbstractLoader.IMAGE,c.JAVASCRIPT=createjs.AbstractLoader.JAVASCRIPT,c.JSON=createjs.AbstractLoader.JSON,c.JSONP=createjs.AbstractLoader.JSONP,c.MANIFEST=createjs.AbstractLoader.MANIFEST,c.SOUND=createjs.AbstractLoader.SOUND,c.VIDEO=createjs.AbstractLoader.VIDEO,c.SVG=createjs.AbstractLoader.SVG,c.TEXT=createjs.AbstractLoader.TEXT,c.XML=createjs.AbstractLoader.XML,c.POST=createjs.AbstractLoader.POST,c.GET=createjs.AbstractLoader.GET,b.registerLoader=function(a){if(!a||!a.canLoadItem)throw new Error("loader is of an incorrect type.");if(-1!=this._availableLoaders.indexOf(a))throw new Error("loader already exists.");this._availableLoaders.unshift(a)},b.unregisterLoader=function(a){var b=this._availableLoaders.indexOf(a);-1!=b&&b<this._defaultLoaderLength-1&&this._availableLoaders.splice(b,1)},b.setUseXHR=function(a){return this.setPreferXHR(a)},b.setPreferXHR=function(a){return this.preferXHR=0!=a&&null!=window.XMLHttpRequest,this.preferXHR},b.removeAll=function(){this.remove()},b.remove=function(a){var b=null;if(!a||a instanceof Array){if(a)b=a;else if(arguments.length>0)return}else b=[a];var c=!1;if(b){for(;b.length;){var d=b.pop(),e=this.getResult(d);for(f=this._loadQueue.length-1;f>=0;f--)if(g=this._loadQueue[f].getItem(),g.id==d||g.src==d){this._loadQueue.splice(f,1)[0].cancel();break}for(f=this._loadQueueBackup.length-1;f>=0;f--)if(g=this._loadQueueBackup[f].getItem(),g.id==d||g.src==d){this._loadQueueBackup.splice(f,1)[0].cancel();break}if(e)this._disposeItem(this.getItem(d));else for(var f=this._currentLoads.length-1;f>=0;f--){var g=this._currentLoads[f].getItem();if(g.id==d||g.src==d){this._currentLoads.splice(f,1)[0].cancel(),c=!0;break}}}c&&this._loadNext()}else{this.close();for(var h in this._loadItemsById)this._disposeItem(this._loadItemsById[h]);this.init(this.preferXHR,this._basePath,this._crossOrigin)}},b.reset=function(){this.close();for(var a in this._loadItemsById)this._disposeItem(this._loadItemsById[a]);for(var b=[],c=0,d=this._loadQueueBackup.length;d>c;c++)b.push(this._loadQueueBackup[c].getItem());this.loadManifest(b,!1)},b.installPlugin=function(a){if(null!=a&&null!=a.getPreloadHandlers){this._plugins.push(a);var b=a.getPreloadHandlers();if(b.scope=a,null!=b.types)for(var c=0,d=b.types.length;d>c;c++)this._typeCallbacks[b.types[c]]=b;if(null!=b.extensions)for(c=0,d=b.extensions.length;d>c;c++)this._extensionCallbacks[b.extensions[c]]=b}},b.setMaxConnections=function(a){this._maxConnections=a,!this._paused&&this._loadQueue.length>0&&this._loadNext()},b.loadFile=function(a,b,c){if(null==a){var d=new createjs.ErrorEvent("PRELOAD_NO_FILE");return void this._sendError(d)}this._addItem(a,null,c),b!==!1?this.setPaused(!1):this.setPaused(!0)},b.loadManifest=function(a,b,d){var e=null,f=null;if(a instanceof Array){if(0==a.length){var g=new createjs.ErrorEvent("PRELOAD_MANIFEST_EMPTY");return void this._sendError(g)}e=a}else if("string"==typeof a)e=[{src:a,type:c.MANIFEST}];else{if("object"!=typeof a){var g=new createjs.ErrorEvent("PRELOAD_MANIFEST_NULL");return void this._sendError(g)}if(void 0!==a.src){if(null==a.type)a.type=c.MANIFEST;else if(a.type!=c.MANIFEST){var g=new createjs.ErrorEvent("PRELOAD_MANIFEST_TYPE");this._sendError(g)}e=[a]}else void 0!==a.manifest&&(e=a.manifest,f=a.path)}for(var h=0,i=e.length;i>h;h++)this._addItem(e[h],f,d);b!==!1?this.setPaused(!1):this.setPaused(!0)},b.load=function(){this.setPaused(!1)},b.getItem=function(a){return this._loadItemsById[a]||this._loadItemsBySrc[a]},b.getResult=function(a,b){var c=this._loadItemsById[a]||this._loadItemsBySrc[a];if(null==c)return null;var d=c.id;return b&&this._loadedRawResults[d]?this._loadedRawResults[d]:this._loadedResults[d]},b.getItems=function(a){var b=[];for(var c in this._loadItemsById){var d=this._loadItemsById[c],e=this.getResult(c);(a!==!0||null!=e)&&b.push({item:d,result:e,rawResult:this.getResult(c,!0)})}return b},b.setPaused=function(a){this._paused=a,this._paused||this._loadNext()},b.close=function(){for(;this._currentLoads.length;)this._currentLoads.pop().cancel();this._scriptOrder.length=0,this._loadedScripts.length=0,this.loadStartWasDispatched=!1,this._itemCount=0,this._lastProgress=NaN},b._addItem=function(a,b,c){var d=this._createLoadItem(a,b,c);if(null!=d){var e=this._createLoader(d);null!=e&&("plugins"in e&&(e.plugins=this._plugins),d._loader=e,this._loadQueue.push(e),this._loadQueueBackup.push(e),this._numItems++,this._updateProgress(),(this.maintainScriptOrder&&d.type==createjs.LoadQueue.JAVASCRIPT||d.maintainOrder===!0)&&(this._scriptOrder.push(d),this._loadedScripts.push(null)))}},b._createLoadItem=function(a,b,c){var d=createjs.LoadItem.create(a);if(null==d)return null;var e="",f=c||this._basePath;if(d.src instanceof Object){if(!d.type)return null;if(b){e=b;var g=createjs.RequestUtils.parseURI(b);null==f||g.absolute||g.relative||(e=f+e)}else null!=f&&(e=f)}else{var h=createjs.RequestUtils.parseURI(d.src);h.extension&&(d.ext=h.extension),null==d.type&&(!d.ext&&window.console&&console.error("unable to get extension for "+d.src),d.type=createjs.RequestUtils.getTypeByExtension(d.ext));var i=d.src;if(!h.absolute&&!h.relative)if(b){e=b;var g=createjs.RequestUtils.parseURI(b);i=b+i,null==f||g.absolute||g.relative||(e=f+e)}else null!=f&&(e=f);d.src=e+d.src}d.path=e,(void 0===d.id||null===d.id||""===d.id)&&(d.id=i);var j=this._typeCallbacks[d.type]||this._extensionCallbacks[d.ext];if(j){var k=j.callback.call(j.scope,d,this);if(k===!1)return null;k===!0||null!=k&&(d._loader=k),h=createjs.RequestUtils.parseURI(d.src),null!=h.extension&&(d.ext=h.extension)}return this._loadItemsById[d.id]=d,this._loadItemsBySrc[d.src]=d,null==d.crossOrigin&&(d.crossOrigin=this._crossOrigin),d},b._createLoader=function(a){if(null!=a._loader)return a._loader;for(var b=this.preferXHR,c=0;c<this._availableLoaders.length;c++){var d=this._availableLoaders[c];if(d&&d.canLoadItem(a))return new d(a,b)}return null},b._loadNext=function(){if(!this._paused){this._loadStartWasDispatched||(this._sendLoadStart(),this._loadStartWasDispatched=!0),this._numItems==this._numItemsLoaded?(this.loaded=!0,this._sendComplete(),this.next&&this.next.load&&this.next.load()):this.loaded=!1;for(var a=0;a<this._loadQueue.length&&!(this._currentLoads.length>=this._maxConnections);a++){var b=this._loadQueue[a];this._canStartLoad(b)&&(this._loadQueue.splice(a,1),a--,this._loadItem(b))}}},b._loadItem=function(a){a.on("fileload",this._handleFileLoad,this),a.on("progress",this._handleProgress,this),a.on("complete",this._handleFileComplete,this),a.on("error",this._handleError,this),a.on("fileerror",this._handleFileError,this),this._currentLoads.push(a),this._sendFileStart(a.getItem()),a.load()},b._handleFileLoad=function(a){a.target=null,this.dispatchEvent(a)},b._handleFileError=function(a){var b=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,a.item);this._sendError(b)},b._handleError=function(a){var b=a.target;this._numItemsLoaded++,this._finishOrderedItem(b,!0),this._updateProgress();var c=new createjs.ErrorEvent("FILE_LOAD_ERROR",null,b.getItem());this._sendError(c),this.stopOnError?this.setPaused(!0):(this._removeLoadItem(b),this._cleanLoadItem(b),this._loadNext())},b._handleFileComplete=function(a){var b=a.target,c=b.getItem(),d=b.getResult();this._loadedResults[c.id]=d;var e=b.getResult(!0);null!=e&&e!==d&&(this._loadedRawResults[c.id]=e),this._saveLoadedItems(b),this._removeLoadItem(b),this._finishOrderedItem(b)||this._processFinishedLoad(c,b),this._cleanLoadItem(b)},b._saveLoadedItems=function(a){var b=a.getLoadedItems();if(null!==b)for(var c=0;c<b.length;c++){var d=b[c].item;this._loadItemsBySrc[d.src]=d,this._loadItemsById[d.id]=d,this._loadedResults[d.id]=b[c].result,this._loadedRawResults[d.id]=b[c].rawResult}},b._finishOrderedItem=function(a,b){var c=a.getItem();if(this.maintainScriptOrder&&c.type==createjs.LoadQueue.JAVASCRIPT||c.maintainOrder){a instanceof createjs.JavaScriptLoader&&(this._currentlyLoadingScript=!1);var d=createjs.indexOf(this._scriptOrder,c);return-1==d?!1:(this._loadedScripts[d]=b===!0?!0:c,this._checkScriptLoadOrder(),!0)}return!1},b._checkScriptLoadOrder=function(){for(var a=this._loadedScripts.length,b=0;a>b;b++){var c=this._loadedScripts[b];if(null===c||void 0===c)break;if(c!==!0){var d=this._loadedResults[c.id];c.type==createjs.LoadQueue.JAVASCRIPT&&createjs.DomUtils.appendToHead(d);var e=c._loader;this._processFinishedLoad(c,e),this._loadedScripts[b]=!0}}},b._processFinishedLoad=function(a,b){if(this._numItemsLoaded++,!this.maintainScriptOrder&&a.type==createjs.LoadQueue.JAVASCRIPT){var c=b.getTag();createjs.DomUtils.appendToHead(c)}this._updateProgress(),this._sendFileComplete(a,b),this._loadNext()},b._canStartLoad=function(a){if(!this.maintainScriptOrder||a.preferXHR)return!0;var b=a.getItem();if(b.type!=createjs.LoadQueue.JAVASCRIPT)return!0;if(this._currentlyLoadingScript)return!1;for(var c=this._scriptOrder.indexOf(b),d=0;c>d;){var e=this._loadedScripts[d];if(null==e)return!1;d++}return this._currentlyLoadingScript=!0,!0},b._removeLoadItem=function(a){for(var b=this._currentLoads.length,c=0;b>c;c++)if(this._currentLoads[c]==a){this._currentLoads.splice(c,1);break}},b._cleanLoadItem=function(a){var b=a.getItem();b&&delete b._loader},b._handleProgress=function(a){var b=a.target;this._sendFileProgress(b.getItem(),b.progress),this._updateProgress()},b._updateProgress=function(){var a=this._numItemsLoaded/this._numItems,b=this._numItems-this._numItemsLoaded;if(b>0){for(var c=0,d=0,e=this._currentLoads.length;e>d;d++)c+=this._currentLoads[d].progress;a+=c/b*(b/this._numItems)}this._lastProgress!=a&&(this._sendProgress(a),this._lastProgress=a)},b._disposeItem=function(a){delete this._loadedResults[a.id],delete this._loadedRawResults[a.id],delete this._loadItemsById[a.id],delete this._loadItemsBySrc[a.src]},b._sendFileProgress=function(a,b){if(!this._isCanceled()&&!this._paused&&this.hasEventListener("fileprogress")){var c=new createjs.Event("fileprogress");c.progress=b,c.loaded=b,c.total=1,c.item=a,this.dispatchEvent(c)}},b._sendFileComplete=function(a,b){if(!this._isCanceled()&&!this._paused){var c=new createjs.Event("fileload");c.loader=b,c.item=a,c.result=this._loadedResults[a.id],c.rawResult=this._loadedRawResults[a.id],a.completeHandler&&a.completeHandler(c),this.hasEventListener("fileload")&&this.dispatchEvent(c)}},b._sendFileStart=function(a){var b=new createjs.Event("filestart");b.item=a,this.hasEventListener("filestart")&&this.dispatchEvent(b)},b.toString=function(){return"[PreloadJS LoadQueue]"},createjs.LoadQueue=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.TEXT)}var b=(createjs.extend(a,createjs.AbstractLoader),a);b.canLoadItem=function(a){return a.type==createjs.AbstractLoader.TEXT},createjs.TextLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.BINARY),this.on("initialize",this._updateXHR,this)}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.BINARY},b._updateXHR=function(a){a.loader.setResponseType("arraybuffer")},createjs.BinaryLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractLoader_constructor(a,b,createjs.AbstractLoader.CSS),this.resultFormatter=this._formatResult,this._tagSrcAttribute="href",b?this._tag=document.createElement("style"):this._tag=document.createElement("link"),this._tag.rel="stylesheet",this._tag.type="text/css"}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.CSS},b._formatResult=function(a){if(this._preferXHR){var b=a.getTag();if(b.styleSheet)b.styleSheet.cssText=a.getResult(!0);else{var c=document.createTextNode(a.getResult(!0));b.appendChild(c)}}else b=this._tag;return createjs.DomUtils.appendToHead(b),b},createjs.CSSLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractLoader_constructor(a,b,createjs.AbstractLoader.IMAGE),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",createjs.RequestUtils.isImageTag(a)?this._tag=a:createjs.RequestUtils.isImageTag(a.src)?this._tag=a.src:createjs.RequestUtils.isImageTag(a.tag)&&(this._tag=a.tag),null!=this._tag?this._preferXHR=!1:this._tag=document.createElement("img"),this.on("initialize",this._updateXHR,this)}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.IMAGE},b.load=function(){if(""!=this._tag.src&&this._tag.complete)return void this._sendComplete();var a=this._item.crossOrigin;1==a&&(a="Anonymous"),null==a||createjs.RequestUtils.isLocal(this._item.src)||(this._tag.crossOrigin=a),this.AbstractLoader_load()},b._updateXHR=function(a){a.loader.mimeType="text/plain; charset=x-user-defined-binary",a.loader.setResponseType&&a.loader.setResponseType("blob")},b._formatResult=function(a){var b=this;return function(c){var d=b._tag,e=window.URL||window.webkitURL;if(b._preferXHR)if(e){var f=e.createObjectURL(a.getResult(!0));f?(d.src=f,d.onload=function(){e.revokeObjectURL(this.src),c(this)}):(d.src=a.getItem().src,d.complete?c(d):d.onload=function(){c(this)})}else d.src=a.getItem().src,d.complete?c(d):d.onload=function(){c(this)}}},createjs.ImageLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractLoader_constructor(a,b,createjs.AbstractLoader.JAVASCRIPT),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src",this.setTag(document.createElement("script"))}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.JAVASCRIPT},b._formatResult=function(a){var b=a.getTag();return this._preferXHR&&(b.text=a.getResult(!0)),b},createjs.JavaScriptLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.JSON),this.resultFormatter=this._formatResult}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.JSON},b._formatResult=function(a){var b=null;try{b=createjs.DataUtils.parseJSON(a.getResult(!0))}catch(c){var d=new createjs.ErrorEvent("JSON_FORMAT",null,c);return this._sendError(d),c}return b},createjs.JSONLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!1,createjs.AbstractLoader.JSONP),this.setTag(document.createElement("script")),this.getTag().type="text/javascript"}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.JSONP},b.cancel=function(){this.AbstractLoader_cancel(),this._dispose()},b.load=function(){if(null==this._item.callback)throw new Error("callback is required for loading JSONP requests.");if(null!=window[this._item.callback])throw new Error("JSONP callback '"+this._item.callback+"' already exists on window. You need to specify a different callback or re-name the current one.");window[this._item.callback]=createjs.proxy(this._handleLoad,this),window.document.body.appendChild(this._tag),this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout),this._tag.src=this._item.src},b._handleLoad=function(a){this._result=this._rawResult=a,this._sendComplete(),this._dispose()},b._handleTimeout=function(){this._dispose(),this.dispatchEvent(new createjs.ErrorEvent("timeout"))},b._dispose=function(){window.document.body.removeChild(this._tag),delete window[this._item.callback],clearTimeout(this._loadTimeout)},createjs.JSONPLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,null,createjs.AbstractLoader.MANIFEST),this.plugins=null,this._manifestQueue=null}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.MANIFEST_PROGRESS=.25,c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.MANIFEST},b.load=function(){this.AbstractLoader_load()},b._createRequest=function(){var a=this._item.callback;null!=a?this._request=new createjs.JSONPLoader(this._item):this._request=new createjs.JSONLoader(this._item)},b.handleEvent=function(a){switch(a.type){case"complete":return this._rawResult=a.target.getResult(!0),this._result=a.target.getResult(),this._sendProgress(c.MANIFEST_PROGRESS),void this._loadManifest(this._result);case"progress":return a.loaded*=c.MANIFEST_PROGRESS,this.progress=a.loaded/a.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(a)}this.AbstractLoader_handleEvent(a)},b.destroy=function(){this.AbstractLoader_destroy(),this._manifestQueue.close()},b._loadManifest=function(a){if(a&&a.manifest){var b=this._manifestQueue=new createjs.LoadQueue;b.on("fileload",this._handleManifestFileLoad,this),b.on("progress",this._handleManifestProgress,this),b.on("complete",this._handleManifestComplete,this,!0),b.on("error",this._handleManifestError,this,!0);for(var c=0,d=this.plugins.length;d>c;c++)b.installPlugin(this.plugins[c]);b.loadManifest(a)}else this._sendComplete()},b._handleManifestFileLoad=function(a){a.target=null,this.dispatchEvent(a)},b._handleManifestComplete=function(a){this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},b._handleManifestProgress=function(a){this.progress=a.progress*(1-c.MANIFEST_PROGRESS)+c.MANIFEST_PROGRESS,this._sendProgress(this.progress)},b._handleManifestError=function(a){var b=new createjs.Event("fileerror");b.item=a.data,this.dispatchEvent(b)},createjs.ManifestLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractMediaLoader_constructor(a,b,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(a)?this._tag=a:createjs.RequestUtils.isAudioTag(a.src)?this._tag=a:createjs.RequestUtils.isAudioTag(a.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(a)?a:a.src),null!=this._tag&&(this._preferXHR=!1)}var b=createjs.extend(a,createjs.AbstractMediaLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.SOUND},b._createTag=function(a){var b=document.createElement("audio");return b.autoplay=!1,b.preload="none",b.src=a,b},createjs.SoundLoader=createjs.promote(a,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractMediaLoader_constructor(a,b,createjs.AbstractLoader.VIDEO),createjs.RequestUtils.isVideoTag(a)||createjs.RequestUtils.isVideoTag(a.src)?(this.setTag(createjs.RequestUtils.isVideoTag(a)?a:a.src),this._preferXHR=!1):this.setTag(this._createTag())}var b=createjs.extend(a,createjs.AbstractMediaLoader),c=a;b._createTag=function(){return document.createElement("video")},c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.VIDEO},createjs.VideoLoader=createjs.promote(a,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,null,createjs.AbstractLoader.SPRITESHEET),this._manifestQueue=null}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.SPRITESHEET_PROGRESS=.25,c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.SPRITESHEET},b.destroy=function(){this.AbstractLoader_destroy,this._manifestQueue.close()},b._createRequest=function(){var a=this._item.callback;null!=a?this._request=new createjs.JSONPLoader(this._item):this._request=new createjs.JSONLoader(this._item)},b.handleEvent=function(a){switch(a.type){case"complete":return this._rawResult=a.target.getResult(!0),this._result=a.target.getResult(),this._sendProgress(c.SPRITESHEET_PROGRESS),void this._loadManifest(this._result);case"progress":return a.loaded*=c.SPRITESHEET_PROGRESS,this.progress=a.loaded/a.total,(isNaN(this.progress)||this.progress==1/0)&&(this.progress=0),void this._sendProgress(a)}this.AbstractLoader_handleEvent(a)},b._loadManifest=function(a){if(a&&a.images){var b=this._manifestQueue=new createjs.LoadQueue;b.on("complete",this._handleManifestComplete,this,!0),b.on("fileload",this._handleManifestFileLoad,this),b.on("progress",this._handleManifestProgress,this),b.on("error",this._handleManifestError,this,!0),b.loadManifest(a.images)}},b._handleManifestFileLoad=function(a){var b=a.result;if(null!=b){var c=this.getResult().images,d=c.indexOf(a.item.src);c[d]=b}},b._handleManifestComplete=function(a){this._result=new createjs.SpriteSheet(this._result),this._loadedItems=this._manifestQueue.getItems(!0),this._sendComplete()},b._handleManifestProgress=function(a){this.progress=a.progress*(1-c.SPRITESHEET_PROGRESS)+c.SPRITESHEET_PROGRESS,this._sendProgress(this.progress)},b._handleManifestError=function(a){var b=new createjs.Event("fileerror");b.item=a.data,this.dispatchEvent(b)},createjs.SpriteSheetLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractLoader_constructor(a,b,createjs.AbstractLoader.SVG),this.resultFormatter=this._formatResult,this._tagSrcAttribute="data",b?this.setTag(document.createElement("svg")):(this.setTag(document.createElement("object")),this.getTag().type="image/svg+xml")}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.SVG},b._formatResult=function(a){var b=createjs.DataUtils.parseXML(a.getResult(!0),"text/xml"),c=a.getTag();return!this._preferXHR&&document.body.contains(c)&&document.body.removeChild(c),null!=b.documentElement?(c.appendChild(b.documentElement),c.style.visibility="visible",c):b},createjs.SVGLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.XML),this.resultFormatter=this._formatResult}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.XML},b._formatResult=function(a){return createjs.DataUtils.parseXML(a.getResult(!0),"text/xml")},createjs.XMLLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},createjs.extend=function(a,b){"use strict";function c(){this.constructor=a}return c.prototype=b.prototype,a.prototype=new c},this.createjs=this.createjs||{},createjs.promote=function(a,b){"use strict";var c=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(d){c[(b+="_")+"constructor"]=d.constructor;for(var e in d)c.hasOwnProperty(e)&&"function"==typeof d[e]&&(c[b+e]=d[e])}return a},this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.type=a,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!b,this.cancelable=!!c,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var b=a.prototype;b.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},b.stopPropagation=function(){this.propagationStopped=!0},b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},b.remove=function(){this.removed=!0},b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)},b.set=function(a){for(var b in a)this[b]=a[b];return this},b.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this._listeners=null,this._captureListeners=null}var b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener,a.on=b.on,a.removeEventListener=a.off=b.removeEventListener,a.removeAllEventListeners=b.removeAllEventListeners,a.hasEventListener=b.hasEventListener,a.dispatchEvent=b.dispatchEvent,a._dispatchEvent=b._dispatchEvent,a.willTrigger=b.willTrigger},b.addEventListener=function(a,b,c){var d;d=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var e=d[a];return e&&this.removeEventListener(a,b,c),e=d[a],e?e.push(b):d[a]=[b],b},b.on=function(a,b,c,d,e,f){return b.handleEvent&&(c=c||b,b=b.handleEvent),c=c||this,this.addEventListener(a,function(a){b.call(c,a,e),d&&a.remove()},f)},b.removeEventListener=function(a,b,c){var d=c?this._captureListeners:this._listeners;if(d){var e=d[a];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==b){1==g?delete d[a]:e.splice(f,1);break}}},b.off=b.removeEventListener,b.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},b.dispatchEvent=function(a,b,c){if("string"==typeof a){var d=this._listeners;if(!(b||d&&d[a]))return!0;a=new createjs.Event(a,b,c)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(e){}if(a.bubbles&&this.parent){for(var f=this,g=[f];f.parent;)g.push(f=f.parent);var h,i=g.length;for(h=i-1;h>=0&&!a.propagationStopped;h--)g[h]._dispatchEvent(a,1+(0==h));for(h=1;i>h&&!a.propagationStopped;h++)g[h]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return!a.defaultPrevented},b.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return!!(b&&b[a]||c&&c[a])},b.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;b=b.parent}return!1},b.toString=function(){return"[EventDispatcher]"},b._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d){var e=d[a.type];if(!e||!(c=e.length))return;try{a.currentTarget=this}catch(f){}try{a.eventPhase=b}catch(f){}a.removed=!1,e=e.slice();for(var g=0;c>g&&!a.immediatePropagationStopped;g++){var h=e[g];h.handleEvent?h.handleEvent(a):h(a),a.removed&&(this.off(a.type,h,1==b),a.removed=!1)}}},createjs.EventDispatcher=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"Ticker cannot be instantiated."}a.RAF_SYNCHED="synched",a.RAF="raf",a.TIMEOUT="timeout",a.useRAF=!1,a.timingMode=null,a.maxDelta=0,a.paused=!1,a.removeEventListener=null,a.removeAllEventListeners=null,a.dispatchEvent=null,a.hasEventListener=null,a._listeners=null,createjs.EventDispatcher.initialize(a),a._addEventListener=a.addEventListener,a.addEventListener=function(){return!a._inited&&a.init(),a._addEventListener.apply(a,arguments)},a._inited=!1,a._startTime=0,a._pausedTime=0,a._ticks=0,a._pausedTicks=0,a._interval=50,a._lastTime=0,a._times=null,a._tickTimes=null,a._timerId=null,a._raf=!0,a.setInterval=function(b){a._interval=b,a._inited&&a._setupTick()},a.getInterval=function(){return a._interval},a.setFPS=function(b){a.setInterval(1e3/b)},a.getFPS=function(){return 1e3/a._interval};try{Object.defineProperties(a,{interval:{get:a.getInterval,set:a.setInterval},framerate:{get:a.getFPS,set:a.setFPS}})}catch(b){console.log(b)}a.init=function(){a._inited||(a._inited=!0,a._times=[],a._tickTimes=[],a._startTime=a._getTime(),a._times.push(a._lastTime=0),a.interval=a._interval)},a.reset=function(){if(a._raf){var b=window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame;b&&b(a._timerId)}else clearTimeout(a._timerId);a.removeAllEventListeners("tick"),a._timerId=a._times=a._tickTimes=null,a._startTime=a._lastTime=a._ticks=0,a._inited=!1},a.getMeasuredTickTime=function(b){var c=0,d=a._tickTimes;if(!d||d.length<1)return-1;b=Math.min(d.length,b||0|a.getFPS());for(var e=0;b>e;e++)c+=d[e];return c/b},a.getMeasuredFPS=function(b){var c=a._times;return!c||c.length<2?-1:(b=Math.min(c.length-1,b||0|a.getFPS()),1e3/((c[0]-c[b])/b))},a.setPaused=function(b){a.paused=b},a.getPaused=function(){return a.paused},a.getTime=function(b){return a._startTime?a._getTime()-(b?a._pausedTime:0):-1},a.getEventTime=function(b){return a._startTime?(a._lastTime||a._startTime)-(b?a._pausedTime:0):-1},a.getTicks=function(b){return a._ticks-(b?a._pausedTicks:0)},a._handleSynch=function(){a._timerId=null,a._setupTick(),a._getTime()-a._lastTime>=.97*(a._interval-1)&&a._tick()},a._handleRAF=function(){a._timerId=null,a._setupTick(),a._tick()},a._handleTimeout=function(){a._timerId=null,a._setupTick(),a._tick()},a._setupTick=function(){if(null==a._timerId){var b=a.timingMode||a.useRAF&&a.RAF_SYNCHED;if(b==a.RAF_SYNCHED||b==a.RAF){var c=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(c)return a._timerId=c(b==a.RAF?a._handleRAF:a._handleSynch),void(a._raf=!0)}a._raf=!1,a._timerId=setTimeout(a._handleTimeout,a._interval)}},a._tick=function(){var b=a.paused,c=a._getTime(),d=c-a._lastTime;if(a._lastTime=c,a._ticks++,b&&(a._pausedTicks++,a._pausedTime+=d),a.hasEventListener("tick")){var e=new createjs.Event("tick"),f=a.maxDelta;e.delta=f&&d>f?f:d,e.paused=b,e.time=c,e.runTime=c-a._pausedTime,a.dispatchEvent(e)}for(a._tickTimes.unshift(a._getTime()-c);a._tickTimes.length>100;)a._tickTimes.pop();for(a._times.unshift(c);a._times.length>100;)a._times.pop()};var c=window.performance&&(performance.now||performance.mozNow||performance.msNow||performance.oNow||performance.webkitNow);a._getTime=function(){return(c&&c.call(performance)||(new Date).getTime())-a._startTime},createjs.Ticker=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(b,c,d){this.ignoreGlobalPause=!1,this.loop=!1,this.duration=0,this.pluginData=d||{},this.target=b,this.position=null,this.passive=!1,this._paused=!1,this._curQueueProps={},this._initQueueProps={},this._steps=[],this._actions=[],this._prevPosition=0,this._stepPosition=0,this._prevPos=-1,this._target=b,this._useTicks=!1,this._inited=!1,this._registered=!1,c&&(this._useTicks=c.useTicks,this.ignoreGlobalPause=c.ignoreGlobalPause,this.loop=c.loop,c.onChange&&this.addEventListener("change",c.onChange),c.override&&a.removeTweens(b)),c&&c.paused?this._paused=!0:createjs.Tween._register(this,!0),c&&null!=c.position&&this.setPosition(c.position,a.NONE)}var b=createjs.extend(a,createjs.EventDispatcher);a.NONE=0,a.LOOP=1,a.REVERSE=2,a.IGNORE={},a._tweens=[],a._plugins={},a.get=function(b,c,d,e){return e&&a.removeTweens(b),new a(b,c,d)},a.tick=function(b,c){for(var d=a._tweens.slice(),e=d.length-1;e>=0;e--){var f=d[e];c&&!f.ignoreGlobalPause||f._paused||f.tick(f._useTicks?1:b)}},a.handleEvent=function(a){"tick"==a.type&&this.tick(a.delta,a.paused)},a.removeTweens=function(b){if(b.tweenjs_count){for(var c=a._tweens,d=c.length-1;d>=0;d--){var e=c[d];e._target==b&&(e._paused=!0,c.splice(d,1))}b.tweenjs_count=0}},a.removeAllTweens=function(){for(var b=a._tweens,c=0,d=b.length;d>c;c++){var e=b[c];e._paused=!0,e.target&&(e.target.tweenjs_count=0)}b.length=0},a.hasActiveTweens=function(b){return b?null!=b.tweenjs_count&&!!b.tweenjs_count:a._tweens&&!!a._tweens.length},a.installPlugin=function(b,c){var d=b.priority;null==d&&(b.priority=d=0);for(var e=0,f=c.length,g=a._plugins;f>e;e++){var h=c[e];if(g[h]){for(var i=g[h],j=0,k=i.length;k>j&&!(d<i[j].priority);j++);g[h].splice(j,0,b)}else g[h]=[b]}},a._register=function(b,c){var d=b._target,e=a._tweens;
if(c&&!b._registered)d&&(d.tweenjs_count=d.tweenjs_count?d.tweenjs_count+1:1),e.push(b),!a._inited&&createjs.Ticker&&(createjs.Ticker.addEventListener("tick",a),a._inited=!0);else if(!c&&b._registered){d&&d.tweenjs_count--;for(var f=e.length;f--;)if(e[f]==b){e.splice(f,1);break}}b._registered=c},b.wait=function(a,b){if(null==a||0>=a)return this;var c=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:c,e:this._linearEase,p1:c,v:b})},b.to=function(a,b,c){return(isNaN(b)||0>b)&&(b=0),this._addStep({d:b||0,p0:this._cloneProps(this._curQueueProps),e:c,p1:this._cloneProps(this._appendQueueProps(a))})},b.call=function(a,b,c){return this._addAction({f:a,p:b?b:[this],o:c?c:this._target})},b.set=function(a,b){return this._addAction({f:this._set,o:this,p:[a,b?b:this._target]})},b.play=function(a){return a||(a=this),this.call(a.setPaused,[!1],a)},b.pause=function(a){return a||(a=this),this.call(a.setPaused,[!0],a)},b.setPosition=function(a,b){0>a&&(a=0),null==b&&(b=1);var c=a,d=!1;if(c>=this.duration&&(this.loop?c%=this.duration:(c=this.duration,d=!0)),c==this._prevPos)return d;var e=this._prevPos;if(this.position=this._prevPos=c,this._prevPosition=a,this._target)if(d)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var f=0,g=this._steps.length;g>f&&!(this._steps[f].t>c);f++);var h=this._steps[f-1];this._updateTargetProps(h,(this._stepPosition=c-h.t)/h.d)}return 0!=b&&this._actions.length>0&&(this._useTicks?this._runActions(c,c):1==b&&e>c?(e!=this.duration&&this._runActions(e,this.duration),this._runActions(0,c,!0)):this._runActions(e,c)),d&&this.setPaused(!0),this.dispatchEvent("change"),d},b.tick=function(a){this._paused||this.setPosition(this._prevPosition+a)},b.setPaused=function(b){return this._paused===!!b?this:(this._paused=!!b,a._register(this,!b),this)},b.w=b.wait,b.t=b.to,b.c=b.call,b.s=b.set,b.toString=function(){return"[Tween]"},b.clone=function(){throw"Tween can not be cloned."},b._updateTargetProps=function(b,c){var d,e,f,g,h,i;if(b||1!=c){if(this.passive=!!b.v,this.passive)return;b.e&&(c=b.e(c,0,1,1)),d=b.p0,e=b.p1}else this.passive=!1,d=e=this._curQueueProps;for(var j in this._initQueueProps){null==(g=d[j])&&(d[j]=g=this._initQueueProps[j]),null==(h=e[j])&&(e[j]=h=g),f=g==h||0==c||1==c||"number"!=typeof g?1==c?h:g:g+(h-g)*c;var k=!1;if(i=a._plugins[j])for(var l=0,m=i.length;m>l;l++){var n=i[l].tween(this,j,f,d,e,c,!!b&&d==e,!b);n==a.IGNORE?k=!0:f=n}k||(this._target[j]=f)}},b._runActions=function(a,b,c){var d=a,e=b,f=-1,g=this._actions.length,h=1;for(a>b&&(d=b,e=a,f=g,g=h=-1);(f+=h)!=g;){var i=this._actions[f],j=i.t;(j==e||j>d&&e>j||c&&j==a)&&i.f.apply(i.o,i.p)}},b._appendQueueProps=function(b){var c,d,e,f,g;for(var h in b)if(void 0===this._initQueueProps[h]){if(d=this._target[h],c=a._plugins[h])for(e=0,f=c.length;f>e;e++)d=c[e].init(this,h,d);this._initQueueProps[h]=this._curQueueProps[h]=void 0===d?null:d}else d=this._curQueueProps[h];for(var h in b){if(d=this._curQueueProps[h],c=a._plugins[h])for(g=g||{},e=0,f=c.length;f>e;e++)c[e].step&&c[e].step(this,h,d,b[h],g);this._curQueueProps[h]=b[h]}return g&&this._appendQueueProps(g),this._curQueueProps},b._cloneProps=function(a){var b={};for(var c in a)b[c]=a[c];return b},b._addStep=function(a){return a.d>0&&(this._steps.push(a),a.t=this.duration,this.duration+=a.d),this},b._addAction=function(a){return a.t=this.duration,this._actions.push(a),this},b._set=function(a,b){for(var c in a)b[c]=a[c]},createjs.Tween=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.EventDispatcher_constructor(),this.ignoreGlobalPause=!1,this.duration=0,this.loop=!1,this.position=null,this._paused=!1,this._tweens=[],this._labels=null,this._labelList=null,this._prevPosition=0,this._prevPos=-1,this._useTicks=!1,this._registered=!1,c&&(this._useTicks=c.useTicks,this.loop=c.loop,this.ignoreGlobalPause=c.ignoreGlobalPause,c.onChange&&this.addEventListener("change",c.onChange)),a&&this.addTween.apply(this,a),this.setLabels(b),c&&c.paused?this._paused=!0:createjs.Tween._register(this,!0),c&&null!=c.position&&this.setPosition(c.position,createjs.Tween.NONE)}var b=createjs.extend(a,createjs.EventDispatcher);b.addTween=function(a){var b=arguments.length;if(b>1){for(var c=0;b>c;c++)this.addTween(arguments[c]);return arguments[0]}return 0==b?null:(this.removeTween(a),this._tweens.push(a),a.setPaused(!0),a._paused=!1,a._useTicks=this._useTicks,a.duration>this.duration&&(this.duration=a.duration),this._prevPos>=0&&a.setPosition(this._prevPos,createjs.Tween.NONE),a)},b.removeTween=function(a){var b=arguments.length;if(b>1){for(var c=!0,d=0;b>d;d++)c=c&&this.removeTween(arguments[d]);return c}if(0==b)return!1;for(var e=this._tweens,d=e.length;d--;)if(e[d]==a)return e.splice(d,1),a.duration>=this.duration&&this.updateDuration(),!0;return!1},b.addLabel=function(a,b){this._labels[a]=b;var c=this._labelList;if(c){for(var d=0,e=c.length;e>d&&!(b<c[d].position);d++);c.splice(d,0,{label:a,position:b})}},b.setLabels=function(a){this._labels=a?a:{}},b.getLabels=function(){var a=this._labelList;if(!a){a=this._labelList=[];var b=this._labels;for(var c in b)a.push({label:c,position:b[c]});a.sort(function(a,b){return a.position-b.position})}return a},b.getCurrentLabel=function(){var a=this.getLabels(),b=this.position,c=a.length;if(c){for(var d=0;c>d&&!(b<a[d].position);d++);return 0==d?null:a[d-1].label}return null},b.gotoAndPlay=function(a){this.setPaused(!1),this._goto(a)},b.gotoAndStop=function(a){this.setPaused(!0),this._goto(a)},b.setPosition=function(a,b){var c=this._calcPosition(a),d=!this.loop&&a>=this.duration;if(c==this._prevPos)return d;this._prevPosition=a,this.position=this._prevPos=c;for(var e=0,f=this._tweens.length;f>e;e++)if(this._tweens[e].setPosition(c,b),c!=this._prevPos)return!1;return d&&this.setPaused(!0),this.dispatchEvent("change"),d},b.setPaused=function(a){this._paused=!!a,createjs.Tween._register(this,!a)},b.updateDuration=function(){this.duration=0;for(var a=0,b=this._tweens.length;b>a;a++){var c=this._tweens[a];c.duration>this.duration&&(this.duration=c.duration)}},b.tick=function(a){this.setPosition(this._prevPosition+a)},b.resolve=function(a){var b=Number(a);return isNaN(b)&&(b=this._labels[a]),b},b.toString=function(){return"[Timeline]"},b.clone=function(){throw"Timeline can not be cloned."},b._goto=function(a){var b=this.resolve(a);null!=b&&this.setPosition(b)},b._calcPosition=function(a){return 0>a?0:a<this.duration?a:this.loop?a%this.duration:this.duration},createjs.Timeline=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"Ease cannot be instantiated."}a.linear=function(a){return a},a.none=a.linear,a.get=function(a){return-1>a&&(a=-1),a>1&&(a=1),function(b){return 0==a?b:0>a?b*(b*-a+1+a):b*((2-b)*a+(1-a))}},a.getPowIn=function(a){return function(b){return Math.pow(b,a)}},a.getPowOut=function(a){return function(b){return 1-Math.pow(1-b,a)}},a.getPowInOut=function(a){return function(b){return(b*=2)<1?.5*Math.pow(b,a):1-.5*Math.abs(Math.pow(2-b,a))}},a.quadIn=a.getPowIn(2),a.quadOut=a.getPowOut(2),a.quadInOut=a.getPowInOut(2),a.cubicIn=a.getPowIn(3),a.cubicOut=a.getPowOut(3),a.cubicInOut=a.getPowInOut(3),a.quartIn=a.getPowIn(4),a.quartOut=a.getPowOut(4),a.quartInOut=a.getPowInOut(4),a.quintIn=a.getPowIn(5),a.quintOut=a.getPowOut(5),a.quintInOut=a.getPowInOut(5),a.sineIn=function(a){return 1-Math.cos(a*Math.PI/2)},a.sineOut=function(a){return Math.sin(a*Math.PI/2)},a.sineInOut=function(a){return-.5*(Math.cos(Math.PI*a)-1)},a.getBackIn=function(a){return function(b){return b*b*((a+1)*b-a)}},a.backIn=a.getBackIn(1.7),a.getBackOut=function(a){return function(b){return--b*b*((a+1)*b+a)+1}},a.backOut=a.getBackOut(1.7),a.getBackInOut=function(a){return a*=1.525,function(b){return(b*=2)<1?.5*b*b*((a+1)*b-a):.5*((b-=2)*b*((a+1)*b+a)+2)}},a.backInOut=a.getBackInOut(1.7),a.circIn=function(a){return-(Math.sqrt(1-a*a)-1)},a.circOut=function(a){return Math.sqrt(1- --a*a)},a.circInOut=function(a){return(a*=2)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1)},a.bounceIn=function(b){return 1-a.bounceOut(1-b)},a.bounceOut=function(a){return 1/2.75>a?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},a.bounceInOut=function(b){return.5>b?.5*a.bounceIn(2*b):.5*a.bounceOut(2*b-1)+.5},a.getElasticIn=function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=b/c*Math.asin(1/a);return-(a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*c/b))}},a.elasticIn=a.getElasticIn(1,.3),a.getElasticOut=function(a,b){var c=2*Math.PI;return function(d){if(0==d||1==d)return d;var e=b/c*Math.asin(1/a);return a*Math.pow(2,-10*d)*Math.sin((d-e)*c/b)+1}},a.elasticOut=a.getElasticOut(1,.3),a.getElasticInOut=function(a,b){var c=2*Math.PI;return function(d){var e=b/c*Math.asin(1/a);return(d*=2)<1?-.5*a*Math.pow(2,10*(d-=1))*Math.sin((d-e)*c/b):a*Math.pow(2,-10*(d-=1))*Math.sin((d-e)*c/b)*.5+1}},a.elasticInOut=a.getElasticInOut(1,.3*1.5),createjs.Ease=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"MotionGuidePlugin cannot be instantiated."}a.priority=0,a._rotOffS,a._rotOffE,a._rotNormS,a._rotNormE,a.install=function(){return createjs.Tween.installPlugin(a,["guide","x","y","rotation"]),createjs.Tween.IGNORE},a.init=function(a,b,c){var d=a.target;return d.hasOwnProperty("x")||(d.x=0),d.hasOwnProperty("y")||(d.y=0),d.hasOwnProperty("rotation")||(d.rotation=0),"rotation"==b&&(a.__needsRot=!0),"guide"==b?null:c},a.step=function(b,c,d,e,f){if("rotation"==c&&(b.__rotGlobalS=d,b.__rotGlobalE=e,a.testRotData(b,f)),"guide"!=c)return e;var g,h=e;h.hasOwnProperty("path")||(h.path=[]);var i=h.path;if(h.hasOwnProperty("end")||(h.end=1),h.hasOwnProperty("start")||(h.start=d&&d.hasOwnProperty("end")&&d.path===i?d.end:0),h.hasOwnProperty("_segments")&&h._length)return e;var j=i.length,k=10;if(!(j>=6&&(j-2)%4==0))throw"invalid 'path' data, please see documentation for valid paths";h._segments=[],h._length=0;for(var l=2;j>l;l+=4){for(var m,n,o=i[l-2],p=i[l-1],q=i[l+0],r=i[l+1],s=i[l+2],t=i[l+3],u=o,v=p,w=0,x=[],y=1;k>=y;y++){var z=y/k,A=1-z;m=A*A*o+2*A*z*q+z*z*s,n=A*A*p+2*A*z*r+z*z*t,w+=x[x.push(Math.sqrt((g=m-u)*g+(g=n-v)*g))-1],u=m,v=n}h._segments.push(w),h._segments.push(x),h._length+=w}g=h.orient,h.orient=!0;var B={};return a.calc(h,h.start,B),b.__rotPathS=Number(B.rotation.toFixed(5)),a.calc(h,h.end,B),b.__rotPathE=Number(B.rotation.toFixed(5)),h.orient=!1,a.calc(h,h.end,f),h.orient=g,h.orient?(b.__guideData=h,a.testRotData(b,f),e):e},a.testRotData=function(a,b){if(void 0===a.__rotGlobalS||void 0===a.__rotGlobalE){if(a.__needsRot)return;a.__rotGlobalS=a.__rotGlobalE=void 0!==a._curQueueProps.rotation?a._curQueueProps.rotation:b.rotation=a.target.rotation||0}if(void 0!==a.__guideData){var c=a.__guideData,d=a.__rotGlobalE-a.__rotGlobalS,e=a.__rotPathE-a.__rotPathS,f=d-e;if("auto"==c.orient)f>180?f-=360:-180>f&&(f+=360);else if("cw"==c.orient){for(;0>f;)f+=360;0==f&&d>0&&180!=d&&(f+=360)}else if("ccw"==c.orient){for(f=d-(e>180?360-e:e);f>0;)f-=360;0==f&&0>d&&-180!=d&&(f-=360)}c.rotDelta=f,c.rotOffS=a.__rotGlobalS-a.__rotPathS,a.__rotGlobalS=a.__rotGlobalE=a.__guideData=a.__needsRot=void 0}},a.tween=function(b,c,d,e,f,g,h){var i=f.guide;if(void 0==i||i===e.guide)return d;if(i.lastRatio!=g){var j=(i.end-i.start)*(h?i.end:g)+i.start;switch(a.calc(i,j,b.target),i.orient){case"cw":case"ccw":case"auto":b.target.rotation+=i.rotOffS+i.rotDelta*g;break;case"fixed":default:b.target.rotation+=i.rotOffS}i.lastRatio=g}return"rotation"!=c||i.orient&&"false"!=i.orient?b.target[c]:d},a.calc=function(a,b,c){if(void 0==a._segments)throw"Missing critical pre-calculated information, please file a bug";void 0==c&&(c={x:0,y:0,rotation:0});for(var d=a._segments,e=a.path,f=a._length*b,g=d.length-2,h=0;f>d[h]&&g>h;)f-=d[h],h+=2;var i=d[h+1],j=0;for(g=i.length-1;f>i[j]&&g>j;)f-=i[j],j++;var k=j/++g+f/(g*i[j]);h=2*h+2;var l=1-k;return c.x=l*l*e[h-2]+2*l*k*e[h+0]+k*k*e[h+2],c.y=l*l*e[h-1]+2*l*k*e[h+1]+k*k*e[h+3],a.orient&&(c.rotation=57.2957795*Math.atan2((e[h+1]-e[h-1])*l+(e[h+3]-e[h+1])*k,(e[h+0]-e[h-2])*l+(e[h+2]-e[h+0])*k)),c},createjs.MotionGuidePlugin=a}(),this.createjs=this.createjs||{},function(){"use strict";var a=createjs.TweenJS=createjs.TweenJS||{};a.version="0.6.2",a.buildDate="Thu, 26 Nov 2015 20:44:31 GMT"}(),!function(){"use strict";!function(a){function b(a,b){return a._priority-b._priority}var c=function(){this._listeners={}},d=c.prototype;d.on=function(a,c,d){if("string"!=typeof a)for(var e in a)this.on(e,a[e],d);else for(var f,g=a.split(" "),h=0,i=g.length;i>h;h++)a=g[h],f=this._listeners[a],f||(f=this._listeners[a]=[]),c._priority=parseInt(d)||0,-1===f.indexOf(c)&&(f.push(c),f.length>1&&f.sort(b));return this},d.off=function(a,b){if(void 0===a||!this._listeners)return this._listeners={},this;if(void 0===this._listeners[a])return this;if(void 0===b)delete this._listeners[a];else for(var c=this._listeners[a],d=0,e=c.length;e>d;d++)if(c[d]===b){c.splice(d,1);break}return this},d.trigger=function(a){"string"==typeof a&&(a={type:a});var b=this._listeners[a.type];if(void 0!==b)for(var c=b.length-1;c>=0;c--)b[c](a)},d.destroy=function(){this._listeners=null},a.BellhopEventDispatcher=c}(window),function(a,b){var c=a.BellhopEventDispatcher,d=function(){c.call(this),this.onReceive=this.receive.bind(this),this.connected=!1,this.name="",this.isChild=!0,this.connecting=!1,this.origin="*",this._sendLater=[],this.supported=null,this.iframe=null},e=c.prototype,f=d.prototype=Object.create(e);f.receive=function(a){if(a.source===this.target){var b=a.data;if("connected"===b){this.connecting=!1,this.connected=!0,this.trigger("connected"),this.isChild||this.target.postMessage(b,this.origin);var c,e=this._sendLater.length;if(e>0){for(c=0;e>c;c++){var f=this._sendLater[c];this.send(f.type,f.data)}this._sendLater.length=0}}else{if(!this.connected)return;try{b=JSON.parse(b,d.reviver)}catch(g){return}"object"==typeof b&&b.type&&this.trigger(b)}}},f.toString=function(){return"[Bellhop '"+this.name+"']"},Object.defineProperty(f,"target",{get:function(){return this.isChild?a.parent:this.iframe.contentWindow}}),f.connect=function(c,d){if(this.connecting)return this;this.disconnect(),this.connecting=!0,this._sendLater||(this._sendLater=[]),this.iframe=c||null;var e=this.isChild=c===b,f=this.target;return this.supported=e?!!f&&a!=f:!!f,this.origin=d===b?"*":d,a.attachEvent?a.attachEvent("onmessage",this.onReceive):a.addEventListener("message",this.onReceive),e&&(a===f?this.trigger("failed"):"complete"===a.document.readyState?f.postMessage("connected",this.origin):a.onload=function(){f.postMessage("connected",this.origin)}.bind(this)),this},f.disconnect=function(){return this.connected=!1,this.connecting=!1,this.origin=null,this.iframe=null,this._sendLater&&(this._sendLater.length=0),this.isChild=!0,a.detachEvent?a.detachEvent("onmessage",this.onReceive):a.removeEventListener("message",this.onReceive),this},f.send=function(a,c){if("string"!=typeof a)throw"The event type must be a string";if(a={type:a},c!==b&&(a.data=c),this.connecting)this._sendLater.push(a);else{if(!this.connected)return this;this.target.postMessage(JSON.stringify(a),this.origin)}return this},f.fetch=function(a,c,d,e){var f=this;if(!this.connecting&&!this.connected)throw"No connection, please call connect() first";e=e===b?!1:e;var g=function(a){e&&f.off(a.type,g),c(a)};return this.on(a,g),this.send(a,d),this},f.respond=function(a,c,d){d=d===b?!1:d;var e=this,f=function(b){d&&e.off(b.type,f),e.send(a,"function"==typeof c?c():c)};return this.on(a,f),this},f.destroy=function(){e.destroy.call(this),this.disconnect(),this._sendLater=null},d.reviver=function(a,b){if(b&&"string"==typeof b.__classname){var c=g(b.__classname);if(c){var d=new c;if(d.fromJSON)return d.fromJSON(b),d}}return b};var g=function(b){for(var c=b.split("."),d=a;c.length;)if(d=d[c.shift()],!d)return;return d};a.Bellhop=d}(window)}(),this.createjs=this.createjs||{},function(){var a=createjs.SoundJS=createjs.SoundJS||{};a.version="0.6.3",a.buildDate="Tue, 08 Sep 2015 19:54:41 GMT"}(),this.createjs=this.createjs||{},createjs.extend=function(a,b){"use strict";function c(){this.constructor=a}return c.prototype=b.prototype,a.prototype=new c},this.createjs=this.createjs||{},createjs.promote=function(a,b){"use strict";var c=a.prototype,d=Object.getPrototypeOf&&Object.getPrototypeOf(c)||c.__proto__;if(d){c[(b+="_")+"constructor"]=d.constructor;for(var e in d)c.hasOwnProperty(e)&&"function"==typeof d[e]&&(c[b+e]=d[e])}return a},this.createjs=this.createjs||{},createjs.indexOf=function(a,b){"use strict";for(var c=0,d=a.length;d>c;c++)if(b===a[c])return c;return-1},this.createjs=this.createjs||{},function(){"use strict";createjs.proxy=function(a,b){var c=Array.prototype.slice.call(arguments,2);return function(){return a.apply(b,Array.prototype.slice.call(arguments,0).concat(c))}}}(),this.createjs=this.createjs||{},function(){"use strict";var a=Object.defineProperty?!0:!1,b={};try{Object.defineProperty(b,"bar",{get:function(){return this._bar},set:function(a){this._bar=a}})}catch(c){a=!1}createjs.definePropertySupported=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"BrowserDetect cannot be instantiated"}var b=a.agent=window.navigator.userAgent;a.isWindowPhone=b.indexOf("IEMobile")>-1||b.indexOf("Windows Phone")>-1,a.isFirefox=b.indexOf("Firefox")>-1,a.isOpera=null!=window.opera,a.isChrome=b.indexOf("Chrome")>-1,a.isIOS=(b.indexOf("iPod")>-1||b.indexOf("iPhone")>-1||b.indexOf("iPad")>-1)&&!a.isWindowPhone,a.isAndroid=b.indexOf("Android")>-1&&!a.isWindowPhone,a.isBlackberry=b.indexOf("Blackberry")>-1,createjs.BrowserDetect=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this._listeners=null,this._captureListeners=null}var b=a.prototype;a.initialize=function(a){a.addEventListener=b.addEventListener,a.on=b.on,a.removeEventListener=a.off=b.removeEventListener,a.removeAllEventListeners=b.removeAllEventListeners,a.hasEventListener=b.hasEventListener,a.dispatchEvent=b.dispatchEvent,a._dispatchEvent=b._dispatchEvent,a.willTrigger=b.willTrigger},b.addEventListener=function(a,b,c){var d;d=c?this._captureListeners=this._captureListeners||{}:this._listeners=this._listeners||{};var e=d[a];return e&&this.removeEventListener(a,b,c),e=d[a],e?e.push(b):d[a]=[b],b},b.on=function(a,b,c,d,e,f){return b.handleEvent&&(c=c||b,b=b.handleEvent),c=c||this,this.addEventListener(a,function(a){b.call(c,a,e),d&&a.remove()},f)},b.removeEventListener=function(a,b,c){var d=c?this._captureListeners:this._listeners;if(d){var e=d[a];if(e)for(var f=0,g=e.length;g>f;f++)if(e[f]==b){1==g?delete d[a]:e.splice(f,1);break}}},b.off=b.removeEventListener,b.removeAllEventListeners=function(a){a?(this._listeners&&delete this._listeners[a],this._captureListeners&&delete this._captureListeners[a]):this._listeners=this._captureListeners=null},b.dispatchEvent=function(a){if("string"==typeof a){var b=this._listeners;if(!b||!b[a])return!1;a=new createjs.Event(a)}else a.target&&a.clone&&(a=a.clone());try{a.target=this}catch(c){}if(a.bubbles&&this.parent){for(var d=this,e=[d];d.parent;)e.push(d=d.parent);var f,g=e.length;for(f=g-1;f>=0&&!a.propagationStopped;f--)e[f]._dispatchEvent(a,1+(0==f));for(f=1;g>f&&!a.propagationStopped;f++)e[f]._dispatchEvent(a,3)}else this._dispatchEvent(a,2);return a.defaultPrevented},b.hasEventListener=function(a){var b=this._listeners,c=this._captureListeners;return!!(b&&b[a]||c&&c[a])},b.willTrigger=function(a){for(var b=this;b;){if(b.hasEventListener(a))return!0;b=b.parent}return!1},b.toString=function(){return"[EventDispatcher]"},b._dispatchEvent=function(a,b){var c,d=1==b?this._captureListeners:this._listeners;if(a&&d){var e=d[a.type];if(!e||!(c=e.length))return;try{a.currentTarget=this}catch(f){}try{a.eventPhase=b}catch(f){}a.removed=!1,e=e.slice();for(var g=0;c>g&&!a.immediatePropagationStopped;g++){var h=e[g];h.handleEvent?h.handleEvent(a):h(a),a.removed&&(this.off(a.type,h,1==b),a.removed=!1)}}},createjs.EventDispatcher=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.type=a,this.target=null,this.currentTarget=null,this.eventPhase=0,this.bubbles=!!b,this.cancelable=!!c,this.timeStamp=(new Date).getTime(),this.defaultPrevented=!1,this.propagationStopped=!1,this.immediatePropagationStopped=!1,this.removed=!1}var b=a.prototype;b.preventDefault=function(){this.defaultPrevented=this.cancelable&&!0},b.stopPropagation=function(){this.propagationStopped=!0},b.stopImmediatePropagation=function(){this.immediatePropagationStopped=this.propagationStopped=!0},b.remove=function(){this.removed=!0},b.clone=function(){return new a(this.type,this.bubbles,this.cancelable)},b.set=function(a){for(var b in a)this[b]=a[b];return this},b.toString=function(){return"[Event (type="+this.type+")]"},createjs.Event=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.Event_constructor("error"),this.title=a,this.message=b,this.data=c}var b=createjs.extend(a,createjs.Event);b.clone=function(){return new createjs.ErrorEvent(this.title,this.message,this.data)},createjs.ErrorEvent=createjs.promote(a,"Event")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.Event_constructor("progress"),this.loaded=a,this.total=null==b?1:b,this.progress=0==b?0:this.loaded/this.total}var b=createjs.extend(a,createjs.Event);b.clone=function(){return new createjs.ProgressEvent(this.loaded,this.total)},createjs.ProgressEvent=createjs.promote(a,"Event")}(window),this.createjs=this.createjs||{},function(){"use strict";function a(){this.src=null,this.type=null,this.id=null,this.maintainOrder=!1,this.callback=null,this.data=null,this.method=createjs.LoadItem.GET,this.values=null,this.headers=null,this.withCredentials=!1,this.mimeType=null,this.crossOrigin="Anonymous",this.loadTimeout=8e3}var b=a.prototype={},c=a;c.create=function(b){if("string"==typeof b){var d=new a;return d.src=b,d}if(b instanceof c)return b;if(b instanceof Object)return b;throw new Error("Type not recognized.")},b.set=function(a){for(var b in a)this[b]=a[b];return this},createjs.LoadItem=c}(),function(){var a={};a.ABSOLUTE_PATT=/^(?:\w+:)?\/{2}/i,a.RELATIVE_PATT=/^[.\/]*?\//i,a.EXTENSION_PATT=/\/?[^\/]+\.(\w{1,5})$/i,a.parseURI=function(b){var c={absolute:!1,relative:!1};if(null==b)return c;var d=b.indexOf("?");d>-1&&(b=b.substr(0,d));var e;return a.ABSOLUTE_PATT.test(b)?c.absolute=!0:a.RELATIVE_PATT.test(b)&&(c.relative=!0),(e=b.match(a.EXTENSION_PATT))&&(c.extension=e[1].toLowerCase()),c},a.formatQueryString=function(a,b){if(null==a)throw new Error("You must specify data.");var c=[];for(var d in a)c.push(d+"="+escape(a[d]));return b&&(c=c.concat(b)),c.join("&")},a.buildPath=function(a,b){if(null==b)return a;var c=[],d=a.indexOf("?");if(-1!=d){var e=a.slice(d+1);c=c.concat(e.split("&"))}return-1!=d?a.slice(0,d)+"?"+this._formatQueryString(b,c):a+"?"+this._formatQueryString(b,c)},a.isCrossDomain=function(a){var b=document.createElement("a");b.href=a.src;var c=document.createElement("a");c.href=location.href;var d=""!=b.hostname&&(b.port!=c.port||b.protocol!=c.protocol||b.hostname!=c.hostname);return d},a.isLocal=function(a){var b=document.createElement("a");return b.href=a.src,""==b.hostname&&"file:"==b.protocol},a.isBinary=function(a){switch(a){case createjs.AbstractLoader.IMAGE:case createjs.AbstractLoader.BINARY:return!0;default:return!1}},a.isImageTag=function(a){return a instanceof HTMLImageElement},a.isAudioTag=function(a){return window.HTMLAudioElement?a instanceof HTMLAudioElement:!1},a.isVideoTag=function(a){return window.HTMLVideoElement?a instanceof HTMLVideoElement:void 0},a.isText=function(a){switch(a){case createjs.AbstractLoader.TEXT:case createjs.AbstractLoader.JSON:case createjs.AbstractLoader.MANIFEST:case createjs.AbstractLoader.XML:case createjs.AbstractLoader.CSS:case createjs.AbstractLoader.SVG:case createjs.AbstractLoader.JAVASCRIPT:return!0;default:return!1}},a.getTypeByExtension=function(a){if(null==a)return createjs.AbstractLoader.TEXT;switch(a.toLowerCase()){case"jpeg":case"jpg":case"gif":case"png":case"webp":case"bmp":return createjs.AbstractLoader.IMAGE;case"ogg":case"mp3":case"webm":return createjs.AbstractLoader.SOUND;case"mp4":case"webm":case"ts":return createjs.AbstractLoader.VIDEO;case"json":return createjs.AbstractLoader.JSON;case"xml":return createjs.AbstractLoader.XML;case"css":return createjs.AbstractLoader.CSS;case"js":return createjs.AbstractLoader.JAVASCRIPT;case"svg":return createjs.AbstractLoader.SVG;default:return createjs.AbstractLoader.TEXT}},createjs.RequestUtils=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.EventDispatcher_constructor(),this.loaded=!1,this.canceled=!1,this.progress=0,this.type=c,this.resultFormatter=null,this._item=a?createjs.LoadItem.create(a):null,this._preferXHR=b,this._result=null,this._rawResult=null,this._loadedItems=null,this._tagSrcAttribute=null,this._tag=null}var b=createjs.extend(a,createjs.EventDispatcher),c=a;c.POST="POST",c.GET="GET",c.BINARY="binary",c.CSS="css",c.IMAGE="image",c.JAVASCRIPT="javascript",c.JSON="json",c.JSONP="jsonp",c.MANIFEST="manifest",c.SOUND="sound",c.VIDEO="video",c.SPRITESHEET="spritesheet",c.SVG="svg",c.TEXT="text",c.XML="xml",b.getItem=function(){return this._item},b.getResult=function(a){return a?this._rawResult:this._result},b.getTag=function(){return this._tag},b.setTag=function(a){this._tag=a},b.load=function(){this._createRequest(),this._request.on("complete",this,this),this._request.on("progress",this,this),this._request.on("loadStart",this,this),this._request.on("abort",this,this),this._request.on("timeout",this,this),this._request.on("error",this,this);var a=new createjs.Event("initialize");a.loader=this._request,this.dispatchEvent(a),this._request.load()},b.cancel=function(){this.canceled=!0,this.destroy()},b.destroy=function(){this._request&&(this._request.removeAllEventListeners(),this._request.destroy()),this._request=null,this._item=null,this._rawResult=null,this._result=null,this._loadItems=null,this.removeAllEventListeners()},b.getLoadedItems=function(){return this._loadedItems},b._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.TagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},b._createTag=function(){return null},b._sendLoadStart=function(){this._isCanceled()||this.dispatchEvent("loadstart")},b._sendProgress=function(a){if(!this._isCanceled()){var b=null;"number"==typeof a?(this.progress=a,b=new createjs.ProgressEvent(this.progress)):(b=a,this.progress=a.loaded/a.total,b.progress=this.progress,(isNaN(this.progress)||1/0==this.progress)&&(this.progress=0)),this.hasEventListener("progress")&&this.dispatchEvent(b)}},b._sendComplete=function(){if(!this._isCanceled()){this.loaded=!0;var a=new createjs.Event("complete");a.rawResult=this._rawResult,null!=this._result&&(a.result=this._result),this.dispatchEvent(a)}},b._sendError=function(a){!this._isCanceled()&&this.hasEventListener("error")&&(null==a&&(a=new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")),this.dispatchEvent(a))},b._isCanceled=function(){return null==window.createjs||this.canceled?!0:!1},b.resultFormatter=null,b.handleEvent=function(a){switch(a.type){case"complete":this._rawResult=a.target._response;var b=this.resultFormatter&&this.resultFormatter(this),c=this;b instanceof Function?b(function(a){c._result=a,c._sendComplete()}):(this._result=b||this._rawResult,this._sendComplete());break;case"progress":this._sendProgress(a);break;case"error":this._sendError(a);break;case"loadstart":this._sendLoadStart();break;case"abort":case"timeout":this._isCanceled()||this.dispatchEvent(a.type)}},b.buildPath=function(a,b){return createjs.RequestUtils.buildPath(a,b)},b.toString=function(){return"[PreloadJS AbstractLoader]"},createjs.AbstractLoader=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractLoader_constructor(a,b,c),this.resultFormatter=this._formatResult,this._tagSrcAttribute="src"}var b=createjs.extend(a,createjs.AbstractLoader);b.load=function(){this._tag||(this._tag=this._createTag(this._item.src)),this._tag.preload="auto",this._tag.load(),this.AbstractLoader_load()},b._createTag=function(){},b._createRequest=function(){this._request=this._preferXHR?new createjs.XHRRequest(this._item):new createjs.MediaTagRequest(this._item,this._tag||this._createTag(),this._tagSrcAttribute)},b._formatResult=function(a){return this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._preferXHR&&(a.getTag().src=a.getResult(!0)),a.getTag()},createjs.AbstractMediaLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a){this._item=a},b=createjs.extend(a,createjs.EventDispatcher);b.load=function(){},b.destroy=function(){},b.cancel=function(){},createjs.AbstractRequest=createjs.promote(a,"EventDispatcher")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractRequest_constructor(a),this._tag=b,this._tagSrcAttribute=c,this._loadedHandler=createjs.proxy(this._handleTagComplete,this),this._addedToDOM=!1,this._startTagVisibility=null}var b=createjs.extend(a,createjs.AbstractRequest);b.load=function(){null==this._tag.parentNode&&(window.document.body.appendChild(this._tag),this._addedToDOM=!0),this._tag.onload=createjs.proxy(this._handleTagComplete,this),this._tag.onreadystatechange=createjs.proxy(this._handleReadyStateChange,this);var a=new createjs.Event("initialize");a.loader=this._tag,this.dispatchEvent(a),this._hideTag(),this._tag[this._tagSrcAttribute]=this._item.src},b.destroy=function(){this._clean(),this._tag=null,this.AbstractRequest_destroy()},b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;("loaded"==a.readyState||"complete"==a.readyState)&&this._handleTagComplete()},b._handleTagComplete=function(){this._rawResult=this._tag,this._result=this.resultFormatter&&this.resultFormatter(this)||this._rawResult,this._clean(),this._showTag(),this.dispatchEvent("complete")},b._clean=function(){this._tag.onload=null,this._tag.onreadystatechange=null,this._addedToDOM&&null!=this._tag.parentNode&&this._tag.parentNode.removeChild(this._tag)},b._hideTag=function(){this._startTagVisibility=this._tag.style.visibility,this._tag.style.visibility="hidden"},b._showTag=function(){this._tag.style.visibility=this._startTagVisibility},b._handleStalled=function(){},createjs.TagRequest=createjs.promote(a,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c){this.AbstractRequest_constructor(a),this._tag=b,this._tagSrcAttribute=c,this._loadedHandler=createjs.proxy(this._handleTagComplete,this)}var b=createjs.extend(a,createjs.TagRequest);b.load=function(){this._tag.onstalled=createjs.proxy(this._handleStalled,this),this._tag.onprogress=createjs.proxy(this._handleProgress,this),this._tag.addEventListener&&this._tag.addEventListener("canplaythrough",this._loadedHandler,!1),this.TagRequest_load()},b._handleReadyStateChange=function(){clearTimeout(this._loadTimeout);var a=this._tag;("loaded"==a.readyState||"complete"==a.readyState)&&this._handleTagComplete()},b._handleStalled=function(){},b._handleProgress=function(a){if(a&&!(a.loaded>0&&0==a.total)){var b=new createjs.ProgressEvent(a.loaded,a.total);this.dispatchEvent(b)}},b._clean=function(){this._tag.removeEventListener&&this._tag.removeEventListener("canplaythrough",this._loadedHandler),this._tag.onstalled=null,this._tag.onprogress=null,this.TagRequest__clean()},createjs.MediaTagRequest=createjs.promote(a,"TagRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractRequest_constructor(a),this._request=null,this._loadTimeout=null,this._xhrLevel=1,this._response=null,
this._rawResponse=null,this._canceled=!1,this._handleLoadStartProxy=createjs.proxy(this._handleLoadStart,this),this._handleProgressProxy=createjs.proxy(this._handleProgress,this),this._handleAbortProxy=createjs.proxy(this._handleAbort,this),this._handleErrorProxy=createjs.proxy(this._handleError,this),this._handleTimeoutProxy=createjs.proxy(this._handleTimeout,this),this._handleLoadProxy=createjs.proxy(this._handleLoad,this),this._handleReadyStateChangeProxy=createjs.proxy(this._handleReadyStateChange,this),!this._createXHR(a)}var b=createjs.extend(a,createjs.AbstractRequest);a.ACTIVEX_VERSIONS=["Msxml2.XMLHTTP.6.0","Msxml2.XMLHTTP.5.0","Msxml2.XMLHTTP.4.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],b.getResult=function(a){return a&&this._rawResponse?this._rawResponse:this._response},b.cancel=function(){this.canceled=!0,this._clean(),this._request.abort()},b.load=function(){if(null==this._request)return void this._handleError();this._request.addEventListener("loadstart",this._handleLoadStartProxy,!1),this._request.addEventListener("progress",this._handleProgressProxy,!1),this._request.addEventListener("abort",this._handleAbortProxy,!1),this._request.addEventListener("error",this._handleErrorProxy,!1),this._request.addEventListener("timeout",this._handleTimeoutProxy,!1),this._request.addEventListener("load",this._handleLoadProxy,!1),this._request.addEventListener("readystatechange",this._handleReadyStateChangeProxy,!1),1==this._xhrLevel&&(this._loadTimeout=setTimeout(createjs.proxy(this._handleTimeout,this),this._item.loadTimeout));try{this._item.values&&this._item.method!=createjs.AbstractLoader.GET?this._item.method==createjs.AbstractLoader.POST&&this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)):this._request.send()}catch(a){this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND",null,a))}},b.setResponseType=function(a){this._request.responseType=a},b.getAllResponseHeaders=function(){return this._request.getAllResponseHeaders instanceof Function?this._request.getAllResponseHeaders():null},b.getResponseHeader=function(a){return this._request.getResponseHeader instanceof Function?this._request.getResponseHeader(a):null},b._handleProgress=function(a){if(a&&!(a.loaded>0&&0==a.total)){var b=new createjs.ProgressEvent(a.loaded,a.total);this.dispatchEvent(b)}},b._handleLoadStart=function(){clearTimeout(this._loadTimeout),this.dispatchEvent("loadstart")},b._handleAbort=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED",null,a))},b._handleError=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent(a.message))},b._handleReadyStateChange=function(){4==this._request.readyState&&this._handleLoad()},b._handleLoad=function(){if(!this.loaded){this.loaded=!0;var a=this._checkError();if(a)return void this._handleError(a);this._response=this._getResponse(),this._clean(),this.dispatchEvent(new createjs.Event("complete"))}},b._handleTimeout=function(a){this._clean(),this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT",null,a))},b._checkError=function(){var a=parseInt(this._request.status);switch(a){case 404:return new Error(a);case 0:return this._getResponse()?null:new Error(a)}return null},b._getResponse=function(){if(null!=this._response)return this._response;if(null!=this._request.response)return this._request.response;try{if(null!=this._request.responseText)return this._request.responseText}catch(a){}try{if(null!=this._request.responseXML)return this._request.responseXML}catch(a){}return null},b._createXHR=function(a){var b=createjs.RequestUtils.isCrossDomain(a),c={},d=null;if(window.XMLHttpRequest)d=new XMLHttpRequest,b&&void 0===d.withCredentials&&window.XDomainRequest&&(d=new XDomainRequest);else{for(var e=0,f=s.ACTIVEX_VERSIONS.length;f>e;e++){s.ACTIVEX_VERSIONS[e];try{d=new ActiveXObject(axVersions);break}catch(g){}}if(null==d)return!1}a.mimeType&&d.overrideMimeType&&d.overrideMimeType(a.mimeType),this._xhrLevel="string"==typeof d.responseType?2:1;var h=null;if(h=a.method==createjs.AbstractLoader.GET?createjs.RequestUtils.buildPath(a.src,a.values):a.src,d.open(a.method||createjs.AbstractLoader.GET,h,!0),b&&d instanceof XMLHttpRequest&&1==this._xhrLevel&&(c.Origin=location.origin),a.values&&a.method==createjs.AbstractLoader.POST&&(c["Content-Type"]="application/x-www-form-urlencoded"),b||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest"),a.headers)for(var i in a.headers)c[i]=a.headers[i];for(i in c)d.setRequestHeader(i,c[i]);return d instanceof XMLHttpRequest&&void 0!==a.withCredentials&&(d.withCredentials=a.withCredentials),this._request=d,!0},b._clean=function(){clearTimeout(this._loadTimeout),this._request.removeEventListener("loadstart",this._handleLoadStartProxy),this._request.removeEventListener("progress",this._handleProgressProxy),this._request.removeEventListener("abort",this._handleAbortProxy),this._request.removeEventListener("error",this._handleErrorProxy),this._request.removeEventListener("timeout",this._handleTimeoutProxy),this._request.removeEventListener("load",this._handleLoadProxy),this._request.removeEventListener("readystatechange",this._handleReadyStateChangeProxy)},b.toString=function(){return"[PreloadJS XHRRequest]"},createjs.XHRRequest=createjs.promote(a,"AbstractRequest")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b){this.AbstractMediaLoader_constructor(a,b,createjs.AbstractLoader.SOUND),createjs.RequestUtils.isAudioTag(a)?this._tag=a:createjs.RequestUtils.isAudioTag(a.src)?this._tag=a:createjs.RequestUtils.isAudioTag(a.tag)&&(this._tag=createjs.RequestUtils.isAudioTag(a)?a:a.src),null!=this._tag&&(this._preferXHR=!1)}var b=createjs.extend(a,createjs.AbstractMediaLoader),c=a;c.canLoadItem=function(a){return a.type==createjs.AbstractLoader.SOUND},b._createTag=function(a){var b=document.createElement("audio");return b.autoplay=!1,b.preload="none",b.src=a,b},createjs.SoundLoader=createjs.promote(a,"AbstractMediaLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){throw"Sound cannot be instantiated"}function b(a,b){this.init(a,b)}var c=a;c.INTERRUPT_ANY="any",c.INTERRUPT_EARLY="early",c.INTERRUPT_LATE="late",c.INTERRUPT_NONE="none",c.PLAY_INITED="playInited",c.PLAY_SUCCEEDED="playSucceeded",c.PLAY_INTERRUPTED="playInterrupted",c.PLAY_FINISHED="playFinished",c.PLAY_FAILED="playFailed",c.SUPPORTED_EXTENSIONS=["mp3","ogg","mpeg","wav","m4a","mp4","aiff","wma","mid"],c.EXTENSION_MAP={m4a:"mp4"},c.FILE_PATTERN=/^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([\/.]*?(?:[^?]+)?\/)?((?:[^\/?]+)\.(\w+))(?:\?(\S+)?)?$/,c.defaultInterruptBehavior=c.INTERRUPT_NONE,c.alternateExtensions=[],c.activePlugin=null,c._pluginsRegistered=!1,c._lastID=0,c._masterVolume=1,c._masterMute=!1,c._instances=[],c._idHash={},c._preloadHash={},c.addEventListener=null,c.removeEventListener=null,c.removeAllEventListeners=null,c.dispatchEvent=null,c.hasEventListener=null,c._listeners=null,createjs.EventDispatcher.initialize(c),c.getPreloadHandlers=function(){return{callback:createjs.proxy(c.initLoad,c),types:["sound"],extensions:c.SUPPORTED_EXTENSIONS}},c._handleLoadComplete=function(a){var b=a.target.getItem().src;if(c.preloadHash[b])for(var d=0,e=c._preloadHash[b].length;e>d;d++){var f=c._preloadHash[b][d];if(c._preloadHash[b][d]=!0,c.hasEventListener("fileload")){var a=new createjs.Event("fileload");a.src=f.src,a.id=f.id,a.data=f.data,a.sprite=f.sprite,c.dispatchEvent(a)}}},c._handleLoadError=function(a){var b=a.target.getItem().src;if(c._preloadHash[b])for(var d=0,e=c._preloadHash[b].length;e>d;d++){var f=c._preloadHash[b][d];if(c._preloadHash[b][d]=!1,c.hasEventListener("fileerror")){var a=new createjs.Event("fileerror");a.src=f.src,a.id=f.id,a.data=f.data,a.sprite=f.sprite,c.dispatchEvent(a)}}},c._registerPlugin=function(a){return a.isSupported()?(c.activePlugin=new a,!0):!1},c.registerPlugins=function(a){c._pluginsRegistered=!0;for(var b=0,d=a.length;d>b;b++)if(c._registerPlugin(a[b]))return!0;return!1},c.initializeDefaultPlugins=function(){return null!=c.activePlugin?!0:c._pluginsRegistered?!1:c.registerPlugins([createjs.WebAudioPlugin,createjs.HTMLAudioPlugin])?!0:!1},c.isReady=function(){return null!=c.activePlugin},c.getCapabilities=function(){return null==c.activePlugin?null:c.activePlugin._capabilities},c.getCapability=function(a){return null==c.activePlugin?null:c.activePlugin._capabilities[a]},c.initLoad=function(a){return c._registerSound(a)},c._registerSound=function(a){if(!c.initializeDefaultPlugins())return!1;var d=c._parsePath(a.src);if(null==d)return!1;a.src=d.src,a.type="sound";var e=a.data,f=c.activePlugin.defaultNumChannels||null;if(null!=e&&(isNaN(e.channels)?isNaN(e)||(f=parseInt(e)):f=parseInt(e.channels),e.audioSprite))for(var g,h=e.audioSprite.length;h--;)g=e.audioSprite[h],c._idHash[g.id]={src:a.src,startTime:parseInt(g.startTime),duration:parseInt(g.duration)};null!=a.id&&(c._idHash[a.id]={src:a.src});var i=c.activePlugin.register(a,f);return b.create(a.src,f),null!=e&&isNaN(e)?a.data.channels=f||b.maxPerChannel():a.data=f||b.maxPerChannel(),i.type&&(a.type=i.type),i},c.registerSound=function(a,b,d,e){var f={src:a,id:b,data:d};a instanceof Object&&(e=b,f=a),f=createjs.LoadItem.create(f),null!=e&&(f.src=e+a);var g=c._registerSound(f);if(!g)return!1;if(c._preloadHash[f.src]||(c._preloadHash[f.src]=[]),c._preloadHash[f.src].push(f),1==c._preloadHash[f.src].length)g.on("complete",createjs.proxy(this._handleLoadComplete,this)),g.on("error",createjs.proxy(this._handleLoadError,this)),c.activePlugin.preload(g);else if(1==c._preloadHash[f.src][0])return!0;return f},c.registerSounds=function(a,b){var c=[];a.path&&(b?b+=a.path:b=a.path);for(var d=0,e=a.length;e>d;d++)c[d]=createjs.Sound.registerSound(a[d].src,a[d].id,a[d].data,b);return c},c.registerManifest=function(a,b){try{console.log("createjs.Sound.registerManifest is deprecated, please use createjs.Sound.registerSounds.")}catch(c){}return this.registerSounds(a,b)},c.removeSound=function(a,d){if(null==c.activePlugin)return!1;a instanceof Object&&(a=a.src),a=c._getSrcById(a).src,null!=d&&(a=d+a);var e=c._parsePath(a);if(null==e)return!1;a=e.src;for(var f in c._idHash)c._idHash[f].src==a&&delete c._idHash[f];return b.removeSrc(a),delete c._preloadHash[a],c.activePlugin.removeSound(a),!0},c.removeSounds=function(a,b){var c=[];a.path&&(b?b+=a.path:b=a.path);for(var d=0,e=a.length;e>d;d++)c[d]=createjs.Sound.removeSound(a[d].src,b);return c},c.removeManifest=function(a,b){try{console.log("createjs.Sound.removeManifest is deprecated, please use createjs.Sound.removeSounds.")}catch(d){}return c.removeSounds(a,b)},c.removeAllSounds=function(){c._idHash={},c._preloadHash={},b.removeAll(),c.activePlugin&&c.activePlugin.removeAllSounds()},c.loadComplete=function(a){if(!c.isReady())return!1;var b=c._parsePath(a);return a=b?c._getSrcById(b.src).src:c._getSrcById(a).src,c.preloadHash[a]&&1==c._preloadHash[a][0]},c._parsePath=function(a){"string"!=typeof a&&(a=a.toString());var b,d,e;a.indexOf(".")>0&&(b=a.substr(a.lastIndexOf(".")+1),b.indexOf("?")>0&&(b=b.substring(0,b.indexOf("?"))),d=a.substring(0,a.lastIndexOf(".")),d.indexOf("/")>=0&&(d=d.substr(d.lastIndexOf("/")+1)),e=b);for(var f=c.getCapabilities(),g=0;!f[b];)if(b=c.alternateExtensions[g++],g>c.alternateExtensions.length)return null;a=a.replace("."+e,"."+b);var h={name:d,src:a,extension:b};return h},c.play=function(a,b,d,e,f,g,h,i,j){b instanceof Object&&(d=b.delay,e=b.offset,f=b.loop,g=b.volume,h=b.pan,i=b.startTime,j=b.duration,b=b.interrupt);var k=c.createInstance(a,i,j),l=c._playInstance(k,b,d,e,f,g,h);return l||k._playFailed(),k},c.createInstance=function(a,d,e){if(!c.initializeDefaultPlugins())return new createjs.DefaultSoundInstance(a,d,e);a=c._getSrcById(a);var f=c._parsePath(a.src),g=null;return null!=f&&null!=f.src?(b.create(f.src),null==d&&(d=a.startTime),g=c.activePlugin.create(f.src,d,e||a.duration)):g=new createjs.DefaultSoundInstance(a,d,e),g.uniqueId=c._lastID++,g},c.setVolume=function(a){if(null==Number(a))return!1;if(a=Math.max(0,Math.min(1,a)),c._masterVolume=a,!this.activePlugin||!this.activePlugin.setVolume||!this.activePlugin.setVolume(a))for(var b=this._instances,d=0,e=b.length;e>d;d++)b[d].setMasterVolume(a)},c.getVolume=function(){return c._masterVolume},c.setMute=function(a){if(null==a)return!1;if(this._masterMute=a,!this.activePlugin||!this.activePlugin.setMute||!this.activePlugin.setMute(a))for(var b=this._instances,c=0,d=b.length;d>c;c++)b[c].setMasterMute(a);return!0},c.getMute=function(){return this._masterMute},c.stop=function(){for(var a=this._instances,b=a.length;b--;)a[b].stop()},c.pause=function(){for(var a=this.instances,b=a.length;b--;)a[b].paused=!0},c.resume=function(){for(var a=this.instances,b=a.length;b--;)a[b].paused=!1},c._playInstance=function(a,b,d,e,f,g,h){if(b instanceof Object&&(d=b.delay,e=b.offset,f=b.loop,g=b.volume,h=b.pan,b=b.interrupt),b=b||c.defaultInterruptBehavior,null==d&&(d=0),null==e&&(e=a.getPosition()),null==f&&(f=a.loop),null==g&&(g=a.volume),null==h&&(h=a.pan),0==d){var i=c._beginPlaying(a,b,e,f,g,h);if(!i)return!1}else{var j=setTimeout(function(){c._beginPlaying(a,b,e,f,g,h)},d);a.delayTimeoutId=j}return this._instances.push(a),!0},c._beginPlaying=function(a,c,d,e,f,g){if(!b.add(a,c))return!1;var h=a._beginPlaying(d,e,f,g);if(!h){var i=createjs.indexOf(this._instances,a);return i>-1&&this._instances.splice(i,1),!1}return!0},c._getSrcById=function(a){return c._idHash[a]||{src:a}},c._playFinished=function(a){b.remove(a);var d=createjs.indexOf(this._instances,a);d>-1&&this._instances.splice(d,1);var e=c.activePlugin._soundInstances;e[a.src]&&e[a.src].indexOf(a)>-1&&e[a.src].splice(e[a.src].indexOf(a),1)},createjs.Sound=a,b.channels={},b.create=function(a,c){var d=b.get(a);return null==d?(b.channels[a]=new b(a,c),!0):!1},b.removeSrc=function(a){var c=b.get(a);return null==c?!1:(c._removeAll(),delete b.channels[a],!0)},b.removeAll=function(){for(var a in b.channels)b.channels[a]._removeAll();b.channels={}},b.add=function(a,c){var d=b.get(a.src);return null==d?!1:d._add(a,c)},b.remove=function(a){var c=b.get(a.src);return null==c?!1:(c._remove(a),!0)},b.maxPerChannel=function(){return d.maxDefault},b.get=function(a){return b.channels[a]};var d=b.prototype;d.constructor=b,d.src=null,d.max=null,d.maxDefault=100,d.length=0,d.init=function(a,b){this.src=a,this.max=b||this.maxDefault,-1==this.max&&(this.max=this.maxDefault),this._instances=[]},d._get=function(a){return this._instances[a]},d._add=function(a,b){return this._getSlot(b,a)?(this._instances.push(a),this.length++,!0):!1},d._remove=function(a){var b=c.activePlugin._soundInstances;b[a.src]&&b[a.src].indexOf(a)>-1&&b[a.src].splice(b[a.src].indexOf(a),1);var d=createjs.indexOf(this._instances,a);return-1==d?!1:(this._instances.splice(d,1),this.length--,!0)},d._removeAll=function(){for(var a=this.length-1;a>=0;a--)this._instances[a].stop()},d._getSlot=function(b){var c,d;if(b!=a.INTERRUPT_NONE&&(d=this._get(0),null==d))return!0;for(var e=0,f=this.max;f>e;e++){if(c=this._get(e),null==c)return!0;if(c.playState==a.PLAY_FINISHED||c.playState==a.PLAY_INTERRUPTED||c.playState==a.PLAY_FAILED){d=c;break}b!=a.INTERRUPT_NONE&&(b==a.INTERRUPT_EARLY&&c.getPosition()<d.getPosition()||b==a.INTERRUPT_LATE&&c.getPosition()>d.getPosition())&&(d=c)}return null!=d?(d._interrupt(),this._remove(d),!0):!1},d.toString=function(){return"[Sound SoundChannel]"}}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(a,b,c,d){this.EventDispatcher_constructor(),this.src=a,this.uniqueId=-1,this.playState=null,this.delayTimeoutId=null,this._startTime=Math.max(0,b||0),this._volume=1,createjs.definePropertySupported&&Object.defineProperty(this,"volume",{get:this.getVolume,set:this.setVolume}),this._pan=0,createjs.definePropertySupported&&Object.defineProperty(this,"pan",{get:this.getPan,set:this.setPan}),this._duration=Math.max(0,c||0),createjs.definePropertySupported&&Object.defineProperty(this,"duration",{get:this.getDuration,set:this.setDuration}),this._playbackResource=null,createjs.definePropertySupported&&Object.defineProperty(this,"playbackResource",{get:this.getPlaybackResource,set:this.setPlaybackResource}),d!==!1&&d!==!0&&this.setPlaybackResource(d),this._position=0,createjs.definePropertySupported&&Object.defineProperty(this,"position",{get:this.getPosition,set:this.setPosition}),this._loop=0,createjs.definePropertySupported&&Object.defineProperty(this,"loop",{get:this.getLoop,set:this.setLoop}),this._muted=!1,createjs.definePropertySupported&&Object.defineProperty(this,"muted",{get:this.getMuted,set:this.setMuted}),this._paused=!1,createjs.definePropertySupported&&Object.defineProperty(this,"paused",{get:this.getPaused,set:this.setPaused})},b=createjs.extend(a,createjs.EventDispatcher);b.play=function(a,b,c,d,e,f){return this.playState==createjs.Sound.PLAY_SUCCEEDED?(a instanceof Object&&(c=a.offset,d=a.loop,e=a.volume,f=a.pan),null!=c&&this.setPosition(c),null!=d&&this.setLoop(d),null!=e&&this.setVolume(e),null!=f&&this.setPan(f),void(this._paused&&this.setPaused(!1))):(this._cleanUp(),createjs.Sound._playInstance(this,a,b,c,d,e,f),this)},b.pause=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?!1:(this.setPaused(!0),!0)},b.resume=function(){return this._paused?(this.setPaused(!1),!0):!1},b.stop=function(){return this._position=0,this._paused=!1,this._handleStop(),this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,this},b.destroy=function(){this._cleanUp(),this.src=null,this.playbackResource=null,this.removeAllEventListeners()},b.toString=function(){return"[AbstractSoundInstance]"},b.getPaused=function(){return this._paused},b.setPaused=function(a){return a!==!0&&a!==!1||this._paused==a||1==a&&this.playState!=createjs.Sound.PLAY_SUCCEEDED?void 0:(this._paused=a,a?this._pause():this._resume(),clearTimeout(this.delayTimeoutId),this)},b.setVolume=function(a){return a==this._volume?this:(this._volume=Math.max(0,Math.min(1,a)),this._muted||this._updateVolume(),this)},b.getVolume=function(){return this._volume},b.setMute=function(a){this.setMuted(a)},b.getMute=function(){return this._muted},b.setMuted=function(a){return a===!0||a===!1?(this._muted=a,this._updateVolume(),this):void 0},b.getMuted=function(){return this._muted},b.setPan=function(a){return a==this._pan?this:(this._pan=Math.max(-1,Math.min(1,a)),this._updatePan(),this)},b.getPan=function(){return this._pan},b.getPosition=function(){return this._paused||this.playState!=createjs.Sound.PLAY_SUCCEEDED?this._position:this._calculateCurrentPosition()},b.setPosition=function(a){return this._position=Math.max(0,a),this.playState==createjs.Sound.PLAY_SUCCEEDED&&this._updatePosition(),this},b.getDuration=function(){return this._duration},b.setDuration=function(a){return a==this._duration?this:(this._duration=Math.max(0,a||0),this._updateDuration(),this)},b.setPlaybackResource=function(a){return this._playbackResource=a,0==this._duration&&this._setDurationFromSource(),this},b.getPlaybackResource=function(){return this._playbackResource},b.getLoop=function(){return this._loop},b.setLoop=function(a){null!=this._playbackResource&&(0!=this._loop&&0==a&&this._removeLooping(a),0==this._loop&&0!=a&&this._addLooping(a)),this._loop=a},b._sendEvent=function(a){var b=new createjs.Event(a);this.dispatchEvent(b)},b._cleanUp=function(){clearTimeout(this.delayTimeoutId),this._handleCleanUp(),this._paused=!1,createjs.Sound._playFinished(this)},b._interrupt=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_INTERRUPTED,this._sendEvent("interrupted")},b._beginPlaying=function(a,b,c,d){return this.setPosition(a),this.setLoop(b),this.setVolume(c),this.setPan(d),null!=this._playbackResource&&this._position<this._duration?(this._paused=!1,this._handleSoundReady(),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0):(this._playFailed(),!1)},b._playFailed=function(){this._cleanUp(),this.playState=createjs.Sound.PLAY_FAILED,this._sendEvent("failed")},b._handleSoundComplete=function(){return this._position=0,0!=this._loop?(this._loop--,this._handleLoop(),void this._sendEvent("loop")):(this._cleanUp(),this.playState=createjs.Sound.PLAY_FINISHED,void this._sendEvent("complete"))},b._handleSoundReady=function(){},b._updateVolume=function(){},b._updatePan=function(){},b._updateDuration=function(){},b._setDurationFromSource=function(){},b._calculateCurrentPosition=function(){},b._updatePosition=function(){},b._removeLooping=function(){},b._addLooping=function(){},b._pause=function(){},b._resume=function(){},b._handleStop=function(){},b._handleCleanUp=function(){},b._handleLoop=function(){},createjs.AbstractSoundInstance=createjs.promote(a,"EventDispatcher"),createjs.DefaultSoundInstance=createjs.AbstractSoundInstance}(),this.createjs=this.createjs||{},function(){"use strict";var a=function(){this._capabilities=null,this._loaders={},this._audioSources={},this._soundInstances={},this._loaderClass,this._soundInstanceClass,this._volume=1},b=a.prototype;a._capabilities=null,a.isSupported=function(){return!0},b.register=function(a){if(this._audioSources[a.src]=!0,this._soundInstances[a.src]=[],this._loaders[a.src])return this._loaders[a.src];var b=new this._loaderClass(a);return b.on("complete",createjs.proxy(this._handlePreloadComplete,this)),this._loaders[a.src]=b,b},b.preload=function(a){a.on("error",createjs.proxy(this._handlePreloadError,this)),a.load()},b.isPreloadStarted=function(a){return null!=this._audioSources[a]},b.isPreloadComplete=function(a){return!(null==this._audioSources[a]||1==this._audioSources[a])},b.removeSound=function(a){if(this._soundInstances[a]){for(var b=this._soundInstances[a].length;b--;){var c=this._soundInstances[a][b];c.destroy()}delete this._soundInstances[a],delete this._audioSources[a],this._loaders[a]&&this._loaders[a].destroy(),delete this._loaders[a]}},b.removeAllSounds=function(){for(var a in this._audioSources)this.removeSound(a)},b.create=function(a,b,c){this.isPreloadStarted(a)||this.preload(this.register(a));var d=new this._soundInstanceClass(a,b,c,this._audioSources[a]);return this._soundInstances[a].push(d),d},b.setVolume=function(a){return this._volume=a,this._updateVolume(),!0},b.getVolume=function(){return this._volume},b.setMute=function(){return this._updateVolume(),!0},b.toString=function(){return"[AbstractPlugin]"},b._handlePreloadComplete=function(a){var b=a.target.getItem().src;this._audioSources[b]=a.result;for(var c=0,d=this._soundInstances[b].length;d>c;c++){var e=this._soundInstances[b][c];e.setPlaybackResource(this._audioSources[b])}},b._handlePreloadError=function(){},b._updateVolume=function(){},createjs.AbstractPlugin=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!0,createjs.AbstractLoader.SOUND)}var b=createjs.extend(a,createjs.AbstractLoader);a.context=null,b.toString=function(){return"[WebAudioLoader]"},b._createRequest=function(){this._request=new createjs.XHRRequest(this._item,!1),this._request.setResponseType("arraybuffer")},b._sendComplete=function(){a.context.decodeAudioData(this._rawResult,createjs.proxy(this._handleAudioDecoded,this),createjs.proxy(this._handleError,this))},b._handleAudioDecoded=function(a){this._result=a,this.AbstractLoader__sendComplete()},createjs.WebAudioLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,d,e){this.AbstractSoundInstance_constructor(a,b,d,e),this.gainNode=c.context.createGain(),this.panNode=c.context.createPanner(),this.panNode.panningModel=c._panningModel,this.panNode.connect(this.gainNode),this._updatePan(),this.sourceNode=null,this._soundCompleteTimeout=null,this._sourceNodeNext=null,this._playbackStartTime=0,this._endedHandler=createjs.proxy(this._handleSoundComplete,this)}var b=createjs.extend(a,createjs.AbstractSoundInstance),c=a;c.context=null,c.destinationNode=null,c._panningModel="equalpower",b.destroy=function(){this.AbstractSoundInstance_destroy(),this.panNode.disconnect(0),this.panNode=null,this.gainNode.disconnect(0),this.gainNode=null},b.toString=function(){return"[WebAudioSoundInstance]"},b._updatePan=function(){this.panNode.setPosition(this._pan,0,-.5)},b._removeLooping=function(){this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)},b._addLooping=function(){this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},b._setDurationFromSource=function(){this._duration=1e3*this.playbackResource.duration},b._handleCleanUp=function(){this.sourceNode&&this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext)),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout),this._playbackStartTime=0},b._cleanUpAudioNode=function(a){return a&&(a.stop(0),a.disconnect(0),a=null),a},b._handleSoundReady=function(){this.gainNode.connect(c.destinationNode);var a=.001*this._duration,b=.001*this._position;this.sourceNode=this._createAndPlayAudioNode(c.context.currentTime-a,b),this._playbackStartTime=this.sourceNode.startTime-b,this._soundCompleteTimeout=setTimeout(this._endedHandler,1e3*(a-b)),0!=this._loop&&(this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0))},b._createAndPlayAudioNode=function(a,b){var d=c.context.createBufferSource();d.buffer=this.playbackResource,d.connect(this.panNode);var e=.001*this._duration;return b>e&&(b=e-.001),d.startTime=a+e,d.start(d.startTime,b+.001*this._startTime,e-b),d},b._pause=function(){this._position=1e3*(c.context.currentTime-this._playbackStartTime),this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),0!=this.gainNode.numberOfOutputs&&this.gainNode.disconnect(0),clearTimeout(this._soundCompleteTimeout)},b._resume=function(){this._handleSoundReady()},b._updateVolume=function(){var a=this._muted?0:this._volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)},b._calculateCurrentPosition=function(){return 1e3*(c.context.currentTime-this._playbackStartTime)},b._updatePosition=function(){this.sourceNode=this._cleanUpAudioNode(this.sourceNode),this._sourceNodeNext=this._cleanUpAudioNode(this._sourceNodeNext),clearTimeout(this._soundCompleteTimeout),this._paused||this._handleSoundReady()},b._handleLoop=function(){this._cleanUpAudioNode(this.sourceNode),this.sourceNode=this._sourceNodeNext,this._playbackStartTime=this.sourceNode.startTime,this._sourceNodeNext=this._createAndPlayAudioNode(this._playbackStartTime,0),this._soundCompleteTimeout=setTimeout(this._endedHandler,this._duration)},b._updateDuration=function(){this._pause(),this._resume()},createjs.WebAudioSoundInstance=createjs.promote(a,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.AbstractPlugin_constructor(),this._panningModel=c._panningModel,this._volume=1,this.context=c.context,this.dynamicsCompressorNode=this.context.createDynamicsCompressor(),this.dynamicsCompressorNode.connect(this.context.destination),this.gainNode=this.context.createGain(),this.gainNode.connect(this.dynamicsCompressorNode),createjs.WebAudioSoundInstance.destinationNode=this.gainNode,this._capabilities=c._capabilities,this._loaderClass=createjs.WebAudioLoader,this._soundInstanceClass=createjs.WebAudioSoundInstance,this._addPropsToClasses()}var b=createjs.extend(a,createjs.AbstractPlugin),c=a;c._capabilities=null,c._panningModel="equalpower",c.context=null,c.isSupported=function(){var a=createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry;return"file:"!=location.protocol||a||this._isFileXHRSupported()?(c._generateCapabilities(),null==c.context?!1:!0):!1},c.playEmptySound=function(){var a=c.context.createBufferSource();a.buffer=c.context.createBuffer(1,1,22050),a.connect(c.context.destination),a.start(0,0,0)},c._isFileXHRSupported=function(){var a=!0,b=new XMLHttpRequest;try{b.open("GET","WebAudioPluginTest.fail",!1)}catch(c){return a=!1}b.onerror=function(){a=!1},b.onload=function(){a=404==this.status||200==this.status||0==this.status&&""!=this.response};try{b.send()}catch(c){a=!1}return a},c._generateCapabilities=function(){if(null==c._capabilities){var a=document.createElement("audio");if(null==a.canPlayType)return null;if(null==c.context)if(window.AudioContext)c.context=new AudioContext;else{if(!window.webkitAudioContext)return null;c.context=new webkitAudioContext}c._compatibilitySetUp(),c.playEmptySound(),c._capabilities={panning:!0,volume:!0,tracks:-1};for(var b=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=b.length;f>e;e++){var g=b[e],h=d[g]||g;c._capabilities[g]="no"!=a.canPlayType("audio/"+g)&&""!=a.canPlayType("audio/"+g)||"no"!=a.canPlayType("audio/"+h)&&""!=a.canPlayType("audio/"+h)}c.context.destination.numberOfChannels<2&&(c._capabilities.panning=!1)}},c._compatibilitySetUp=function(){if(c._panningModel="equalpower",!c.context.createGain){c.context.createGain=c.context.createGainNode;var a=c.context.createBufferSource();a.__proto__.start=a.__proto__.noteGrainOn,a.__proto__.stop=a.__proto__.noteOff,c._panningModel=0}},b.toString=function(){return"[WebAudioPlugin]"},b._addPropsToClasses=function(){var a=this._soundInstanceClass;a.context=this.context,a.destinationNode=this.gainNode,a._panningModel=this._panningModel,this._loaderClass.context=this.context},b._updateVolume=function(){var a=createjs.Sound._masterMute?0:this._volume;a!=this.gainNode.gain.value&&(this.gainNode.gain.value=a)},createjs.WebAudioPlugin=createjs.promote(a,"AbstractPlugin")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a){this.src=a,this.length=0,this.available=0,this.tags=[],this.duration=0}var b=a.prototype;b.constructor=a;var c=a;c.tags={},c.get=function(b){var d=c.tags[b];return null==d&&(d=c.tags[b]=new a(b)),d},c.remove=function(a){var b=c.tags[a];return null==b?!1:(b.removeAll(),delete c.tags[a],!0)},c.getInstance=function(a){var b=c.tags[a];return null==b?null:b.get()},c.setInstance=function(a,b){var d=c.tags[a];return null==d?null:d.set(b)},c.getDuration=function(a){var b=c.tags[a];return null==b?0:b.getDuration()},b.add=function(a){this.tags.push(a),this.length++,this.available++},b.removeAll=function(){for(var a;this.length--;)a=this.tags[this.length],a.parentNode&&a.parentNode.removeChild(a),delete this.tags[this.length];this.src=null,this.tags.length=0},b.get=function(){if(0==this.tags.length)return null;this.available=this.tags.length;var a=this.tags.pop();return null==a.parentNode&&document.body.appendChild(a),a},b.set=function(a){var b=createjs.indexOf(this.tags,a);-1==b&&this.tags.push(a),this.available=this.tags.length},b.getDuration=function(){return this.duration||(this.duration=1e3*this.tags[this.tags.length-1].duration),this.duration},b.toString=function(){return"[HTMLAudioTagPool]"},createjs.HTMLAudioTagPool=a}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,c,d){this.AbstractSoundInstance_constructor(a,b,c,d),this._audioSpriteStopTime=null,this._delayTimeoutId=null,this._endedHandler=createjs.proxy(this._handleSoundComplete,this),this._readyHandler=createjs.proxy(this._handleTagReady,this),this._stalledHandler=createjs.proxy(this._playFailed,this),this._audioSpriteEndHandler=createjs.proxy(this._handleAudioSpriteLoop,this),this._loopHandler=createjs.proxy(this._handleSoundComplete,this),c?this._audioSpriteStopTime=.001*(b+c):this._duration=createjs.HTMLAudioTagPool.getDuration(this.src)}var b=createjs.extend(a,createjs.AbstractSoundInstance);b.setMasterVolume=function(){this._updateVolume()},b.setMasterMute=function(){this._updateVolume()},b.toString=function(){return"[HTMLAudioSoundInstance]"},b._removeLooping=function(){null!=this._playbackResource&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1));
},b._addLooping=function(){null==this._playbackResource||this._audioSpriteStopTime||(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)},b._handleCleanUp=function(){var a=this._playbackResource;if(null!=a){a.pause(),a.loop=!1,a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),a.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1);try{a.currentTime=this._startTime}catch(b){}createjs.HTMLAudioTagPool.setInstance(this.src,a),this._playbackResource=null}},b._beginPlaying=function(a,b,c,d){return this._playbackResource=createjs.HTMLAudioTagPool.getInstance(this.src),this.AbstractSoundInstance__beginPlaying(a,b,c,d)},b._handleSoundReady=function(){if(4!==this._playbackResource.readyState){var a=this._playbackResource;return a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),a.preload="auto",void a.load()}this._updateVolume(),this._playbackResource.currentTime=.001*(this._startTime+this._position),this._audioSpriteStopTime?this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1):(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),0!=this._loop&&(this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.loop=!0)),this._playbackResource.play()},b._handleTagReady=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY,this._readyHandler,!1),this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED,this._stalledHandler,!1),this._handleSoundReady()},b._pause=function(){this._playbackResource.pause()},b._resume=function(){this._playbackResource.play()},b._updateVolume=function(){if(null!=this._playbackResource){var a=this._muted||createjs.Sound._masterMute?0:this._volume*createjs.Sound._masterVolume;a!=this._playbackResource.volume&&(this._playbackResource.volume=a)}},b._calculateCurrentPosition=function(){return 1e3*this._playbackResource.currentTime-this._startTime},b._updatePosition=function(){this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1);try{this._playbackResource.currentTime=.001*(this._position+this._startTime)}catch(a){this._handleSetPositionSeek(null)}},b._handleSetPositionSeek=function(){null!=this._playbackResource&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._handleSetPositionSeek,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},b._handleAudioSpriteLoop=function(){this._playbackResource.currentTime<=this._audioSpriteStopTime||(this._playbackResource.pause(),0==this._loop?this._handleSoundComplete(null):(this._position=0,this._loop--,this._playbackResource.currentTime=.001*this._startTime,this._paused||this._playbackResource.play(),this._sendEvent("loop")))},b._handleLoop=function(){0==this._loop&&(this._playbackResource.loop=!1,this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED,this._loopHandler,!1))},b._updateDuration=function(){this._audioSpriteStopTime=.001*(startTime+duration),this.playState==createjs.Sound.PLAY_SUCCEEDED&&(this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED,this._endedHandler,!1),this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE,this._audioSpriteEndHandler,!1))},createjs.HTMLAudioSoundInstance=createjs.promote(a,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.AbstractPlugin_constructor(),this.defaultNumChannels=2,this._capabilities=c._capabilities,this._loaderClass=createjs.SoundLoader,this._soundInstanceClass=createjs.HTMLAudioSoundInstance}var b=createjs.extend(a,createjs.AbstractPlugin),c=a;c.MAX_INSTANCES=30,c._AUDIO_READY="canplaythrough",c._AUDIO_ENDED="ended",c._AUDIO_SEEKED="seeked",c._AUDIO_STALLED="stalled",c._TIME_UPDATE="timeupdate",c._capabilities=null,c.enableIOS=!1,c.isSupported=function(){return c._generateCapabilities(),null==c._capabilities?!1:!0},c._generateCapabilities=function(){if(null==c._capabilities){var a=document.createElement("audio");if(null==a.canPlayType)return null;c._capabilities={panning:!0,volume:!0,tracks:-1};for(var b=createjs.Sound.SUPPORTED_EXTENSIONS,d=createjs.Sound.EXTENSION_MAP,e=0,f=b.length;f>e;e++){var g=b[e],h=d[g]||g;c._capabilities[g]="no"!=a.canPlayType("audio/"+g)&&""!=a.canPlayType("audio/"+g)||"no"!=a.canPlayType("audio/"+h)&&""!=a.canPlayType("audio/"+h)}}},b.register=function(a,b){for(var c=createjs.HTMLAudioTagPool.get(a.src),d=null,e=0;b>e;e++)d=this._createTag(a.src),c.add(d);var f=this.AbstractPlugin_register(a,b);return f.setTag(d),f},b.removeSound=function(a){this.AbstractPlugin_removeSound(a),createjs.HTMLAudioTagPool.remove(a)},b.create=function(a,b,c){var d=this.AbstractPlugin_create(a,b,c);return d.setPlaybackResource(null),d},b.toString=function(){return"[HTMLAudioPlugin]"},b.setVolume=b.getVolume=b.setMute=null,b._createTag=function(a){var b=document.createElement("audio");return b.autoplay=!1,b.preload="none",b.src=a,b},createjs.HTMLAudioPlugin=createjs.promote(a,"AbstractPlugin")}();var swfobject=function(){function a(){if(!R){try{var a=K.getElementsByTagName("body")[0].appendChild(q("span"));a.parentNode.removeChild(a)}catch(b){return}R=!0;for(var c=N.length,d=0;c>d;d++)N[d]()}}function b(a){R?a():N[N.length]=a}function c(a){if(typeof J.addEventListener!=C)J.addEventListener("load",a,!1);else if(typeof K.addEventListener!=C)K.addEventListener("load",a,!1);else if(typeof J.attachEvent!=C)r(J,"onload",a);else if("function"==typeof J.onload){var b=J.onload;J.onload=function(){b(),a()}}else J.onload=a}function d(){M?e():f()}function e(){var a=K.getElementsByTagName("body")[0],b=q(D);b.setAttribute("type",G);var c=a.appendChild(b);if(c){var d=0;!function(){if(typeof c.GetVariable!=C){var e=c.GetVariable("$version");e&&(e=e.split(" ")[1].split(","),U.pv=[parseInt(e[0],10),parseInt(e[1],10),parseInt(e[2],10)])}else if(10>d)return d++,void setTimeout(arguments.callee,10);a.removeChild(b),c=null,f()}()}else f()}function f(){var a=O.length;if(a>0)for(var b=0;a>b;b++){var c=O[b].id,d=O[b].callbackFn,e={success:!1,id:c};if(U.pv[0]>0){var f=p(c);if(f)if(!s(O[b].swfVersion)||U.wk&&U.wk<312)if(O[b].expressInstall&&h()){var k={};k.data=O[b].expressInstall,k.width=f.getAttribute("width")||"0",k.height=f.getAttribute("height")||"0",f.getAttribute("class")&&(k.styleclass=f.getAttribute("class")),f.getAttribute("align")&&(k.align=f.getAttribute("align"));for(var l={},m=f.getElementsByTagName("param"),n=m.length,o=0;n>o;o++)"movie"!=m[o].getAttribute("name").toLowerCase()&&(l[m[o].getAttribute("name")]=m[o].getAttribute("value"));i(k,l,c,d)}else j(f),d&&d(e);else u(c,!0),d&&(e.success=!0,e.ref=g(c),d(e))}else if(u(c,!0),d){var q=g(c);q&&typeof q.SetVariable!=C&&(e.success=!0,e.ref=q),d(e)}}}function g(a){var b=null,c=p(a);if(c&&"OBJECT"==c.nodeName)if(typeof c.SetVariable!=C)b=c;else{var d=c.getElementsByTagName(D)[0];d&&(b=d)}return b}function h(){return!S&&s("6.0.65")&&(U.win||U.mac)&&!(U.wk&&U.wk<312)}function i(a,b,c,d){S=!0,y=d||null,z={success:!1,id:c};var e=p(c);if(e){"OBJECT"==e.nodeName?(w=k(e),x=null):(w=e,x=c),a.id=H,(typeof a.width==C||!/%$/.test(a.width)&&parseInt(a.width,10)<310)&&(a.width="310"),(typeof a.height==C||!/%$/.test(a.height)&&parseInt(a.height,10)<137)&&(a.height="137"),K.title=K.title.slice(0,47)+" - Flash Player Installation";var f=U.ie&&U.win?"ActiveX":"PlugIn",g="MMredirectURL="+encodeURI(window.location).toString().replace(/&/g,"%26")+"&MMplayerType="+f+"&MMdoctitle="+K.title;if(typeof b.flashvars!=C?b.flashvars+="&"+g:b.flashvars=g,U.ie&&U.win&&4!=e.readyState){var h=q("div");c+="SWFObjectNew",h.setAttribute("id",c),e.parentNode.insertBefore(h,e),e.style.display="none",function(){4==e.readyState?e.parentNode.removeChild(e):setTimeout(arguments.callee,10)}()}l(a,b,c)}}function j(a){if(U.ie&&U.win&&4!=a.readyState){var b=q("div");a.parentNode.insertBefore(b,a),b.parentNode.replaceChild(k(a),b),a.style.display="none",function(){4==a.readyState?a.parentNode.removeChild(a):setTimeout(arguments.callee,10)}()}else a.parentNode.replaceChild(k(a),a)}function k(a){var b=q("div");if(U.win&&U.ie)b.innerHTML=a.innerHTML;else{var c=a.getElementsByTagName(D)[0];if(c){var d=c.childNodes;if(d)for(var e=d.length,f=0;e>f;f++)1==d[f].nodeType&&"PARAM"==d[f].nodeName||8==d[f].nodeType||b.appendChild(d[f].cloneNode(!0))}}return b}function l(a,b,c){var d,e=p(c);if(U.wk&&U.wk<312)return d;if(e)if(typeof a.id==C&&(a.id=c),U.ie&&U.win){var f="";for(var g in a)a[g]!=Object.prototype[g]&&("data"==g.toLowerCase()?b.movie=a[g]:"styleclass"==g.toLowerCase()?f+=' class="'+a[g]+'"':"classid"!=g.toLowerCase()&&(f+=" "+g+'="'+a[g]+'"'));var h="";for(var i in b)b[i]!=Object.prototype[i]&&(h+='<param name="'+i+'" value="'+b[i]+'" />');e.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+f+">"+h+"</object>",P[P.length]=a.id,d=p(a.id)}else{var j=q(D);j.setAttribute("type",G);for(var k in a)a[k]!=Object.prototype[k]&&("styleclass"==k.toLowerCase()?j.setAttribute("class",a[k]):"classid"!=k.toLowerCase()&&j.setAttribute(k,a[k]));for(var l in b)b[l]!=Object.prototype[l]&&"movie"!=l.toLowerCase()&&m(j,l,b[l]);e.parentNode.replaceChild(j,e),d=j}return d}function m(a,b,c){var d=q("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function n(a){var b=p(a);b&&"OBJECT"==b.nodeName&&(U.ie&&U.win?(b.style.display="none",function(){4==b.readyState?o(a):setTimeout(arguments.callee,10)}()):b.parentNode.removeChild(b))}function o(a){var b=p(a);if(b){for(var c in b)"function"==typeof b[c]&&(b[c]=null);b.parentNode.removeChild(b)}}function p(a){var b=null;try{b=K.getElementById(a)}catch(c){}return b}function q(a){return K.createElement(a)}function r(a,b,c){a.attachEvent(b,c),Q[Q.length]=[a,b,c]}function s(a){var b=U.pv,c=a.split(".");return c[0]=parseInt(c[0],10),c[1]=parseInt(c[1],10)||0,c[2]=parseInt(c[2],10)||0,b[0]>c[0]||b[0]==c[0]&&b[1]>c[1]||b[0]==c[0]&&b[1]==c[1]&&b[2]>=c[2]?!0:!1}function t(a,b,c,d){if(!U.ie||!U.mac){var e=K.getElementsByTagName("head")[0];if(e){var f=c&&"string"==typeof c?c:"screen";if(d&&(A=null,B=null),!A||B!=f){var g=q("style");g.setAttribute("type","text/css"),g.setAttribute("media",f),A=e.appendChild(g),U.ie&&U.win&&typeof K.styleSheets!=C&&K.styleSheets.length>0&&(A=K.styleSheets[K.styleSheets.length-1]),B=f}U.ie&&U.win?A&&typeof A.addRule==D&&A.addRule(a,b):A&&typeof K.createTextNode!=C&&A.appendChild(K.createTextNode(a+" {"+b+"}"))}}}function u(a,b){if(T){var c=b?"visible":"hidden";R&&p(a)?p(a).style.visibility=c:t("#"+a,"visibility:"+c)}}function v(a){var b=/[\\\"<>\.;]/,c=null!=b.exec(a);return c&&typeof encodeURIComponent!=C?encodeURIComponent(a):a}var w,x,y,z,A,B,C="undefined",D="object",E="Shockwave Flash",F="ShockwaveFlash.ShockwaveFlash",G="application/x-shockwave-flash",H="SWFObjectExprInst",I="onreadystatechange",J=window,K=document,L=navigator,M=!1,N=[d],O=[],P=[],Q=[],R=!1,S=!1,T=!0,U=function(){var a=typeof K.getElementById!=C&&typeof K.getElementsByTagName!=C&&typeof K.createElement!=C,b=L.userAgent.toLowerCase(),c=L.platform.toLowerCase(),d=/win/.test(c?c:b),e=/mac/.test(c?c:b),f=/webkit/.test(b)?parseFloat(b.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!1,h=[0,0,0],i=null;if(typeof L.plugins!=C&&typeof L.plugins[E]==D)i=L.plugins[E].description,!i||typeof L.mimeTypes!=C&&L.mimeTypes[G]&&!L.mimeTypes[G].enabledPlugin||(M=!0,g=!1,i=i.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),h[0]=parseInt(i.replace(/^(.*)\..*$/,"$1"),10),h[1]=parseInt(i.replace(/^.*\.(.*)\s.*$/,"$1"),10),h[2]=/[a-zA-Z]/.test(i)?parseInt(i.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0);else if(typeof J.ActiveXObject!=C)try{var j=new ActiveXObject(F);j&&(i=j.GetVariable("$version"),i&&(g=!0,i=i.split(" ")[1].split(","),h=[parseInt(i[0],10),parseInt(i[1],10),parseInt(i[2],10)]))}catch(k){}return{w3:a,pv:h,wk:f,ie:g,win:d,mac:e}}();return!function(){U.w3&&((typeof K.readyState!=C&&"complete"==K.readyState||typeof K.readyState==C&&(K.getElementsByTagName("body")[0]||K.body))&&a(),R||(typeof K.addEventListener!=C&&K.addEventListener("DOMContentLoaded",a,!1),U.ie&&U.win&&(K.attachEvent(I,function(){"complete"==K.readyState&&(K.detachEvent(I,arguments.callee),a())}),J==top&&!function(){if(!R){try{K.documentElement.doScroll("left")}catch(b){return void setTimeout(arguments.callee,0)}a()}}()),U.wk&&!function(){return R?void 0:/loaded|complete/.test(K.readyState)?void a():void setTimeout(arguments.callee,0)}(),c(a)))}(),function(){U.ie&&U.win&&window.attachEvent("onunload",function(){for(var a=Q.length,b=0;a>b;b++)Q[b][0].detachEvent(Q[b][1],Q[b][2]);for(var c=P.length,d=0;c>d;d++)n(P[d]);for(var e in U)U[e]=null;U=null;for(var f in swfobject)swfobject[f]=null;swfobject=null})}(),{registerObject:function(a,b,c,d){if(U.w3&&a&&b){var e={};e.id=a,e.swfVersion=b,e.expressInstall=c,e.callbackFn=d,O[O.length]=e,u(a,!1)}else d&&d({success:!1,id:a})},getObjectById:function(a){return U.w3?g(a):void 0},embedSWF:function(a,c,d,e,f,g,j,k,m,n){var o={success:!1,id:c};U.w3&&!(U.wk&&U.wk<312)&&a&&c&&d&&e&&f?(u(c,!1),b(function(){d+="",e+="";var b={};if(m&&typeof m===D)for(var p in m)b[p]=m[p];b.data=a,b.width=d,b.height=e;var q={};if(k&&typeof k===D)for(var r in k)q[r]=k[r];if(j&&typeof j===D)for(var t in j)typeof q.flashvars!=C?q.flashvars+="&"+t+"="+j[t]:q.flashvars=t+"="+j[t];if(s(f)){var v=l(b,q,c);b.id==c&&u(c,!0),o.success=!0,o.ref=v}else{if(g&&h())return b.data=g,void i(b,q,c,n);u(c,!0)}n&&n(o)})):n&&n(o)},switchOffAutoHideShow:function(){T=!1},ua:U,getFlashPlayerVersion:function(){return{major:U.pv[0],minor:U.pv[1],release:U.pv[2]}},hasFlashPlayerVersion:s,createSWF:function(a,b,c){return U.w3?l(a,b,c):void 0},showExpressInstall:function(a,b,c,d){U.w3&&h()&&i(a,b,c,d)},removeSWF:function(a){U.w3&&n(a)},createCSS:function(a,b,c,d){U.w3&&t(a,b,c,d)},addDomLoadEvent:b,addLoadEvent:c,getQueryParamValue:function(a){var b=K.location.search||K.location.hash;if(b){if(/\?/.test(b)&&(b=b.split("?")[1]),null==a)return v(b);for(var c=b.split("&"),d=0;d<c.length;d++)if(c[d].substring(0,c[d].indexOf("="))==a)return v(c[d].substring(c[d].indexOf("=")+1))}return""},expressInstallCallback:function(){if(S){var a=p(H);a&&w&&(a.parentNode.replaceChild(w,a),x&&(u(x,!0),U.ie&&U.win&&(w.style.display="block")),y&&y(z)),S=!1}}}}();this.createjs=this.createjs||{},function(){"use strict";function a(a){this.AbstractLoader_constructor(a,!1,createjs.AbstractLoader.SOUND),this.flashId=null}var b=createjs.extend(a,createjs.AbstractLoader),c=a;c._flash=null,c._preloadInstances=[],c.setFlash=function(a){c._flash=a;for(var b=c._preloadInstances.length;b--;){var d=c._preloadInstances.pop();d.load()}},b.load=function(){if(null==c._flash)return void c._preloadInstances.push(this);this.flashId=c._flash.preload(this._item.src);var a=new createjs.Event(createjs.FlashAudioPlugin._REG_FLASHID);this.dispatchEvent(a)},b.handleProgress=function(a,b){this._sendProgress(a/b)},b.handleComplete=function(){this._result=this._item.src,this._sendComplete()},b.handleError=function(a){this._handleError(a)},b.destroy=function(){var a=new createjs.Event(createjs.FlashAudioPlugin._UNREG_FLASHID);this.dispatchEvent(a),this.AbstractLoader_destroy()},b.toString=function(){return"[FlashAudioLoader]"},createjs.FlashAudioLoader=createjs.promote(a,"AbstractLoader")}(),this.createjs=this.createjs||{},function(){"use strict";function a(a,b,d,e){this.AbstractSoundInstance_constructor(a,b,d,e),this.flashId=null,null==c._flash&&c._instances.push(this)}var b=createjs.extend(a,createjs.AbstractSoundInstance),c=a;c._flash=null,c._instances=[],c.setFlash=function(a){c._flash=a;for(var b=c._instances.length;b--;){var d=c._instances.pop();d._setDurationFromSource()}},b.toString=function(){return"[FlashAudioSoundInstance]"},b._removeLooping=function(){null!=this.flashId&&c._flash.setLoop(this.flashId,this._loop)},b._addLooping=function(){null!=this.flashId&&c._flash.setLoop(this.flashId,this._loop)},b._updateVolume=function(){null!=this.flashId&&c._flash.setVolume(this.flashId,this._volume)},b._updatePan=function(){null!=this.flashId&&c._flash.setPan(this.flashId,this._pan)},b._setDurationFromSource=function(){this._duration=c._flash.getDurationBySrc(this.src)},b._interrupt=function(){null!=this.flashId&&(c._flash.interrupt(this.flashId),this.AbstractSoundInstance__interrupt())},b._handleCleanUp=function(){c._flash.stopSound(this.flashId),this._sendEvent(createjs.FlashAudioPlugin._UNREG_FLASHID),this.flashId=null},b._beginPlaying=function(a,b,d,e){return null==c._flash?!1:(this.setPosition(a),this.setLoop(b),this.setVolume(d),this.setPan(e),this._paused=!1,this.flashId=c._flash.playSound(this.src,this._position,this._loop,this._volume,this._pan,this._startTime,this._duration),null==this.flashId?(this._playFailed(),!1):(this._muted&&this.setMute(!0),this._sendEvent(createjs.FlashAudioPlugin._REG_FLASHID),this.playState=createjs.Sound.PLAY_SUCCEEDED,this._sendEvent("succeeded"),!0))},b._pause=function(){null!=this.flashId&&(this._position=this._calculateCurrentPosition(),c._flash.pauseSound(this.flashId))},b._resume=function(){null!=this.flashId&&c._flash.resumeSound(this.flashId)},b._handleStop=function(){null!=this.flashId&&c._flash.stopSound(this.flashId)},b._updateVolume=function(){var a=this._muted?0:this._volume;c._flash.setVolume(this.flashId,a)},b._calculateCurrentPosition=function(){return c._flash.getPosition(this.flashId)},b._updatePosition=function(){null!=this.flashId&&c._flash.setPosition(this.flashId,this._position)},b.handleSoundFinished=function(){this._loop=0,this._handleSoundComplete()},b.handleSoundLoop=function(){this._loop--,this._sendEvent("loop")},createjs.FlashAudioSoundInstance=createjs.promote(a,"AbstractSoundInstance")}(),this.createjs=this.createjs||{},function(){"use strict";function a(){this.AbstractPlugin_constructor(),this.showOutput=!1,this._CONTAINER_ID="flashAudioContainer",this._WRAPPER_ID="SoundJSFlashContainer",this._container=null,this._flash=null,this.flashReady=!1,this._flashInstances={},this._flashPreloadInstances={},this._queuedInstances=[],this._capabilities=c._capabilities,this._loaderClass=createjs.FlashAudioLoader,this._soundInstanceClass=createjs.FlashAudioSoundInstance;var a=this.wrapper=document.createElement("div");a.id=this._WRAPPER_ID,a.style.position="absolute",a.style.marginLeft="-1px",a.className=this._WRAPPER_ID,document.body.appendChild(a);var b=this._container=document.createElement("div");b.id=this._CONTAINER_ID,b.appendChild(document.createTextNode("SoundJS Flash Container")),a.appendChild(b);var d=c.swfPath;swfobject.embedSWF(d+"FlashAudioPlugin.swf",this._CONTAINER_ID,"1","1","9.0.0",null,null,{AllowScriptAccess:"always"},null,createjs.proxy(this._handleSWFReady,this))}var b=createjs.extend(a,createjs.AbstractPlugin),c=a;c._REG_FLASHID="registerflashid",c._UNREG_FLASHID="unregisterflashid",c._capabilities=null,c.swfPath="src/soundjs/flashaudio/",c.isSupported=function(){return createjs.BrowserDetect.isIOS||createjs.BrowserDetect.isAndroid||createjs.BrowserDetect.isBlackberry||createjs.BrowserDetect.isWindowsPhone?!1:(c._generateCapabilities(),null==swfobject?!1:swfobject.hasFlashPlayerVersion("9.0.0"))},c._generateCapabilities=function(){null==c._capabilities&&(c._capabilities={panning:!0,volume:!0,tracks:-1,mp3:!0,ogg:!1,mpeg:!0,wav:!0,m4a:!1,mp4:!1,aiff:!1,wma:!1,mid:!1})},b.register=function(a,b){this.flashReady||this._queuedInstances.push(a);var d=this.AbstractPlugin_register(a,b);return d.addEventListener(c._REG_FLASHID,createjs.proxy(this.registerPreloadInstance,this)),d.addEventListener(c._UNREG_FLASHID,createjs.proxy(this.unregisterPreloadInstance,this)),d},b.removeSound=function(a){var b=createjs.indexOf(this._queuedInstances,a);-1!=b&&this._queuedInstances.splice(b,1),this.AbstractPlugin_removeSound(a)},b.removeAllSounds=function(){this._queuedInstances.length=0,this._flashInstances={},this._flashPreloadInstances={},this.AbstractPlugin_removeAllSounds()},b.create=function(a,b,d){var e=this.AbstractPlugin_create(a,b,d);return e.on(c._REG_FLASHID,this.registerSoundInstance,this),e.on(c._UNREG_FLASHID,this.unregisterSoundInstance,this),e},b.toString=function(){return"[FlashAudioPlugin]"},b._handleSWFReady=function(a){this._flash=a.ref},b._handleFlashReady=function(){this.flashReady=!0,this._loaderClass.setFlash(this._flash),this._soundInstanceClass.setFlash(this._flash),this._updateVolume();for(var a=0,b=this._queuedInstances.length;b>a;a++)this._flash.register(this._queuedInstances[a]);this._queuedInstances.length=0},b._updateVolume=function(){if(!this.flashReady)return!0;var a=createjs.Sound._masterMute?0:this._volume;return this._flash.setMasterVolume(a)},b.registerPreloadInstance=function(a){this._flashPreloadInstances[a.target.flashId]=a.target},b.unregisterPreloadInstance=function(a){delete this._flashPreloadInstances[a.target.flashId]},b.registerSoundInstance=function(a){this._flashInstances[a.target.flashId]=a.target},b.unregisterSoundInstance=function(a){delete this._flashInstances[a.target.flashId]},b.flashLog=function(a){try{this.showOutput&&console.log(a)}catch(b){}},b.handleSoundEvent=function(a,b){var c=this._flashInstances[a];if(null!=c){for(var d=[],e=2,f=arguments.length;f>e;e++)d.push(arguments[e]);try{0==d.length?c[b]():c[b].apply(c,d)}catch(g){}}},b.handlePreloadEvent=function(a,b){var c=this._flashPreloadInstances[a];if(null!=c){for(var d=[],e=2,f=arguments.length;f>e;e++)d.push(arguments[e]);try{0==d.length?c[b]():c[b].apply(c,d)}catch(g){}}},b.handleEvent=function(a){switch(a){case"ready":this._handleFlashReady()}},b.handleErrorEvent=function(){},createjs.FlashAudioPlugin=createjs.promote(a,"AbstractPlugin"),createjs.FlashPlugin=createjs.FlashAudioPlugin}(),this.createjs=this.createjs||{},function(){var a=createjs.FlashAudioPlugin=createjs.FlashAudioPlugin||{};a.version="0.6.3",a.buildDate="Tue, 08 Sep 2015 19:54:41 GMT"}(),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.PIXI=a()}}(function(){var a;return function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";"use restrict";function d(a){var b=32;return a&=-a,a&&b--,65535&a&&(b-=16),16711935&a&&(b-=8),252645135&a&&(b-=4),858993459&a&&(b-=2),1431655765&a&&(b-=1),b}var e=32;c.INT_BITS=e,c.INT_MAX=2147483647,c.INT_MIN=-1<<e-1,c.sign=function(a){return(a>0)-(0>a)},c.abs=function(a){var b=a>>e-1;return(a^b)-b},c.min=function(a,b){return b^(a^b)&-(b>a)},c.max=function(a,b){return a^(a^b)&-(b>a)},c.isPow2=function(a){return!(a&a-1||!a)},c.log2=function(a){var b,c;return b=(a>65535)<<4,a>>>=b,c=(a>255)<<3,a>>>=c,b|=c,c=(a>15)<<2,a>>>=c,b|=c,c=(a>3)<<1,a>>>=c,b|=c,b|a>>1},c.log10=function(a){return a>=1e9?9:a>=1e8?8:a>=1e7?7:a>=1e6?6:a>=1e5?5:a>=1e4?4:a>=1e3?3:a>=100?2:a>=10?1:0},c.popCount=function(a){return a-=a>>>1&1431655765,a=(858993459&a)+(a>>>2&858993459),16843009*(a+(a>>>4)&252645135)>>>24},c.countTrailingZeros=d,c.nextPow2=function(a){return a+=0===a,--a,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a+1},c.prevPow2=function(a){return a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a-(a>>>1)},c.parity=function(a){return a^=a>>>16,a^=a>>>8,a^=a>>>4,a&=15,27030>>>a&1};var f=new Array(256);!function(a){for(var b=0;256>b;++b){var c=b,d=b,e=7;for(c>>>=1;c;c>>>=1)d<<=1,d|=1&c,--e;a[b]=d<<e&255}}(f),c.reverse=function(a){return f[255&a]<<24|f[a>>>8&255]<<16|f[a>>>16&255]<<8|f[a>>>24&255]},c.interleave2=function(a,b){return a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b&=65535,b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1},c.deinterleave2=function(a,b){return a=a>>>b&1431655765,a=858993459&(a|a>>>1),a=252645135&(a|a>>>2),a=16711935&(a|a>>>4),a=65535&(a|a>>>16),a<<16>>16},c.interleave3=function(a,b,c){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),b&=1023,b=4278190335&(b|b<<16),b=251719695&(b|b<<8),b=3272356035&(b|b<<4),b=1227133513&(b|b<<2),a|=b<<1,c&=1023,c=4278190335&(c|c<<16),c=251719695&(c|c<<8),c=3272356035&(c|c<<4),c=1227133513&(c|c<<2),a|c<<2},c.deinterleave3=function(a,b){return a=a>>>b&1227133513,a=3272356035&(a|a>>>2),a=251719695&(a|a>>>4),a=4278190335&(a|a>>>8),a=1023&(a|a>>>16),a<<22>>22},c.nextCombination=function(a){var b=a|a-1;return b+1|(~b&-~b)-1>>>d(a)+1}},{}],2:[function(a,b,c){"use strict";function d(a,b,c){c=c||2;var d=b&&b.length,f=d?b[0]*c:a.length,h=e(a,0,f,c,!0),i=[];if(!h)return i;var j,k,m,n,o,p,q;if(d&&(h=l(a,b,h,c)),a.length>80*c){j=m=a[0],k=n=a[1];for(var r=c;f>r;r+=c)o=a[r],p=a[r+1],j>o&&(j=o),k>p&&(k=p),o>m&&(m=o),p>n&&(n=p);q=Math.max(m-j,n-k)}return g(h,i,c,j,k,q),i}function e(a,b,c,d,e){var f,g,h,i=0;for(f=b,g=c-d;c>f;f+=d)i+=(a[g]-a[f])*(a[f+1]+a[g+1]),g=f;if(e===i>0)for(f=b;c>f;f+=d)h=C(f,a[f],a[f+1],h);else for(f=c-d;f>=b;f-=d)h=C(f,a[f],a[f+1],h);return h}function f(a,b){if(!a)return a;b||(b=a);var c,d=a;do if(c=!1,d.steiner||!w(d,d.next)&&0!==v(d.prev,d,d.next))d=d.next;else{if(D(d),d=b=d.prev,d===d.next)return null;c=!0}while(c||d!==b);return b}function g(a,b,c,d,e,l,m){if(a){!m&&l&&p(a,d,e,l);for(var n,o,q=a;a.prev!==a.next;)if(n=a.prev,o=a.next,l?i(a,d,e,l):h(a))b.push(n.i/c),b.push(a.i/c),b.push(o.i/c),D(a),a=o.next,q=o.next;else if(a=o,a===q){m?1===m?(a=j(a,b,c),g(a,b,c,d,e,l,2)):2===m&&k(a,b,c,d,e,l):g(f(a),b,c,d,e,l,1);break}}}function h(a){var b=a.prev,c=a,d=a.next;if(v(b,c,d)>=0)return!1;for(var e=a.next.next;e!==a.prev;){if(t(b.x,b.y,c.x,c.y,d.x,d.y,e.x,e.y)&&v(e.prev,e,e.next)>=0)return!1;e=e.next}return!0}function i(a,b,c,d){var e=a.prev,f=a,g=a.next;if(v(e,f,g)>=0)return!1;for(var h=e.x<f.x?e.x<g.x?e.x:g.x:f.x<g.x?f.x:g.x,i=e.y<f.y?e.y<g.y?e.y:g.y:f.y<g.y?f.y:g.y,j=e.x>f.x?e.x>g.x?e.x:g.x:f.x>g.x?f.x:g.x,k=e.y>f.y?e.y>g.y?e.y:g.y:f.y>g.y?f.y:g.y,l=r(h,i,b,c,d),m=r(j,k,b,c,d),n=a.nextZ;n&&n.z<=m;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.nextZ}for(n=a.prevZ;n&&n.z>=l;){if(n!==a.prev&&n!==a.next&&t(e.x,e.y,f.x,f.y,g.x,g.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.prevZ}return!0}function j(a,b,c){var d=a;do{var e=d.prev,f=d.next.next;x(e,d,d.next,f)&&z(e,f)&&z(f,e)&&(b.push(e.i/c),b.push(d.i/c),b.push(f.i/c),D(d),D(d.next),d=a=f),d=d.next}while(d!==a);return d}function k(a,b,c,d,e,h){var i=a;do{for(var j=i.next.next;j!==i.prev;){if(i.i!==j.i&&u(i,j)){var k=B(i,j);return i=f(i,i.next),k=f(k,k.next),g(i,b,c,d,e,h),void g(k,b,c,d,e,h)}j=j.next}i=i.next}while(i!==a)}function l(a,b,c,d){var g,h,i,j,k,l=[];for(g=0,h=b.length;h>g;g++)i=b[g]*d,j=h-1>g?b[g+1]*d:a.length,k=e(a,i,j,d,!1),k===k.next&&(k.steiner=!0),l.push(s(k));for(l.sort(m),g=0;g<l.length;g++)n(l[g],c),c=f(c,c.next);return c}function m(a,b){return a.x-b.x}function n(a,b){if(b=o(a,b)){var c=B(b,a);f(c,c.next)}}function o(a,b){var c,d=b,e=a.x,f=a.y,g=-(1/0);do{if(f<=d.y&&f>=d.next.y){var h=d.x+(f-d.y)*(d.next.x-d.x)/(d.next.y-d.y);e>=h&&h>g&&(g=h,c=d.x<d.next.x?d:d.next)}d=d.next}while(d!==b);if(!c)return null;if(a.x===c.x)return c.prev;var i,j=c,k=1/0;for(d=c.next;d!==j;)e>=d.x&&d.x>=c.x&&t(f<c.y?e:g,f,c.x,c.y,f<c.y?g:e,f,d.x,d.y)&&(i=Math.abs(f-d.y)/(e-d.x),(k>i||i===k&&d.x>c.x)&&z(d,a)&&(c=d,k=i)),d=d.next;return c}function p(a,b,c,d){var e=a;do null===e.z&&(e.z=r(e.x,e.y,b,c,d)),e.prevZ=e.prev,e.nextZ=e.next,e=e.next;while(e!==a);e.prevZ.nextZ=null,e.prevZ=null,q(e)}function q(a){var b,c,d,e,f,g,h,i,j=1;do{for(c=a,a=null,f=null,g=0;c;){for(g++,d=c,h=0,b=0;j>b&&(h++,d=d.nextZ);b++);for(i=j;h>0||i>0&&d;)0===h?(e=d,d=d.nextZ,i--):0!==i&&d?c.z<=d.z?(e=c,c=c.nextZ,h--):(e=d,d=d.nextZ,i--):(e=c,c=c.nextZ,h--),f?f.nextZ=e:a=e,e.prevZ=f,f=e;c=d}f.nextZ=null,j*=2}while(g>1);return a}function r(a,b,c,d,e){return a=32767*(a-c)/e,b=32767*(b-d)/e,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),b=16711935&(b|b<<8),b=252645135&(b|b<<4),b=858993459&(b|b<<2),b=1431655765&(b|b<<1),a|b<<1}function s(a){var b=a,c=a;do b.x<c.x&&(c=b),b=b.next;while(b!==a);return c}function t(a,b,c,d,e,f,g,h){return(e-g)*(b-h)-(a-g)*(f-h)>=0&&(a-g)*(d-h)-(c-g)*(b-h)>=0&&(c-g)*(f-h)-(e-g)*(d-h)>=0}function u(a,b){return w(a,b)||a.next.i!==b.i&&a.prev.i!==b.i&&!y(a,b)&&z(a,b)&&z(b,a)&&A(a,b)}function v(a,b,c){return(b.y-a.y)*(c.x-b.x)-(b.x-a.x)*(c.y-b.y)}function w(a,b){return a.x===b.x&&a.y===b.y}function x(a,b,c,d){return v(a,b,c)>0!=v(a,b,d)>0&&v(c,d,a)>0!=v(c,d,b)>0}function y(a,b){var c=a;do{if(c.i!==a.i&&c.next.i!==a.i&&c.i!==b.i&&c.next.i!==b.i&&x(c,c.next,a,b))return!0;c=c.next}while(c!==a);return!1}function z(a,b){return v(a.prev,a,a.next)<0?v(a,b,a.next)>=0&&v(a,a.prev,b)>=0:v(a,b,a.prev)<0||v(a,a.next,b)<0}function A(a,b){var c=a,d=!1,e=(a.x+b.x)/2,f=(a.y+b.y)/2;do c.y>f!=c.next.y>f&&e<(c.next.x-c.x)*(f-c.y)/(c.next.y-c.y)+c.x&&(d=!d),c=c.next;while(c!==a);return d}function B(a,b){var c=new E(a.i,a.x,a.y),d=new E(b.i,b.x,b.y),e=a.next,f=b.prev;return a.next=b,b.prev=a,c.next=e,e.prev=c,d.next=c,c.prev=d,f.next=d,d.prev=f,d}function C(a,b,c,d){var e=new E(a,b,c);return d?(e.next=d.next,e.prev=d,d.next.prev=e,d.next=e):(e.prev=e,e.next=e),e}function D(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function E(a,b,c){this.i=a,this.x=b,this.y=c,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}b.exports=d},{}],3:[function(a,b,c){"use strict";function d(){}function e(a,b,c){this.fn=a,this.context=b,this.once=c||!1}function f(){this._events=new d,this._eventsCount=0}var g=Object.prototype.hasOwnProperty,h="~";Object.create&&(d.prototype=Object.create(null),(new d).__proto__||(h=!1)),f.prototype.eventNames=function(){var a,b,c=[];if(0===this._eventsCount)return c;for(b in a=this._events)g.call(a,b)&&c.push(h?b.slice(1):b);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(a)):c},f.prototype.listeners=function(a,b){var c=h?h+a:a,d=this._events[c];if(b)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var e=0,f=d.length,g=new Array(f);f>e;e++)g[e]=d[e].fn;return g},f.prototype.emit=function(a,b,c,d,e,f){var g=h?h+a:a;if(!this._events[g])return!1;var i,j,k=this._events[g],l=arguments.length;if(k.fn){switch(k.once&&this.removeListener(a,k.fn,void 0,!0),l){case 1:return k.fn.call(k.context),!0;case 2:return k.fn.call(k.context,b),!0;case 3:return k.fn.call(k.context,b,c),!0;case 4:return k.fn.call(k.context,b,c,d),!0;case 5:return k.fn.call(k.context,b,c,d,e),!0;case 6:return k.fn.call(k.context,b,c,d,e,f),!0}for(j=1,i=new Array(l-1);l>j;j++)i[j-1]=arguments[j];k.fn.apply(k.context,i)}else{var m,n=k.length;for(j=0;n>j;j++)switch(k[j].once&&this.removeListener(a,k[j].fn,void 0,!0),l){case 1:k[j].fn.call(k[j].context);break;case 2:k[j].fn.call(k[j].context,b);break;
case 3:k[j].fn.call(k[j].context,b,c);break;case 4:k[j].fn.call(k[j].context,b,c,d);break;default:if(!i)for(m=1,i=new Array(l-1);l>m;m++)i[m-1]=arguments[m];k[j].fn.apply(k[j].context,i)}}return!0},f.prototype.on=function(a,b,c){var d=new e(b,c||this),f=h?h+a:a;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],d]:this._events[f].push(d):(this._events[f]=d,this._eventsCount++),this},f.prototype.once=function(a,b,c){var d=new e(b,c||this,!0),f=h?h+a:a;return this._events[f]?this._events[f].fn?this._events[f]=[this._events[f],d]:this._events[f].push(d):(this._events[f]=d,this._eventsCount++),this},f.prototype.removeListener=function(a,b,c,e){var f=h?h+a:a;if(!this._events[f])return this;if(!b)return 0===--this._eventsCount?this._events=new d:delete this._events[f],this;var g=this._events[f];if(g.fn)g.fn!==b||e&&!g.once||c&&g.context!==c||(0===--this._eventsCount?this._events=new d:delete this._events[f]);else{for(var i=0,j=[],k=g.length;k>i;i++)(g[i].fn!==b||e&&!g[i].once||c&&g[i].context!==c)&&j.push(g[i]);j.length?this._events[f]=1===j.length?j[0]:j:0===--this._eventsCount?this._events=new d:delete this._events[f]}return this},f.prototype.removeAllListeners=function(a){var b;return a?(b=h?h+a:a,this._events[b]&&(0===--this._eventsCount?this._events=new d:delete this._events[b])):(this._events=new d,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prototype.setMaxListeners=function(){return this},f.prefixed=h,f.EventEmitter=f,"undefined"!=typeof b&&(b.exports=f)},{}],4:[function(b,c,d){!function(b){var d=/iPhone/i,e=/iPod/i,f=/iPad/i,g=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,h=/Android/i,i=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,j=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,k=/IEMobile/i,l=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,m=/BlackBerry/i,n=/BB10/i,o=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,q=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,r=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),s=function(a,b){return a.test(b)},t=function(a){var b=a||navigator.userAgent,c=b.split("[FBAN");return"undefined"!=typeof c[1]&&(b=c[0]),c=b.split("Twitter"),"undefined"!=typeof c[1]&&(b=c[0]),this.apple={phone:s(d,b),ipod:s(e,b),tablet:!s(d,b)&&s(f,b),device:s(d,b)||s(e,b)||s(f,b)},this.amazon={phone:s(i,b),tablet:!s(i,b)&&s(j,b),device:s(i,b)||s(j,b)},this.android={phone:s(i,b)||s(g,b),tablet:!s(i,b)&&!s(g,b)&&(s(j,b)||s(h,b)),device:s(i,b)||s(j,b)||s(g,b)||s(h,b)},this.windows={phone:s(k,b),tablet:s(l,b),device:s(k,b)||s(l,b)},this.other={blackberry:s(m,b),blackberry10:s(n,b),opera:s(o,b),firefox:s(q,b),chrome:s(p,b),device:s(m,b)||s(n,b)||s(o,b)||s(q,b)||s(p,b)},this.seven_inch=s(r,b),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},u=function(){var a=new t;return a.Class=t,a};"undefined"!=typeof c&&c.exports&&"undefined"==typeof window?c.exports=t:"undefined"!=typeof c&&c.exports&&"undefined"!=typeof window?c.exports=u():"function"==typeof a&&a.amd?a("isMobile",[],b.isMobile=u()):b.isMobile=u()}(this)},{}],5:[function(a,b,c){"use strict";function d(a){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(a)}var e=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable;b.exports=Object.assign||function(a,b){for(var c,g,h=d(a),i=1;i<arguments.length;i++){c=Object(arguments[i]);for(var j in c)e.call(c,j)&&(h[j]=c[j]);if(Object.getOwnPropertySymbols){g=Object.getOwnPropertySymbols(c);for(var k=0;k<g.length;k++)f.call(c,g[k])&&(h[g[k]]=c[g[k]])}}return h}},{}],6:[function(a,b,c){var d=new ArrayBuffer(0),e=function(a,b,c,e){this.gl=a,this.buffer=a.createBuffer(),this.type=b||a.ARRAY_BUFFER,this.drawType=e||a.STATIC_DRAW,this.data=d,c&&this.upload(c)};e.prototype.upload=function(a,b,c){c||this.bind();var d=this.gl;a=a||this.data,b=b||0,this.data.byteLength>=a.byteLength?d.bufferSubData(this.type,b,a):d.bufferData(this.type,a,this.drawType),this.data=a},e.prototype.bind=function(){var a=this.gl;a.bindBuffer(this.type,this.buffer)},e.createVertexBuffer=function(a,b,c){return new e(a,a.ARRAY_BUFFER,b,c)},e.createIndexBuffer=function(a,b,c){return new e(a,a.ELEMENT_ARRAY_BUFFER,b,c)},e.create=function(a,b,c,d){return new e(a,b,c,d)},e.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},b.exports=e},{}],7:[function(a,b,c){var d=a("./GLTexture"),e=function(a,b,c){this.gl=a,this.framebuffer=a.createFramebuffer(),this.stencil=null,this.texture=null,this.width=b||100,this.height=c||100};e.prototype.enableTexture=function(a){var b=this.gl;this.texture=a||new d(b),this.texture.bind(),this.bind(),b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,this.texture.texture,0)},e.prototype.enableStencil=function(){if(!this.stencil){var a=this.gl;this.stencil=a.createRenderbuffer(),a.bindRenderbuffer(a.RENDERBUFFER,this.stencil),a.framebufferRenderbuffer(a.FRAMEBUFFER,a.DEPTH_STENCIL_ATTACHMENT,a.RENDERBUFFER,this.stencil),a.renderbufferStorage(a.RENDERBUFFER,a.DEPTH_STENCIL,this.width,this.height)}},e.prototype.clear=function(a,b,c,d){this.bind();var e=this.gl;e.clearColor(a,b,c,d),e.clear(e.COLOR_BUFFER_BIT)},e.prototype.bind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,this.framebuffer)},e.prototype.unbind=function(){var a=this.gl;a.bindFramebuffer(a.FRAMEBUFFER,null)},e.prototype.resize=function(a,b){var c=this.gl;this.width=a,this.height=b,this.texture&&this.texture.uploadData(null,a,b),this.stencil&&(c.bindRenderbuffer(c.RENDERBUFFER,this.stencil),c.renderbufferStorage(c.RENDERBUFFER,c.DEPTH_STENCIL,a,b))},e.prototype.destroy=function(){var a=this.gl;this.texture&&this.texture.destroy(),a.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},e.createRGBA=function(a,b,c,f){var g=d.fromData(a,null,b,c);g.enableNearestScaling(),g.enableWrapClamp();var h=new e(a,b,c);return h.enableTexture(g),h.unbind(),h},e.createFloat32=function(a,b,c,f){var g=new d.fromData(a,f,b,c);g.enableNearestScaling(),g.enableWrapClamp();var h=new e(a,b,c);return h.enableTexture(g),h.unbind(),h},b.exports=e},{"./GLTexture":9}],8:[function(a,b,c){var d=a("./shader/compileProgram"),e=a("./shader/extractAttributes"),f=a("./shader/extractUniforms"),g=a("./shader/generateUniformAccessObject"),h=function(a,b,c){this.gl=a,this.program=d(a,b,c),this.attributes=e(a,this.program);var h=f(a,this.program);this.uniforms=g(a,h)};h.prototype.bind=function(){this.gl.useProgram(this.program)},h.prototype.destroy=function(){},b.exports=h},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18}],9:[function(a,b,c){var d=function(a,b,c,d,e){this.gl=a,this.texture=a.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=b||-1,this.height=c||-1,this.format=d||a.RGBA,this.type=e||a.UNSIGNED_BYTE};d.prototype.upload=function(a){this.bind();var b=this.gl;b.pixelStorei(b.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var c=a.videoWidth||a.width,d=a.videoHeight||a.height;d!==this.height||c!==this.width?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,this.type,a):b.texSubImage2D(b.TEXTURE_2D,0,0,0,this.format,this.type,a),this.width=c,this.height=d};var e=!1;d.prototype.uploadData=function(a,b,c){this.bind();var d=this.gl;if(a instanceof Float32Array){if(!e){var f=d.getExtension("OES_texture_float");if(!f)throw new Error("floating point textures not available");e=!0}this.type=d.FLOAT}else this.type=d.UNSIGNED_BYTE;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),b!==this.width||c!==this.height?d.texImage2D(d.TEXTURE_2D,0,this.format,b,c,0,this.format,this.type,a||null):d.texSubImage2D(d.TEXTURE_2D,0,0,0,b,c,this.format,this.type,a||null),this.width=b,this.height=c},d.prototype.bind=function(a){var b=this.gl;void 0!==a&&b.activeTexture(b.TEXTURE0+a),b.bindTexture(b.TEXTURE_2D,this.texture)},d.prototype.unbind=function(){var a=this.gl;a.bindTexture(a.TEXTURE_2D,null)},d.prototype.minFilter=function(a){var b=this.gl;this.bind(),this.mipmap?b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR_MIPMAP_LINEAR:b.NEAREST_MIPMAP_NEAREST):b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MIN_FILTER,a?b.LINEAR:b.NEAREST)},d.prototype.magFilter=function(a){var b=this.gl;this.bind(),b.texParameteri(b.TEXTURE_2D,b.TEXTURE_MAG_FILTER,a?b.LINEAR:b.NEAREST)},d.prototype.enableMipmap=function(){var a=this.gl;this.bind(),this.mipmap=!0,a.generateMipmap(a.TEXTURE_2D)},d.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},d.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},d.prototype.enableWrapClamp=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE)},d.prototype.enableWrapRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.REPEAT)},d.prototype.enableWrapMirrorRepeat=function(){var a=this.gl;this.bind(),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.MIRRORED_REPEAT),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.MIRRORED_REPEAT)},d.prototype.destroy=function(){var a=this.gl;a.deleteTexture(this.texture)},d.fromSource=function(a,b,c){var e=new d(a);return e.premultiplyAlpha=c||!1,e.upload(b),e},d.fromData=function(a,b,c,e){var f=new d(a);return f.uploadData(b,c,e),f},b.exports=d},{}],10:[function(a,b,c){function d(a,b){if(this.nativeVaoExtension=null,d.FORCE_NATIVE||(this.nativeVaoExtension=a.getExtension("OES_vertex_array_object")||a.getExtension("MOZ_OES_vertex_array_object")||a.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=b,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var c=a.getParameter(a.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(c),attribState:new Array(c)}}this.gl=a,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var e=a("./setVertexAttribArrays");d.prototype.constructor=d,b.exports=d,d.FORCE_NATIVE=!1,d.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},d.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},d.prototype.activate=function(){for(var a=this.gl,b=null,c=0;c<this.attributes.length;c++){var d=this.attributes[c];b!==d.buffer&&(d.buffer.bind(),b=d.buffer),a.vertexAttribPointer(d.attribute.location,d.attribute.size,d.type||a.FLOAT,d.normalized||!1,d.stride||0,d.start||0)}return e(a,this.attributes,this.nativeState),this.indexBuffer.bind(),this},d.prototype.addAttribute=function(a,b,c,d,e,f){return this.attributes.push({buffer:a,attribute:b,location:b.location,type:c||this.gl.FLOAT,normalized:d||!1,stride:e||0,start:f||0}),this.dirty=!0,this},d.prototype.addIndex=function(a){return this.indexBuffer=a,this.dirty=!0,this},d.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},d.prototype.draw=function(a,b,c){var d=this.gl;return d.drawElements(a,b,d.UNSIGNED_SHORT,c||0),this},d.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null}},{"./setVertexAttribArrays":13}],11:[function(a,b,c){var d=function(a,b){var c=a.getContext("webgl",b)||a.getContext("experimental-webgl",b);if(!c)throw new Error("This browser does not support webGL. Try using the canvas renderer");return c};b.exports=d},{}],12:[function(a,b,c){var d={createContext:a("./createContext"),setVertexAttribArrays:a("./setVertexAttribArrays"),GLBuffer:a("./GLBuffer"),GLFramebuffer:a("./GLFramebuffer"),GLShader:a("./GLShader"),GLTexture:a("./GLTexture"),VertexArrayObject:a("./VertexArrayObject"),shader:a("./shader")};"undefined"!=typeof b&&b.exports&&(b.exports=d),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=d)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(a,b,c){var d=function(a,b,c){var d;if(c){var e=c.tempAttribState,f=c.attribState;for(d=0;d<e.length;d++)e[d]=!1;for(d=0;d<b.length;d++)e[b[d].attribute.location]=!0;for(d=0;d<f.length;d++)f[d]!==e[d]&&(f[d]=e[d],c.attribState[d]?a.enableVertexAttribArray(d):a.disableVertexAttribArray(d))}else for(d=0;d<b.length;d++){var g=b[d];a.enableVertexAttribArray(g.attribute.location)}};b.exports=d},{}],14:[function(a,b,c){var d=function(a,b,c){var d=e(a,a.VERTEX_SHADER,b),f=e(a,a.FRAGMENT_SHADER,c),g=a.createProgram();return a.attachShader(g,d),a.attachShader(g,f),a.linkProgram(g),a.getProgramParameter(g,a.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",a.getProgramParameter(g,a.VALIDATE_STATUS)),console.error("gl.getError()",a.getError()),""!==a.getProgramInfoLog(g)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",a.getProgramInfoLog(g)),a.deleteProgram(g),g=null),a.deleteShader(d),a.deleteShader(f),g},e=function(a,b,c){var d=a.createShader(b);return a.shaderSource(d,c),a.compileShader(d),a.getShaderParameter(d,a.COMPILE_STATUS)?d:(console.log(a.getShaderInfoLog(d)),null)};b.exports=d},{}],15:[function(a,b,c){var d=function(a,b){switch(a){case"float":return 0;case"vec2":return new Float32Array(2*b);case"vec3":return new Float32Array(3*b);case"vec4":return new Float32Array(4*b);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*b);case"ivec3":return new Int32Array(3*b);case"ivec4":return new Int32Array(4*b);case"bool":return!1;case"bvec2":return e(2*b);case"bvec3":return e(3*b);case"bvec4":return e(4*b);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}},e=function(a){for(var b=new Array(a),c=0;c<b.length;c++)b[c]=!1;return b};b.exports=d},{}],16:[function(a,b,c){var d=a("./mapType"),e=a("./mapSize"),f=function(a,b){for(var c={},f=a.getProgramParameter(b,a.ACTIVE_ATTRIBUTES),h=0;f>h;h++){var i=a.getActiveAttrib(b,h),j=d(a,i.type);c[i.name]={type:j,size:e(j),location:a.getAttribLocation(b,i.name),pointer:g}}return c},g=function(a,b,c,d){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,b||!1,c||0,d||0)};b.exports=f},{"./mapSize":20,"./mapType":21}],17:[function(a,b,c){var d=a("./mapType"),e=a("./defaultValue"),f=function(a,b){for(var c={},f=a.getProgramParameter(b,a.ACTIVE_UNIFORMS),g=0;f>g;g++){var h=a.getActiveUniform(b,g),i=h.name.replace(/\[.*?\]/,""),j=d(a,h.type);c[i]={type:j,size:h.size,location:a.getUniformLocation(b,i),value:e(j,h.size)}}return c};b.exports=f},{"./defaultValue":15,"./mapType":21}],18:[function(a,b,c){var d=function(a,b){var c={data:{}};c.gl=a;for(var d=Object.keys(b),h=0;h<d.length;h++){var i=d[h],j=i.split("."),k=j[j.length-1],l=g(j,c),m=b[i];l.data[k]=m,l.gl=a,Object.defineProperty(l,k,{get:e(k),set:f(k,m)})}return c},e=function(a){var b=h.replace("%%",a);return new Function(b)},f=function(a,b){var c,d=i.replace(/%%/g,a);return c=1===b.size?j[b.type]:k[b.type],c&&(d+="\nthis.gl."+c+";"),new Function("value",d)},g=function(a,b){for(var c=b,d=0;d<a.length-1;d++){var e=c[a[d]]||{data:{}};c[a[d]]=e,c=e}return c},h=["return this.data.%%.value;"].join("\n"),i=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),j={"float":"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])","int":"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},k={"float":"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)","int":"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};b.exports=d},{}],19:[function(a,b,c){b.exports={compileProgram:a("./compileProgram"),defaultValue:a("./defaultValue"),extractAttributes:a("./extractAttributes"),extractUniforms:a("./extractUniforms"),generateUniformAccessObject:a("./generateUniformAccessObject"),mapSize:a("./mapSize"),mapType:a("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21}],20:[function(a,b,c){var d=function(a){return e[a]},e={"float":1,vec2:2,vec3:3,vec4:4,"int":1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};b.exports=d},{}],21:[function(a,b,c){var d=function(a,b){if(!e){var c=Object.keys(f);e={};for(var d=0;d<c.length;++d){var g=c[d];e[a[g]]=f[g]}}return e[b]},e=null,f={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};b.exports=d},{}],22:[function(a,b,c){(function(a){function b(a,b){for(var c=0,d=a.length-1;d>=0;d--){var e=a[d];"."===e?a.splice(d,1):".."===e?(a.splice(d,1),c++):c&&(a.splice(d,1),c--)}if(b)for(;c--;c)a.unshift("..");return a}function d(a,b){if(a.filter)return a.filter(b);for(var c=[],d=0;d<a.length;d++)b(a[d],d,a)&&c.push(a[d]);return c}var e=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,f=function(a){return e.exec(a).slice(1)};c.resolve=function(){for(var c="",e=!1,f=arguments.length-1;f>=-1&&!e;f--){var g=f>=0?arguments[f]:a.cwd();if("string"!=typeof g)throw new TypeError("Arguments to path.resolve must be strings");g&&(c=g+"/"+c,e="/"===g.charAt(0))}return c=b(d(c.split("/"),function(a){return!!a}),!e).join("/"),(e?"/":"")+c||"."},c.normalize=function(a){var e=c.isAbsolute(a),f="/"===g(a,-1);return a=b(d(a.split("/"),function(a){return!!a}),!e).join("/"),a||e||(a="."),a&&f&&(a+="/"),(e?"/":"")+a},c.isAbsolute=function(a){return"/"===a.charAt(0)},c.join=function(){var a=Array.prototype.slice.call(arguments,0);return c.normalize(d(a,function(a,b){if("string"!=typeof a)throw new TypeError("Arguments to path.join must be strings");return a}).join("/"))},c.relative=function(a,b){function d(a){for(var b=0;b<a.length&&""===a[b];b++);for(var c=a.length-1;c>=0&&""===a[c];c--);return b>c?[]:a.slice(b,c-b+1)}a=c.resolve(a).substr(1),b=c.resolve(b).substr(1);for(var e=d(a.split("/")),f=d(b.split("/")),g=Math.min(e.length,f.length),h=g,i=0;g>i;i++)if(e[i]!==f[i]){h=i;break}for(var j=[],i=h;i<e.length;i++)j.push("..");return j=j.concat(f.slice(h)),j.join("/")},c.sep="/",c.delimiter=":",c.dirname=function(a){var b=f(a),c=b[0],d=b[1];return c||d?(d&&(d=d.substr(0,d.length-1)),c+d):"."},c.basename=function(a,b){var c=f(a)[2];return b&&c.substr(-1*b.length)===b&&(c=c.substr(0,c.length-b.length)),c},c.extname=function(a){return f(a)[3]};var g="b"==="ab".substr(-1)?function(a,b,c){return a.substr(b,c)}:function(a,b,c){return 0>b&&(b=a.length+b),a.substr(b,c)}}).call(this,a("_process"))},{_process:23}],23:[function(a,b,c){function d(){throw new Error("setTimeout has not been defined")}function e(){throw new Error("clearTimeout has not been defined")}function f(a){if(l===setTimeout)return setTimeout(a,0);if((l===d||!l)&&setTimeout)return l=setTimeout,setTimeout(a,0);try{return l(a,0)}catch(b){try{return l.call(null,a,0)}catch(b){return l.call(this,a,0)}}}function g(a){if(m===clearTimeout)return clearTimeout(a);if((m===e||!m)&&clearTimeout)return m=clearTimeout,clearTimeout(a);try{return m(a)}catch(b){try{return m.call(null,a)}catch(b){return m.call(this,a)}}}function h(){q&&o&&(q=!1,o.length?p=o.concat(p):r=-1,p.length&&i())}function i(){if(!q){var a=f(h);q=!0;for(var b=p.length;b;){for(o=p,p=[];++r<b;)o&&o[r].run();r=-1,b=p.length}o=null,q=!1,g(a)}}function j(a,b){this.fun=a,this.array=b}function k(){}var l,m,n=b.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:d}catch(a){l=d}try{m="function"==typeof clearTimeout?clearTimeout:e}catch(a){m=e}}();var o,p=[],q=!1,r=-1;n.nextTick=function(a){var b=new Array(arguments.length-1);if(arguments.length>1)for(var c=1;c<arguments.length;c++)b[c-1]=arguments[c];p.push(new j(a,b)),1!==p.length||q||f(i)},j.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=k,n.addListener=k,n.once=k,n.off=k,n.removeListener=k,n.removeAllListeners=k,n.emit=k,n.binding=function(a){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(a){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},{}],24:[function(b,c,d){(function(b){!function(e){function f(a){throw new RangeError(I[a])}function g(a,b){for(var c=a.length,d=[];c--;)d[c]=b(a[c]);return d}function h(a,b){var c=a.split("@"),d="";c.length>1&&(d=c[0]+"@",a=c[1]),a=a.replace(H,".");var e=a.split("."),f=g(e,b).join(".");return d+f}function i(a){for(var b,c,d=[],e=0,f=a.length;f>e;)b=a.charCodeAt(e++),b>=55296&&56319>=b&&f>e?(c=a.charCodeAt(e++),56320==(64512&c)?d.push(((1023&b)<<10)+(1023&c)+65536):(d.push(b),e--)):d.push(b);return d}function j(a){return g(a,function(a){var b="";return a>65535&&(a-=65536,b+=L(a>>>10&1023|55296),a=56320|1023&a),b+=L(a)}).join("")}function k(a){return 10>a-48?a-22:26>a-65?a-65:26>a-97?a-97:x}function l(a,b){return a+22+75*(26>a)-((0!=b)<<5)}function m(a,b,c){var d=0;for(a=c?K(a/B):a>>1,a+=K(a/b);a>J*z>>1;d+=x)a=K(a/J);return K(d+(J+1)*a/(a+A))}function n(a){var b,c,d,e,g,h,i,l,n,o,p=[],q=a.length,r=0,s=D,t=C;for(c=a.lastIndexOf(E),0>c&&(c=0),d=0;c>d;++d)a.charCodeAt(d)>=128&&f("not-basic"),p.push(a.charCodeAt(d));for(e=c>0?c+1:0;q>e;){for(g=r,h=1,i=x;e>=q&&f("invalid-input"),l=k(a.charCodeAt(e++)),(l>=x||l>K((w-r)/h))&&f("overflow"),r+=l*h,n=t>=i?y:i>=t+z?z:i-t,!(n>l);i+=x)o=x-n,h>K(w/o)&&f("overflow"),h*=o;b=p.length+1,t=m(r-g,b,0==g),K(r/b)>w-s&&f("overflow"),s+=K(r/b),r%=b,p.splice(r++,0,s)}return j(p)}function o(a){var b,c,d,e,g,h,j,k,n,o,p,q,r,s,t,u=[];for(a=i(a),q=a.length,b=D,c=0,g=C,h=0;q>h;++h)p=a[h],128>p&&u.push(L(p));for(d=e=u.length,e&&u.push(E);q>d;){for(j=w,h=0;q>h;++h)p=a[h],p>=b&&j>p&&(j=p);for(r=d+1,j-b>K((w-c)/r)&&f("overflow"),c+=(j-b)*r,b=j,h=0;q>h;++h)if(p=a[h],b>p&&++c>w&&f("overflow"),p==b){for(k=c,n=x;o=g>=n?y:n>=g+z?z:n-g,!(o>k);n+=x)t=k-o,s=x-o,u.push(L(l(o+t%s,0))),k=K(t/s);u.push(L(l(k,0))),g=m(c,r,d==e),c=0,++d}++c,++b}return u.join("")}function p(a){return h(a,function(a){return F.test(a)?n(a.slice(4).toLowerCase()):a})}function q(a){return h(a,function(a){return G.test(a)?"xn--"+o(a):a})}var r="object"==typeof d&&d&&!d.nodeType&&d,s="object"==typeof c&&c&&!c.nodeType&&c,t="object"==typeof b&&b;t.global!==t&&t.window!==t&&t.self!==t||(e=t);var u,v,w=2147483647,x=36,y=1,z=26,A=38,B=700,C=72,D=128,E="-",F=/^xn--/,G=/[^\x20-\x7E]/,H=/[\x2E\u3002\uFF0E\uFF61]/g,I={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},J=x-y,K=Math.floor,L=String.fromCharCode;if(u={version:"1.4.1",ucs2:{decode:i,encode:j},decode:n,encode:o,toASCII:q,toUnicode:p},"function"==typeof a&&"object"==typeof a.amd&&a.amd)a("punycode",function(){return u});else if(r&&s)if(c.exports==r)s.exports=u;else for(v in u)u.hasOwnProperty(v)&&(r[v]=u[v]);else e.punycode=u}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],25:[function(a,b,c){"use strict";function d(a,b){return Object.prototype.hasOwnProperty.call(a,b)}b.exports=function(a,b,c,f){b=b||"&",c=c||"=";var g={};if("string"!=typeof a||0===a.length)return g;var h=/\+/g;a=a.split(b);var i=1e3;f&&"number"==typeof f.maxKeys&&(i=f.maxKeys);var j=a.length;i>0&&j>i&&(j=i);for(var k=0;j>k;++k){var l,m,n,o,p=a[k].replace(h,"%20"),q=p.indexOf(c);q>=0?(l=p.substr(0,q),m=p.substr(q+1)):(l=p,m=""),n=decodeURIComponent(l),o=decodeURIComponent(m),d(g,n)?e(g[n])?g[n].push(o):g[n]=[g[n],o]:g[n]=o}return g};var e=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}},{}],26:[function(a,b,c){"use strict";function d(a,b){if(a.map)return a.map(b);for(var c=[],d=0;d<a.length;d++)c.push(b(a[d],d));return c}var e=function(a){switch(typeof a){case"string":return a;case"boolean":return a?"true":"false";case"number":return isFinite(a)?a:"";default:return""}};b.exports=function(a,b,c,h){return b=b||"&",c=c||"=",null===a&&(a=void 0),"object"==typeof a?d(g(a),function(g){var h=encodeURIComponent(e(g))+c;return f(a[g])?d(a[g],function(a){return h+encodeURIComponent(e(a))}).join(b):h+encodeURIComponent(e(a[g]))}).join(b):h?encodeURIComponent(e(h))+c+encodeURIComponent(e(a)):""};var f=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g=Object.keys||function(a){var b=[];for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b}},{}],27:[function(a,b,c){"use strict";c.decode=c.parse=a("./decode"),c.encode=c.stringify=a("./encode")},{"./decode":25,"./encode":26}],28:[function(a,b,c){"use strict";function d(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function e(a,b,c){if(a&&j.isObject(a)&&a instanceof d)return a;var e=new d;return e.parse(a,b,c),e}function f(a){return j.isString(a)&&(a=e(a)),a instanceof d?a.format():d.prototype.format.call(a)}function g(a,b){return e(a,!1,!0).resolve(b)}function h(a,b){return a?e(a,!1,!0).resolveObject(b):b}var i=a("punycode"),j=a("./util");c.parse=e,c.resolve=g,c.resolveObject=h,c.format=f,c.Url=d;var k=/^([a-z0-9.+-]+:)/i,l=/:[0-9]*$/,m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,n=["<",">",'"',"`"," ","\r","\n","	"],o=["{","}","|","\\","^","`"].concat(n),p=["'"].concat(o),q=["%","/","?",";","#"].concat(p),r=["/","?","#"],s=255,t=/^[+a-z0-9A-Z_-]{0,63}$/,u=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},w={javascript:!0,"javascript:":!0},x={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=a("querystring");d.prototype.parse=function(a,b,c){if(!j.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var d=a.indexOf("?"),e=-1!==d&&d<a.indexOf("#")?"?":"#",f=a.split(e),g=/\\/g;f[0]=f[0].replace(g,"/"),a=f.join(e);var h=a;if(h=h.trim(),!c&&1===a.split("#").length){var l=m.exec(h);if(l)return this.path=h,this.href=h,this.pathname=l[1],l[2]?(this.search=l[2],b?this.query=y.parse(this.search.substr(1)):this.query=this.search.substr(1)):b&&(this.search="",this.query={}),this}var n=k.exec(h);if(n){n=n[0];var o=n.toLowerCase();this.protocol=o,h=h.substr(n.length)}if(c||n||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var z="//"===h.substr(0,2);!z||n&&w[n]||(h=h.substr(2),this.slashes=!0)}if(!w[n]&&(z||n&&!x[n])){for(var A=-1,B=0;B<r.length;B++){var C=h.indexOf(r[B]);-1!==C&&(-1===A||A>C)&&(A=C)}var D,E;E=-1===A?h.lastIndexOf("@"):h.lastIndexOf("@",A),-1!==E&&(D=h.slice(0,E),h=h.slice(E+1),this.auth=decodeURIComponent(D)),A=-1;for(var B=0;B<q.length;B++){var C=h.indexOf(q[B]);-1!==C&&(-1===A||A>C)&&(A=C)}-1===A&&(A=h.length),this.host=h.slice(0,A),h=h.slice(A),this.parseHost(),this.hostname=this.hostname||"";var F="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!F)for(var G=this.hostname.split(/\./),B=0,H=G.length;H>B;B++){var I=G[B];if(I&&!I.match(t)){for(var J="",K=0,L=I.length;L>K;K++)J+=I.charCodeAt(K)>127?"x":I[K];if(!J.match(t)){var M=G.slice(0,B),N=G.slice(B+1),O=I.match(u);O&&(M.push(O[1]),N.unshift(O[2])),N.length&&(h="/"+N.join(".")+h),this.hostname=M.join(".");break}}}this.hostname.length>s?this.hostname="":this.hostname=this.hostname.toLowerCase(),F||(this.hostname=i.toASCII(this.hostname));var P=this.port?":"+this.port:"",Q=this.hostname||"";this.host=Q+P,this.href+=this.host,F&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!v[o])for(var B=0,H=p.length;H>B;B++){var R=p[B];if(-1!==h.indexOf(R)){var S=encodeURIComponent(R);S===R&&(S=escape(R)),h=h.split(R).join(S)}}var T=h.indexOf("#");-1!==T&&(this.hash=h.substr(T),h=h.slice(0,T));var U=h.indexOf("?");if(-1!==U?(this.search=h.substr(U),this.query=h.substr(U+1),b&&(this.query=y.parse(this.query)),h=h.slice(0,U)):b&&(this.search="",this.query={}),h&&(this.pathname=h),x[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",V=this.search||"";this.path=P+V}return this.href=this.format(),this},d.prototype.format=function(){var a=this.auth||"";a&&(a=encodeURIComponent(a),a=a.replace(/%3A/i,":"),a+="@");var b=this.protocol||"",c=this.pathname||"",d=this.hash||"",e=!1,f="";this.host?e=a+this.host:this.hostname&&(e=a+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(e+=":"+this.port)),this.query&&j.isObject(this.query)&&Object.keys(this.query).length&&(f=y.stringify(this.query));var g=this.search||f&&"?"+f||"";return b&&":"!==b.substr(-1)&&(b+=":"),this.slashes||(!b||x[b])&&e!==!1?(e="//"+(e||""),c&&"/"!==c.charAt(0)&&(c="/"+c)):e||(e=""),d&&"#"!==d.charAt(0)&&(d="#"+d),g&&"?"!==g.charAt(0)&&(g="?"+g),c=c.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),g=g.replace("#","%23"),b+e+c+g+d},d.prototype.resolve=function(a){return this.resolveObject(e(a,!1,!0)).format()},d.prototype.resolveObject=function(a){if(j.isString(a)){var b=new d;b.parse(a,!1,!0),a=b}for(var c=new d,e=Object.keys(this),f=0;f<e.length;f++){var g=e[f];c[g]=this[g]}if(c.hash=a.hash,""===a.href)return c.href=c.format(),c;if(a.slashes&&!a.protocol){for(var h=Object.keys(a),i=0;i<h.length;i++){var k=h[i];"protocol"!==k&&(c[k]=a[k])}return x[c.protocol]&&c.hostname&&!c.pathname&&(c.path=c.pathname="/"),c.href=c.format(),c}if(a.protocol&&a.protocol!==c.protocol){if(!x[a.protocol]){for(var l=Object.keys(a),m=0;m<l.length;m++){var n=l[m];c[n]=a[n]}return c.href=c.format(),c}if(c.protocol=a.protocol,a.host||w[a.protocol])c.pathname=a.pathname;else{for(var o=(a.pathname||"").split("/");o.length&&!(a.host=o.shift()););a.host||(a.host=""),a.hostname||(a.hostname=""),""!==o[0]&&o.unshift(""),o.length<2&&o.unshift(""),c.pathname=o.join("/")}if(c.search=a.search,c.query=a.query,c.host=a.host||"",c.auth=a.auth,c.hostname=a.hostname||a.host,c.port=a.port,c.pathname||c.search){var p=c.pathname||"",q=c.search||"";c.path=p+q}return c.slashes=c.slashes||a.slashes,c.href=c.format(),c}var r=c.pathname&&"/"===c.pathname.charAt(0),s=a.host||a.pathname&&"/"===a.pathname.charAt(0),t=s||r||c.host&&a.pathname,u=t,v=c.pathname&&c.pathname.split("/")||[],o=a.pathname&&a.pathname.split("/")||[],y=c.protocol&&!x[c.protocol];
if(y&&(c.hostname="",c.port=null,c.host&&(""===v[0]?v[0]=c.host:v.unshift(c.host)),c.host="",a.protocol&&(a.hostname=null,a.port=null,a.host&&(""===o[0]?o[0]=a.host:o.unshift(a.host)),a.host=null),t=t&&(""===o[0]||""===v[0])),s)c.host=a.host||""===a.host?a.host:c.host,c.hostname=a.hostname||""===a.hostname?a.hostname:c.hostname,c.search=a.search,c.query=a.query,v=o;else if(o.length)v||(v=[]),v.pop(),v=v.concat(o),c.search=a.search,c.query=a.query;else if(!j.isNullOrUndefined(a.search)){if(y){c.hostname=c.host=v.shift();var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return c.search=a.search,c.query=a.query,j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.href=c.format(),c}if(!v.length)return c.pathname=null,c.search?c.path="/"+c.search:c.path=null,c.href=c.format(),c;for(var A=v.slice(-1)[0],B=(c.host||a.host||v.length>1)&&("."===A||".."===A)||""===A,C=0,D=v.length;D>=0;D--)A=v[D],"."===A?v.splice(D,1):".."===A?(v.splice(D,1),C++):C&&(v.splice(D,1),C--);if(!t&&!u)for(;C--;C)v.unshift("..");!t||""===v[0]||v[0]&&"/"===v[0].charAt(0)||v.unshift(""),B&&"/"!==v.join("/").substr(-1)&&v.push("");var E=""===v[0]||v[0]&&"/"===v[0].charAt(0);if(y){c.hostname=c.host=E?"":v.length?v.shift():"";var z=!!(c.host&&c.host.indexOf("@")>0)&&c.host.split("@");z&&(c.auth=z.shift(),c.host=c.hostname=z.shift())}return t=t||c.host&&v.length,t&&!E&&v.unshift(""),v.length?c.pathname=v.join("/"):(c.pathname=null,c.path=null),j.isNull(c.pathname)&&j.isNull(c.search)||(c.path=(c.pathname?c.pathname:"")+(c.search?c.search:"")),c.auth=a.auth||c.auth,c.slashes=c.slashes||a.slashes,c.href=c.format(),c},d.prototype.parseHost=function(){var a=this.host,b=l.exec(a);b&&(b=b[0],":"!==b&&(this.port=b.substr(1)),a=a.substr(0,a.length-b.length)),a&&(this.hostname=a)}},{"./util":29,punycode:24,querystring:27}],29:[function(a,b,c){"use strict";b.exports={isString:function(a){return"string"==typeof a},isObject:function(a){return"object"==typeof a&&null!==a},isNull:function(a){return null===a},isNullOrUndefined:function(a){return null==a}}},{}],30:[function(a,b,c){"use strict";b.exports=function(a,b){b=b||{};for(var c={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},d=c.parser[b.strictMode?"strict":"loose"].exec(a),e={},f=14;f--;)e[c.key[f]]=d[f]||"";return e[c.q.name]={},e[c.key[12]].replace(c.q.parser,function(a,b,d){b&&(e[c.q.name][b]=d)}),e}},{}],31:[function(a,b,c){"use strict";function d(a,b){h.call(this),b=b||i,this.baseUrl=a||"",this.progress=0,this.loading=!1,this._progressChunk=0,this._beforeMiddleware=[],this._afterMiddleware=[],this._boundLoadResource=this._loadResource.bind(this),this._buffer=[],this._numToLoad=0,this._queue=f.queue(this._boundLoadResource,b),this.resources={}}var e=a("parse-uri"),f=a("./async"),g=a("./Resource"),h=a("eventemitter3"),i=10,j=100;d.prototype=Object.create(h.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.add=d.prototype.enqueue=function(a,b,c,d){if(Array.isArray(a)){for(var e=0;e<a.length;++e)this.add(a[e]);return this}if("object"==typeof a&&(d=b||a.callback||a.onComplete,c=a,b=a.url,a=a.name||a.key||a.url),"string"!=typeof b&&(d=c,c=b,b=a),"string"!=typeof b)throw new Error("No url passed to add resource to loader.");if("function"==typeof c&&(d=c,c=null),this.resources[a])throw new Error('Resource with name "'+a+'" already exists.');return b=this._prepareUrl(b),this.resources[a]=new g(a,b,c),"function"==typeof d&&this.resources[a].once("afterMiddleware",d),this._numToLoad++,this._queue.started?(this._queue.push(this.resources[a]),this._progressChunk=(j-this.progress)/(this._queue.length()+this._queue.running())):(this._buffer.push(this.resources[a]),this._progressChunk=j/this._buffer.length),this},d.prototype.before=d.prototype.pre=function(a){return this._beforeMiddleware.push(a),this},d.prototype.after=d.prototype.use=function(a){return this._afterMiddleware.push(a),this},d.prototype.reset=function(){this.progress=0,this.loading=!1,this._progressChunk=0,this._buffer.length=0,this._numToLoad=0,this._queue.kill(),this._queue.started=!1;for(var a in this.resources){var b=this.resources[a];b.off("complete",this._onLoad,this),b.isLoading&&b.abort()}return this.resources={},this},d.prototype.load=function(a){if("function"==typeof a&&this.once("complete",a),this._queue.started)return this;this.emit("start",this),this.loading=!0;for(var b=0;b<this._buffer.length;++b)this._queue.push(this._buffer[b]);return this._buffer.length=0,this},d.prototype._prepareUrl=function(a){var b=e(a,{strictMode:!0});return b.protocol||!b.path||0===b.path.indexOf("//")?a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a},d.prototype._loadResource=function(a,b){var c=this;a._dequeue=b,f.eachSeries(this._beforeMiddleware,function(b,d){b.call(c,a,function(){d(a.isComplete?{}:null)})},function(){a.isComplete?c._onLoad(a):(a.once("complete",c._onLoad,c),a.load())})},d.prototype._onComplete=function(){this.loading=!1,this.emit("complete",this,this.resources)},d.prototype._onLoad=function(a){var b=this;f.eachSeries(this._afterMiddleware,function(c,d){c.call(b,a,d)},function(){a.emit("afterMiddleware",a),b._numToLoad--,b.progress+=b._progressChunk,b.emit("progress",b,a),a.error?b.emit("error",a.error,b,a):b.emit("load",b,a),0===b._numToLoad&&(b.progress=100,b._onComplete())}),a._dequeue()},d.LOAD_TYPE=g.LOAD_TYPE,d.XHR_RESPONSE_TYPE=g.XHR_RESPONSE_TYPE},{"./Resource":32,"./async":33,eventemitter3:3,"parse-uri":30}],32:[function(a,b,c){"use strict";function d(a,b,c){if(g.call(this),c=c||{},"string"!=typeof a||"string"!=typeof b)throw new Error("Both name and url are required for constructing a resource.");this.name=a,this.url=b,this.isDataUrl=0===this.url.indexOf("data:"),this.data=null,this.crossOrigin=c.crossOrigin===!0?"anonymous":c.crossOrigin,this.loadType=c.loadType||this._determineLoadType(),this.xhrType=c.xhrType,this.metadata=c.metadata||{},this.error=null,this.xhr=null,this.isJson=!1,this.isXml=!1,this.isImage=!1,this.isAudio=!1,this.isVideo=!1,this.isComplete=!1,this.isLoading=!1,this._dequeue=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this)}function e(a){return a.toString().replace("object ","")}function f(a,b,c){b&&0===b.indexOf(".")&&(b=b.substring(1)),b&&(a[b]=c)}var g=a("eventemitter3"),h=a("parse-uri"),i=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),j=null,k=0,l=200,m=204;d.prototype=Object.create(g.prototype),d.prototype.constructor=d,b.exports=d,d.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this.isComplete=!0,this.isLoading=!1,this.emit("complete",this)},d.prototype.abort=function(a){if(!this.error){if(this.error=new Error(a),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if("undefined"!=typeof this.data.src)this.data.src="";else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},d.prototype.load=function(a){if(!this.isLoading)if(this.isComplete){if(a){var b=this;setTimeout(function(){a(b)},1)}}else switch(a&&this.once("complete",a),this.isLoading=!0,this.emit("start",this),this.crossOrigin!==!1&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case d.LOAD_TYPE.IMAGE:this._loadElement("image");break;case d.LOAD_TYPE.AUDIO:this._loadSourceElement("audio");break;case d.LOAD_TYPE.VIDEO:this._loadSourceElement("video");break;case d.LOAD_TYPE.XHR:default:i&&this.crossOrigin?this._loadXdr():this._loadXhr()}},d.prototype._loadElement=function(a){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===a&&"undefined"!=typeof window.Image?this.data=new Image:this.data=document.createElement(a),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url);var b="is"+a[0].toUpperCase()+a.substring(1);this[b]===!1&&(this[b]=!0),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},d.prototype._loadSourceElement=function(a){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===a&&"undefined"!=typeof window.Audio?this.data=new Audio:this.data=document.createElement(a),null===this.data)return void this.abort("Unsupported element "+a);if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var b=0;b<this.url.length;++b)this.data.appendChild(this._createSource(a,this.url[b]));else this.data.appendChild(this._createSource(a,this.url));this["is"+a[0].toUpperCase()+a.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()},d.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XMLHttpRequest;a.open("GET",this.url,!0),this.xhrType===d.XHR_RESPONSE_TYPE.JSON||this.xhrType===d.XHR_RESPONSE_TYPE.DOCUMENT?a.responseType=d.XHR_RESPONSE_TYPE.TEXT:a.responseType=this.xhrType,a.addEventListener("error",this._boundXhrOnError,!1),a.addEventListener("abort",this._boundXhrOnAbort,!1),a.addEventListener("progress",this._boundOnProgress,!1),a.addEventListener("load",this._boundXhrOnLoad,!1),a.send()},d.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var a=this.xhr=new XDomainRequest;a.timeout=5e3,a.onerror=this._boundXhrOnError,a.ontimeout=this._boundXdrOnTimeout,a.onprogress=this._boundOnProgress,a.onload=this._boundXhrOnLoad,a.open("GET",this.url,!0),setTimeout(function(){a.send()},0)},d.prototype._createSource=function(a,b,c){c||(c=a+"/"+b.substr(b.lastIndexOf(".")+1));var d=document.createElement("source");return d.src=b,d.type=c,d},d.prototype._onError=function(a){this.abort("Failed to load element using "+a.target.nodeName)},d.prototype._onProgress=function(a){a&&a.lengthComputable&&this.emit("progress",this,a.loaded/a.total)},d.prototype._xhrOnError=function(){var a=this.xhr;this.abort(e(a)+" Request failed. Status: "+a.status+', text: "'+a.statusText+'"')},d.prototype._xhrOnAbort=function(){this.abort(e(this.xhr)+" Request was aborted by the user.")},d.prototype._xdrOnTimeout=function(){this.abort(e(this.xhr)+" Request timed out.")},d.prototype._xhrOnLoad=function(){var a=this.xhr,b="undefined"==typeof a.status?a.status:l;if(!(b===l||b===m||b===k&&a.responseText.length>0))return void this.abort("["+a.status+"]"+a.statusText+":"+a.responseURL);if(this.xhrType===d.XHR_RESPONSE_TYPE.TEXT)this.data=a.responseText;else if(this.xhrType===d.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(a.responseText),this.isJson=!0}catch(a){return void this.abort("Error trying to parse loaded json:",a)}else if(this.xhrType===d.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var c=new DOMParser;this.data=c.parseFromString(a.responseText,"text/xml")}else{var e=document.createElement("div");e.innerHTML=a.responseText,this.data=e}this.isXml=!0}catch(a){return void this.abort("Error trying to parse loaded xml:",a)}else this.data=a.response||a.responseText;this.complete()},d.prototype._determineCrossOrigin=function(a,b){if(0===a.indexOf("data:"))return"";b=b||window.location,j||(j=document.createElement("a")),j.href=a,a=h(j.href,{strictMode:!0});var c=!a.port&&""===b.port||a.port===b.port,d=a.protocol?a.protocol+":":"";return a.host===b.hostname&&c&&d===b.protocol?"":"anonymous"},d.prototype._determineXhrType=function(){return d._xhrTypeMap[this._getExtension()]||d.XHR_RESPONSE_TYPE.TEXT},d.prototype._determineLoadType=function(){return d._loadTypeMap[this._getExtension()]||d.LOAD_TYPE.XHR},d.prototype._getExtension=function(){var a=this.url,b="";if(this.isDataUrl){var c=a.indexOf("/");b=a.substring(c+1,a.indexOf(";",c))}else{var d=a.indexOf("?");-1!==d&&(a=a.substring(0,d)),b=a.substring(a.lastIndexOf(".")+1)}return b.toLowerCase()},d.prototype._getMimeFromXhrType=function(a){switch(a){case d.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case d.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case d.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case d.XHR_RESPONSE_TYPE.JSON:return"application/json";case d.XHR_RESPONSE_TYPE.DEFAULT:case d.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},d.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},d.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},d._loadTypeMap={gif:d.LOAD_TYPE.IMAGE,png:d.LOAD_TYPE.IMAGE,bmp:d.LOAD_TYPE.IMAGE,jpg:d.LOAD_TYPE.IMAGE,jpeg:d.LOAD_TYPE.IMAGE,tif:d.LOAD_TYPE.IMAGE,tiff:d.LOAD_TYPE.IMAGE,webp:d.LOAD_TYPE.IMAGE,tga:d.LOAD_TYPE.IMAGE,"svg+xml":d.LOAD_TYPE.IMAGE},d._xhrTypeMap={xhtml:d.XHR_RESPONSE_TYPE.DOCUMENT,html:d.XHR_RESPONSE_TYPE.DOCUMENT,htm:d.XHR_RESPONSE_TYPE.DOCUMENT,xml:d.XHR_RESPONSE_TYPE.DOCUMENT,tmx:d.XHR_RESPONSE_TYPE.DOCUMENT,tsx:d.XHR_RESPONSE_TYPE.DOCUMENT,svg:d.XHR_RESPONSE_TYPE.DOCUMENT,gif:d.XHR_RESPONSE_TYPE.BLOB,png:d.XHR_RESPONSE_TYPE.BLOB,bmp:d.XHR_RESPONSE_TYPE.BLOB,jpg:d.XHR_RESPONSE_TYPE.BLOB,jpeg:d.XHR_RESPONSE_TYPE.BLOB,tif:d.XHR_RESPONSE_TYPE.BLOB,tiff:d.XHR_RESPONSE_TYPE.BLOB,webp:d.XHR_RESPONSE_TYPE.BLOB,tga:d.XHR_RESPONSE_TYPE.BLOB,json:d.XHR_RESPONSE_TYPE.JSON,text:d.XHR_RESPONSE_TYPE.TEXT,txt:d.XHR_RESPONSE_TYPE.TEXT},d.setExtensionLoadType=function(a,b){f(d._loadTypeMap,a,b)},d.setExtensionXhrType=function(a,b){f(d._xhrTypeMap,a,b)}},{eventemitter3:3,"parse-uri":30}],33:[function(a,b,c){"use strict";function d(){}function e(a,b,c){var d=0,e=a.length;!function f(g){return g||d===e?void(c&&c(g)):void b(a[d++],f)}()}function f(a){return function(){if(null===a)throw new Error("Callback was already called.");var b=a;a=null,b.apply(this,arguments)}}function g(a,b){function c(a,b,c){if(null!=c&&"function"!=typeof c)throw new Error("task callback must be a function");if(h.started=!0,null==a&&h.idle())return void setTimeout(function(){h.drain()},1);var e={data:a,callback:"function"==typeof c?c:d};b?h._tasks.unshift(e):h._tasks.push(e),setTimeout(function(){h.process()},1)}function e(a){return function(){g-=1,a.callback.apply(a,arguments),null!=arguments[0]&&h.error(arguments[0],a.data),g<=h.concurrency-h.buffer&&h.unsaturated(),h.idle()&&h.drain(),h.process()}}if(null==b)b=1;else if(0===b)throw new Error("Concurrency must not be zero");var g=0,h={_tasks:[],concurrency:b,saturated:d,unsaturated:d,buffer:b/4,empty:d,drain:d,error:d,started:!1,paused:!1,push:function(a,b){c(a,!1,b)},kill:function(){h.drain=d,h._tasks=[]},unshift:function(a,b){c(a,!0,b)},process:function(){for(;!h.paused&&g<h.concurrency&&h._tasks.length;){var b=h._tasks.shift();0===h._tasks.length&&h.empty(),g+=1,g===h.concurrency&&h.saturated(),a(b.data,f(e(b)))}},length:function(){return h._tasks.length},running:function(){return g},idle:function(){return h._tasks.length+g===0},pause:function(){h.paused!==!0&&(h.paused=!0)},resume:function(){if(h.paused!==!1){h.paused=!1;for(var a=1;a<=h.concurrency;a++)h.process()}}};return h}b.exports={eachSeries:e,queue:g}},{}],34:[function(a,b,c){"use strict";b.exports={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encodeBinary:function(a){for(var b,c="",d=new Array(4),e=0,f=0,g=0;e<a.length;){for(b=new Array(3),f=0;f<b.length;f++)e<a.length?b[f]=255&a.charCodeAt(e++):b[f]=0;switch(d[0]=b[0]>>2,d[1]=(3&b[0])<<4|b[1]>>4,d[2]=(15&b[1])<<2|b[2]>>6,d[3]=63&b[2],g=e-(a.length-1)){case 2:d[3]=64,d[2]=64;break;case 1:d[3]=64}for(f=0;f<d.length;f++)c+=this._keyStr.charAt(d[f])}return c}}},{}],35:[function(a,b,c){"use strict";b.exports=a("./Loader"),b.exports.Resource=a("./Resource"),b.exports.middleware={caching:{memory:a("./middlewares/caching/memory")},parsing:{blob:a("./middlewares/parsing/blob")}},b.exports.async=a("./async")},{"./Loader":31,"./Resource":32,"./async":33,"./middlewares/caching/memory":36,"./middlewares/parsing/blob":37}],36:[function(a,b,c){"use strict";var d={};b.exports=function(){return function(a,b){d[a.url]?(a.data=d[a.url],a.complete()):a.once("complete",function(){d[this.url]=this.data}),b()}}},{}],37:[function(a,b,c){"use strict";var d=a("../../Resource"),e=a("../../b64"),f=window.URL||window.webkitURL;b.exports=function(){return function(a,b){if(!a.data)return void b();if(a.xhr&&a.xhrType===d.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof a.data){if(0===a.data.type.indexOf("image")){var c=f.createObjectURL(a.data);return a.blob=a.data,a.data=new Image,a.data.src=c,a.isImage=!0,void(a.data.onload=function(){f.revokeObjectURL(c),a.data.onload=null,b()})}}else{var g=a.xhr.getResponseHeader("content-type");if(g&&0===g.indexOf("image"))return a.data=new Image,a.data.src="data:"+g+";base64,"+e.encodeBinary(a.xhr.responseText),a.isImage=!0,void(a.data.onload=function(){a.data.onload=null,b()})}b()}}},{"../../Resource":32,"../../b64":34}],38:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var g=a("../core"),h=e(g),i=a("ismobilejs"),j=d(i),k=a("./accessibleTarget"),l=d(k);Object.assign(h.DisplayObject.prototype,l["default"]);var m=9,n=100,o=0,p=0,q=2,r=1,s=-1e3,t=-1e3,u=2,v=function(){function a(b){f(this,a),!j["default"].tablet&&!j["default"].phone||navigator.isCocoonJS||this.createTouchHook();var c=document.createElement("div");c.style.width=n+"px",c.style.height=n+"px",c.style.position="absolute",c.style.top=o+"px",c.style.left=p+"px",c.style.zIndex=q,this.div=c,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=b,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return a.prototype.createTouchHook=function(){var a=this,b=document.createElement("button");b.style.width=r+"px",b.style.height=r+"px",b.style.position="absolute",b.style.top=s+"px",b.style.left=t+"px",b.style.zIndex=u,b.style.backgroundColor="#FF0000",b.title="HOOK DIV",b.addEventListener("focus",function(){a.isMobileAccessabillity=!0,a.activate(),document.body.removeChild(b)}),document.body.appendChild(b)},a.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},a.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},a.prototype.updateAccessibleObjects=function(a){if(a.visible){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);for(var b=a.children,c=b.length-1;c>=0;c--)this.updateAccessibleObjects(b[c])}},a.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var a=this.renderer.view.getBoundingClientRect(),b=a.width/this.renderer.width,c=a.height/this.renderer.height,d=this.div;d.style.left=a.left+"px",d.style.top=a.top+"px",d.style.width=this.renderer.width+"px",d.style.height=this.renderer.height+"px";for(var e=0;e<this.children.length;e++){var f=this.children[e];if(f.renderId!==this.renderId)f._accessibleActive=!1,h.utils.removeItems(this.children,e,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,e--,0===this.children.length&&this.deactivate();else{d=f._accessibleDiv;var g=f.hitArea,i=f.worldTransform;f.hitArea?(d.style.left=(i.tx+g.x*i.a)*b+"px",d.style.top=(i.ty+g.y*i.d)*c+"px",d.style.width=g.width*i.a*b+"px",d.style.height=g.height*i.d*c+"px"):(g=f.getBounds(),this.capHitArea(g),d.style.left=g.x*b+"px",d.style.top=g.y*c+"px",d.style.width=g.width*b+"px",d.style.height=g.height*c+"px")}}this.renderId++}},a.prototype.capHitArea=function(a){a.x<0&&(a.width+=a.x,a.x=0),a.y<0&&(a.height+=a.y,a.y=0),a.x+a.width>this.renderer.width&&(a.width=this.renderer.width-a.x),a.y+a.height>this.renderer.height&&(a.height=this.renderer.height-a.y)},a.prototype.addChild=function(a){var b=this.pool.pop();b||(b=document.createElement("button"),b.style.width=n+"px",b.style.height=n+"px",b.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",b.style.position="absolute",b.style.zIndex=q,b.style.borderStyle="none",b.addEventListener("click",this._onClick.bind(this)),b.addEventListener("focus",this._onFocus.bind(this)),b.addEventListener("focusout",this._onFocusOut.bind(this))),a.accessibleTitle?b.title=a.accessibleTitle:a.accessibleTitle||a.accessibleHint||(b.title="displayObject "+this.tabIndex),a.accessibleHint&&b.setAttribute("aria-label",a.accessibleHint),a._accessibleActive=!0,a._accessibleDiv=b,b.displayObject=a,this.children.push(a),this.div.appendChild(a._accessibleDiv),a._accessibleDiv.tabIndex=a.tabIndex},a.prototype._onClick=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"click",b.eventData)},a.prototype._onFocus=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"mouseover",b.eventData)},a.prototype._onFocusOut=function(a){var b=this.renderer.plugins.interaction;b.dispatchEvent(a.target.displayObject,"mouseout",b.eventData)},a.prototype._onKeyDown=function(a){a.keyCode===m&&this.activate()},a.prototype._onMouseMove=function(){this.deactivate()},a.prototype.destroy=function(){this.div=null;for(var a=0;a<this.children.length;a++)this.children[a].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},a}();c["default"]=v,h.WebGLRenderer.registerPlugin("accessibility",v),h.CanvasRenderer.registerPlugin("accessibility",v)},{"../core":61,"./accessibleTarget":39,ismobilejs:4}],39:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],40:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./accessibleTarget");Object.defineProperty(c,"accessibleTarget",{enumerable:!0,get:function(){return d(e)["default"]}});var f=a("./AccessibilityManager");Object.defineProperty(c,"AccessibilityManager",{enumerable:!0,get:function(){return d(f)["default"]}})},{"./AccessibilityManager":38,"./accessibleTarget":39}],41:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a){if(a instanceof Array){if("precision"!==a[0].substring(0,9)){var b=a.slice(0);return b.unshift("precision "+l+" float;"),b}}else if("precision"!==a.substring(0,9))return"precision "+l+" float;\n"+a;return a}c.__esModule=!0;var i=a("pixi-gl-core"),j=a("./settings"),k=d(j),l=k["default"].PRECISION,m=function(a){function b(c,d,g){return e(this,b),f(this,a.call(this,c,h(d),h(g)))}return g(b,a),b}(i.GLShader);c["default"]=m},{"./settings":97,"pixi-gl-core":12}],42:[function(a,b,c){"use strict";c.__esModule=!0,c.VERSION="4.3.0",c.PI_2=2*Math.PI,c.RAD_TO_DEG=180/Math.PI,c.DEG_TO_RAD=Math.PI/180,c.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},c.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16},c.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},c.SCALE_MODES={LINEAR:0,NEAREST:1},c.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},c.GC_MODES={AUTO:0,MANUAL:1},c.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,c.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,c.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,c.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},c.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},c.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},c.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1}},{}],43:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../math"),f=function(){function a(){d(this,a),this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0),this.rect=null}return a.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},a.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-(1/0),this.maxY=-(1/0)},a.prototype.getRectangle=function(a){return this.minX>this.maxX||this.minY>this.maxY?e.Rectangle.EMPTY:(a=a||new e.Rectangle(0,0,1,1),a.x=this.minX,a.y=this.minY,a.width=this.maxX-this.minX,a.height=this.maxY-this.minY,a)},a.prototype.addPoint=function(a){this.minX=Math.min(this.minX,a.x),this.maxX=Math.max(this.maxX,a.x),this.minY=Math.min(this.minY,a.y),this.maxY=Math.max(this.maxY,a.y)},a.prototype.addQuad=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY,f=a[0],g=a[1];b=b>f?f:b,c=c>g?g:c,d=f>d?f:d,e=g>e?g:e,f=a[2],g=a[3],b=b>f?f:b,c=c>g?g:c,d=f>d?f:d,e=g>e?g:e,f=a[4],g=a[5],b=b>f?f:b,c=c>g?g:c,d=f>d?f:d,e=g>e?g:e,f=a[6],g=a[7],b=b>f?f:b,c=c>g?g:c,d=f>d?f:d,e=g>e?g:e,this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},a.prototype.addFrame=function(a,b,c,d,e){var f=a.worldTransform,g=f.a,h=f.b,i=f.c,j=f.d,k=f.tx,l=f.ty,m=this.minX,n=this.minY,o=this.maxX,p=this.maxY,q=g*b+i*c+k,r=h*b+j*c+l;m=m>q?q:m,n=n>r?r:n,o=q>o?q:o,p=r>p?r:p,q=g*d+i*c+k,r=h*d+j*c+l,m=m>q?q:m,n=n>r?r:n,o=q>o?q:o,p=r>p?r:p,q=g*b+i*e+k,r=h*b+j*e+l,m=m>q?q:m,n=n>r?r:n,o=q>o?q:o,p=r>p?r:p,q=g*d+i*e+k,r=h*d+j*e+l,m=m>q?q:m,n=n>r?r:n,o=q>o?q:o,p=r>p?r:p,this.minX=m,this.minY=n,this.maxX=o,this.maxY=p},a.prototype.addVertices=function(a,b,c,d){for(var e=a.worldTransform,f=e.a,g=e.b,h=e.c,i=e.d,j=e.tx,k=e.ty,l=this.minX,m=this.minY,n=this.maxX,o=this.maxY,p=c;d>p;p+=2){var q=b[p],r=b[p+1],s=f*q+h*r+j,t=i*r+g*q+k;l=l>s?s:l,m=m>t?t:m,n=s>n?s:n,o=t>o?t:o}this.minX=l,this.minY=m,this.maxX=n,this.maxY=o},a.prototype.addBounds=function(a){var b=this.minX,c=this.minY,d=this.maxX,e=this.maxY;this.minX=a.minX<b?a.minX:b,this.minY=a.minY<c?a.minY:c,this.maxX=a.maxX>d?a.maxX:d,this.maxY=a.maxY>e?a.maxY:e},a.prototype.addBoundsMask=function(a,b){var c=a.minX>b.minX?a.minX:b.minX,d=a.minY>b.minY?a.minY:b.minY,e=a.maxX<b.maxX?a.maxX:b.maxX,f=a.maxY<b.maxY?a.maxY:b.maxY;if(e>=c&&f>=d){var g=this.minX,h=this.minY,i=this.maxX,j=this.maxY;this.minX=g>c?c:g,this.minY=h>d?d:h,this.maxX=e>i?e:i,this.maxY=f>j?f:j}},a.prototype.addBoundsArea=function(a,b){var c=a.minX>b.x?a.minX:b.x,d=a.minY>b.y?a.minY:b.y,e=a.maxX<b.x+b.width?a.maxX:b.x+b.width,f=a.maxY<b.y+b.height?a.maxY:b.y+b.height;if(e>=c&&f>=d){var g=this.minX,h=this.minY,i=this.maxX,j=this.maxY;this.minX=g>c?c:g,this.minY=h>d?d:h,this.maxX=e>i?e:i,this.maxY=f>j?f:j}},a}();c["default"]=f},{"../math":66}],44:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../utils"),j=a("./DisplayObject"),k=d(j),l=function(a){function b(){e(this,b);var c=f(this,a.call(this));return c.children=[],c}return g(b,a),b.prototype.onChildrenChange=function(){},b.prototype.addChild=function(a){var b=arguments.length;if(b>1)for(var c=0;b>c;c++)this.addChild(arguments[c]);else a.parent&&a.parent.removeChild(a),a.parent=this,this.transform._parentID=-1,this._boundsID++,this.children.push(a),this.onChildrenChange(this.children.length-1),a.emit("added",this);return a},b.prototype.addChildAt=function(a,b){if(0>b||b>this.children.length)throw new Error(a+"addChildAt: The index "+b+" supplied is out of bounds "+this.children.length);return a.parent&&a.parent.removeChild(a),a.parent=this,this.children.splice(b,0,a),this.onChildrenChange(b),a.emit("added",this),a},b.prototype.swapChildren=function(a,b){if(a!==b){var c=this.getChildIndex(a),d=this.getChildIndex(b);this.children[c]=b,this.children[d]=a,this.onChildrenChange(d>c?c:d)}},b.prototype.getChildIndex=function(a){var b=this.children.indexOf(a);if(-1===b)throw new Error("The supplied DisplayObject must be a child of the caller");return b},b.prototype.setChildIndex=function(a,b){if(0>b||b>=this.children.length)throw new Error("The supplied index is out of bounds");var c=this.getChildIndex(a);(0,i.removeItems)(this.children,c,1),
this.children.splice(b,0,a),this.onChildrenChange(b)},b.prototype.getChildAt=function(a){if(0>a||a>=this.children.length)throw new Error("getChildAt: Index ("+a+") does not exist.");return this.children[a]},b.prototype.removeChild=function(a){var b=arguments.length;if(b>1)for(var c=0;b>c;c++)this.removeChild(arguments[c]);else{var d=this.children.indexOf(a);if(-1===d)return null;a.parent=null,(0,i.removeItems)(this.children,d,1),this.transform._parentID=-1,this._boundsID++,this.onChildrenChange(d),a.emit("removed",this)}return a},b.prototype.removeChildAt=function(a){var b=this.getChildAt(a);return b.parent=null,(0,i.removeItems)(this.children,a,1),this.onChildrenChange(a),b.emit("removed",this),b},b.prototype.removeChildren=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments[1],c=a,d="number"==typeof b?b:this.children.length,e=d-c,f=void 0;if(e>0&&d>=e){f=this.children.splice(c,e);for(var g=0;g<f.length;++g)f[g].parent=null;this.onChildrenChange(a);for(var h=0;h<f.length;++h)f[h].emit("removed",this);return f}if(0===e&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},b.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var a=0,b=this.children.length;b>a;++a){var c=this.children[a];c.visible&&c.updateTransform()}},b.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var a=0;a<this.children.length;a++){var b=this.children[a];b.visible&&b.renderable&&(b.calculateBounds(),b._mask?(b._mask.calculateBounds(),this._bounds.addBoundsMask(b._bounds,b._mask._bounds)):b.filterArea?this._bounds.addBoundsArea(b._bounds,b.filterArea):this._bounds.addBounds(b._bounds))}this._lastBoundsID=this._boundsID},b.prototype._calculateBounds=function(){},b.prototype.renderWebGL=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(a);else{this._renderWebGL(a);for(var b=0,c=this.children.length;c>b;++b)this.children[b].renderWebGL(a)}},b.prototype.renderAdvancedWebGL=function(a){a.flush();var b=this._filters,c=this._mask;if(b){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var d=0;d<b.length;d++)b[d].enabled&&this._enabledFilters.push(b[d]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}c&&a.maskManager.pushMask(this,this._mask),this._renderWebGL(a);for(var e=0,f=this.children.length;f>e;e++)this.children[e].renderWebGL(a);a.flush(),c&&a.maskManager.popMask(this,this._mask),b&&this._enabledFilters&&this._enabledFilters.length&&a.filterManager.popFilter()},b.prototype._renderWebGL=function(a){},b.prototype._renderCanvas=function(a){},b.prototype.renderCanvas=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask),this._renderCanvas(a);for(var b=0,c=this.children.length;c>b;++b)this.children[b].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},b.prototype.destroy=function(b){a.prototype.destroy.call(this);var c="boolean"==typeof b?b:b&&b.children,d=this.removeChildren(0,this.children.length);if(c)for(var e=0;e<d.length;++e)d[e].destroy(b)},h(b,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(a){var b=this.getLocalBounds().width;0!==b?this.scale.x=a/b:this.scale.x=1,this._width=a}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(a){var b=this.getLocalBounds().height;0!==b?this.scale.y=a/b:this.scale.y=1,this._height=a}}]),b}(k["default"]);c["default"]=l,l.prototype.containerUpdateTransform=l.prototype.updateTransform},{"../utils":117,"./DisplayObject":45}],45:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("eventemitter3"),j=d(i),k=a("../const"),l=a("../settings"),m=d(l),n=a("./TransformStatic"),o=d(n),p=a("./Transform"),q=d(p),r=a("./Bounds"),s=d(r),t=a("../math"),u=function(a){function b(){e(this,b);var c=f(this,a.call(this)),d=m["default"].TRANSFORM_MODE===k.TRANSFORM_MODE.STATIC?o["default"]:q["default"];return c.tempDisplayObjectParent=null,c.transform=new d,c.alpha=1,c.visible=!0,c.renderable=!0,c.parent=null,c.worldAlpha=1,c.filterArea=null,c._filters=null,c._enabledFilters=null,c._bounds=new s["default"],c._boundsID=0,c._lastBoundsID=-1,c._boundsRect=null,c._localBoundsRect=null,c._mask=null,c}return g(b,a),b.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},b.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},b.prototype.getBounds=function(a,b){return a||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),b||(this._boundsRect||(this._boundsRect=new t.Rectangle),b=this._boundsRect),this._bounds.getRectangle(b)},b.prototype.getLocalBounds=function(a){var b=this.transform,c=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,a||(this._localBoundsRect||(this._localBoundsRect=new t.Rectangle),a=this._localBoundsRect);var d=this.getBounds(!1,a);return this.parent=c,this.transform=b,d},b.prototype.toGlobal=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return c||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(a,b)},b.prototype.toLocal=function(a,b,c,d){return b&&(a=b.toGlobal(a,c,d)),d||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(a,c)},b.prototype.renderWebGL=function(a){},b.prototype.renderCanvas=function(a){},b.prototype.setParent=function(a){if(!a||!a.addChild)throw new Error("setParent: Argument must be a Container");return a.addChild(this),a},b.prototype.setTransform=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,f=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,g=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=a,this.position.y=b,this.scale.x=c?c:1,this.scale.y=d?d:1,this.rotation=e,this.skew.x=f,this.skew.y=g,this.pivot.x=h,this.pivot.y=i,this},b.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1},h(b,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new b),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(a){this.transform.position.x=a}},{key:"y",get:function(){return this.position.y},set:function(a){this.transform.position.y=a}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(a){this.transform.position.copy(a)}},{key:"scale",get:function(){return this.transform.scale},set:function(a){this.transform.scale.copy(a)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(a){this.transform.pivot.copy(a)}},{key:"skew",get:function(){return this.transform.skew},set:function(a){this.transform.skew.copy(a)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(a){this.transform.rotation=a}},{key:"worldVisible",get:function(){var a=this;do{if(!a.visible)return!1;a=a.parent}while(a);return!0}},{key:"mask",get:function(){return this._mask},set:function(a){this._mask&&(this._mask.renderable=!0),this._mask=a,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(a){this._filters=a&&a.slice()}}]),b}(j["default"]);c["default"]=u,u.prototype.displayObjectUpdateTransform=u.prototype.updateTransform},{"../const":42,"../math":66,"../settings":97,"./Bounds":43,"./Transform":46,"./TransformStatic":48,eventemitter3:3}],46:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../math"),j=a("./TransformBase"),k=d(j),l=function(a){function b(){e(this,b);var c=f(this,a.call(this));return c.position=new i.Point(0,0),c.scale=new i.Point(1,1),c.skew=new i.ObservablePoint(c.updateSkew,c,0,0),c.pivot=new i.Point(0,0),c._rotation=0,c._cx=1,c._sx=0,c._cy=0,c._sy=1,c}return g(b,a),b.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},b.prototype.updateLocalTransform=function(){var a=this.localTransform;a.a=this._cx*this.scale.x,a.b=this._sx*this.scale.x,a.c=this._cy*this.scale.y,a.d=this._sy*this.scale.y,a.tx=this.position.x-(this.pivot.x*a.a+this.pivot.y*a.c),a.ty=this.position.y-(this.pivot.x*a.b+this.pivot.y*a.d)},b.prototype.updateTransform=function(a){var b=this.localTransform;b.a=this._cx*this.scale.x,b.b=this._sx*this.scale.x,b.c=this._cy*this.scale.y,b.d=this._sy*this.scale.y,b.tx=this.position.x-(this.pivot.x*b.a+this.pivot.y*b.c),b.ty=this.position.y-(this.pivot.x*b.b+this.pivot.y*b.d);var c=a.worldTransform,d=this.worldTransform;d.a=b.a*c.a+b.b*c.c,d.b=b.a*c.b+b.b*c.d,d.c=b.c*c.a+b.d*c.c,d.d=b.c*c.b+b.d*c.d,d.tx=b.tx*c.a+b.ty*c.c+c.tx,d.ty=b.tx*c.b+b.ty*c.d+c.ty,this._worldID++},b.prototype.setFromMatrix=function(a){a.decompose(this)},h(b,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a,this.updateSkew()}}]),b}(k["default"]);c["default"]=l},{"../math":66,"./TransformBase":47}],47:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../math"),f=function(){function a(){d(this,a),this.worldTransform=new e.Matrix,this.localTransform=new e.Matrix,this._worldID=0,this._parentID=0}return a.prototype.updateLocalTransform=function(){},a.prototype.updateTransform=function(a){var b=a.worldTransform,c=this.worldTransform,d=this.localTransform;c.a=d.a*b.a+d.b*b.c,c.b=d.a*b.b+d.b*b.d,c.c=d.c*b.a+d.d*b.c,c.d=d.c*b.b+d.d*b.d,c.tx=d.tx*b.a+d.ty*b.c+b.tx,c.ty=d.tx*b.b+d.ty*b.d+b.ty,this._worldID++},a}();c["default"]=f,f.prototype.updateWorldTransform=f.prototype.updateTransform,f.IDENTITY=new f},{"../math":66}],48:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../math"),j=a("./TransformBase"),k=d(j),l=function(a){function b(){e(this,b);var c=f(this,a.call(this));return c.position=new i.ObservablePoint(c.onChange,c,0,0),c.scale=new i.ObservablePoint(c.onChange,c,1,1),c.pivot=new i.ObservablePoint(c.onChange,c,0,0),c.skew=new i.ObservablePoint(c.updateSkew,c,0,0),c._rotation=0,c._cx=1,c._sx=0,c._cy=0,c._sy=1,c._localID=0,c._currentLocalID=0,c}return g(b,a),b.prototype.onChange=function(){this._localID++},b.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},b.prototype.updateLocalTransform=function(){var a=this.localTransform;this._localID!==this._currentLocalID&&(a.a=this._cx*this.scale._x,a.b=this._sx*this.scale._x,a.c=this._cy*this.scale._y,a.d=this._sy*this.scale._y,a.tx=this.position._x-(this.pivot._x*a.a+this.pivot._y*a.c),a.ty=this.position._y-(this.pivot._x*a.b+this.pivot._y*a.d),this._currentLocalID=this._localID,this._parentID=-1)},b.prototype.updateTransform=function(a){var b=this.localTransform;if(this._localID!==this._currentLocalID&&(b.a=this._cx*this.scale._x,b.b=this._sx*this.scale._x,b.c=this._cy*this.scale._y,b.d=this._sy*this.scale._y,b.tx=this.position._x-(this.pivot._x*b.a+this.pivot._y*b.c),b.ty=this.position._y-(this.pivot._x*b.b+this.pivot._y*b.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID){var c=a.worldTransform,d=this.worldTransform;d.a=b.a*c.a+b.b*c.c,d.b=b.a*c.b+b.b*c.d,d.c=b.c*c.a+b.d*c.c,d.d=b.c*c.b+b.d*c.d,d.tx=b.tx*c.a+b.ty*c.c+c.tx,d.ty=b.tx*c.b+b.ty*c.d+c.ty,this._parentID=a._worldID,this._worldID++}},b.prototype.setFromMatrix=function(a){a.decompose(this),this._localID++},h(b,[{key:"rotation",get:function(){return this._rotation},set:function(a){this._rotation=a,this.updateSkew()}}]),b}(k["default"]);c["default"]=l},{"../math":66,"./TransformBase":47}],49:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../display/Container"),i=d(h),j=a("../textures/RenderTexture"),k=d(j),l=a("../textures/Texture"),m=d(l),n=a("./GraphicsData"),o=d(n),p=a("../sprites/Sprite"),q=d(p),r=a("../math"),s=a("../utils"),t=a("../const"),u=a("../display/Bounds"),v=d(u),w=a("./utils/bezierCurveTo"),x=d(w),y=a("../renderers/canvas/CanvasRenderer"),z=d(y),A=void 0,B=new r.Matrix,C=new r.Point,D=new Float32Array(4),E=new Float32Array(4),F=function(a){function b(){e(this,b);var c=f(this,a.call(this));return c.fillAlpha=1,c.lineWidth=0,c.lineColor=0,c.graphicsData=[],c.tint=16777215,c._prevTint=16777215,c.blendMode=t.BLEND_MODES.NORMAL,c.currentPath=null,c._webGL={},c.isMask=!1,c.boundsPadding=0,c._localBounds=new v["default"],c.dirty=0,c.fastRectDirty=-1,c.clearDirty=0,c.boundsDirty=-1,c.cachedSpriteDirty=!1,c._spriteRect=null,c._fastRect=!1,c}return g(b,a),b.prototype.clone=function c(){var c=new b;c.renderable=this.renderable,c.fillAlpha=this.fillAlpha,c.lineWidth=this.lineWidth,c.lineColor=this.lineColor,c.tint=this.tint,c.blendMode=this.blendMode,c.isMask=this.isMask,c.boundsPadding=this.boundsPadding,c.dirty=0,c.cachedSpriteDirty=this.cachedSpriteDirty;for(var a=0;a<this.graphicsData.length;++a)c.graphicsData.push(this.graphicsData[a].clone());return c.currentPath=c.graphicsData[c.graphicsData.length-1],c.updateLocalBounds(),c},b.prototype.lineStyle=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=a,this.lineColor=b,this.lineAlpha=c,this.currentPath)if(this.currentPath.shape.points.length){var d=new r.Polygon(this.currentPath.shape.points.slice(-2));d.closed=!1,this.drawShape(d)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},b.prototype.moveTo=function(a,b){var c=new r.Polygon([a,b]);return c.closed=!1,this.drawShape(c),this},b.prototype.lineTo=function(a,b){return this.currentPath.shape.points.push(a,b),this.dirty++,this},b.prototype.quadraticCurveTo=function(a,b,c,d){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var e=20,f=this.currentPath.shape.points,g=0,h=0;0===f.length&&this.moveTo(0,0);for(var i=f[f.length-2],j=f[f.length-1],k=1;e>=k;++k){var l=k/e;g=i+(a-i)*l,h=j+(b-j)*l,f.push(g+(a+(c-a)*l-g)*l,h+(b+(d-b)*l-h)*l)}return this.dirty++,this},b.prototype.bezierCurveTo=function(a,b,c,d,e,f){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var g=this.currentPath.shape.points,h=g[g.length-2],i=g[g.length-1];return g.length-=2,(0,x["default"])(h,i,a,b,c,d,e,f,g),this.dirty++,this},b.prototype.arcTo=function(a,b,c,d,e){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(a,b):this.moveTo(a,b);var f=this.currentPath.shape.points,g=f[f.length-2],h=f[f.length-1],i=h-b,j=g-a,k=d-b,l=c-a,m=Math.abs(i*l-j*k);if(1e-8>m||0===e)f[f.length-2]===a&&f[f.length-1]===b||f.push(a,b);else{var n=i*i+j*j,o=k*k+l*l,p=i*k+j*l,q=e*Math.sqrt(n)/m,r=e*Math.sqrt(o)/m,s=q*p/n,t=r*p/o,u=q*l+r*j,v=q*k+r*i,w=j*(r+s),x=i*(r+s),y=l*(q+t),z=k*(q+t),A=Math.atan2(x-v,w-u),B=Math.atan2(z-v,y-u);this.arc(u+a,v+b,e,A,B,j*k>l*i)}return this.dirty++,this},b.prototype.arc=function(a,b,c,d,e){var f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(d===e)return this;!f&&d>=e?e+=2*Math.PI:f&&e>=d&&(d+=2*Math.PI);var g=e-d,h=40*Math.ceil(Math.abs(g)/(2*Math.PI));if(0===g)return this;var i=a+Math.cos(d)*c,j=b+Math.sin(d)*c,k=this.currentPath?this.currentPath.shape.points:null;k?k[k.length-2]===i&&k[k.length-1]===j||k.push(i,j):(this.moveTo(i,j),k=this.currentPath.shape.points);for(var l=g/(2*h),m=2*l,n=Math.cos(l),o=Math.sin(l),p=h-1,q=p%1/p,r=0;p>=r;++r){var s=r+q*r,t=l+d+m*s,u=Math.cos(t),v=-Math.sin(t);k.push((n*u+o*v)*c+a,(n*-v+o*u)*c+b)}return this.dirty++,this},b.prototype.beginFill=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=a,this.fillAlpha=b,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},b.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},b.prototype.drawRect=function(a,b,c,d){return this.drawShape(new r.Rectangle(a,b,c,d)),this},b.prototype.drawRoundedRect=function(a,b,c,d,e){return this.drawShape(new r.RoundedRectangle(a,b,c,d,e)),this},b.prototype.drawCircle=function(a,b,c){return this.drawShape(new r.Circle(a,b,c)),this},b.prototype.drawEllipse=function(a,b,c,d){return this.drawShape(new r.Ellipse(a,b,c,d)),this},b.prototype.drawPolygon=function(a){var b=a,c=!0;if(b instanceof r.Polygon&&(c=b.closed,b=b.points),!Array.isArray(b)){b=new Array(arguments.length);for(var d=0;d<b.length;++d)b[d]=arguments[d]}var e=new r.Polygon(b);return e.closed=c,this.drawShape(e),this},b.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},b.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===t.SHAPES.RECT&&!this.graphicsData[0].lineWidth},b.prototype._renderWebGL=function(a){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(a):(a.setObjectRenderer(a.plugins.graphics),a.plugins.graphics.render(this))},b.prototype._renderSpriteRect=function(a){var c=this.graphicsData[0].shape;if(!this._spriteRect){if(!b._SPRITE_TEXTURE){b._SPRITE_TEXTURE=k["default"].create(10,10);var d=document.createElement("canvas");d.width=10,d.height=10;var e=d.getContext("2d");e.fillStyle="white",e.fillRect(0,0,10,10),b._SPRITE_TEXTURE=m["default"].fromCanvas(d)}this._spriteRect=new q["default"](b._SPRITE_TEXTURE)}if(16777215===this.tint)this._spriteRect.tint=this.graphicsData[0].fillColor;else{var f=D,g=E;(0,s.hex2rgb)(this.graphicsData[0].fillColor,f),(0,s.hex2rgb)(this.tint,g),f[0]*=g[0],f[1]*=g[1],f[2]*=g[2],this._spriteRect.tint=(0,s.rgb2hex)(f)}this._spriteRect.alpha=this.graphicsData[0].fillAlpha,this._spriteRect.worldAlpha=this.worldAlpha*this._spriteRect.alpha,b._SPRITE_TEXTURE._frame.width=c.width,b._SPRITE_TEXTURE._frame.height=c.height,this._spriteRect.transform.worldTransform=this.transform.worldTransform,this._spriteRect.anchor.set(-c.x/c.width,-c.y/c.height),this._spriteRect._onAnchorUpdate(),this._spriteRect._renderWebGL(a)},b.prototype._renderCanvas=function(a){this.isMask!==!0&&a.plugins.graphics.render(this)},b.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var a=this._localBounds;this._bounds.addFrame(this.transform,a.minX,a.minY,a.maxX,a.maxY)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,C);for(var b=this.graphicsData,c=0;c<b.length;++c){var d=b[c];if(d.fill&&d.shape&&d.shape.contains(C.x,C.y))return!0}return!1},b.prototype.updateLocalBounds=function(){var a=1/0,b=-(1/0),c=1/0,d=-(1/0);if(this.graphicsData.length)for(var e=0,f=0,g=0,h=0,i=0,j=0;j<this.graphicsData.length;j++){var k=this.graphicsData[j],l=k.type,m=k.lineWidth;if(e=k.shape,l===t.SHAPES.RECT||l===t.SHAPES.RREC)f=e.x-m/2,g=e.y-m/2,h=e.width+m,i=e.height+m,a=a>f?f:a,b=f+h>b?f+h:b,c=c>g?g:c,d=g+i>d?g+i:d;else if(l===t.SHAPES.CIRC)f=e.x,g=e.y,h=e.radius+m/2,i=e.radius+m/2,a=a>f-h?f-h:a,b=f+h>b?f+h:b,c=c>g-i?g-i:c,d=g+i>d?g+i:d;else if(l===t.SHAPES.ELIP)f=e.x,g=e.y,h=e.width+m/2,i=e.height+m/2,a=a>f-h?f-h:a,b=f+h>b?f+h:b,c=c>g-i?g-i:c,d=g+i>d?g+i:d;else for(var n=e.points,o=0,p=0,q=0,r=0,s=0,u=0,v=0,w=0,x=0;x+2<n.length;x+=2)f=n[x],g=n[x+1],o=n[x+2],p=n[x+3],q=Math.abs(o-f),r=Math.abs(p-g),i=m,h=Math.sqrt(q*q+r*r),1e-9>h||(s=(i/h*r+q)/2,u=(i/h*q+r)/2,v=(o+f)/2,w=(p+g)/2,a=a>v-s?v-s:a,b=v+s>b?v+s:b,c=c>w-u?w-u:c,d=w+u>d?w+u:d)}else a=0,b=0,c=0,d=0;var y=this.boundsPadding;this._localBounds.minX=a-y,this._localBounds.maxX=b+2*y,this._localBounds.minY=c-y,this._localBounds.maxY=d+2*y},b.prototype.drawShape=function(a){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var b=new o["default"](this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,a);return this.graphicsData.push(b),b.type===t.SHAPES.POLY&&(b.shape.closed=b.shape.closed||this.filling,this.currentPath=b),this.dirty++,b},b.prototype.generateCanvasTexture=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,c=this.getLocalBounds(),d=k["default"].create(c.width,c.height,a,b);A||(A=new z["default"]),B.tx=-c.x,B.ty=-c.y,A.render(this,d,!1,B);var e=m["default"].fromCanvas(d.baseTexture._canvasRenderTarget.canvas,a);return e.baseTexture.resolution=b,e.baseTexture.update(),e},b.prototype.closePath=function(){var a=this.currentPath;return a&&a.shape&&a.shape.close(),this},b.prototype.addHole=function(){var a=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(a.shape),this.currentPath=null,this},b.prototype.destroy=function(b){a.prototype.destroy.call(this,b);for(var c=0;c<this.graphicsData.length;++c)this.graphicsData[c].destroy();for(var d in this._webgl)for(var e=0;e<this._webgl[d].data.length;++e)this._webgl[d].data[e].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},b}(i["default"]);c["default"]=F,F._SPRITE_TEXTURE=null},{"../const":42,"../display/Bounds":43,"../display/Container":44,"../math":66,"../renderers/canvas/CanvasRenderer":73,"../sprites/Sprite":98,"../textures/RenderTexture":108,"../textures/Texture":109,"../utils":117,"./GraphicsData":50,"./utils/bezierCurveTo":52}],50:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b,c,e,f,g,h,i){d(this,a),this.lineWidth=b,this.lineColor=c,this.lineAlpha=e,this._lineTint=c,this.fillColor=f,this.fillAlpha=g,this._fillTint=f,this.fill=h,this.holes=[],this.shape=i,this.type=i.type}return a.prototype.clone=function(){return new a(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},a.prototype.addHole=function(a){this.holes.push(a)},a.prototype.destroy=function(){this.shape=null,this.holes=null},a}();c["default"]=e},{}],51:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../renderers/canvas/CanvasRenderer"),g=d(f),h=a("../../const"),i=function(){function a(b){e(this,a),this.renderer=b}return a.prototype.render=function(a){var b=this.renderer,c=b.context,d=a.worldAlpha,e=a.transform.worldTransform,f=b.resolution;this._prevTint!==this.tint&&(this.dirty=!0),c.setTransform(e.a*f,e.b*f,e.c*f,e.d*f,e.tx*f,e.ty*f),a.dirty&&(this.updateGraphicsTint(a),a.dirty=!1),b.setBlendMode(a.blendMode);for(var g=0;g<a.graphicsData.length;g++){var i=a.graphicsData[g],j=i.shape,k=i._fillTint,l=i._lineTint;if(c.lineWidth=i.lineWidth,i.type===h.SHAPES.POLY){c.beginPath(),this.renderPolygon(j.points,j.closed,c);for(var m=0;m<i.holes.length;m++)this.renderPolygon(i.holes[m].points,!0,c);i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}else if(i.type===h.SHAPES.RECT)(i.fillColor||0===i.fillColor)&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fillRect(j.x,j.y,j.width,j.height)),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.strokeRect(j.x,j.y,j.width,j.height));else if(i.type===h.SHAPES.CIRC)c.beginPath(),c.arc(j.x,j.y,j.radius,0,2*Math.PI),c.closePath(),i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke());else if(i.type===h.SHAPES.ELIP){var n=2*j.width,o=2*j.height,p=j.x-n/2,q=j.y-o/2;c.beginPath();var r=.5522848,s=n/2*r,t=o/2*r,u=p+n,v=q+o,w=p+n/2,x=q+o/2;c.moveTo(p,x),c.bezierCurveTo(p,x-t,w-s,q,w,q),c.bezierCurveTo(w+s,q,u,x-t,u,x),c.bezierCurveTo(u,x+t,w+s,v,w,v),c.bezierCurveTo(w-s,v,p,x+t,p,x),c.closePath(),i.fill&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}else if(i.type===h.SHAPES.RREC){var y=j.x,z=j.y,A=j.width,B=j.height,C=j.radius,D=Math.min(A,B)/2|0;C=C>D?D:C,c.beginPath(),c.moveTo(y,z+C),c.lineTo(y,z+B-C),c.quadraticCurveTo(y,z+B,y+C,z+B),c.lineTo(y+A-C,z+B),c.quadraticCurveTo(y+A,z+B,y+A,z+B-C),c.lineTo(y+A,z+C),c.quadraticCurveTo(y+A,z,y+A-C,z),c.lineTo(y+C,z),c.quadraticCurveTo(y,z,y,z+C),c.closePath(),(i.fillColor||0===i.fillColor)&&(c.globalAlpha=i.fillAlpha*d,c.fillStyle="#"+("00000"+(0|k).toString(16)).substr(-6),c.fill()),i.lineWidth&&(c.globalAlpha=i.lineAlpha*d,c.strokeStyle="#"+("00000"+(0|l).toString(16)).substr(-6),c.stroke())}}},a.prototype.updateGraphicsTint=function(a){a._prevTint=a.tint;for(var b=(a.tint>>16&255)/255,c=(a.tint>>8&255)/255,d=(255&a.tint)/255,e=0;e<a.graphicsData.length;++e){var f=a.graphicsData[e],g=0|f.fillColor,h=0|f.lineColor;f._fillTint=((g>>16&255)/255*b*255<<16)+((g>>8&255)/255*c*255<<8)+(255&g)/255*d*255,f._lineTint=((h>>16&255)/255*b*255<<16)+((h>>8&255)/255*c*255<<8)+(255&h)/255*d*255}},a.prototype.renderPolygon=function(a,b,c){c.moveTo(a[0],a[1]);for(var d=1;d<a.length/2;++d)c.lineTo(a[2*d],a[2*d+1]);b&&c.closePath()},a.prototype.destroy=function(){this.renderer=null},a}();c["default"]=i,g["default"].registerPlugin("graphics",i)},{"../../const":42,"../../renderers/canvas/CanvasRenderer":73}],52:[function(a,b,c){"use strict";function d(a,b,c,d,e,f,g,h){var i=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],j=20,k=0,l=0,m=0,n=0,o=0;i.push(a,b);for(var p=1,q=0;j>=p;++p)q=p/j,k=1-q,l=k*k,m=l*k,n=q*q,o=n*q,i.push(m*a+3*l*q*c+3*k*n*e+o*g,m*b+3*l*q*d+3*k*n*f+o*h);return i}c.__esModule=!0,c["default"]=d},{}],53:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{
value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../utils"),i=a("../../const"),j=a("../../renderers/webgl/utils/ObjectRenderer"),k=d(j),l=a("../../renderers/webgl/WebGLRenderer"),m=d(l),n=a("./WebGLGraphicsData"),o=d(n),p=a("./shaders/PrimitiveShader"),q=d(p),r=a("./utils/buildPoly"),s=d(r),t=a("./utils/buildRectangle"),u=d(t),v=a("./utils/buildRoundedRectangle"),w=d(v),x=a("./utils/buildCircle"),y=d(x),z=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.graphicsDataPool=[],d.primitiveShader=null,d.gl=c.gl,d.CONTEXT_UID=0,d}return g(b,a),b.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new q["default"](this.gl)},b.prototype.destroy=function(){k["default"].prototype.destroy.call(this);for(var a=0;a<this.graphicsDataPool.length;++a)this.graphicsDataPool[a].destroy();this.graphicsDataPool=null},b.prototype.render=function(a){var b=this.renderer,c=b.gl,d=void 0,e=a._webGL[this.CONTEXT_UID];e&&a.dirty===e.dirty||(this.updateGraphics(a),e=a._webGL[this.CONTEXT_UID]);var f=this.primitiveShader;b.bindShader(f),b.state.setBlendMode(a.blendMode);for(var g=0,i=e.data.length;i>g;g++){d=e.data[g];var j=d.shader;b.bindShader(j),j.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),j.uniforms.tint=(0,h.hex2rgb)(a.tint),j.uniforms.alpha=a.worldAlpha,b.bindVao(d.vao),d.vao.draw(c.TRIANGLE_STRIP,d.indices.length)}},b.prototype.updateGraphics=function(a){var b=this.renderer.gl,c=a._webGL[this.CONTEXT_UID];if(c||(c=a._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:b,clearDirty:-1,dirty:-1}),c.dirty=a.dirty,a.clearDirty!==c.clearDirty){c.clearDirty=a.clearDirty;for(var d=0;d<c.data.length;d++)this.graphicsDataPool.push(c.data[d]);c.data.length=0,c.lastIndex=0}for(var e=void 0,f=c.lastIndex;f<a.graphicsData.length;f++){var g=a.graphicsData[f];e=this.getWebGLData(c,0),g.type===i.SHAPES.POLY&&(0,s["default"])(g,e),g.type===i.SHAPES.RECT?(0,u["default"])(g,e):g.type===i.SHAPES.CIRC||g.type===i.SHAPES.ELIP?(0,y["default"])(g,e):g.type===i.SHAPES.RREC&&(0,w["default"])(g,e),c.lastIndex++}this.renderer.bindVao(null);for(var h=0;h<c.data.length;h++)e=c.data[h],e.dirty&&e.upload()},b.prototype.getWebGLData=function(a,b){var c=a.data[a.data.length-1];return(!c||c.points.length>32e4)&&(c=this.graphicsDataPool.pop()||new o["default"](this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState),c.reset(b),a.data.push(c)),c.dirty=!0,c},b}(k["default"]);c["default"]=z,m["default"].registerPlugin("graphics",z)},{"../../const":42,"../../renderers/webgl/WebGLRenderer":80,"../../renderers/webgl/utils/ObjectRenderer":90,"../../utils":117,"./WebGLGraphicsData":54,"./shaders/PrimitiveShader":55,"./utils/buildCircle":56,"./utils/buildPoly":58,"./utils/buildRectangle":59,"./utils/buildRoundedRectangle":60}],54:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("pixi-gl-core"),g=d(f),h=function(){function a(b,c,d){e(this,a),this.gl=b,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=g["default"].GLBuffer.createVertexBuffer(b),this.indexBuffer=g["default"].GLBuffer.createIndexBuffer(b),this.dirty=!0,this.glPoints=null,this.glIndices=null,this.shader=c,this.vao=new g["default"].VertexArrayObject(b,d).addIndex(this.indexBuffer).addAttribute(this.buffer,c.attributes.aVertexPosition,b.FLOAT,!1,24,0).addAttribute(this.buffer,c.attributes.aColor,b.FLOAT,!1,24,8)}return a.prototype.reset=function(){this.points.length=0,this.indices.length=0},a.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},a.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},a}();c["default"]=h},{"pixi-gl-core":12}],55:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../../Shader"),i=d(h),j=function(a){function b(c){return e(this,b),f(this,a.call(this,c,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return g(b,a),b}(i["default"]);c["default"]=j},{"../../../Shader":41}],56:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=a.shape,d=c.x,e=c.y,f=void 0,j=void 0;a.type===h.SHAPES.CIRC?(f=c.radius,j=c.radius):(f=c.width,j=c.height);var k=Math.floor(30*Math.sqrt(c.radius))||Math.floor(15*Math.sqrt(c.width+c.height)),l=2*Math.PI/k;if(a.fill){var m=(0,i.hex2rgb)(a.fillColor),n=a.fillAlpha,o=m[0]*n,p=m[1]*n,q=m[2]*n,r=b.points,s=b.indices,t=r.length/6;s.push(t);for(var u=0;k+1>u;u++)r.push(d,e,o,p,q,n),r.push(d+Math.sin(l*u)*f,e+Math.cos(l*u)*j,o,p,q,n),s.push(t++,t++);s.push(t-1)}if(a.lineWidth){var v=a.points;a.points=[];for(var w=0;k+1>w;w++)a.points.push(d+Math.sin(l*w)*f,e+Math.cos(l*w)*j);(0,g["default"])(a,b),a.points=v}}c.__esModule=!0,c["default"]=e;var f=a("./buildLine"),g=d(f),h=a("../../../const"),i=a("../../../utils")},{"../../../const":42,"../../../utils":117,"./buildLine":57}],57:[function(a,b,c){"use strict";function d(a,b){var c=a.points;if(0!==c.length){var d=new e.Point(c[0],c[1]),g=new e.Point(c[c.length-2],c[c.length-1]);if(d.x===g.x&&d.y===g.y){c=c.slice(),c.pop(),c.pop(),g=new e.Point(c[c.length-2],c[c.length-1]);var h=g.x+.5*(d.x-g.x),i=g.y+.5*(d.y-g.y);c.unshift(h,i),c.push(h,i)}var j=b.points,k=b.indices,l=c.length/2,m=c.length,n=j.length/6,o=a.lineWidth/2,p=(0,f.hex2rgb)(a.lineColor),q=a.lineAlpha,r=p[0]*q,s=p[1]*q,t=p[2]*q,u=c[0],v=c[1],w=c[2],x=c[3],y=0,z=0,A=-(v-x),B=u-w,C=0,D=0,E=0,F=0,G=Math.sqrt(A*A+B*B);A/=G,B/=G,A*=o,B*=o,j.push(u-A,v-B,r,s,t,q),j.push(u+A,v+B,r,s,t,q);for(var H=1;l-1>H;++H){u=c[2*(H-1)],v=c[2*(H-1)+1],w=c[2*H],x=c[2*H+1],y=c[2*(H+1)],z=c[2*(H+1)+1],A=-(v-x),B=u-w,G=Math.sqrt(A*A+B*B),A/=G,B/=G,A*=o,B*=o,C=-(x-z),D=w-y,G=Math.sqrt(C*C+D*D),C/=G,D/=G,C*=o,D*=o;var I=-B+v-(-B+x),J=-A+w-(-A+u),K=(-A+u)*(-B+x)-(-A+w)*(-B+v),L=-D+z-(-D+x),M=-C+w-(-C+y),N=(-C+y)*(-D+x)-(-C+w)*(-D+z),O=I*M-L*J;if(Math.abs(O)<.1)O+=10.1,j.push(w-A,x-B,r,s,t,q),j.push(w+A,x+B,r,s,t,q);else{var P=(J*N-M*K)/O,Q=(L*K-I*N)/O,R=(P-w)*(P-w)+(Q-x)*(Q-x);R>196*o*o?(E=A-C,F=B-D,G=Math.sqrt(E*E+F*F),E/=G,F/=G,E*=o,F*=o,j.push(w-E,x-F),j.push(r,s,t,q),j.push(w+E,x+F),j.push(r,s,t,q),j.push(w-E,x-F),j.push(r,s,t,q),m++):(j.push(P,Q),j.push(r,s,t,q),j.push(w-(P-w),x-(Q-x)),j.push(r,s,t,q))}}u=c[2*(l-2)],v=c[2*(l-2)+1],w=c[2*(l-1)],x=c[2*(l-1)+1],A=-(v-x),B=u-w,G=Math.sqrt(A*A+B*B),A/=G,B/=G,A*=o,B*=o,j.push(w-A,x-B),j.push(r,s,t,q),j.push(w+A,x+B),j.push(r,s,t,q),k.push(n);for(var S=0;m>S;++S)k.push(n++);k.push(n-1)}}c.__esModule=!0,c["default"]=d;var e=a("../../../math"),f=a("../../../utils")},{"../../../math":66,"../../../utils":117}],58:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){a.points=a.shape.points.slice();var c=a.points;if(a.fill&&c.length>=6){for(var d=[],e=a.holes,f=0;f<e.length;f++){var i=e[f];d.push(c.length/2),c=c.concat(i.points)}var k=b.points,l=b.indices,m=c.length/2,n=(0,h.hex2rgb)(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=(0,j["default"])(c,d,2);if(!s)return;for(var t=k.length/6,u=0;u<s.length;u+=3)l.push(s[u]+t),l.push(s[u]+t),l.push(s[u+1]+t),l.push(s[u+2]+t),l.push(s[u+2]+t);for(var v=0;m>v;v++)k.push(c[2*v],c[2*v+1],p,q,r,o)}a.lineWidth>0&&(0,g["default"])(a,b)}c.__esModule=!0,c["default"]=e;var f=a("./buildLine"),g=d(f),h=a("../../../utils"),i=a("earcut"),j=d(i)},{"../../../utils":117,"./buildLine":57,earcut:2}],59:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=a.shape,d=c.x,e=c.y,f=c.width,i=c.height;if(a.fill){var j=(0,h.hex2rgb)(a.fillColor),k=a.fillAlpha,l=j[0]*k,m=j[1]*k,n=j[2]*k,o=b.points,p=b.indices,q=o.length/6;o.push(d,e),o.push(l,m,n,k),o.push(d+f,e),o.push(l,m,n,k),o.push(d,e+i),o.push(l,m,n,k),o.push(d+f,e+i),o.push(l,m,n,k),p.push(q,q,q+1,q+2,q+3,q+3)}if(a.lineWidth){var r=a.points;a.points=[d,e,d+f,e,d+f,e+i,d,e+i,d,e],(0,g["default"])(a,b),a.points=r}}c.__esModule=!0,c["default"]=e;var f=a("./buildLine"),g=d(f),h=a("../../../utils")},{"../../../utils":117,"./buildLine":57}],60:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=a.shape,d=c.x,e=c.y,g=c.width,i=c.height,l=c.radius,m=[];if(m.push(d,e+l),f(d,e+i-l,d,e+i,d+l,e+i,m),f(d+g-l,e+i,d+g,e+i,d+g,e+i-l,m),f(d+g,e+l,d+g,e,d+g-l,e,m),f(d+l,e,d,e,d,e+l+1e-10,m),a.fill){for(var n=(0,k.hex2rgb)(a.fillColor),o=a.fillAlpha,p=n[0]*o,q=n[1]*o,r=n[2]*o,s=b.points,t=b.indices,u=s.length/6,v=(0,h["default"])(m,null,2),w=0,x=v.length;x>w;w+=3)t.push(v[w]+u),t.push(v[w]+u),t.push(v[w+1]+u),t.push(v[w+2]+u),t.push(v[w+2]+u);for(var y=0,z=m.length;z>y;y++)s.push(m[y],m[++y],p,q,r,o)}if(a.lineWidth){var A=a.points;a.points=m,(0,j["default"])(a,b),a.points=A}}function f(a,b,c,d,e,f){function g(a,b,c){var d=b-a;return a+d*c}for(var h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],i=20,j=h,k=0,l=0,m=0,n=0,o=0,p=0,q=0,r=0;i>=q;++q)r=q/i,k=g(a,c,r),l=g(b,d,r),m=g(c,e,r),n=g(d,f,r),o=g(k,m,r),p=g(l,n,r),j.push(o,p);return j}c.__esModule=!0,c["default"]=e;var g=a("earcut"),h=d(g),i=a("./buildLine"),j=d(i),k=a("../../../utils")},{"../../../utils":117,"./buildLine":57,earcut:2}],61:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:800,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:600,c=arguments[2],d=arguments[3];return!d&&O.isWebGLSupported()?new W["default"](a,b,c):new U["default"](a,b,c)}c.__esModule=!0,c.Filter=c.SpriteMaskFilter=c.Quad=c.RenderTarget=c.ObjectRenderer=c.WebGLManager=c.Shader=c.CanvasRenderTarget=c.TextureUvs=c.VideoBaseTexture=c.BaseRenderTexture=c.RenderTexture=c.BaseTexture=c.Texture=c.CanvasGraphicsRenderer=c.GraphicsRenderer=c.GraphicsData=c.Graphics=c.TextStyle=c.Text=c.SpriteRenderer=c.CanvasTinter=c.CanvasSpriteRenderer=c.Sprite=c.TransformBase=c.TransformStatic=c.Transform=c.Container=c.DisplayObject=c.Bounds=c.glCore=c.WebGLRenderer=c.CanvasRenderer=c.ticker=c.utils=c.settings=void 0;var g=a("./const");Object.keys(g).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return g[a]}})});var h=a("./math");Object.keys(h).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return h[a]}})});var i=a("pixi-gl-core");Object.defineProperty(c,"glCore",{enumerable:!0,get:function(){return e(i)["default"]}});var j=a("./display/Bounds");Object.defineProperty(c,"Bounds",{enumerable:!0,get:function(){return e(j)["default"]}});var k=a("./display/DisplayObject");Object.defineProperty(c,"DisplayObject",{enumerable:!0,get:function(){return e(k)["default"]}});var l=a("./display/Container");Object.defineProperty(c,"Container",{enumerable:!0,get:function(){return e(l)["default"]}});var m=a("./display/Transform");Object.defineProperty(c,"Transform",{enumerable:!0,get:function(){return e(m)["default"]}});var n=a("./display/TransformStatic");Object.defineProperty(c,"TransformStatic",{enumerable:!0,get:function(){return e(n)["default"]}});var o=a("./display/TransformBase");Object.defineProperty(c,"TransformBase",{enumerable:!0,get:function(){return e(o)["default"]}});var p=a("./sprites/Sprite");Object.defineProperty(c,"Sprite",{enumerable:!0,get:function(){return e(p)["default"]}});var q=a("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(c,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return e(q)["default"]}});var r=a("./sprites/canvas/CanvasTinter");Object.defineProperty(c,"CanvasTinter",{enumerable:!0,get:function(){return e(r)["default"]}});var s=a("./sprites/webgl/SpriteRenderer");Object.defineProperty(c,"SpriteRenderer",{enumerable:!0,get:function(){return e(s)["default"]}});var t=a("./text/Text");Object.defineProperty(c,"Text",{enumerable:!0,get:function(){return e(t)["default"]}});var u=a("./text/TextStyle");Object.defineProperty(c,"TextStyle",{enumerable:!0,get:function(){return e(u)["default"]}});var v=a("./graphics/Graphics");Object.defineProperty(c,"Graphics",{enumerable:!0,get:function(){return e(v)["default"]}});var w=a("./graphics/GraphicsData");Object.defineProperty(c,"GraphicsData",{enumerable:!0,get:function(){return e(w)["default"]}});var x=a("./graphics/webgl/GraphicsRenderer");Object.defineProperty(c,"GraphicsRenderer",{enumerable:!0,get:function(){return e(x)["default"]}});var y=a("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(c,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return e(y)["default"]}});var z=a("./textures/Texture");Object.defineProperty(c,"Texture",{enumerable:!0,get:function(){return e(z)["default"]}});var A=a("./textures/BaseTexture");Object.defineProperty(c,"BaseTexture",{enumerable:!0,get:function(){return e(A)["default"]}});var B=a("./textures/RenderTexture");Object.defineProperty(c,"RenderTexture",{enumerable:!0,get:function(){return e(B)["default"]}});var C=a("./textures/BaseRenderTexture");Object.defineProperty(c,"BaseRenderTexture",{enumerable:!0,get:function(){return e(C)["default"]}});var D=a("./textures/VideoBaseTexture");Object.defineProperty(c,"VideoBaseTexture",{enumerable:!0,get:function(){return e(D)["default"]}});var E=a("./textures/TextureUvs");Object.defineProperty(c,"TextureUvs",{enumerable:!0,get:function(){return e(E)["default"]}});var F=a("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(c,"CanvasRenderTarget",{enumerable:!0,get:function(){return e(F)["default"]}});var G=a("./Shader");Object.defineProperty(c,"Shader",{enumerable:!0,get:function(){return e(G)["default"]}});var H=a("./renderers/webgl/managers/WebGLManager");Object.defineProperty(c,"WebGLManager",{enumerable:!0,get:function(){return e(H)["default"]}});var I=a("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(c,"ObjectRenderer",{enumerable:!0,get:function(){return e(I)["default"]}});var J=a("./renderers/webgl/utils/RenderTarget");Object.defineProperty(c,"RenderTarget",{enumerable:!0,get:function(){return e(J)["default"]}});var K=a("./renderers/webgl/utils/Quad");Object.defineProperty(c,"Quad",{enumerable:!0,get:function(){return e(K)["default"]}});var L=a("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(c,"SpriteMaskFilter",{enumerable:!0,get:function(){return e(L)["default"]}});var M=a("./renderers/webgl/filters/Filter");Object.defineProperty(c,"Filter",{enumerable:!0,get:function(){return e(M)["default"]}}),c.autoDetectRenderer=f;var N=a("./utils"),O=d(N),P=a("./ticker"),Q=d(P),R=a("./settings"),S=e(R),T=a("./renderers/canvas/CanvasRenderer"),U=e(T),V=a("./renderers/webgl/WebGLRenderer"),W=e(V);c.settings=S["default"],c.utils=O,c.ticker=Q,c.CanvasRenderer=U["default"],c.WebGLRenderer=W["default"]},{"./Shader":41,"./const":42,"./display/Bounds":43,"./display/Container":44,"./display/DisplayObject":45,"./display/Transform":46,"./display/TransformBase":47,"./display/TransformStatic":48,"./graphics/Graphics":49,"./graphics/GraphicsData":50,"./graphics/canvas/CanvasGraphicsRenderer":51,"./graphics/webgl/GraphicsRenderer":53,"./math":66,"./renderers/canvas/CanvasRenderer":73,"./renderers/canvas/utils/CanvasRenderTarget":75,"./renderers/webgl/WebGLRenderer":80,"./renderers/webgl/filters/Filter":82,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":85,"./renderers/webgl/managers/WebGLManager":89,"./renderers/webgl/utils/ObjectRenderer":90,"./renderers/webgl/utils/Quad":91,"./renderers/webgl/utils/RenderTarget":92,"./settings":97,"./sprites/Sprite":98,"./sprites/canvas/CanvasSpriteRenderer":99,"./sprites/canvas/CanvasTinter":100,"./sprites/webgl/SpriteRenderer":102,"./text/Text":104,"./text/TextStyle":105,"./textures/BaseRenderTexture":106,"./textures/BaseTexture":107,"./textures/RenderTexture":108,"./textures/Texture":109,"./textures/TextureUvs":110,"./textures/VideoBaseTexture":111,"./ticker":113,"./utils":117,"pixi-gl-core":12}],62:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return 0>a?-1:a>0?1:0}function f(){for(var a=0;16>a;a++){var b=[];n.push(b);for(var c=0;16>c;c++)for(var d=e(i[a]*i[c]+k[a]*j[c]),f=e(j[a]*i[c]+l[a]*j[c]),g=e(i[a]*k[c]+k[a]*l[c]),o=e(j[a]*k[c]+l[a]*l[c]),p=0;16>p;p++)if(i[p]===d&&j[p]===f&&k[p]===g&&l[p]===o){b.push(p);break}}for(var q=0;16>q;q++){var r=new h["default"];r.set(i[q],j[q],k[q],l[q],0,0),m.push(r)}}c.__esModule=!0;var g=a("./Matrix"),h=d(g),i=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],j=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],k=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],l=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],m=[],n=[];f();var o={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(a){return i[a]},uY:function(a){return j[a]},vX:function(a){return k[a]},vY:function(a){return l[a]},inv:function(a){return 8&a?15&a:7&-a},add:function(a,b){return n[a][b]},sub:function(a,b){return n[a][o.inv(b)]},rotate180:function(a){return 4^a},isSwapWidthHeight:function(a){return 2===(3&a)},byDirection:function(a,b){return 2*Math.abs(a)<=Math.abs(b)?b>=0?o.S:o.N:2*Math.abs(b)<=Math.abs(a)?a>0?o.E:o.W:b>0?a>0?o.SE:o.SW:a>0?o.NE:o.NW},matrixAppendRotationInv:function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,e=m[o.inv(b)];e.tx=c,e.ty=d,a.append(e)}};c["default"]=o},{"./Matrix":63}],63:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./Point"),h=d(g),i=function(){function a(){e(this,a),this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.array=null}return a.prototype.fromArray=function(a){this.a=a[0],this.b=a[1],this.c=a[3],this.d=a[4],this.tx=a[2],this.ty=a[5]},a.prototype.set=function(a,b,c,d,e,f){return this.a=a,this.b=b,this.c=c,this.d=d,this.tx=e,this.ty=f,this},a.prototype.toArray=function(a,b){this.array||(this.array=new Float32Array(9));var c=b||this.array;return a?(c[0]=this.a,c[1]=this.b,c[2]=0,c[3]=this.c,c[4]=this.d,c[5]=0,c[6]=this.tx,c[7]=this.ty,c[8]=1):(c[0]=this.a,c[1]=this.c,c[2]=this.tx,c[3]=this.b,c[4]=this.d,c[5]=this.ty,c[6]=0,c[7]=0,c[8]=1),c},a.prototype.apply=function(a,b){b=b||new h["default"];var c=a.x,d=a.y;return b.x=this.a*c+this.c*d+this.tx,b.y=this.b*c+this.d*d+this.ty,b},a.prototype.applyInverse=function(a,b){b=b||new h["default"];var c=1/(this.a*this.d+this.c*-this.b),d=a.x,e=a.y;return b.x=this.d*c*d+-this.c*c*e+(this.ty*this.c-this.tx*this.d)*c,b.y=this.a*c*e+-this.b*c*d+(-this.ty*this.a+this.tx*this.b)*c,b},a.prototype.translate=function(a,b){return this.tx+=a,this.ty+=b,this},a.prototype.scale=function(a,b){return this.a*=a,this.d*=b,this.c*=a,this.b*=b,this.tx*=a,this.ty*=b,this},a.prototype.rotate=function(a){var b=Math.cos(a),c=Math.sin(a),d=this.a,e=this.c,f=this.tx;return this.a=d*b-this.b*c,this.b=d*c+this.b*b,this.c=e*b-this.d*c,this.d=e*c+this.d*b,this.tx=f*b-this.ty*c,this.ty=f*c+this.ty*b,this},a.prototype.append=function(a){var b=this.a,c=this.b,d=this.c,e=this.d;return this.a=a.a*b+a.b*d,this.b=a.a*c+a.b*e,this.c=a.c*b+a.d*d,this.d=a.c*c+a.d*e,this.tx=a.tx*b+a.ty*d+this.tx,this.ty=a.tx*c+a.ty*e+this.ty,this},a.prototype.setTransform=function(a,b,c,d,e,f,g,h,i){var j=Math.sin(g),k=Math.cos(g),l=Math.cos(i),m=Math.sin(i),n=-Math.sin(h),o=Math.cos(h),p=k*e,q=j*e,r=-j*f,s=k*f;return this.a=l*p+m*r,this.b=l*q+m*s,this.c=n*p+o*r,this.d=n*q+o*s,this.tx=a+(c*p+d*r),this.ty=b+(c*q+d*s),this},a.prototype.prepend=function(a){var b=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var c=this.a,d=this.c;this.a=c*a.a+this.b*a.c,this.b=c*a.b+this.b*a.d,this.c=d*a.a+this.d*a.c,this.d=d*a.b+this.d*a.d}return this.tx=b*a.a+this.ty*a.c+a.tx,this.ty=b*a.b+this.ty*a.d+a.ty,this},a.prototype.decompose=function(a){var b=this.a,c=this.b,d=this.c,e=this.d,f=-Math.atan2(-d,e),g=Math.atan2(c,b),h=Math.abs(f+g);return 1e-5>h?(a.rotation=g,0>b&&e>=0&&(a.rotation+=a.rotation<=0?Math.PI:-Math.PI),a.skew.x=a.skew.y=0):(a.skew.x=f,a.skew.y=g),a.scale.x=Math.sqrt(b*b+c*c),a.scale.y=Math.sqrt(d*d+e*e),a.position.x=this.tx,a.position.y=this.ty,a},a.prototype.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,e=this.tx,f=a*d-b*c;return this.a=d/f,this.b=-b/f,this.c=-c/f,this.d=a/f,this.tx=(c*this.ty-d*e)/f,this.ty=-(a*this.ty-b*e)/f,this},a.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},a.prototype.clone=function(){var b=new a;return b.a=this.a,b.b=this.b,b.c=this.c,b.d=this.d,b.tx=this.tx,b.ty=this.ty,b},a.prototype.copy=function(a){return a.a=this.a,a.b=this.b,a.c=this.c,a.d=this.d,a.tx=this.tx,a.ty=this.ty,a},f(a,null,[{key:"IDENTITY",get:function(){return new a}},{key:"TEMP_MATRIX",get:function(){return new a}}]),a}();c["default"]=i},{"./Point":65}],64:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b,c){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d(this,a),this._x=e,this._y=f,this.cb=b,this.scope=c}return a.prototype.set=function(a,b){var c=a||0,d=b||(0!==b?c:0);this._x===c&&this._y===d||(this._x=c,this._y=d,this.cb.call(this.scope))},a.prototype.copy=function(a){this._x===a.x&&this._y===a.y||(this._x=a.x,this._y=a.y,this.cb.call(this.scope))},e(a,[{key:"x",get:function(){return this._x},set:function(a){this._x!==a&&(this._x=a,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(a){this._y!==a&&(this._y=a,this.cb.call(this.scope))}}]),a}();c["default"]=f},{}],65:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d(this,a),this.x=b,this.y=c}return a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.copy=function(a){this.set(a.x,a.y)},a.prototype.equals=function(a){return a.x===this.x&&a.y===this.y},a.prototype.set=function(a,b){this.x=a||0,this.y=b||(0!==b?this.x:0)},a}();c["default"]=e},{}],66:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./Point");Object.defineProperty(c,"Point",{enumerable:!0,get:function(){return d(e)["default"]}});var f=a("./ObservablePoint");Object.defineProperty(c,"ObservablePoint",{enumerable:!0,get:function(){return d(f)["default"]}});var g=a("./Matrix");Object.defineProperty(c,"Matrix",{enumerable:!0,get:function(){return d(g)["default"]}});var h=a("./GroupD8");Object.defineProperty(c,"GroupD8",{enumerable:!0,get:function(){return d(h)["default"]}});var i=a("./shapes/Circle");Object.defineProperty(c,"Circle",{enumerable:!0,get:function(){return d(i)["default"]}});var j=a("./shapes/Ellipse");Object.defineProperty(c,"Ellipse",{enumerable:!0,get:function(){return d(j)["default"]}});var k=a("./shapes/Polygon");Object.defineProperty(c,"Polygon",{enumerable:!0,get:function(){return d(k)["default"]}});var l=a("./shapes/Rectangle");Object.defineProperty(c,"Rectangle",{enumerable:!0,get:function(){return d(l)["default"]}});var m=a("./shapes/RoundedRectangle");Object.defineProperty(c,"RoundedRectangle",{enumerable:!0,get:function(){return d(m)["default"]}})},{"./GroupD8":62,"./Matrix":63,"./ObservablePoint":64,"./Point":65,"./shapes/Circle":67,"./shapes/Ellipse":68,"./shapes/Polygon":69,"./shapes/Rectangle":70,"./shapes/RoundedRectangle":71}],67:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("./Rectangle"),g=d(f),h=a("../../const"),i=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;e(this,a),this.x=b,this.y=c,this.radius=d,this.type=h.SHAPES.CIRC}return a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.contains=function(a,b){if(this.radius<=0)return!1;var c=this.radius*this.radius,d=this.x-a,e=this.y-b;return d*=d,e*=e,c>=d+e},a.prototype.getBounds=function(){return new g["default"](this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a}();c["default"]=i},{"../../const":42,"./Rectangle":70}],68:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("./Rectangle"),g=d(f),h=a("../../const"),i=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,f=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;e(this,a),this.x=b,this.y=c,this.width=d,this.height=f,this.type=h.SHAPES.ELIP}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;var c=(a-this.x)/this.width,d=(b-this.y)/this.height;return c*=c,d*=d,1>=c+d},a.prototype.getBounds=function(){return new g["default"](this.x-this.width,this.y-this.height,this.width,this.height)},a}();c["default"]=i},{"../../const":42,"./Rectangle":70}],69:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../Point"),g=d(f),h=a("../../const"),i=function(){function a(){for(var b=arguments.length,c=Array(b),d=0;b>d;d++)c[d]=arguments[d];if(e(this,a),Array.isArray(c[0])&&(c=c[0]),c[0]instanceof g["default"]){for(var f=[],i=0,j=c.length;j>i;i++)f.push(c[i].x,c[i].y);c=f}this.closed=!0,this.points=c,this.type=h.SHAPES.POLY}return a.prototype.clone=function(){return new a(this.points.slice())},a.prototype.close=function(){var a=this.points;a[0]===a[a.length-2]&&a[1]===a[a.length-1]||a.push(a[0],a[1])},a.prototype.contains=function(a,b){for(var c=!1,d=this.points.length/2,e=0,f=d-1;d>e;f=e++){var g=this.points[2*e],h=this.points[2*e+1],i=this.points[2*f],j=this.points[2*f+1],k=h>b!=j>b&&(i-g)*((b-h)/(j-h))+g>a;k&&(c=!c)}return c},a}();c["default"]=i},{"../../const":42,"../Point":65}],70:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=a("../../const"),g=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;d(this,a),this.x=b,this.y=c,this.width=e,this.height=g,this.type=f.SHAPES.RECT}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(a){return this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this},a.prototype.contains=function(a,b){return!(this.width<=0||this.height<=0)&&a>=this.x&&a<this.x+this.width&&b>=this.y&&b<this.y+this.height},a.prototype.pad=function(a,b){a=a||0,b=b||(0!==b?a:0),this.x-=a,this.y-=b,this.width+=2*a,this.height+=2*b},a.prototype.fit=function(a){this.x<a.x&&(this.width+=this.x,this.width<0&&(this.width=0),this.x=a.x),this.y<a.y&&(this.height+=this.y,this.height<0&&(this.height=0),this.y=a.y),this.x+this.width>a.x+a.width&&(this.width=a.width-this.x,this.width<0&&(this.width=0)),this.y+this.height>a.y+a.height&&(this.height=a.height-this.y,this.height<0&&(this.height=0))},a.prototype.enlarge=function(b){if(b!==a.EMPTY){var c=Math.min(this.x,b.x),d=Math.max(this.x+this.width,b.x+b.width),e=Math.min(this.y,b.y),f=Math.max(this.y+this.height,b.y+b.height);this.x=c,this.width=d-c,this.y=e,this.height=f-e}},e(a,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new a(0,0,0,0)}}]),a}();c["default"]=g},{"../../const":42}],71:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../const"),f=function(){function a(){var b=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,g=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,h=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;d(this,a),this.x=b,this.y=c,this.width=f,this.height=g,this.radius=h,this.type=e.SHAPES.RREC}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.radius)},a.prototype.contains=function(a,b){if(this.width<=0||this.height<=0)return!1;if(a>=this.x&&a<=this.x+this.width&&b>=this.y&&b<=this.y+this.height){if(b>=this.y+this.radius&&b<=this.y+this.height-this.radius||a>=this.x+this.radius&&a<=this.x+this.width-this.radius)return!0;var c=a-(this.x+this.radius),d=b-(this.y+this.radius),e=this.radius*this.radius;if(e>=c*c+d*d)return!0;if(c=a-(this.x+this.width-this.radius),e>=c*c+d*d)return!0;if(d=b-(this.y+this.height-this.radius),e>=c*c+d*d)return!0;if(c=a-(this.x+this.radius),
e>=c*c+d*d)return!0}return!1},a}();c["default"]=f},{"../../const":42}],72:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../utils"),j=a("../math"),k=a("../const"),l=a("../settings"),m=d(l),n=a("../display/Container"),o=d(n),p=a("../textures/RenderTexture"),q=d(p),r=a("eventemitter3"),s=d(r),t=new j.Matrix,u=function(a){function b(c,d,g,h){e(this,b);var j=f(this,a.call(this));if((0,i.sayHello)(c),h)for(var l in m["default"].RENDER_OPTIONS)"undefined"==typeof h[l]&&(h[l]=m["default"].RENDER_OPTIONS[l]);else h=m["default"].RENDER_OPTIONS;return j.type=k.RENDERER_TYPE.UNKNOWN,j.width=d||800,j.height=g||600,j.view=h.view||document.createElement("canvas"),j.resolution=h.resolution||m["default"].RESOLUTION,j.transparent=h.transparent,j.autoResize=h.autoResize||!1,j.blendModes=null,j.preserveDrawingBuffer=h.preserveDrawingBuffer,j.clearBeforeRender=h.clearBeforeRender,j.roundPixels=h.roundPixels,j._backgroundColor=0,j._backgroundColorRgba=[0,0,0,0],j._backgroundColorString="#000000",j.backgroundColor=h.backgroundColor||j._backgroundColor,j._tempDisplayObjectParent=new o["default"],j._lastObjectRendered=j._tempDisplayObjectParent,j}return g(b,a),b.prototype.resize=function(a,b){this.width=a*this.resolution,this.height=b*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},b.prototype.generateTexture=function(a,b,c){var d=a.getLocalBounds(),e=q["default"].create(0|d.width,0|d.height,b,c);return t.tx=-d.x,t.ty=-d.y,this.render(a,e,!1,t,!0),e},b.prototype.destroy=function(a){a&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=k.RENDERER_TYPE.UNKNOWN,this.width=0,this.height=0,this.view=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this.backgroundColor=0,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},h(b,[{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(a){this._backgroundColor=a,this._backgroundColorString=(0,i.hex2string)(a),(0,i.hex2rgb)(a,this._backgroundColorRgba)}}]),b}(s["default"]);c["default"]=u},{"../const":42,"../display/Container":44,"../math":66,"../settings":97,"../textures/RenderTexture":108,"../utils":117,eventemitter3:3}],73:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../SystemRenderer"),i=d(h),j=a("./utils/CanvasMaskManager"),k=d(j),l=a("./utils/CanvasRenderTarget"),m=d(l),n=a("./utils/mapCanvasBlendModesToPixi"),o=d(n),p=a("../../utils"),q=a("../../const"),r=a("../../settings"),s=d(r),t=function(a){function b(c,d){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(this,b);var h=f(this,a.call(this,"Canvas",c,d,g));return h.type=q.RENDERER_TYPE.CANVAS,h.rootContext=h.view.getContext("2d",{alpha:h.transparent}),h.refresh=!0,h.maskManager=new k["default"](h),h.smoothProperty="imageSmoothingEnabled",h.rootContext.imageSmoothingEnabled||(h.rootContext.webkitImageSmoothingEnabled?h.smoothProperty="webkitImageSmoothingEnabled":h.rootContext.mozImageSmoothingEnabled?h.smoothProperty="mozImageSmoothingEnabled":h.rootContext.oImageSmoothingEnabled?h.smoothProperty="oImageSmoothingEnabled":h.rootContext.msImageSmoothingEnabled&&(h.smoothProperty="msImageSmoothingEnabled")),h.initPlugins(),h.blendModes=(0,o["default"])(),h._activeBlendMode=null,h.context=null,h.renderingToScreen=!1,h.resize(c,d),h}return g(b,a),b.prototype.render=function(a,b,c,d,e){if(this.view){this.renderingToScreen=!b,this.emit("prerender"),b?(b=b.baseTexture||b,b._canvasRenderTarget||(b._canvasRenderTarget=new m["default"](b.width,b.height,b.resolution),b.source=b._canvasRenderTarget.canvas,b.valid=!0),this.context=b._canvasRenderTarget.context,this.resolution=b._canvasRenderTarget.resolution):this.context=this.rootContext;var f=this.context;if(b||(this._lastObjectRendered=a),!e){var g=a.parent,h=this._tempDisplayObjectParent.transform.worldTransform;d?d.copy(h):h.identity(),a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=g}f.setTransform(1,0,0,1,0,0),f.globalAlpha=1,f.globalCompositeOperation=this.blendModes[q.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(f.fillStyle="black",f.clear()),(void 0!==c?c:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?f.clearRect(0,0,this.width,this.height):(f.fillStyle=this._backgroundColorString,f.fillRect(0,0,this.width,this.height)));var i=this.context;this.context=f,a.renderCanvas(this),this.context=i,this.emit("postrender")}},b.prototype.setBlendMode=function(a){this._activeBlendMode!==a&&(this._activeBlendMode=a,this.context.globalCompositeOperation=this.blendModes[a])},b.prototype.destroy=function(b){this.destroyPlugins(),a.prototype.destroy.call(this,b),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},b.prototype.resize=function(b,c){a.prototype.resize.call(this,b,c),this.smoothProperty&&(this.rootContext[this.smoothProperty]=s["default"].SCALE_MODE===q.SCALE_MODES.LINEAR)},b}(i["default"]);c["default"]=t,p.pluginTarget.mixin(t)},{"../../const":42,"../../settings":97,"../../utils":117,"../SystemRenderer":72,"./utils/CanvasMaskManager":74,"./utils/CanvasRenderTarget":75,"./utils/mapCanvasBlendModesToPixi":77}],74:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=a("../../../const"),f=function(){function a(b){d(this,a),this.renderer=b}return a.prototype.pushMask=function(a){var b=this.renderer;b.context.save();var c=a.alpha,d=a.transform.worldTransform,e=b.resolution;b.context.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),a._texture||(this.renderGraphicsShape(a),b.context.clip()),a.worldAlpha=c},a.prototype.renderGraphicsShape=function(a){var b=this.renderer.context,c=a.graphicsData.length;if(0!==c){b.beginPath();for(var d=0;c>d;d++){var f=a.graphicsData[d],g=f.shape;if(f.type===e.SHAPES.POLY){var h=g.points;b.moveTo(h[0],h[1]);for(var i=1;i<h.length/2;i++)b.lineTo(h[2*i],h[2*i+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&b.closePath()}else if(f.type===e.SHAPES.RECT)b.rect(g.x,g.y,g.width,g.height),b.closePath();else if(f.type===e.SHAPES.CIRC)b.arc(g.x,g.y,g.radius,0,2*Math.PI),b.closePath();else if(f.type===e.SHAPES.ELIP){var j=2*g.width,k=2*g.height,l=g.x-j/2,m=g.y-k/2,n=.5522848,o=j/2*n,p=k/2*n,q=l+j,r=m+k,s=l+j/2,t=m+k/2;b.moveTo(l,t),b.bezierCurveTo(l,t-p,s-o,m,s,m),b.bezierCurveTo(s+o,m,q,t-p,q,t),b.bezierCurveTo(q,t+p,s+o,r,s,r),b.bezierCurveTo(s-o,r,l,t+p,l,t),b.closePath()}else if(f.type===e.SHAPES.RREC){var u=g.x,v=g.y,w=g.width,x=g.height,y=g.radius,z=Math.min(w,x)/2|0;y=y>z?z:y,b.moveTo(u,v+y),b.lineTo(u,v+x-y),b.quadraticCurveTo(u,v+x,u+y,v+x),b.lineTo(u+w-y,v+x),b.quadraticCurveTo(u+w,v+x,u+w,v+x-y),b.lineTo(u+w,v+y),b.quadraticCurveTo(u+w,v,u+w-y,v),b.lineTo(u+y,v),b.quadraticCurveTo(u,v,u,v+y),b.closePath()}}}},a.prototype.popMask=function(a){a.context.restore()},a.prototype.destroy=function(){},a}();c["default"]=f},{"../../../const":42}],75:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../../../settings"),h=d(g),i=h["default"].RESOLUTION,j=function(){function a(b,c,d){e(this,a),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=d||i,this.resize(b,c)}return a.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},a.prototype.resize=function(a,b){this.canvas.width=a*this.resolution,this.canvas.height=b*this.resolution},a.prototype.destroy=function(){this.context=null,this.canvas=null},f(a,[{key:"width",get:function(){return this.canvas.width},set:function(a){this.canvas.width=a}},{key:"height",get:function(){return this.canvas.height},set:function(a){this.canvas.height=a}}]),a}();c["default"]=j},{"../../../settings":97}],76:[function(a,b,c){"use strict";function d(a){var b=document.createElement("canvas");b.width=6,b.height=1;var c=b.getContext("2d");return c.fillStyle=a,c.fillRect(0,0,6,1),b}function e(){if("undefined"==typeof document)return!1;var a=d("#ff00ff"),b=d("#ffff00"),c=document.createElement("canvas");c.width=6,c.height=1;var e=c.getContext("2d");e.globalCompositeOperation="multiply",e.drawImage(a,0,0),e.drawImage(b,2,0);var f=e.getImageData(2,0,1,1);if(!f)return!1;var g=f.data;return 255===g[0]&&0===g[1]&&0===g[2]}c.__esModule=!0,c["default"]=e},{}],77:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,h["default"])()?(a[f.BLEND_MODES.NORMAL]="source-over",a[f.BLEND_MODES.ADD]="lighter",a[f.BLEND_MODES.MULTIPLY]="multiply",a[f.BLEND_MODES.SCREEN]="screen",a[f.BLEND_MODES.OVERLAY]="overlay",a[f.BLEND_MODES.DARKEN]="darken",a[f.BLEND_MODES.LIGHTEN]="lighten",a[f.BLEND_MODES.COLOR_DODGE]="color-dodge",a[f.BLEND_MODES.COLOR_BURN]="color-burn",a[f.BLEND_MODES.HARD_LIGHT]="hard-light",a[f.BLEND_MODES.SOFT_LIGHT]="soft-light",a[f.BLEND_MODES.DIFFERENCE]="difference",a[f.BLEND_MODES.EXCLUSION]="exclusion",a[f.BLEND_MODES.HUE]="hue",a[f.BLEND_MODES.SATURATION]="saturate",a[f.BLEND_MODES.COLOR]="color",a[f.BLEND_MODES.LUMINOSITY]="luminosity"):(a[f.BLEND_MODES.NORMAL]="source-over",a[f.BLEND_MODES.ADD]="lighter",a[f.BLEND_MODES.MULTIPLY]="source-over",a[f.BLEND_MODES.SCREEN]="source-over",a[f.BLEND_MODES.OVERLAY]="source-over",a[f.BLEND_MODES.DARKEN]="source-over",a[f.BLEND_MODES.LIGHTEN]="source-over",a[f.BLEND_MODES.COLOR_DODGE]="source-over",a[f.BLEND_MODES.COLOR_BURN]="source-over",a[f.BLEND_MODES.HARD_LIGHT]="source-over",a[f.BLEND_MODES.SOFT_LIGHT]="source-over",a[f.BLEND_MODES.DIFFERENCE]="source-over",a[f.BLEND_MODES.EXCLUSION]="source-over",a[f.BLEND_MODES.HUE]="source-over",a[f.BLEND_MODES.SATURATION]="source-over",a[f.BLEND_MODES.COLOR]="source-over",a[f.BLEND_MODES.LUMINOSITY]="source-over"),a}c.__esModule=!0,c["default"]=e;var f=a("../../../const"),g=a("./canUseNewCanvasBlendModes"),h=d(g)},{"../../../const":42,"./canUseNewCanvasBlendModes":76}],78:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../const"),g=a("../../settings"),h=d(g),i=function(){function a(b){e(this,a),this.renderer=b,this.count=0,this.checkCount=0,this.maxIdle=h["default"].GC_MAX_IDLE,this.checkCountMax=h["default"].GC_MAX_CHECK_COUNT,this.mode=h["default"].GC_MODE}return a.prototype.update=function(){this.count++,this.mode!==f.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},a.prototype.run=function(){for(var a=this.renderer.textureManager,b=a._managedTextures,c=!1,d=0;d<b.length;d++){var e=b[d];!e._glRenderTargets&&this.count-e.touched>this.maxIdle&&(a.destroyTexture(e,!0),b[d]=null,c=!0)}if(c){for(var f=0,g=0;g<b.length;g++)null!==b[g]&&(b[f++]=b[g]);b.length=f}},a.prototype.unload=function(a){var b=this.renderer.textureManager;a._texture&&a._texture._glRenderTargets&&b.destroyTexture(a._texture,!0);for(var c=a.children.length-1;c>=0;c--)this.unload(a.children[c])},a}();c["default"]=i},{"../../const":42,"../../settings":97}],79:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("pixi-gl-core"),g=a("../../const"),h=a("./utils/RenderTarget"),i=d(h),j=a("../../utils"),k=function(){function a(b){e(this,a),this.renderer=b,this.gl=b.gl,this._managedTextures=[]}return a.prototype.bindTexture=function(){},a.prototype.getTexture=function(){},a.prototype.updateTexture=function(a,b){b=b||0;var c=this.gl,d=!!a._glRenderTargets;if(!a.hasLoaded)return null;c.activeTexture(c.TEXTURE0+b);var e=a._glTextures[this.renderer.CONTEXT_UID];if(e)d?a._glRenderTargets[this.renderer.CONTEXT_UID].resize(a.width,a.height):e.upload(a.source);else{if(d){var h=new i["default"](this.gl,a.width,a.height,a.scaleMode,a.resolution);h.resize(a.width,a.height),a._glRenderTargets[this.renderer.CONTEXT_UID]=h,e=h.texture}else e=new f.GLTexture(this.gl,null,null,null,null),e.bind(b),e.premultiplyAlpha=!0,e.upload(a.source);a._glTextures[this.renderer.CONTEXT_UID]=e,a.on("update",this.updateTexture,this),a.on("dispose",this.destroyTexture,this),this._managedTextures.push(a),a.isPowerOfTwo?(a.mipmap&&e.enableMipmap(),a.wrapMode===g.WRAP_MODES.CLAMP?e.enableWrapClamp():a.wrapMode===g.WRAP_MODES.REPEAT?e.enableWrapRepeat():e.enableWrapMirrorRepeat()):e.enableWrapClamp(),a.scaleMode===g.SCALE_MODES.NEAREST?e.enableNearestScaling():e.enableLinearScaling()}return this.renderer.boundTextures[b]=a,e},a.prototype.destroyTexture=function(a,b){if(a=a.baseTexture||a,a.hasLoaded&&a._glTextures[this.renderer.CONTEXT_UID]&&(this.renderer.unbindTexture(a),a._glTextures[this.renderer.CONTEXT_UID].destroy(),a.off("update",this.updateTexture,this),a.off("dispose",this.destroyTexture,this),delete a._glTextures[this.renderer.CONTEXT_UID],!b)){var c=this._managedTextures.indexOf(a);-1!==c&&(0,j.removeItems)(this._managedTextures,c,1)}},a.prototype.removeAll=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];b._glTextures[this.renderer.CONTEXT_UID]&&delete b._glTextures[this.renderer.CONTEXT_UID]}},a.prototype.destroy=function(){for(var a=0;a<this._managedTextures.length;++a){var b=this._managedTextures[a];this.destroyTexture(b,!0),b.off("update",this.updateTexture,this),b.off("dispose",this.destroyTexture,this)}this._managedTextures=null},a}();c["default"]=k},{"../../const":42,"../../utils":117,"./utils/RenderTarget":92,"pixi-gl-core":12}],80:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../SystemRenderer"),i=d(h),j=a("./managers/MaskManager"),k=d(j),l=a("./managers/StencilManager"),m=d(l),n=a("./managers/FilterManager"),o=d(n),p=a("./utils/RenderTarget"),q=d(p),r=a("./utils/ObjectRenderer"),s=d(r),t=a("./TextureManager"),u=d(t),v=a("../../textures/BaseTexture"),w=d(v),x=a("./TextureGarbageCollector"),y=d(x),z=a("./WebGLState"),A=d(z),B=a("./utils/mapWebGLDrawModesToPixi"),C=d(B),D=a("./utils/validateContext"),E=d(D),F=a("../../utils"),G=a("pixi-gl-core"),H=d(G),I=a("../../const"),J=0,K=function(a){function b(c,d){var g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e(this,b);var h=f(this,a.call(this,"WebGL",c,d,g));return h.type=I.RENDERER_TYPE.WEBGL,h.handleContextLost=h.handleContextLost.bind(h),h.handleContextRestored=h.handleContextRestored.bind(h),h.view.addEventListener("webglcontextlost",h.handleContextLost,!1),h.view.addEventListener("webglcontextrestored",h.handleContextRestored,!1),h._contextOptions={alpha:h.transparent,antialias:g.antialias,premultipliedAlpha:h.transparent&&"notMultiplied"!==h.transparent,stencil:!0,preserveDrawingBuffer:g.preserveDrawingBuffer},h._backgroundColorRgba[3]=h.transparent?0:1,h.maskManager=new k["default"](h),h.stencilManager=new m["default"](h),h.emptyRenderer=new s["default"](h),h.currentRenderer=h.emptyRenderer,h.initPlugins(),g.context&&(0,E["default"])(g.context),h.gl=g.context||H["default"].createContext(h.view,h._contextOptions),h.CONTEXT_UID=J++,h.state=new A["default"](h.gl),h.renderingToScreen=!0,h.boundTextures=null,h._initContext(),h.filterManager=new o["default"](h),h.drawModes=(0,C["default"])(h.gl),h._activeShader=null,h._activeVao=null,h._activeRenderTarget=null,h._nextTextureLocation=0,h.setBlendMode(0),h}return g(b,a),b.prototype._initContext=function(){var a=this.gl;a.isContextLost()&&a.getExtension("WEBGL_lose_context")&&a.getExtension("WEBGL_lose_context").restoreContext();var b=a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures=new Array(b),this.emptyTextures=new Array(b),this.textureManager=new u["default"](this),this.textureGC=new y["default"](this),this.state.resetToDefault(),this.rootRenderTarget=new q["default"](a,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var c=new H["default"].GLTexture.fromData(a,null,1,1),d={_glTextures:{}};d._glTextures[this.CONTEXT_UID]={};for(var e=0;b>e;e++){var f=new w["default"];f._glTextures[this.CONTEXT_UID]=c,this.boundTextures[e]=d,this.emptyTextures[e]=f,this.bindTexture(null,e)}this.emit("context",a),this.resize(this.width,this.height)},b.prototype.render=function(a,b,c,d,e){if(this.renderingToScreen=!b,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,b||(this._lastObjectRendered=a),!e){var f=a.parent;a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=f}this.bindRenderTexture(b,d),this.currentRenderer.start(),(void 0!==c?c:this.clearBeforeRender)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},b.prototype.setObjectRenderer=function(a){this.currentRenderer!==a&&(this.currentRenderer.stop(),this.currentRenderer=a,this.currentRenderer.start())},b.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},b.prototype.resize=function(a,b){i["default"].prototype.resize.call(this,a,b),this.rootRenderTarget.resize(a,b),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},b.prototype.setBlendMode=function(a){this.state.setBlendMode(a)},b.prototype.clear=function(a){this._activeRenderTarget.clear(a)},b.prototype.setTransform=function(a){this._activeRenderTarget.transform=a},b.prototype.bindRenderTexture=function(a,b){var c=void 0;if(a){var d=a.baseTexture;d._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(d,0),this.unbindTexture(d),c=d._glRenderTargets[this.CONTEXT_UID],c.setFrame(a.frame)}else c=this.rootRenderTarget;return c.transform=b,this.bindRenderTarget(c),this},b.prototype.bindRenderTarget=function(a){return a!==this._activeRenderTarget&&(this._activeRenderTarget=a,a.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=a.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(a.stencilMaskStack)),this},b.prototype.bindShader=function(a){return this._activeShader!==a&&(this._activeShader=a,a.bind(),a.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0)),this},b.prototype.bindTexture=function(a,b,c){if(a=a||this.emptyTextures[b],a=a.baseTexture||a,a.touched=this.textureGC.count,c)b=b||0;else{for(var d=0;d<this.boundTextures.length;d++)if(this.boundTextures[d]===a)return d;void 0===b&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,b=this.boundTextures.length-this._nextTextureLocation-1)}var e=this.gl,f=a._glTextures[this.CONTEXT_UID];return f?(this.boundTextures[b]=a,e.activeTexture(e.TEXTURE0+b),e.bindTexture(e.TEXTURE_2D,f.texture)):this.textureManager.updateTexture(a,b),b},b.prototype.unbindTexture=function(a){var b=this.gl;a=a.baseTexture||a;for(var c=0;c<this.boundTextures.length;c++)this.boundTextures[c]===a&&(this.boundTextures[c]=this.emptyTextures[c],b.activeTexture(b.TEXTURE0+c),b.bindTexture(b.TEXTURE_2D,this.emptyTextures[c]._glTextures[this.CONTEXT_UID].texture));return this},b.prototype.createVao=function(){return new H["default"].VertexArrayObject(this.gl,this.state.attribState)},b.prototype.bindVao=function(a){return this._activeVao===a?this:(a?a.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=a,this)},b.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},b.prototype.handleContextLost=function(a){a.preventDefault()},b.prototype.handleContextRestored=function(){this._initContext(),this.textureManager.removeAll()},b.prototype.destroy=function(b){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),a.prototype.destroy.call(this,b),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},b}(i["default"]);c["default"]=K,F.pluginTarget.mixin(K)},{"../../const":42,"../../textures/BaseTexture":107,"../../utils":117,"../SystemRenderer":72,"./TextureGarbageCollector":78,"./TextureManager":79,"./WebGLState":81,"./managers/FilterManager":86,"./managers/MaskManager":87,"./managers/StencilManager":88,"./utils/ObjectRenderer":90,"./utils/RenderTarget":92,"./utils/mapWebGLDrawModesToPixi":95,"./utils/validateContext":96,"pixi-gl-core":12}],81:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("./utils/mapWebGLBlendModesToPixi"),g=d(f),h=0,i=1,j=2,k=3,l=4,m=function(){function a(b){e(this,a),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=b,this.maxAttribs=b.getParameter(b.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,g["default"])(b),this.nativeVaoExtension=b.getExtension("OES_vertex_array_object")||b.getExtension("MOZ_OES_vertex_array_object")||b.getExtension("WEBKIT_OES_vertex_array_object")}return a.prototype.push=function(){var a=this.stack[++this.stackIndex];a||(a=this.stack[this.stackIndex]=new Uint8Array(16));for(var b=0;b<this.activeState.length;b++)this.activeState[b]=a[b]},a.prototype.pop=function(){var a=this.stack[--this.stackIndex];this.setState(a)},a.prototype.setState=function(a){this.setBlend(a[h]),this.setDepthTest(a[i]),this.setFrontFace(a[j]),this.setCullFace(a[k]),this.setBlendMode(a[l])},a.prototype.setBlend=function(a){a=a?1:0,this.activeState[h]!==a&&(this.activeState[h]=a,this.gl[a?"enable":"disable"](this.gl.BLEND))},a.prototype.setBlendMode=function(a){a!==this.activeState[l]&&(this.activeState[l]=a,this.gl.blendFunc(this.blendModes[a][0],this.blendModes[a][1]))},a.prototype.setDepthTest=function(a){a=a?1:0,this.activeState[i]!==a&&(this.activeState[i]=a,this.gl[a?"enable":"disable"](this.gl.DEPTH_TEST))},a.prototype.setCullFace=function(a){a=a?1:0,this.activeState[k]!==a&&(this.activeState[k]=a,this.gl[a?"enable":"disable"](this.gl.CULL_FACE))},a.prototype.setFrontFace=function(a){a=a?1:0,this.activeState[j]!==a&&(this.activeState[j]=a,this.gl.frontFace(this.gl[a?"CW":"CCW"]))},a.prototype.resetAttributes=function(){for(var a=0;a<this.attribState.tempAttribState.length;a++)this.attribState.tempAttribState[a]=0;for(var b=0;b<this.attribState.attribState.length;b++)this.attribState.attribState[b]=0;for(var c=1;c<this.maxAttribs;c++)this.gl.disableVertexAttribArray(c)},a.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var a=0;a<this.activeState.length;++a)this.activeState[a]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},a}();c["default"]=m},{"./utils/mapWebGLBlendModesToPixi":94}],82:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./extractUniformsFromSrc"),h=d(g),i=a("../../../utils"),j=a("../../../const"),k={},l=function(){function a(b,c,d){e(this,a),this.vertexSrc=b||a.defaultVertexSrc,this.fragmentSrc=c||a.defaultFragmentSrc,this.blendMode=j.BLEND_MODES.NORMAL,this.uniformData=d||(0,h["default"])(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={};for(var f in this.uniformData)this.uniforms[f]=this.uniformData[f].value;this.glShaders={},k[this.vertexSrc+this.fragmentSrc]||(k[this.vertexSrc+this.fragmentSrc]=(0,i.uid)()),this.glShaderKey=k[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=1,this.enabled=!0}return a.prototype.apply=function(a,b,c,d){a.applyFilter(this,b,c,d)},f(a,null,[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),a}();c["default"]=l},{"../../../const":42,"../../../utils":117,"./extractUniformsFromSrc":83}],83:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b,c){var d=f(a,c),e=f(b,c);return Object.assign(d,e)}function f(a){for(var b=new RegExp("^(projectionMatrix|uSampler|filterArea)$"),c={},d=void 0,e=a.replace(/\s+/g," ").split(/\s*;\s*/),f=0;f<e.length;f++){var g=e[f].trim();if(g.indexOf("uniform")>-1){var h=g.split(" "),j=h[1],k=h[2],l=1;k.indexOf("[")>-1&&(d=k.split(/\[|]/),k=d[0],l*=Number(d[1])),k.match(b)||(c[k]={value:i(j,l),name:k,type:j})}}return c}c.__esModule=!0,c["default"]=e;var g=a("pixi-gl-core"),h=d(g),i=h["default"].shader.defaultValue},{"pixi-gl-core":12}],84:[function(a,b,c){"use strict";function d(a,b,c){var d=a.identity();return d.translate(b.x/c.width,b.y/c.height),d.scale(c.width,c.height),d}function e(a,b,c){var d=a.identity();d.translate(b.x/c.width,b.y/c.height);var e=c.width/b.width,f=c.height/b.height;return d.scale(e,f),d}function f(a,b,c,d){var e=d.worldTransform.copy(g.Matrix.TEMP_MATRIX),f=d._texture.baseTexture,h=a.identity(),i=c.height/c.width;h.translate(b.x/c.width,b.y/c.height),h.scale(1,i);var j=c.width/f.width,k=c.height/f.height;return e.tx/=f.width*j,e.ty/=f.width*j,e.invert(),h.prepend(e),h.scale(1,1/i),h.scale(j,k),h.translate(d.anchor.x,d.anchor.y),h}c.__esModule=!0,c.calculateScreenSpaceMatrix=d,c.calculateNormalizedScreenSpaceMatrix=e,c.calculateSpriteMatrix=f;var g=a("../../../math")},{"../../../math":66}],85:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../Filter"),i=d(h),j=a("../../../../math"),k=(a("path"),function(a){function b(c){e(this,b);var d=new j.Matrix,g=f(this,a.call(this,"attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 otherMatrix;\r\n\r\nvarying vec2 vMaskCoord;\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = aTextureCoord;\r\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\r\n}\r\n","varying vec2 vMaskCoord;\r\nvarying vec2 vTextureCoord;\r\n\r\nuniform sampler2D uSampler;\r\nuniform float alpha;\r\nuniform sampler2D mask;\r\n\r\nvoid main(void)\r\n{\r\n    // check clip! this will stop the mask bleeding out from the edges\r\n    vec2 text = abs( vMaskCoord - 0.5 );\r\n    text = step(0.5, text);\r\n\r\n    float clip = 1.0 - max(text.y, text.x);\r\n    vec4 original = texture2D(uSampler, vTextureCoord);\r\n    vec4 masky = texture2D(mask, vMaskCoord);\r\n\r\n    original *= (masky.r * masky.a * alpha * clip);\r\n\r\n    gl_FragColor = original;\r\n}\r\n"));return c.renderable=!1,g.maskSprite=c,
g.maskMatrix=d,g}return g(b,a),b.prototype.apply=function(a,b,c){var d=this.maskSprite;this.uniforms.mask=d._texture,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,d),this.uniforms.alpha=d.worldAlpha,a.applyFilter(this,b,c)},b}(i["default"]));c["default"]=k},{"../../../../math":66,"../Filter":82,path:22}],86:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function h(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var i=a("./WebGLManager"),j=e(i),k=a("../utils/RenderTarget"),l=e(k),m=a("../utils/Quad"),n=e(m),o=a("../../../math"),p=a("../../../Shader"),q=e(p),r=a("../filters/filterTransforms"),s=d(r),t=a("bit-twiddle"),u=e(t),v=function x(){h(this,x),this.renderTarget=null,this.sourceFrame=new o.Rectangle,this.destinationFrame=new o.Rectangle,this.filters=[],this.target=null,this.resolution=1},w=function(a){function b(c){h(this,b);var d=f(this,a.call(this,c));return d.gl=d.renderer.gl,d.quad=new n["default"](d.gl,c.state.attribState),d.shaderCache={},d.pool={},d.filterData=null,d}return g(b,a),b.prototype.pushFilter=function(a,b){var c=this.renderer,d=this.filterData;if(!d){d=this.renderer._activeRenderTarget.filterStack;var e=new v;e.sourceFrame=e.destinationFrame=this.renderer._activeRenderTarget.size,e.renderTarget=c._activeRenderTarget,this.renderer._activeRenderTarget.filterData=d={index:0,stack:[e]},this.filterData=d}var f=d.stack[++d.index];f||(f=d.stack[d.index]=new v);var g=b[0].resolution,h=0|b[0].padding,i=a.filterArea||a.getBounds(!0),j=f.sourceFrame,k=f.destinationFrame;j.x=(i.x*g|0)/g,j.y=(i.y*g|0)/g,j.width=(i.width*g|0)/g,j.height=(i.height*g|0)/g,d.stack[0].renderTarget.transform||j.fit(d.stack[0].destinationFrame),j.pad(h),k.width=j.width,k.height=j.height;var l=this.getPotRenderTarget(c.gl,j.width,j.height,g);f.target=a,f.filters=b,f.resolution=g,f.renderTarget=l,l.setFrame(k,j),c.bindRenderTarget(l),c.clear()},b.prototype.popFilter=function(){var a=this.filterData,b=a.stack[a.index-1],c=a.stack[a.index];this.quad.map(c.renderTarget.size,c.sourceFrame).upload();var d=c.filters;if(1===d.length)d[0].apply(this,c.renderTarget,b.renderTarget,!1),this.freePotRenderTarget(c.renderTarget);else{var e=c.renderTarget,f=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,c.resolution);f.setFrame(c.destinationFrame,c.sourceFrame);var g=0;for(g=0;g<d.length-1;++g){d[g].apply(this,e,f,!0);var h=e;e=f,f=h}d[g].apply(this,e,b.renderTarget,!1),this.freePotRenderTarget(e),this.freePotRenderTarget(f)}a.index--,0===a.index&&(this.filterData=null)},b.prototype.applyFilter=function(a,b,c,d){var e=this.renderer,f=e.gl,g=a.glShaders[e.CONTEXT_UID];g||(a.glShaderKey?(g=this.shaderCache[a.glShaderKey],g||(g=new q["default"](this.gl,a.vertexSrc,a.fragmentSrc),a.glShaders[e.CONTEXT_UID]=this.shaderCache[a.glShaderKey]=g)):g=a.glShaders[e.CONTEXT_UID]=new q["default"](this.gl,a.vertexSrc,a.fragmentSrc),e.bindVao(null),this.quad.initVao(g)),e.bindVao(this.quad.vao),e.bindRenderTarget(c),d&&(f.disable(f.SCISSOR_TEST),e.clear(),f.enable(f.SCISSOR_TEST)),c===e.maskManager.scissorRenderTarget&&e.maskManager.pushScissorMask(null,e.maskManager.scissorData),e.bindShader(g),this.syncUniforms(g,a),e.state.setBlendMode(a.blendMode);var h=this.renderer.boundTextures[0];f.activeTexture(f.TEXTURE0),f.bindTexture(f.TEXTURE_2D,b.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),f.bindTexture(f.TEXTURE_2D,h._glTextures[this.renderer.CONTEXT_UID].texture)},b.prototype.syncUniforms=function(a,b){var c=b.uniformData,d=b.uniforms,e=1,f=void 0;if(a.uniforms.data.filterArea){f=this.filterData.stack[this.filterData.index];var g=a.uniforms.filterArea;g[0]=f.renderTarget.size.width,g[1]=f.renderTarget.size.height,g[2]=f.sourceFrame.x,g[3]=f.sourceFrame.y,a.uniforms.filterArea=g}if(a.uniforms.data.filterClamp){f=this.filterData.stack[this.filterData.index];var h=a.uniforms.filterClamp;h[0]=0,h[1]=0,h[2]=(f.sourceFrame.width-1)/f.renderTarget.size.width,h[3]=(f.sourceFrame.height-1)/f.renderTarget.size.height,a.uniforms.filterClamp=h}for(var i in c)if("sampler2D"===c[i].type&&0!==d[i]){if(d[i].baseTexture)a.uniforms[i]=this.renderer.bindTexture(d[i].baseTexture,e);else{a.uniforms[i]=e;var j=this.renderer.gl;j.activeTexture(j.TEXTURE0+e),d[i].texture.bind()}e++}else if("mat3"===c[i].type)void 0!==d[i].a?a.uniforms[i]=d[i].toArray(!0):a.uniforms[i]=d[i];else if("vec2"===c[i].type)if(void 0!==d[i].x){var k=a.uniforms[i]||new Float32Array(2);k[0]=d[i].x,k[1]=d[i].y,a.uniforms[i]=k}else a.uniforms[i]=d[i];else"float"===c[i].type?a.uniforms.data[i].value!==c[i]&&(a.uniforms[i]=d[i]):a.uniforms[i]=d[i]},b.prototype.getRenderTarget=function(a,b){var c=this.filterData.stack[this.filterData.index],d=this.getPotRenderTarget(this.renderer.gl,c.sourceFrame.width,c.sourceFrame.height,b||c.resolution);return d.setFrame(c.destinationFrame,c.sourceFrame),d},b.prototype.returnRenderTarget=function(a){this.freePotRenderTarget(a)},b.prototype.calculateScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return s.calculateScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size)},b.prototype.calculateNormalizedScreenSpaceMatrix=function(a){var b=this.filterData.stack[this.filterData.index];return s.calculateNormalizedScreenSpaceMatrix(a,b.sourceFrame,b.renderTarget.size,b.destinationFrame)},b.prototype.calculateSpriteMatrix=function(a,b){var c=this.filterData.stack[this.filterData.index];return s.calculateSpriteMatrix(a,c.sourceFrame,c.renderTarget.size,b)},b.prototype.destroy=function(){this.shaderCache=[],this.emptyPool()},b.prototype.getPotRenderTarget=function(a,b,c,d){b=u["default"].nextPow2(b*d),c=u["default"].nextPow2(c*d);var e=(65535&b)<<16|65535&c;this.pool[e]||(this.pool[e]=[]);var f=this.pool[e].pop();if(!f){var g=this.renderer.boundTextures[0];a.activeTexture(a.TEXTURE0),f=new l["default"](a,b,c,null,1),a.bindTexture(a.TEXTURE_2D,g._glTextures[this.renderer.CONTEXT_UID].texture)}return f.resolution=d,f.defaultFrame.width=f.size.width=b/d,f.defaultFrame.height=f.size.height=c/d,f},b.prototype.emptyPool=function(){for(var a in this.pool){var b=this.pool[a];if(b)for(var c=0;c<b.length;c++)b[c].destroy(!0)}this.pool={}},b.prototype.freePotRenderTarget=function(a){var b=a.size.width*a.resolution,c=a.size.height*a.resolution,d=(65535&b)<<16|65535&c;this.pool[d].push(a)},b}(j["default"]);c["default"]=w},{"../../../Shader":41,"../../../math":66,"../filters/filterTransforms":84,"../utils/Quad":91,"../utils/RenderTarget":92,"./WebGLManager":89,"bit-twiddle":1}],87:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./WebGLManager"),i=d(h),j=a("../filters/spriteMask/SpriteMaskFilter"),k=d(j),l=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.scissor=!1,d.scissorData=null,d.scissorRenderTarget=null,d.enableScissor=!0,d.alphaMaskPool=[],d.alphaMaskIndex=0,d}return g(b,a),b.prototype.pushMask=function(a,b){if(b.texture)this.pushSpriteMask(a,b);else if(this.enableScissor&&!this.scissor&&!this.renderer.stencilManager.stencilMaskStack.length&&b.isFastRect()){var c=b.worldTransform,d=Math.atan2(c.b,c.a);d=Math.round(d*(180/Math.PI)),d%90?this.pushStencilMask(b):this.pushScissorMask(a,b)}else this.pushStencilMask(b)},b.prototype.popMask=function(a,b){b.texture?this.popSpriteMask(a,b):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(a,b):this.popStencilMask(a,b)},b.prototype.pushSpriteMask=function(a,b){var c=this.alphaMaskPool[this.alphaMaskIndex];c||(c=this.alphaMaskPool[this.alphaMaskIndex]=[new k["default"](b)]),c[0].resolution=this.renderer.resolution,c[0].maskSprite=b,a.filterArea=b.getBounds(!0),this.renderer.filterManager.pushFilter(a,c),this.alphaMaskIndex++},b.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},b.prototype.pushStencilMask=function(a){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(a)},b.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},b.prototype.pushScissorMask=function(a,b){b.renderable=!0;var c=this.renderer._activeRenderTarget,d=b.getBounds();d.fit(c.size),b.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var e=this.renderer.resolution;this.renderer.gl.scissor(d.x*e,(c.root?c.size.height-d.y-d.height:d.y)*e,d.width*e,d.height*e),this.scissorRenderTarget=c,this.scissorData=b,this.scissor=!0},b.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var a=this.renderer.gl;a.disable(a.SCISSOR_TEST)},b}(i["default"]);c["default"]=l},{"../filters/spriteMask/SpriteMaskFilter":85,"./WebGLManager":89}],88:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./WebGLManager"),i=d(h),j=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.stencilMaskStack=null,d}return g(b,a),b.prototype.setMaskStack=function(a){this.stencilMaskStack=a;var b=this.renderer.gl;0===a.length?b.disable(b.STENCIL_TEST):b.enable(b.STENCIL_TEST)},b.prototype.pushStencil=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var b=this.renderer.gl,c=this.stencilMaskStack;0===c.length&&(b.enable(b.STENCIL_TEST),b.clear(b.STENCIL_BUFFER_BIT),b.stencilFunc(b.ALWAYS,1,1)),c.push(a),b.colorMask(!1,!1,!1,!1),b.stencilOp(b.KEEP,b.KEEP,b.INCR),this.renderer.plugins.graphics.render(a),b.colorMask(!0,!0,!0,!0),b.stencilFunc(b.NOTEQUAL,0,c.length),b.stencilOp(b.KEEP,b.KEEP,b.KEEP)},b.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var a=this.renderer.gl,b=this.stencilMaskStack,c=b.pop();0===b.length?a.disable(a.STENCIL_TEST):(a.colorMask(!1,!1,!1,!1),a.stencilOp(a.KEEP,a.KEEP,a.DECR),this.renderer.plugins.graphics.render(c),a.colorMask(!0,!0,!0,!0),a.stencilFunc(a.NOTEQUAL,0,b.length),a.stencilOp(a.KEEP,a.KEEP,a.KEEP))},b.prototype.destroy=function(){i["default"].prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},b}(i["default"]);c["default"]=j},{"./WebGLManager":89}],89:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.renderer=b,this.renderer.on("context",this.onContextChange,this)}return a.prototype.onContextChange=function(){},a.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},a}();c["default"]=e},{}],90:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../managers/WebGLManager"),i=d(h),j=function(a){function b(){return e(this,b),f(this,a.apply(this,arguments))}return g(b,a),b.prototype.start=function(){},b.prototype.stop=function(){this.flush()},b.prototype.flush=function(){},b.prototype.render=function(a){},b}(i["default"]);c["default"]=j},{"../managers/WebGLManager":89}],91:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("pixi-gl-core"),g=d(f),h=a("../../../utils/createIndicesForQuads"),i=d(h),j=function(){function a(b,c){e(this,a),this.gl=b,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var d=0;4>d;d++)this.interleaved[4*d]=this.vertices[2*d],this.interleaved[4*d+1]=this.vertices[2*d+1],this.interleaved[4*d+2]=this.uvs[2*d],this.interleaved[4*d+3]=this.uvs[2*d+1];this.indices=(0,i["default"])(1),this.vertexBuffer=g["default"].GLBuffer.createVertexBuffer(b,this.interleaved,b.STATIC_DRAW),this.indexBuffer=g["default"].GLBuffer.createIndexBuffer(b,this.indices,b.STATIC_DRAW),this.vao=new g["default"].VertexArrayObject(b,c)}return a.prototype.initVao=function(a){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,a.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,a.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},a.prototype.map=function(a,b){var c=0,d=0;return this.uvs[0]=c,this.uvs[1]=d,this.uvs[2]=c+b.width/a.width,this.uvs[3]=d,this.uvs[4]=c+b.width/a.width,this.uvs[5]=d+b.height/a.height,this.uvs[6]=c,this.uvs[7]=d+b.height/a.height,c=b.x,d=b.y,this.vertices[0]=c,this.vertices[1]=d,this.vertices[2]=c+b.width,this.vertices[3]=d,this.vertices[4]=c+b.width,this.vertices[5]=d+b.height,this.vertices[6]=c,this.vertices[7]=d+b.height,this},a.prototype.upload=function(){for(var a=0;4>a;a++)this.interleaved[4*a]=this.vertices[2*a],this.interleaved[4*a+1]=this.vertices[2*a+1],this.interleaved[4*a+2]=this.uvs[2*a],this.interleaved[4*a+3]=this.uvs[2*a+1];return this.vertexBuffer.upload(this.interleaved),this},a.prototype.destroy=function(){var a=this.gl;a.deleteBuffer(this.vertexBuffer),a.deleteBuffer(this.indexBuffer)},a}();c["default"]=j},{"../../../utils/createIndicesForQuads":115,"pixi-gl-core":12}],92:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../../math"),g=a("../../../const"),h=a("../../../settings"),i=d(h),j=a("pixi-gl-core"),k=function(){function a(b,c,d,h,k,l){e(this,a),this.gl=b,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new f.Rectangle(0,0,1,1),this.resolution=k||i["default"].RESOLUTION,this.projectionMatrix=new f.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new f.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=h||i["default"].SCALE_MODE,this.root=l,this.root?(this.frameBuffer=new j.GLFramebuffer(b,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=j.GLFramebuffer.createRGBA(b,100,100),this.scaleMode===g.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(c,d)}return a.prototype.clear=function(a){var b=a||this.clearColor;this.frameBuffer.clear(b[0],b[1],b[2],b[3])},a.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},a.prototype.setFrame=function(a,b){this.destinationFrame=a||this.destinationFrame||this.defaultFrame,this.sourceFrame=b||this.sourceFrame||a},a.prototype.activate=function(){var a=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(a.enable(a.SCISSOR_TEST),a.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):a.disable(a.SCISSOR_TEST),a.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},a.prototype.calculateProjection=function(a,b){var c=this.projectionMatrix;b=b||a,c.identity(),this.root?(c.a=1/a.width*2,c.d=-1/a.height*2,c.tx=-1-b.x*c.a,c.ty=1-b.y*c.d):(c.a=1/a.width*2,c.d=1/a.height*2,c.tx=-1-b.x*c.a,c.ty=-1-b.y*c.d)},a.prototype.resize=function(a,b){if(a=0|a,b=0|b,this.size.width!==a||this.size.height!==b){this.size.width=a,this.size.height=b,this.defaultFrame.width=a,this.defaultFrame.height=b,this.frameBuffer.resize(a*this.resolution,b*this.resolution);var c=this.frame||this.size;this.calculateProjection(c)}},a.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},a}();c["default"]=k},{"../../../const":42,"../../../math":66,"../../../settings":97,"pixi-gl-core":12}],93:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c=!b;if(c){var d=document.createElement("canvas");d.width=1,d.height=1,b=h["default"].createContext(d)}for(var e=b.createShader(b.FRAGMENT_SHADER);;){var g=i.replace(/%forloop%/gi,f(a));if(b.shaderSource(e,g),b.compileShader(e),b.getShaderParameter(e,b.COMPILE_STATUS))break;a=a/2|0}return c&&b.getExtension("WEBGL_lose_context")&&b.getExtension("WEBGL_lose_context").loseContext(),a}function f(a){for(var b="",c=0;a>c;++c)c>0&&(b+="\nelse "),a-1>c&&(b+="if(test == "+c+".0){}");return b}c.__esModule=!0,c["default"]=e;var g=a("pixi-gl-core"),h=d(g),i=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":12}],94:[function(a,b,c){"use strict";function d(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return b[e.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA],b[e.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR],b[e.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b[e.BLEND_MODES.LUMINOSITY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],b}c.__esModule=!0,c["default"]=d;var e=a("../../../const")},{"../../../const":42}],95:[function(a,b,c){"use strict";function d(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return b[e.DRAW_MODES.POINTS]=a.POINTS,b[e.DRAW_MODES.LINES]=a.LINES,b[e.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,b[e.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,b[e.DRAW_MODES.TRIANGLES]=a.TRIANGLES,b[e.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,b[e.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN,b}c.__esModule=!0,c["default"]=d;var e=a("../../../const")},{"../../../const":42}],96:[function(a,b,c){"use strict";function d(a){var b=a.getContextAttributes();b.stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}c.__esModule=!0,c["default"]=d},{}],97:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./utils/maxRecommendedTextures"),f=d(e),g=a("./utils/canUploadSameBuffer"),h=d(g);c["default"]={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,f["default"])(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@(.+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,h["default"])()}},{"./utils/canUploadSameBuffer":114,"./utils/maxRecommendedTextures":118}],98:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../math"),j=a("../utils"),k=a("../const"),l=a("../textures/Texture"),m=d(l),n=a("../display/Container"),o=d(n),p=new i.Point,q=function(a){function b(c){e(this,b);var d=f(this,a.call(this));return d._anchor=new i.ObservablePoint(d._onAnchorUpdate,d),d._texture=null,d._width=0,d._height=0,d._tint=null,d._tintRGB=null,d.tint=16777215,d.blendMode=k.BLEND_MODES.NORMAL,d.shader=null,d.cachedTint=16777215,d.texture=c||m["default"].EMPTY,d.vertexData=new Float32Array(8),d.vertexTrimmedData=null,d._transformID=-1,d._textureID=-1,d.pluginName="sprite",d}return g(b,a),b.prototype._onTextureUpdate=function(){this._textureID=-1,this._width&&(this.scale.x=(0,j.sign)(this.scale.x)*this._width/this.texture.orig.width),this._height&&(this.scale.y=(0,j.sign)(this.scale.y)*this._height/this.texture.orig.height)},b.prototype._onAnchorUpdate=function(){this._transformID=-1},b.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var a=this._texture,b=this.transform.worldTransform,c=b.a,d=b.b,e=b.c,f=b.d,g=b.tx,h=b.ty,i=this.vertexData,j=a.trim,k=a.orig,l=this._anchor,m=0,n=0,o=0,p=0;j?(n=j.x-l._x*k.width,m=n+j.width,p=j.y-l._y*k.height,o=p+j.height):(m=k.width*(1-l._x),n=k.width*-l._x,o=k.height*(1-l._y),p=k.height*-l._y),i[0]=c*n+e*p+g,i[1]=f*p+d*n+h,i[2]=c*m+e*p+g,i[3]=f*p+d*m+h,i[4]=c*m+e*o+g,i[5]=f*o+d*m+h,i[6]=c*n+e*o+g,i[7]=f*o+d*n+h}},b.prototype.calculateTrimmedVertices=function(){this.vertexTrimmedData||(this.vertexTrimmedData=new Float32Array(8));var a=this._texture,b=this.vertexTrimmedData,c=a.orig,d=this._anchor,e=this.transform.worldTransform,f=e.a,g=e.b,h=e.c,i=e.d,j=e.tx,k=e.ty,l=c.width*(1-d._x),m=c.width*-d._x,n=c.height*(1-d._y),o=c.height*-d._y;b[0]=f*m+h*o+j,b[1]=i*o+g*m+k,b[2]=f*l+h*o+j,b[3]=i*o+g*l+k,b[4]=f*l+h*n+j,b[5]=i*n+g*l+k,b[6]=f*m+h*n+j,b[7]=i*n+g*m+k},b.prototype._renderWebGL=function(a){this.calculateVertices(),a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this)},b.prototype._renderCanvas=function(a){a.plugins[this.pluginName].render(this)},b.prototype._calculateBounds=function(){var a=this._texture.trim,b=this._texture.orig;!a||a.width===b.width&&a.height===b.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},b.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._x),b||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,p);var b=this._texture.orig.width,c=this._texture.orig.height,d=-b*this.anchor.x,e=0;return p.x>d&&p.x<d+b&&(e=-c*this.anchor.y,p.y>e&&p.y<e+c)},b.prototype.destroy=function(b){a.prototype.destroy.call(this,b),this._anchor=null;var c="boolean"==typeof b?b:b&&b.texture;if(c){var d="boolean"==typeof b?b:b&&b.baseTexture;this._texture.destroy(!!d)}this._texture=null,this.shader=null},b.from=function(a){return new b(m["default"].from(a))},b.fromFrame=function(a){var c=j.TextureCache[a];if(!c)throw new Error('The frameId "'+a+'" does not exist in the texture cache');return new b(c)},b.fromImage=function(a,c,d){return new b(m["default"].fromImage(a,c,d))},h(b,[{key:"width",get:function(){return Math.abs(this.scale.x)*this.texture.orig.width},set:function(a){var b=(0,j.sign)(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},{key:"height",get:function(){return Math.abs(this.scale.y)*this.texture.orig.height},set:function(a){var b=(0,j.sign)(this.scale.y)||1;this.scale.y=b*a/this.texture.orig.height,this._height=a}},{key:"anchor",get:function(){return this._anchor},set:function(a){this._anchor.copy(a)}},{key:"tint",get:function(){return this._tint},set:function(a){this._tint=a,this._tintRGB=(a>>16)+(65280&a)+((255&a)<<16)}},{key:"texture",get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,this.cachedTint=16777215,this._textureID=-1,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}}]),b}(o["default"]);c["default"]=q},{"../const":42,"../display/Container":44,"../math":66,"../textures/Texture":109,"../utils":117}],99:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../renderers/canvas/CanvasRenderer"),g=d(f),h=a("../../const"),i=a("../../math"),j=a("./CanvasTinter"),k=d(j),l=new i.Matrix,m=function(){function a(b){e(this,a),this.renderer=b}return a.prototype.render=function(a){var b=a._texture,c=this.renderer,d=b._frame.width,e=b._frame.height,f=a.transform.worldTransform,g=0,j=0;if(!(b.orig.width<=0||b.orig.height<=0)&&b.baseTexture.source&&(c.setBlendMode(a.blendMode),b.valid)){c.context.globalAlpha=a.worldAlpha;var m=b.baseTexture.scaleMode===h.SCALE_MODES.LINEAR;c.smoothProperty&&c.context[c.smoothProperty]!==m&&(c.context[c.smoothProperty]=m),b.trim?(g=b.trim.width/2+b.trim.x-a.anchor.x*b.orig.width,j=b.trim.height/2+b.trim.y-a.anchor.y*b.orig.height):(g=(.5-a.anchor.x)*b.orig.width,j=(.5-a.anchor.y)*b.orig.height),b.rotate&&(f.copy(l),f=l,i.GroupD8.matrixAppendRotationInv(f,b.rotate,g,j),g=0,j=0),g-=d/2,j-=e/2,c.roundPixels?(c.context.setTransform(f.a,f.b,f.c,f.d,f.tx*c.resolution|0,f.ty*c.resolution|0),g=0|g,j=0|j):c.context.setTransform(f.a,f.b,f.c,f.d,f.tx*c.resolution,f.ty*c.resolution);var n=b.baseTexture.resolution;16777215!==a.tint?(a.cachedTint!==a.tint&&(a.cachedTint=a.tint,a.tintedTexture=k["default"].getTintedTexture(a,a.tint)),c.context.drawImage(a.tintedTexture,0,0,d*n,e*n,g*c.resolution,j*c.resolution,d*c.resolution,e*c.resolution)):c.context.drawImage(b.baseTexture.source,b._frame.x*n,b._frame.y*n,d*n,e*n,g*c.resolution,j*c.resolution,d*c.resolution,e*c.resolution)}},a.prototype.destroy=function(){this.renderer=null},a}();c["default"]=m,g["default"].registerPlugin("sprite",m)},{"../../const":42,"../../math":66,"../../renderers/canvas/CanvasRenderer":73,"./CanvasTinter":100}],100:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("../../utils"),f=a("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),g=d(f),h={getTintedTexture:function(a,b){var c=a.texture;b=h.roundColor(b);var d="#"+("00000"+(0|b).toString(16)).substr(-6);if(c.tintCache=c.tintCache||{},c.tintCache[d])return c.tintCache[d];var e=h.canvas||document.createElement("canvas");if(h.tintMethod(c,b,e),h.convertTintToImage){var f=new Image;f.src=e.toDataURL(),c.tintCache[d]=f}else c.tintCache[d]=e,h.canvas=null;return e},tintWithMultiply:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=e.width,c.height=e.height,d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="multiply",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithOverlay:function(a,b,c){var d=c.getContext("2d"),e=a._frame.clone(),f=a.baseTexture.resolution;e.x*=f,e.y*=f,e.width*=f,e.height*=f,c.width=e.width,c.height=e.height,d.globalCompositeOperation="copy",d.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),d.fillRect(0,0,e.width,e.height),d.globalCompositeOperation="destination-atop",d.drawImage(a.baseTexture.source,e.x,e.y,e.width,e.height,0,0,e.width,e.height)},tintWithPerPixel:function(a,b,c){var d=c.getContext("2d"),f=a._frame.clone(),g=a.baseTexture.resolution;f.x*=g,f.y*=g,f.width*=g,f.height*=g,c.width=f.width,c.height=f.height,d.globalCompositeOperation="copy",d.drawImage(a.baseTexture.source,f.x,f.y,f.width,f.height,0,0,f.width,f.height);for(var h=(0,e.hex2rgb)(b),i=h[0],j=h[1],k=h[2],l=d.getImageData(0,0,f.width,f.height),m=l.data,n=0;n<m.length;n+=4)m[n+0]*=i,m[n+1]*=j,m[n+2]*=k;d.putImageData(l,0,0)},roundColor:function(a){var b=h.cacheStepsPerColorChannel,c=(0,e.hex2rgb)(a);return c[0]=Math.min(255,c[0]/b*b),c[1]=Math.min(255,c[1]/b*b),c[2]=Math.min(255,c[2]/b*b),(0,e.rgb2hex)(c)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,g["default"])(),tintMethod:0};h.tintMethod=h.canUseMultiply?h.tintWithMultiply:h.tintWithPerPixel,c["default"]=h},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":76,"../../utils":117}],101:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.vertices=new ArrayBuffer(b),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return a.prototype.destroy=function(){
this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},a}();c["default"]=e},{}],102:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../renderers/webgl/utils/ObjectRenderer"),i=d(h),j=a("../../renderers/webgl/WebGLRenderer"),k=d(j),l=a("../../utils/createIndicesForQuads"),m=d(l),n=a("./generateMultiTextureShader"),o=d(n),p=a("../../renderers/webgl/utils/checkMaxIfStatmentsInShader"),q=d(p),r=a("./BatchBuffer"),s=d(r),t=a("../../settings"),u=d(t),v=a("pixi-gl-core"),w=d(v),x=a("bit-twiddle"),y=d(x),z=0,A=0,B=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));d.vertSize=5,d.vertByteSize=4*d.vertSize,d.size=u["default"].SPRITE_BATCH_SIZE,d.buffers=[];for(var g=1;g<=y["default"].nextPow2(d.size);g*=2)d.buffers.push(new s["default"](4*g*d.vertByteSize));d.indices=(0,m["default"])(d.size),d.shader=null,d.currentIndex=0,z=0,d.groups=[];for(var h=0;h<d.size;h++)d.groups[h]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return d.sprites=[],d.vertexBuffers=[],d.vaos=[],d.vaoMax=2,d.vertexCount=0,d.renderer.on("prerender",d.onPrerender,d),d}return g(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.MAX_TEXTURES=Math.min(a.getParameter(a.MAX_TEXTURE_IMAGE_UNITS),u["default"].SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,q["default"])(this.MAX_TEXTURES,a);var b=this.shader=(0,o["default"])(a,this.MAX_TEXTURES);this.indexBuffer=w["default"].GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.renderer.bindVao(null);for(var c=0;c<this.vaoMax;c++)this.vertexBuffers[c]=w["default"].GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),this.vaos[c]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[c],b.attributes.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[c],b.attributes.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[c],b.attributes.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[c],b.attributes.aTextureId,a.FLOAT,!1,this.vertByteSize,16);this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},b.prototype.onPrerender=function(){this.vertexCount=0},b.prototype.render=function(a){this.currentIndex>=this.size&&this.flush(),a.texture._uvs&&(this.sprites[this.currentIndex++]=a)},b.prototype.flush=function(){if(0!==this.currentIndex){var a=this.renderer.gl,b=this.MAX_TEXTURES,c=y["default"].nextPow2(this.currentIndex),d=y["default"].log2(c),e=this.buffers[d],f=this.sprites,g=this.groups,h=e.float32View,i=e.uint32View,j=this.boundTextures,k=this.renderer.boundTextures,l=this.renderer.textureGC.count,m=0,n=void 0,o=void 0,p=1,q=0,r=g[0],s=void 0,t=void 0,v=f[0].blendMode;r.textureCount=0,r.start=0,r.blend=v,z++;var x=void 0;for(x=0;b>x;++x)j[x]=k[x],j[x]._virtalBoundId=x;for(x=0;x<this.currentIndex;++x){var B=f[x];if(n=B._texture.baseTexture,v!==B.blendMode&&(v=B.blendMode,o=null,q=b,z++),o!==n&&(o=n,n._enabled!==z)){if(q===b&&(z++,r.size=x-r.start,q=0,r=g[p++],r.blend=v,r.textureCount=0,r.start=x),n.touched=l,-1===n._virtalBoundId)for(var C=0;b>C;++C){var D=(C+A)%b,E=j[D];if(E._enabled!==z){A++,E._virtalBoundId=-1,n._virtalBoundId=D,j[D]=n;break}}n._enabled=z,r.textureCount++,r.ids[q]=n._virtalBoundId,r.textures[q++]=n}if(s=B.vertexData,t=B._texture._uvs.uvsUint32,this.renderer.roundPixels){var F=this.renderer.resolution;h[m]=(s[0]*F|0)/F,h[m+1]=(s[1]*F|0)/F,h[m+5]=(s[2]*F|0)/F,h[m+6]=(s[3]*F|0)/F,h[m+10]=(s[4]*F|0)/F,h[m+11]=(s[5]*F|0)/F,h[m+15]=(s[6]*F|0)/F,h[m+16]=(s[7]*F|0)/F}else h[m]=s[0],h[m+1]=s[1],h[m+5]=s[2],h[m+6]=s[3],h[m+10]=s[4],h[m+11]=s[5],h[m+15]=s[6],h[m+16]=s[7];i[m+2]=t[0],i[m+7]=t[1],i[m+12]=t[2],i[m+17]=t[3],i[m+3]=i[m+8]=i[m+13]=i[m+18]=B._tintRGB+(255*B.worldAlpha<<24),h[m+4]=h[m+9]=h[m+14]=h[m+19]=n._virtalBoundId,m+=20}for(r.size=x-r.start,u["default"].CAN_UPLOAD_SAME_BUFFER?this.vertexBuffers[this.vertexCount].upload(e.vertices,0,!0):(this.vaoMax<=this.vertexCount&&(this.vaoMax++,this.vertexBuffers[this.vertexCount]=w["default"].GLBuffer.createVertexBuffer(a,null,a.STREAM_DRAW),this.vaos[this.vertexCount]=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aVertexPosition,a.FLOAT,!1,this.vertByteSize,0).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureCoord,a.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aColor,a.UNSIGNED_BYTE,!0,this.vertByteSize,12).addAttribute(this.vertexBuffers[this.vertexCount],this.shader.attributes.aTextureId,a.FLOAT,!1,this.vertByteSize,16)),this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(e.vertices,0,!1),this.vertexCount++),x=0;b>x;++x)k[x]._virtalBoundId=-1;for(x=0;p>x;++x){for(var G=g[x],H=G.textureCount,I=0;H>I;I++)o=G.textures[I],k[G.ids[I]]!==o&&this.renderer.bindTexture(o,G.ids[I],!0),o._virtalBoundId=-1;this.renderer.state.setBlendMode(G.blend),a.drawElements(a.TRIANGLES,6*G.size,a.UNSIGNED_SHORT,6*G.start*2)}this.currentIndex=0}},b.prototype.start=function(){this.renderer.bindShader(this.shader),u["default"].CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},b.prototype.stop=function(){this.flush()},b.prototype.destroy=function(){for(var b=0;b<this.vaoMax;b++)this.vertexBuffers[b]&&this.vertexBuffers[b].destroy(),this.vaos[b]&&this.vaos[b].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),a.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var c=0;c<this.buffers.length;++c)this.buffers[c].destroy()},b}(i["default"]);c["default"]=B,k["default"].registerPlugin("sprite",B)},{"../../renderers/webgl/WebGLRenderer":80,"../../renderers/webgl/utils/ObjectRenderer":90,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":93,"../../settings":97,"../../utils/createIndicesForQuads":115,"./BatchBuffer":101,"./generateMultiTextureShader":103,"bit-twiddle":1,"pixi-gl-core":12}],103:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){var c="attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\nattribute vec4 aColor;\r\nattribute float aTextureId;\r\n\r\nuniform mat3 projectionMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\nvarying float vTextureId;\r\n\r\nvoid main(void){\r\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = aTextureCoord;\r\n    vTextureId = aTextureId;\r\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a);\r\n}\r\n",d=i;d=d.replace(/%count%/gi,b),d=d.replace(/%forloop%/gi,f(b));for(var e=new h["default"](a,c,d),g=[],j=0;b>j;j++)g[j]=j;return e.bind(),e.uniforms.uSamplers=g,e}function f(a){var b="";b+="\n",b+="\n";for(var c=0;a>c;c++)c>0&&(b+="\nelse "),a-1>c&&(b+="if(textureId == "+c+".0)"),b+="\n{",b+="\n	color = texture2D(uSamplers["+c+"], vTextureCoord);",b+="\n}";return b+="\n",b+="\n"}c.__esModule=!0,c["default"]=e;var g=a("../../Shader"),h=d(g),i=(a("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":41,path:22}],104:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../sprites/Sprite"),j=d(i),k=a("../textures/Texture"),l=d(k),m=a("../math"),n=a("../utils"),o=a("../const"),p=a("../settings"),q=d(p),r=a("./TextStyle"),s=d(r),t={texture:!0,children:!1,baseTexture:!0},u=function(a){function b(c,d){e(this,b);var g=document.createElement("canvas");g.width=3,g.height=3;var h=l["default"].fromCanvas(g);h.orig=new m.Rectangle,h.trim=new m.Rectangle;var i=f(this,a.call(this,h));return i.canvas=g,i.context=i.canvas.getContext("2d"),i.resolution=q["default"].RESOLUTION,i._text=null,i._style=null,i._styleListener=null,i._font="",i.text=c,i.style=d,i.localStyleID=-1,i}return g(b,a),b.prototype.updateText=function(a){var c=this._style;if(this.localStyleID!==c.styleID&&(this.dirty=!0,this.localStyleID=c.styleID),this.dirty||!a){this._font=b.getFontStyle(c),this.context.font=this._font;for(var d=c.wordWrap?this.wordWrap(this._text):this._text,e=d.split(/(?:\r\n|\r|\n)/),f=new Array(e.length),g=0,h=b.calculateFontProperties(this._font),i=0;i<e.length;i++){var j=this.context.measureText(e[i]).width+(e[i].length-1)*c.letterSpacing;f[i]=j,g=Math.max(g,j)}var k=g+c.strokeThickness;c.dropShadow&&(k+=c.dropShadowDistance),k+=2*c.padding,this.canvas.width=Math.ceil((k+this.context.lineWidth)*this.resolution);var l=this.style.lineHeight||h.fontSize+c.strokeThickness,m=Math.max(l,h.fontSize+c.strokeThickness)+(e.length-1)*l;c.dropShadow&&(m+=c.dropShadowDistance),this.canvas.height=Math.ceil((m+2*this._style.padding)*this.resolution),this.context.scale(this.resolution,this.resolution),this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this._font,this.context.strokeStyle=c.stroke,this.context.lineWidth=c.strokeThickness,this.context.textBaseline=c.textBaseline,this.context.lineJoin=c.lineJoin,this.context.miterLimit=c.miterLimit;var n=void 0,o=void 0;if(c.dropShadow){c.dropShadowBlur>0?(this.context.shadowColor=c.dropShadowColor,this.context.shadowBlur=c.dropShadowBlur):this.context.fillStyle=c.dropShadowColor;for(var p=Math.cos(c.dropShadowAngle)*c.dropShadowDistance,q=Math.sin(c.dropShadowAngle)*c.dropShadowDistance,r=0;r<e.length;r++)n=c.strokeThickness/2,o=c.strokeThickness/2+r*l+h.ascent,"right"===c.align?n+=g-f[r]:"center"===c.align&&(n+=(g-f[r])/2),c.fill&&(this.drawLetterSpacing(e[r],n+p+c.padding,o+q+c.padding),c.stroke&&c.strokeThickness&&(this.context.strokeStyle=c.dropShadowColor,this.drawLetterSpacing(e[r],n+p+c.padding,o+q+c.padding,!0),this.context.strokeStyle=c.stroke))}this.context.fillStyle=this._generateFillStyle(c,e);for(var s=0;s<e.length;s++)n=c.strokeThickness/2,o=c.strokeThickness/2+s*l+h.ascent,"right"===c.align?n+=g-f[s]:"center"===c.align&&(n+=(g-f[s])/2),c.stroke&&c.strokeThickness&&this.drawLetterSpacing(e[s],n+c.padding,o+c.padding,!0),c.fill&&this.drawLetterSpacing(e[s],n+c.padding,o+c.padding);this.updateTexture()}},b.prototype.drawLetterSpacing=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3],e=this._style,f=e.letterSpacing;if(0===f)return void(d?this.context.strokeText(a,b,c):this.context.fillText(a,b,c));for(var g=String.prototype.split.call(a,""),h=b,i=0,j="";i<a.length;)j=g[i++],d?this.context.strokeText(j,h,c):this.context.fillText(j,h,c),h+=this.context.measureText(j).width+f},b.prototype.updateTexture=function(){var a=this._texture,b=this._style;a.baseTexture.hasLoaded=!0,a.baseTexture.resolution=this.resolution,a.baseTexture.realWidth=this.canvas.width,a.baseTexture.realHeight=this.canvas.height,a.baseTexture.width=this.canvas.width/this.resolution,a.baseTexture.height=this.canvas.height/this.resolution,a.trim.width=a._frame.width=this.canvas.width/this.resolution,a.trim.height=a._frame.height=this.canvas.height/this.resolution,a.trim.x=-b.padding,a.trim.y=-b.padding,a.orig.width=a._frame.width-2*b.padding,a.orig.height=a._frame.height-2*b.padding,this._onTextureUpdate(),a.baseTexture.emit("update",a.baseTexture),this.dirty=!1},b.prototype.renderWebGL=function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0),this.updateText(!0),a.prototype.renderWebGL.call(this,b)},b.prototype._renderCanvas=function(b){this.resolution!==b.resolution&&(this.resolution=b.resolution,this.dirty=!0),this.updateText(!0),a.prototype._renderCanvas.call(this,b)},b.prototype.wordWrap=function(a){for(var b="",c=a.split("\n"),d=this._style.wordWrapWidth,e=0;e<c.length;e++){for(var f=d,g=c[e].split(" "),h=0;h<g.length;h++){var i=this.context.measureText(g[h]).width;if(this._style.breakWords&&i>d)for(var j=g[h].split(""),k=0;k<j.length;k++){var l=this.context.measureText(j[k]).width;l>f?(b+="\n"+j[k],f=d-l):(0===k&&(b+=" "),b+=j[k],f-=l)}else{var m=i+this.context.measureText(" ").width;0===h||m>f?(h>0&&(b+="\n"),b+=g[h],f=d-i):(f-=m,b+=" "+g[h])}}e<c.length-1&&(b+="\n")}return b},b.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},b.prototype._onStyleChange=function(){this.dirty=!0},b.prototype._generateFillStyle=function(a,b){if(!Array.isArray(a.fill))return a.fill;if(navigator.isCocoonJS)return a.fill[0];var c=void 0,d=void 0,e=void 0,f=void 0,g=this.canvas.width/this.resolution,h=this.canvas.height/this.resolution;if(a.fillGradientType===o.TEXT_GRADIENT.LINEAR_VERTICAL){c=this.context.createLinearGradient(g/2,0,g/2,h),d=(a.fill.length+1)*b.length,e=0;for(var i=0;i<b.length;i++){e+=1;for(var j=0;j<a.fill.length;j++)f=e/d,c.addColorStop(f,a.fill[j]),e++}}else{c=this.context.createLinearGradient(0,h/2,g,h/2),d=a.fill.length+1,e=1;for(var k=0;k<a.fill.length;k++)f=e/d,c.addColorStop(f,a.fill[k]),e++}return c},b.prototype.destroy=function(b){"boolean"==typeof b&&(b={children:b}),b=Object.assign({},t,b),a.prototype.destroy.call(this,b),this.context=null,this.canvas=null,this._style=null},b.getFontStyle=function(a){a=a||{},a instanceof s["default"]||(a=new s["default"](a));var b="number"==typeof a.fontSize?a.fontSize+"px":a.fontSize;return a.fontStyle+" "+a.fontVariant+" "+a.fontWeight+" "+b+' "'+a.fontFamily+'"'},b.calculateFontProperties=function(a){if(b.fontPropertiesCache[a])return b.fontPropertiesCache[a];var c={},d=b.fontPropertiesCanvas,e=b.fontPropertiesContext;e.font=a;var f=Math.ceil(e.measureText("|MÉq").width),g=Math.ceil(e.measureText("M").width),h=2*g;g=1.4*g|0,d.width=f,d.height=h,e.fillStyle="#f00",e.fillRect(0,0,f,h),e.font=a,e.textBaseline="alphabetic",e.fillStyle="#000",e.fillText("|MÉq",0,g);var i=e.getImageData(0,0,f,h).data,j=i.length,k=4*f,l=0,m=0,n=!1;for(l=0;g>l;++l){for(var o=0;k>o;o+=4)if(255!==i[m+o]){n=!0;break}if(n)break;m+=k}for(c.ascent=g-l,m=j-k,n=!1,l=h;l>g;--l){for(var p=0;k>p;p+=4)if(255!==i[m+p]){n=!0;break}if(n)break;m-=k}return c.descent=l-g,c.fontSize=c.ascent+c.descent,b.fontPropertiesCache[a]=c,c},h(b,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this.texture.orig.width},set:function(a){this.updateText(!0);var b=(0,n.sign)(this.scale.x)||1;this.scale.x=b*a/this.texture.orig.width,this._width=a}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(a){this.updateText(!0);var b=(0,n.sign)(this.scale.y)||1;this.scale.y=b*a/this.texture.orig.height,this._height=a}},{key:"style",get:function(){return this._style},set:function(a){a=a||{},a instanceof s["default"]?this._style=a:this._style=new s["default"](a),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(a){a=a||" ",a=a.toString(),this._text!==a&&(this._text=a,this.dirty=!0)}}]),b}(j["default"]);c["default"]=u,u.fontPropertiesCache={},u.fontPropertiesCanvas=document.createElement("canvas"),u.fontPropertiesContext=u.fontPropertiesCanvas.getContext("2d")},{"../const":42,"../math":66,"../settings":97,"../sprites/Sprite":98,"../textures/Texture":109,"../utils":117,"./TextStyle":105}],105:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a){return"number"==typeof a?(0,i.hex2string)(a):("string"==typeof a&&0===a.indexOf("0x")&&(a=a.replace("0x","#")),a)}function f(a){if(Array.isArray(a)){for(var b=0;b<a.length;++b)a[b]=e(a[b]);return a}return e(a)}c.__esModule=!0;var g=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),h=a("../const"),i=a("../utils"),j={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:h.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",wordWrap:!1,wordWrapWidth:100},k=function(){function a(b){d(this,a),this.styleID=0,Object.assign(this,j,b)}return a.prototype.clone=function(){var b={};for(var c in j)b[c]=this[c];return new a(b)},a.prototype.reset=function(){Object.assign(this,j)},g(a,[{key:"align",get:function(){return this._align},set:function(a){this._align!==a&&(this._align=a,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(a){this._breakWords!==a&&(this._breakWords=a,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(a){this._dropShadow!==a&&(this._dropShadow=a,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(a){this._dropShadowAngle!==a&&(this._dropShadowAngle=a,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(a){this._dropShadowBlur!==a&&(this._dropShadowBlur=a,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(a){var b=f(a);this._dropShadowColor!==b&&(this._dropShadowColor=b,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(a){this._dropShadowDistance!==a&&(this._dropShadowDistance=a,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(a){var b=f(a);this._fill!==b&&(this._fill=b,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(a){this._fillGradientType!==a&&(this._fillGradientType=a,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(a){this.fontFamily!==a&&(this._fontFamily=a,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(a){this._fontSize!==a&&(this._fontSize=a,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(a){this._fontStyle!==a&&(this._fontStyle=a,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(a){this._fontVariant!==a&&(this._fontVariant=a,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(a){this._fontWeight!==a&&(this._fontWeight=a,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(a){this._letterSpacing!==a&&(this._letterSpacing=a,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(a){this._lineHeight!==a&&(this._lineHeight=a,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(a){this._lineJoin!==a&&(this._lineJoin=a,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(a){this._miterLimit!==a&&(this._miterLimit=a,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(a){this._padding!==a&&(this._padding=a,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(a){var b=f(a);this._stroke!==b&&(this._stroke=b,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(a){this._strokeThickness!==a&&(this._strokeThickness=a,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(a){this._textBaseline!==a&&(this._textBaseline=a,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(a){this._wordWrap!==a&&(this._wordWrap=a,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(a){this._wordWrapWidth!==a&&(this._wordWrapWidth=a,this.styleID++)}}]),a}();c["default"]=k},{"../const":42,"../utils":117}],106:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./BaseTexture"),i=d(h),j=a("../settings"),k=d(j),l=k["default"].RESOLUTION,m=k["default"].SCALE_MODE,n=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,g=arguments[2],h=arguments[3];e(this,b);var i=f(this,a.call(this,null,g));return i.resolution=h||l,i.width=c,i.height=d,i.realWidth=i.width*i.resolution,i.realHeight=i.height*i.resolution,i.scaleMode=g||m,i.hasLoaded=!0,i._glRenderTargets={},i._canvasRenderTarget=null,i.valid=!1,i}return g(b,a),b.prototype.resize=function(a,b){a===this.width&&b===this.height||(this.valid=a>0&&b>0,this.width=a,this.height=b,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},b.prototype.destroy=function(){a.prototype.destroy.call(this,!0),this.renderer=null},b}(i["default"]);c["default"]=n},{"../settings":97,"./BaseTexture":107}],107:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},i=a("../utils"),j=a("../settings"),k=d(j),l=a("eventemitter3"),m=d(l),n=a("../utils/determineCrossOrigin"),o=d(n),p=a("bit-twiddle"),q=d(p),r=function(a){function b(c,d,g){e(this,b);var h=f(this,a.call(this));return h.uid=(0,i.uid)(),h.touched=0,h.resolution=g||k["default"].RESOLUTION,h.width=100,h.height=100,h.realWidth=100,h.realHeight=100,h.scaleMode=d||k["default"].SCALE_MODE,h.hasLoaded=!1,h.isLoading=!1,h.source=null,h.origSource=null,h.imageType=null,h.sourceScale=1,h.premultipliedAlpha=!0,h.imageUrl=null,h.isPowerOfTwo=!1,h.mipmap=k["default"].MIPMAP_TEXTURES,h.wrapMode=k["default"].WRAP_MODE,h._glTextures={},h._enabled=0,h._virtalBoundId=-1,c&&h.loadSource(c),h}return g(b,a),b.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=q["default"].isPow2(this.realWidth)&&q["default"].isPow2(this.realHeight)),this.emit("update",this)},b.prototype.loadSource=function(a){var b=this,c=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,c&&this.source&&(this.source.onload=null,this.source.onerror=null);var d=!this.source;if(this.source=a,(a.src&&a.complete||a.getContext)&&a.width&&a.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),d&&this.emit("loaded",this);else if(!a.getContext){var e=function(){b.isLoading=!0;var d=b;if(a.onload=function(){return d._updateImageType(),a.onload=null,a.onerror=null,d.isLoading?(d.isLoading=!1,d._sourceLoaded(),"svg"===d.imageType?void d._loadSvgSource():void d.emit("loaded",d)):void 0},a.onerror=function(){a.onload=null,a.onerror=null,d.isLoading&&(d.isLoading=!1,d.emit("error",d))},a.complete&&a.src){if(a.onload=null,a.onerror=null,"svg"===d.imageType)return d._loadSvgSource(),{v:void 0};b.isLoading=!1,a.width&&a.height?(b._sourceLoaded(),c&&b.emit("loaded",b)):c&&b.emit("error",b)}}();if("object"===("undefined"==typeof e?"undefined":h(e)))return e.v}},b.prototype._updateImageType=function(){if(this.imageUrl){var a=(0,i.decomposeDataUri)(this.imageUrl),b=void 0;if(a&&"image"===a.mediaType){var c=a.subType.split("+")[0];if(b=(0,i.getUrlFileExtension)("."+c),!b)throw new Error("Invalid image type in data URI.")}else b=(0,i.getUrlFileExtension)(this.imageUrl),b||(b="png");this.imageType=b}},b.prototype._loadSvgSource=function(){if("svg"===this.imageType){var a=(0,i.decomposeDataUri)(this.imageUrl);a?this._loadSvgSourceUsingDataUri(a):this._loadSvgSourceUsingXhr()}},b.prototype._loadSvgSourceUsingDataUri=function(a){var b=void 0;if("base64"===a.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");b=atob(a.data)}else b=a.data;this._loadSvgSourceUsingString(b)},b.prototype._loadSvgSourceUsingXhr=function(){var a=this,b=new XMLHttpRequest;b.onload=function(){if(b.readyState!==b.DONE||200!==b.status)throw new Error("Failed to load SVG using XHR.");a._loadSvgSourceUsingString(b.response)},b.onerror=function(){return a.emit("error",a)},b.open("GET",this.imageUrl,!0),b.send()},b.prototype._loadSvgSourceUsingString=function(a){var b=(0,i.getSvgSize)(a),c=b.width,d=b.height;if(!c||!d)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(c*this.sourceScale),this.realHeight=Math.round(d*this.sourceScale),this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=q["default"].isPow2(this.realWidth)&&q["default"].isPow2(this.realHeight);var e=document.createElement("canvas");e.width=this.realWidth,e.height=this.realHeight,e._pixiId="canvas_"+(0,i.uid)(),e.getContext("2d").drawImage(this.source,0,0,c,d,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=e,i.BaseTextureCache[e._pixiId]=this,this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},b.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},b.prototype.destroy=function(){this.imageUrl&&(delete i.BaseTextureCache[this.imageUrl],delete i.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source&&this.source._pixiId&&delete i.BaseTextureCache[this.source._pixiId],this.source=null,this.dispose()},b.prototype.dispose=function(){this.emit("dispose",this)},b.prototype.updateSourceImage=function(a){this.source.src=a,this.loadSource(this.source)},b.fromImage=function(a,c,d,e){var f=i.BaseTextureCache[a];if(!f){var g=new Image;void 0===c&&0!==a.indexOf("data:")&&(g.crossOrigin=(0,o["default"])(a)),f=new b(g,d),f.imageUrl=a,e&&(f.sourceScale=e),f.resolution=(0,i.getResolutionOfUrl)(a),g.src=a,i.BaseTextureCache[a]=f}return f},b.fromCanvas=function(a,c){a._pixiId||(a._pixiId="canvas_"+(0,i.uid)());var d=i.BaseTextureCache[a._pixiId];return d||(d=new b(a,c),i.BaseTextureCache[a._pixiId]=d),d},b}(m["default"]);c["default"]=r},{"../settings":97,"../utils":117,"../utils/determineCrossOrigin":116,"bit-twiddle":1,eventemitter3:3}],108:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./BaseRenderTexture"),i=d(h),j=a("./Texture"),k=d(j),l=function(a){function b(c,d){e(this,b);var g=null;if(!(c instanceof i["default"])){var h=arguments[1],j=arguments[2],k=arguments[3]||0,l=arguments[4]||1;console.warn("Please use RenderTexture.create("+h+", "+j+") instead of the ctor directly."),g=arguments[0],d=null,c=new i["default"](h,j,k,l)}var m=f(this,a.call(this,c,d));return m.legacyRenderer=g,m.valid=!0,m._updateUvs(),m}return g(b,a),b.prototype.resize=function(a,b,c){this.valid=a>0&&b>0,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=b,c||this.baseTexture.resize(a,b),this._updateUvs()},b.create=function(a,c,d,e){return new b(new i["default"](a,c,d,e))},b}(k["default"]);c["default"]=l},{"./BaseRenderTexture":106,"./Texture":109}],109:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./BaseTexture"),j=d(i),k=a("./VideoBaseTexture"),l=d(k),m=a("./TextureUvs"),n=d(m),o=a("eventemitter3"),p=d(o),q=a("../math"),r=a("../utils"),s=function(a){function b(c,d,g,h,i){e(this,b);var j=f(this,a.call(this));if(j.noFrame=!1,d||(j.noFrame=!0,d=new q.Rectangle(0,0,1,1)),
c instanceof b&&(c=c.baseTexture),j.baseTexture=c,j._frame=d,j.trim=h,j.valid=!1,j.requiresUpdate=!1,j._uvs=null,j.orig=g||d,j._rotate=Number(i||0),i===!0)j._rotate=2;else if(j._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return c.hasLoaded?(j.noFrame&&(d=new q.Rectangle(0,0,c.width,c.height),c.on("update",j.onBaseTextureUpdated,j)),j.frame=d):c.once("loaded",j.onBaseTextureLoaded,j),j._updateID=0,j.transform=null,j}return g(b,a),b.prototype.update=function(){this.baseTexture.update()},b.prototype.onBaseTextureLoaded=function(a){this._updateID++,this.noFrame?this.frame=new q.Rectangle(0,0,a.width,a.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},b.prototype.onBaseTextureUpdated=function(a){this._updateID++,this._frame.width=a.width,this._frame.height=a.height,this.emit("update",this)},b.prototype.destroy=function(a){this.baseTexture&&(a&&(r.TextureCache[this.baseTexture.imageUrl]&&delete r.TextureCache[this.baseTexture.imageUrl],this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,this.off("dispose",this.dispose,this),this.off("update",this.update,this)},b.prototype.clone=function(){return new b(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},b.prototype._updateUvs=function(){this._uvs||(this._uvs=new n["default"]),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},b.fromImage=function(a,c,d,e){var f=r.TextureCache[a];return f||(f=new b(j["default"].fromImage(a,c,d,e)),r.TextureCache[a]=f),f},b.fromFrame=function(a){var b=r.TextureCache[a];if(!b)throw new Error('The frameId "'+a+'" does not exist in the texture cache');return b},b.fromCanvas=function(a,c){return new b(j["default"].fromCanvas(a,c))},b.fromVideo=function(a,c){return"string"==typeof a?b.fromVideoUrl(a,c):new b(l["default"].fromVideo(a,c))},b.fromVideoUrl=function(a,c){return new b(l["default"].fromUrl(a,c))},b.from=function(a){if("string"==typeof a){var c=r.TextureCache[a];if(!c){var d=null!==a.match(/\.(mp4|webm|ogg|h264|avi|mov)$/);return d?b.fromVideoUrl(a):b.fromImage(a)}return c}return a instanceof HTMLImageElement?new b(new j["default"](a)):a instanceof HTMLCanvasElement?b.fromCanvas(a):a instanceof HTMLVideoElement?b.fromVideo(a):a instanceof j["default"]?new b(a):a},b.addTextureToCache=function(a,b){r.TextureCache[b]=a},b.removeTextureFromCache=function(a){var b=r.TextureCache[a];return delete r.TextureCache[a],delete r.BaseTextureCache[a],b},h(b,[{key:"frame",get:function(){return this._frame},set:function(a){if(this._frame=a,this.noFrame=!1,a.x+a.width>this.baseTexture.width||a.y+a.height>this.baseTexture.height)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=a&&a.width&&a.height&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=a),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(a){this._rotate=a,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig?this.orig.width:0}},{key:"height",get:function(){return this.orig?this.orig.height:0}}]),b}(p["default"]);c["default"]=s,s.EMPTY=new s(new j["default"]),s.EMPTY.destroy=function(){},s.EMPTY.on=function(){},s.EMPTY.once=function(){},s.EMPTY.emit=function(){}},{"../math":66,"../utils":117,"./BaseTexture":107,"./TextureUvs":110,"./VideoBaseTexture":111,eventemitter3:3}],110:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../math/GroupD8"),g=d(f),h=function(){function a(){e(this,a),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return a.prototype.set=function(a,b,c){var d=b.width,e=b.height;if(c){var f=a.width/2/d,h=a.height/2/e,i=a.x/d+f,j=a.y/e+h;c=g["default"].add(c,g["default"].NW),this.x0=i+f*g["default"].uX(c),this.y0=j+h*g["default"].uY(c),c=g["default"].add(c,2),this.x1=i+f*g["default"].uX(c),this.y1=j+h*g["default"].uY(c),c=g["default"].add(c,2),this.x2=i+f*g["default"].uX(c),this.y2=j+h*g["default"].uY(c),c=g["default"].add(c,2),this.x3=i+f*g["default"].uX(c),this.y3=j+h*g["default"].uY(c)}else this.x0=a.x/d,this.y0=a.y/e,this.x1=(a.x+a.width)/d,this.y1=a.y/e,this.x2=(a.x+a.width)/d,this.y2=(a.y+a.height)/e,this.x3=a.x/d,this.y3=(a.y+a.height)/e;this.uvsUint32[0]=(65535*this.y0&65535)<<16|65535*this.x0&65535,this.uvsUint32[1]=(65535*this.y1&65535)<<16|65535*this.x1&65535,this.uvsUint32[2]=(65535*this.y2&65535)<<16|65535*this.x2&65535,this.uvsUint32[3]=(65535*this.y3&65535)<<16|65535*this.x3&65535},a}();c["default"]=h},{"../math/GroupD8":62}],111:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){b||(b="video/"+a.substr(a.lastIndexOf(".")+1));var c=document.createElement("source");return c.src=a,c.type=b,c}c.__esModule=!0;var j=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),k=a("./BaseTexture"),l=e(k),m=a("../utils"),n=a("../ticker"),o=d(n),p=function(a){function b(c,d){if(f(this,b),!c)throw new Error("No video source element specified.");(c.readyState===c.HAVE_ENOUGH_DATA||c.readyState===c.HAVE_FUTURE_DATA)&&c.width&&c.height&&(c.complete=!0);var e=g(this,a.call(this,c,d));return e.width=c.videoWidth,e.height=c.videoHeight,e._autoUpdate=!0,e._isAutoUpdating=!1,e.autoPlay=!0,e.update=e.update.bind(e),e._onCanPlay=e._onCanPlay.bind(e),c.addEventListener("play",e._onPlayStart.bind(e)),c.addEventListener("pause",e._onPlayStop.bind(e)),e.hasLoaded=!1,e.__loaded=!1,e._isSourceReady()?e._onCanPlay():(c.addEventListener("canplay",e._onCanPlay),c.addEventListener("canplaythrough",e._onCanPlay)),e}return h(b,a),b.prototype._isSourcePlaying=function(){var a=this.source;return a.currentTime>0&&a.paused===!1&&a.ended===!1&&a.readyState>2},b.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},b.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(o.shared.add(this.update,this),this._isAutoUpdating=!0)},b.prototype._onPlayStop=function(){this._isAutoUpdating&&(o.shared.remove(this.update,this),this._isAutoUpdating=!1)},b.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},b.prototype.destroy=function(){this._isAutoUpdating&&o.shared.remove(this.update,this),this.source&&this.source._pixiId&&(delete m.BaseTextureCache[this.source._pixiId],delete this.source._pixiId),a.prototype.destroy.call(this)},b.fromVideo=function(a,c){a._pixiId||(a._pixiId="video_"+(0,m.uid)());var d=m.BaseTextureCache[a._pixiId];return d||(d=new b(a,c),m.BaseTextureCache[a._pixiId]=d),d},b.fromUrl=function(a,c){var d=document.createElement("video");if(d.setAttribute("webkit-playsinline",""),d.setAttribute("playsinline",""),Array.isArray(a))for(var e=0;e<a.length;++e)d.appendChild(i(a[e].src||a[e],a[e].mime));else d.appendChild(i(a.src||a,a.mime));return d.load(),b.fromVideo(d,c)},j(b,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(a){a!==this._autoUpdate&&(this._autoUpdate=a,!this._autoUpdate&&this._isAutoUpdating?(o.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(o.shared.add(this.update,this),this._isAutoUpdating=!0))}}]),b}(l["default"]);c["default"]=p,p.fromUrls=p.fromUrl},{"../ticker":113,"../utils":117,"./BaseTexture":107}],112:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../settings"),h=d(g),i=a("eventemitter3"),j=d(i),k="tick",l=function(){function a(){var b=this;e(this,a),this._emitter=new j["default"],this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/h["default"].TARGET_FPMS,this.lastTime=0,this.speed=1,this.started=!1,this._tick=function(a){b._requestId=null,b.started&&(b.update(a),b.started&&null===b._requestId&&b._emitter.listeners(k,!0)&&(b._requestId=requestAnimationFrame(b._tick)))}}return a.prototype._requestIfNeeded=function(){null===this._requestId&&this._emitter.listeners(k,!0)&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},a.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},a.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},a.prototype.add=function(a,b){return this._emitter.on(k,a,b),this._startIfPossible(),this},a.prototype.addOnce=function(a,b){return this._emitter.once(k,a,b),this._startIfPossible(),this},a.prototype.remove=function(a,b){return this._emitter.off(k,a,b),this._emitter.listeners(k,!0)||this._cancelIfNeeded(),this},a.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},a.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},a.prototype.update=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),b=void 0;a>this.lastTime?(b=this.elapsedMS=a-this.lastTime,b>this._maxElapsedMS&&(b=this._maxElapsedMS),this.deltaTime=b*h["default"].TARGET_FPMS*this.speed,this._emitter.emit(k,this.deltaTime)):this.deltaTime=this.elapsedMS=0,this.lastTime=a},f(a,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(a){var b=Math.min(Math.max(0,a)/1e3,h["default"].TARGET_FPMS);this._maxElapsedMS=1/b}}]),a}();c["default"]=l},{"../settings":97,eventemitter3:3}],113:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0,c.Ticker=c.shared=void 0;var e=a("./Ticker"),f=d(e),g=new f["default"];g.autoStart=!0,c.shared=g,c.Ticker=f["default"]},{"./Ticker":112}],114:[function(a,b,c){"use strict";function d(){var a=!!navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform);return!a}c.__esModule=!0,c["default"]=d},{}],115:[function(a,b,c){"use strict";function d(a){for(var b=6*a,c=new Uint16Array(b),d=0,e=0;b>d;d+=6,e+=4)c[d+0]=e+0,c[d+1]=e+1,c[d+2]=e+2,c[d+3]=e+0,c[d+4]=e+2,c[d+5]=e+3;return c}c.__esModule=!0,c["default"]=d},{}],116:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===a.indexOf("data:"))return"";b=b||window.location,h||(h=document.createElement("a")),h.href=a,a=g["default"].parse(h.href);var c=!a.port&&""===b.port||a.port===b.port;return a.hostname===b.hostname&&c&&a.protocol===b.protocol?"":"anonymous"}c.__esModule=!0,c["default"]=e;var f=a("url"),g=d(f),h=void 0},{url:28}],117:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(){return++B}function g(a,b){return b=b||[],b[0]=(a>>16&255)/255,b[1]=(a>>8&255)/255,b[2]=(255&a)/255,b}function h(a){return a=a.toString(16),a="000000".substr(0,6-a.length)+a,"#"+a}function i(a){return(255*a[0]<<16)+(255*a[1]<<8)+255*a[2]}function j(a,b){var c=u["default"].RETINA_PREFIX.exec(a);return c?parseFloat(c[1]):void 0!==b?b:1}function k(a){var b=s.DATA_URI.exec(a);return b?{mediaType:b[1]?b[1].toLowerCase():void 0,subType:b[2]?b[2].toLowerCase():void 0,encoding:b[3]?b[3].toLowerCase():void 0,data:b[4]}:void 0}function l(a){var b=s.URL_FILE_EXTENSION.exec(a);return b?b[1].toLowerCase():void 0}function m(a){var b=s.SVG_SIZE.exec(a),c={};return b&&(c[b[1]]=Math.round(parseFloat(b[3])),c[b[5]]=Math.round(parseFloat(b[7]))),c}function n(){C=!0}function o(a){if(!C){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var b=["\n %c %c %c Pixi.js "+s.VERSION+" - ✰ "+a+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,b)}else window.console&&window.console.log("Pixi.js "+s.VERSION+" - "+a+" - http://www.pixijs.com/");C=!0}}function p(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var b=document.createElement("canvas"),c=b.getContext("webgl",a)||b.getContext("experimental-webgl",a),d=!(!c||!c.getContextAttributes().stencil);if(c){var e=c.getExtension("WEBGL_lose_context");e&&e.loseContext()}return c=null,d}catch(a){return!1}}function q(a){return 0===a?0:0>a?-1:1}function r(a,b,c){var d=a.length;if(!(b>=d||0===c)){c=b+c>d?d-b:c;for(var e=d-c,f=b;e>f;++f)a[f]=a[f+c];a.length=e}}c.__esModule=!0,c.BaseTextureCache=c.TextureCache=c.pluginTarget=c.EventEmitter=c.isMobile=void 0,c.uid=f,c.hex2rgb=g,c.hex2string=h,c.rgb2hex=i,c.getResolutionOfUrl=j,c.decomposeDataUri=k,c.getUrlFileExtension=l,c.getSvgSize=m,c.skipHello=n,c.sayHello=o,c.isWebGLSupported=p,c.sign=q,c.removeItems=r;var s=a("../const"),t=a("../settings"),u=e(t),v=a("eventemitter3"),w=e(v),x=a("./pluginTarget"),y=e(x),z=a("ismobilejs"),A=d(z),B=0,C=!1;c.isMobile=A,c.EventEmitter=w["default"],c.pluginTarget=y["default"],c.TextureCache={},c.BaseTextureCache={}},{"../const":42,"../settings":97,"./pluginTarget":119,eventemitter3:3,ismobilejs:4}],118:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){return g["default"].tablet||g["default"].phone?4:a}c.__esModule=!0,c["default"]=e;var f=a("ismobilejs"),g=d(f)},{ismobilejs:4}],119:[function(a,b,c){"use strict";function d(a){a.__plugins={},a.registerPlugin=function(b,c){a.__plugins[b]=c},a.prototype.initPlugins=function(){this.plugins=this.plugins||{};for(var b in a.__plugins)this.plugins[b]=new a.__plugins[b](this)},a.prototype.destroyPlugins=function(){for(var a in this.plugins)this.plugins[a].destroy(),this.plugins[a]=null;this.plugins=null}}c.__esModule=!0,c["default"]={mixin:function(a){d(a)}}},{}],120:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){}var f=a("./core"),g=d(f),h=a("./mesh"),i=d(h),j=a("./particles"),k=d(j),l=a("./extras"),m=d(l),n=a("./filters"),o=d(n),p=a("./prepare"),q=d(p);g.SpriteBatch=function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")},g.AssetLoader=function(){throw new ReferenceError("The loader system was overhauled in pixi v3, please see the new PIXI.loaders.Loader class.")},Object.defineProperties(g,{Stage:{enumerable:!0,get:function(){return e("You do not need to use a PIXI Stage any more, you can simply render any container."),g.Container}},DisplayObjectContainer:{enumerable:!0,get:function(){return e("DisplayObjectContainer has been shortened to Container, please use Container from now on."),g.Container}},Strip:{enumerable:!0,get:function(){return e("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),i.Mesh}},Rope:{enumerable:!0,get:function(){return e("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),i.Rope}},ParticleContainer:{enumerable:!0,get:function(){return e("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),k.ParticleContainer}},MovieClip:{enumerable:!0,get:function(){return e("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),m.AnimatedSprite}},TilingSprite:{enumerable:!0,get:function(){return e("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),m.TilingSprite}},BitmapText:{enumerable:!0,get:function(){return e("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),m.BitmapText}},blendModes:{enumerable:!0,get:function(){return e("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),g.BLEND_MODES}},scaleModes:{enumerable:!0,get:function(){return e("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),g.SCALE_MODES}},BaseTextureCache:{enumerable:!0,get:function(){return e("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),g.utils.BaseTextureCache}},TextureCache:{enumerable:!0,get:function(){return e("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),g.utils.TextureCache}},math:{enumerable:!0,get:function(){return e("The math namespace is deprecated, please access members already accessible on PIXI."),g}},AbstractFilter:{enumerable:!0,get:function(){return e("AstractFilter has been renamed to Filter, please use PIXI.Filter"),g.Filter}},TransformManual:{enumerable:!0,get:function(){return e("TransformManual has been renamed to TransformBase, please update your pixi-spine"),g.TransformBase}},TARGET_FPMS:{enumerable:!0,get:function(){return e("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),g.settings.TARGET_FPMS},set:function(a){e("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),g.settings.TARGET_FPMS=a}},FILTER_RESOLUTION:{enumerable:!0,get:function(){return e("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),g.settings.FILTER_RESOLUTION},set:function(a){e("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),g.settings.FILTER_RESOLUTION=a}},RESOLUTION:{enumerable:!0,get:function(){return e("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),g.settings.RESOLUTION},set:function(a){e("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),g.settings.RESOLUTION=a}},MIPMAP_TEXTURES:{enumerable:!0,get:function(){return e("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),g.settings.MIPMAP_TEXTURES},set:function(a){e("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),g.settings.MIPMAP_TEXTURES=a}},SPRITE_BATCH_SIZE:{enumerable:!0,get:function(){return e("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),g.settings.SPRITE_BATCH_SIZE},set:function(a){e("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),g.settings.SPRITE_BATCH_SIZE=a}},SPRITE_MAX_TEXTURES:{enumerable:!0,get:function(){return e("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),g.settings.SPRITE_MAX_TEXTURES},set:function(a){e("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),g.settings.SPRITE_MAX_TEXTURES=a}},RETINA_PREFIX:{enumerable:!0,get:function(){return e("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),g.settings.RETINA_PREFIX},set:function(a){e("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),g.settings.RETINA_PREFIX=a}},DEFAULT_RENDER_OPTIONS:{enumerable:!0,get:function(){return e("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),g.settings.RENDER_OPTIONS}}});for(var r=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION"}],s=function(a){var b=r[a];Object.defineProperty(g[b.parent],"DEFAULT",{enumerable:!0,get:function(){return e("PIXI."+b.parent+".DEFAULT has been deprecated, please use PIXI.settings."+b.target),g.settings[b.target]},set:function(a){e("PIXI."+b.parent+".DEFAULT has been deprecated, please use PIXI.settings."+b.target),g.settings[b.target]=a}})},t=0;t<r.length;t++)s(t);Object.defineProperties(m,{MovieClip:{enumerable:!0,get:function(){return e("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),m.AnimatedSprite}}}),g.DisplayObject.prototype.generateTexture=function(a,b,c){return e("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),a.generateTexture(this,b,c)},g.Graphics.prototype.generateTexture=function(a,b){return e("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(a,b)},g.RenderTexture.prototype.render=function(a,b,c,d){this.legacyRenderer.render(a,this,c,b,!d),e("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},g.RenderTexture.prototype.getImage=function(a){return e("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(a)},g.RenderTexture.prototype.getBase64=function(a){return e("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(a)},g.RenderTexture.prototype.getCanvas=function(a){return e("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(a)},g.RenderTexture.prototype.getPixels=function(a){return e("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(a)},g.Sprite.prototype.setTexture=function(a){this.texture=a,e("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},m.BitmapText.prototype.setText=function(a){this.text=a,e("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")},g.Text.prototype.setText=function(a){this.text=a,e("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},g.Text.prototype.setStyle=function(a){this.style=a,e("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},g.Text.prototype.determineFontProperties=function(a){return e("determineFontProperties is now deprecated, please use the static calculateFontProperties method, e.g : Text.calculateFontProperties(fontStyle);"),Text.calculateFontProperties(a)},Object.defineProperties(g.TextStyle.prototype,{font:{get:function(){e("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var a="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+a+" "+this._fontFamily},set:function(a){e("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),a.indexOf("italic")>1?this._fontStyle="italic":a.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",a.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var b=a.split(" "),c=-1;this._fontSize=26;for(var d=0;d<b.length;++d)if(b[d].match(/(px|pt|em|%)/)){c=d,this._fontSize=b[d];break}this._fontWeight="normal";for(var f=0;c>f;++f)if(b[f].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=b[f];break}if(c>-1&&c<b.length-1){this._fontFamily="";for(var g=c+1;g<b.length;++g)this._fontFamily+=b[g]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),g.Texture.prototype.setFrame=function(a){this.frame=a,e("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},Object.defineProperties(o,{AbstractFilter:{get:function(){return e("AstractFilter has been renamed to Filter, please use PIXI.Filter"),g.AbstractFilter}},SpriteMaskFilter:{get:function(){return e("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),g.SpriteMaskFilter}}}),g.utils.uuid=function(){return e("utils.uuid() is deprecated, please use utils.uid() from now on."),g.utils.uid()},g.utils.canUseNewCanvasBlendModes=function(){return e("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),g.CanvasTinter.canUseMultiply};var u=!0;Object.defineProperty(g.utils,"_saidHello",{set:function(a){a&&(e("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),u=a},get:function(){return u}}),Object.defineProperty(q.canvas,"UPLOADS_PER_FRAME",{set:function(){e("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return e("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Object.defineProperty(q.webgl,"UPLOADS_PER_FRAME",{set:function(){e("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return e("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}})},{"./core":61,"./extras":131,"./filters":142,"./mesh":161,"./particles":164,"./prepare":174}],121:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../core"),g=d(f),h=new g.Rectangle,i=function(){function a(b){e(this,a),this.renderer=b,b.extract=this}return a.prototype.image=function b(a){var b=new Image;return b.src=this.base64(a),b},a.prototype.base64=function(a){return this.canvas(a).toDataURL()},a.prototype.canvas=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,f=void 0;a&&(f=a instanceof g.RenderTexture?a:b.generateTexture(a)),f?(c=f.baseTexture._canvasRenderTarget.context,d=f.baseTexture._canvasRenderTarget.resolution,e=f.frame):(c=b.rootContext,e=h,e.width=this.renderer.width,e.height=this.renderer.height);var i=e.width*d,j=e.height*d,k=new g.CanvasRenderTarget(i,j),l=c.getImageData(e.x*d,e.y*d,i,j);return k.context.putImageData(l,0,0),k.canvas},a.prototype.pixels=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,f=void 0;return a&&(f=a instanceof g.RenderTexture?a:b.generateTexture(a)),f?(c=f.baseTexture._canvasRenderTarget.context,d=f.baseTexture._canvasRenderTarget.resolution,e=f.frame):(c=b.rootContext,e=h,e.width=b.width,e.height=b.height),c.getImageData(0,0,e.width*d,e.height*d).data},a.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},a}();c["default"]=i,g.CanvasRenderer.registerPlugin("extract",i)},{"../../core":61}],122:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./webgl/WebGLExtract");Object.defineProperty(c,"webgl",{enumerable:!0,get:function(){return d(e)["default"]}});var f=a("./canvas/CanvasExtract");Object.defineProperty(c,"canvas",{enumerable:!0,get:function(){return d(f)["default"]}})},{"./canvas/CanvasExtract":121,"./webgl/WebGLExtract":123}],123:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../../core"),g=d(f),h=new g.Rectangle,i=4,j=function(){function a(b){e(this,a),this.renderer=b,b.extract=this}return a.prototype.image=function b(a){var b=new Image;return b.src=this.base64(a),b},a.prototype.base64=function(a){return this.canvas(a).toDataURL()},a.prototype.canvas=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,f=!1,j=void 0;a&&(j=a instanceof g.RenderTexture?a:this.renderer.generateTexture(a)),j?(c=j.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],d=c.resolution,e=j.frame,f=!1):(c=this.renderer.rootRenderTarget,d=c.resolution,f=!0,e=h,e.width=c.size.width,e.height=c.size.height);var k=e.width*d,l=e.height*d,m=new g.CanvasRenderTarget(k,l);if(c){b.bindRenderTarget(c);var n=new Uint8Array(i*k*l),o=b.gl;o.readPixels(e.x*d,e.y*d,k,l,o.RGBA,o.UNSIGNED_BYTE,n);var p=m.context.getImageData(0,0,k,l);p.data.set(n),m.context.putImageData(p,0,0),f&&(m.context.scale(1,-1),m.context.drawImage(m.canvas,0,-l))}return m.canvas},a.prototype.pixels=function(a){var b=this.renderer,c=void 0,d=void 0,e=void 0,f=void 0;a&&(f=a instanceof g.RenderTexture?a:this.renderer.generateTexture(a)),f?(c=f.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID],d=c.resolution,e=f.frame):(c=this.renderer.rootRenderTarget,d=c.resolution,e=h,e.width=c.size.width,e.height=c.size.height);var j=e.width*d,k=e.height*d,l=new Uint8Array(i*j*k);if(c){b.bindRenderTarget(c);var m=b.gl;m.readPixels(e.x*d,e.y*d,j,k,m.RGBA,m.UNSIGNED_BYTE,l)}return l},a.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},a}();c["default"]=j,g.WebGLRenderer.registerPlugin("extract",j)},{"../../core":61}],124:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,
writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../core"),j=d(i),k=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c[0]instanceof j.Texture?c[0]:c[0].texture));return d._textures=null,d._durations=null,d.textures=c,d.animationSpeed=1,d.loop=!0,d.onComplete=null,d.onFrameChange=null,d._currentTime=0,d.playing=!1,d}return g(b,a),b.prototype.stop=function(){this.playing&&(this.playing=!1,j.ticker.shared.remove(this.update,this))},b.prototype.play=function(){this.playing||(this.playing=!0,j.ticker.shared.add(this.update,this))},b.prototype.gotoAndStop=function(a){this.stop();var b=this.currentFrame;this._currentTime=a,b!==this.currentFrame&&this.updateTexture()},b.prototype.gotoAndPlay=function(a){var b=this.currentFrame;this._currentTime=a,b!==this.currentFrame&&this.updateTexture(),this.play()},b.prototype.update=function(a){var b=this.animationSpeed*a,c=this.currentFrame;if(null!==this._durations){var d=this._currentTime%1*this._durations[this.currentFrame];for(d+=b/60*1e3;0>d;)this._currentTime--,d+=this._durations[this.currentFrame];var e=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);d>=this._durations[this.currentFrame];)d-=this._durations[this.currentFrame]*e,this._currentTime+=e;this._currentTime+=d/this._durations[this.currentFrame]}else this._currentTime+=b;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):c!==this.currentFrame&&this.updateTexture()},b.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.onFrameChange&&this.onFrameChange(this.currentFrame)},b.prototype.destroy=function(){this.stop(),a.prototype.destroy.call(this)},b.fromFrames=function(a){for(var c=[],d=0;d<a.length;++d)c.push(j.Texture.fromFrame(a[d]));return new b(c)},b.fromImages=function(a){for(var c=[],d=0;d<a.length;++d)c.push(j.Texture.fromImage(a[d]));return new b(c)},h(b,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(a){if(a[0]instanceof j.Texture)this._textures=a,this._durations=null;else{this._textures=[],this._durations=[];for(var b=0;b<a.length;b++)this._textures.push(a[b].texture),this._durations.push(a[b].time)}}},{key:"currentFrame",get:function(){var a=Math.floor(this._currentTime)%this._textures.length;return 0>a&&(a+=this._textures.length),a}}]),b}(j.Sprite);c["default"]=k},{"../core":61}],125:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../core"),k=e(j),l=a("../core/math/ObservablePoint"),m=d(l),n=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};f(this,b);var e=g(this,a.call(this));return e.textWidth=0,e.textHeight=0,e._glyphs=[],e._font={tint:void 0!==d.tint?d.tint:16777215,align:d.align||"left",name:null,size:0},e.font=d.font,e._text=c,e.maxWidth=0,e.maxLineHeight=0,e._anchor=new m["default"](function(){e.dirty=!0},e,0,0),e.dirty=!1,e.updateText(),e}return h(b,a),b.prototype.updateText=function(){for(var a=b.fonts[this._font.name],c=this._font.size/a.size,d=new k.Point,e=[],f=[],g=null,h=0,i=0,j=0,l=-1,m=0,n=0,o=0;o<this.text.length;o++){var p=this.text.charCodeAt(o);if(/(\s)/.test(this.text.charAt(o))&&(l=o,m=h),/(?:\r\n|\r|\n)/.test(this.text.charAt(o)))f.push(h),i=Math.max(i,h),j++,d.x=0,d.y+=a.lineHeight,g=null;else if(-1!==l&&this.maxWidth>0&&d.x*c>this.maxWidth)k.utils.removeItems(e,l,o-l),o=l,l=-1,f.push(m),i=Math.max(i,m),j++,d.x=0,d.y+=a.lineHeight,g=null;else{var q=a.chars[p];q&&(g&&q.kerning[g]&&(d.x+=q.kerning[g]),e.push({texture:q.texture,line:j,charCode:p,position:new k.Point(d.x+q.xOffset,d.y+q.yOffset)}),h=d.x+(q.texture.width+q.xOffset),d.x+=q.xAdvance,n=Math.max(n,q.yOffset+q.texture.height),g=p)}}f.push(h),i=Math.max(i,h);for(var r=[],s=0;j>=s;s++){var t=0;"right"===this._font.align?t=i-f[s]:"center"===this._font.align&&(t=(i-f[s])/2),r.push(t)}for(var u=e.length,v=this.tint,w=0;u>w;w++){var x=this._glyphs[w];x?x.texture=e[w].texture:(x=new k.Sprite(e[w].texture),this._glyphs.push(x)),x.position.x=(e[w].position.x+r[e[w].line])*c,x.position.y=e[w].position.y*c,x.scale.x=x.scale.y=c,x.tint=v,x.parent||this.addChild(x)}for(var y=u;y<this._glyphs.length;++y)this.removeChild(this._glyphs[y]);if(this.textWidth=i*c,this.textHeight=(d.y+a.lineHeight)*c,0!==this.anchor.x||0!==this.anchor.y)for(var z=0;u>z;z++)this._glyphs[z].x-=this.textWidth*this.anchor.x,this._glyphs[z].y-=this.textHeight*this.anchor.y;this.maxLineHeight=n*c},b.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},b.prototype.getLocalBounds=function(){return this.validate(),a.prototype.getLocalBounds.call(this)},b.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},i(b,[{key:"tint",get:function(){return this._font.tint},set:function(a){this._font.tint="number"==typeof a&&a>=0?a:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(a){this._font.align=a||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(a){"number"==typeof a?this._anchor.set(a):this._anchor.copy(a)}},{key:"font",get:function(){return this._font},set:function(a){a&&("string"==typeof a?(a=a.split(" "),this._font.name=1===a.length?a[0]:a.slice(1).join(" "),this._font.size=a.length>=2?parseInt(a[0],10):b.fonts[this._font.name].size):(this._font.name=a.name,this._font.size="number"==typeof a.size?a.size:parseInt(a.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(a){a=a.toString()||" ",this._text!==a&&(this._text=a,this.dirty=!0)}}]),b}(k.Container);c["default"]=n,n.fonts={}},{"../core":61,"../core/math/ObservablePoint":64}],126:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("../core/math/Matrix"),h=d(g),i=new h["default"],j=function(){function a(b,c){e(this,a),this._texture=b,this.mapCoord=new h["default"],this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin="undefined"==typeof c?.5:c}return a.prototype.update=function(a){var b=this.texture;if(b&&b.valid&&(a||this._lastTextureID!==this.texture._updateID)){this._lastTextureID=this.texture._updateID;var c=this.texture._uvs;this.mapCoord.set(c.x1-c.x0,c.y1-c.y0,c.x3-c.x0,c.y3-c.y0,c.x0,c.y0);var d=b.orig,e=b.trim;e&&(i.set(d.width/e.width,0,0,d.height/e.height,-e.x/e.width,-e.y/e.height),this.mapCoord.append(i));var f=b.baseTexture,g=this.uClampFrame,h=this.clampMargin/f.resolution,j=this.clampOffset;g[0]=(b._frame.x+h+j)/f.width,g[1]=(b._frame.y+h+j)/f.height,g[2]=(b._frame.x+b._frame.width-h+j)/f.width,g[3]=(b._frame.y+b._frame.height-h+j)/f.height,this.uClampOffset[0]=j/f.realWidth,this.uClampOffset[1]=j/f.realHeight}},f(a,[{key:"texture",get:function(){return this._texture},set:function(a){this._texture=a,this._lastTextureID=-1}}]),a}();c["default"]=j},{"../core/math/Matrix":63}],127:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../core"),k=e(j),l=a("../core/sprites/canvas/CanvasTinter"),m=d(l),n=a("./TextureTransform"),o=d(n),p=new k.Point,q=function(a){function b(c){var d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;f(this,b);var h=g(this,a.call(this,c));return h.tileTransform=new k.TransformStatic,h._width=d,h._height=e,h._canvasPattern=null,h.uvTransform=c.transform||new o["default"](c),h.pluginName="tilingSprite",h}return h(b,a),b.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture)},b.prototype._renderWebGL=function(a){var b=this._texture;b&&b.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this))},b.prototype._renderCanvas=function(a){var b=this._texture;if(b.baseTexture.hasLoaded){var c=a.context,d=this.worldTransform,e=a.resolution,f=b.baseTexture,g=b.baseTexture.resolution,h=this.tilePosition.x/this.tileScale.x%b._frame.width,i=this.tilePosition.y/this.tileScale.y%b._frame.height;if(!this._canvasPattern){var j=new k.CanvasRenderTarget(b._frame.width,b._frame.height,g);16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=m["default"].getTintedTexture(this,this.tint)),j.context.drawImage(this.tintedTexture,0,0)):j.context.drawImage(f.source,-b._frame.x,-b._frame.y),this._canvasPattern=j.context.createPattern(j.canvas,"repeat")}c.globalAlpha=this.worldAlpha,c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),c.scale(this.tileScale.x/g,this.tileScale.y/g),c.translate(h+this.anchor.x*-this._width,i+this.anchor.y*-this._height),a.setBlendMode(this.blendMode),c.fillStyle=this._canvasPattern,c.fillRect(-h,-i,this._width/this.tileScale.x*g,this._height/this.tileScale.y*g)}},b.prototype._calculateBounds=function(){var a=this._width*-this._anchor._x,b=this._height*-this._anchor._y,c=this._width*(1-this._anchor._x),d=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,a,b,c,d)},b.prototype.getLocalBounds=function(b){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),b||(this._localBoundsRect||(this._localBoundsRect=new k.Rectangle),b=this._localBoundsRect),this._bounds.getRectangle(b)):a.prototype.getLocalBounds.call(this,b)},b.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,p);var b=this._width,c=this._height,d=-b*this.anchor._x;if(p.x>d&&p.x<d+b){var e=-c*this.anchor._y;if(p.y>e&&p.y<e+c)return!0}return!1},b.prototype.destroy=function(){a.prototype.destroy.call(this),this.tileTransform=null,this.uvTransform=null},b.from=function(a,c,d){return new b(k.Texture.from(a),c,d)},b.fromFrame=function(a,c,d){var e=k.utils.TextureCache[a];if(!e)throw new Error('The frameId "'+a+'" does not exist in the texture cache '+this);return new b(e,c,d)},b.fromImage=function(a,c,d,e,f){return new b(k.Texture.fromImage(a,e,f),c,d)},i(b,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(a){this.uvTransform.clampMargin=a,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(a){this.tileTransform.scale.copy(a)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(a){this.tileTransform.position.copy(a)}},{key:"width",get:function(){return this._width},set:function(a){this._width=a}},{key:"height",get:function(){return this._height},set:function(a){this._height=a}}]),b}(k.Sprite);c["default"]=q},{"../core":61,"../core/sprites/canvas/CanvasTinter":100,"./TextureTransform":126}],128:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=a("../core"),g=d(f),h=g.DisplayObject,i=new g.Matrix;h.prototype._cacheAsBitmap=!1,h.prototype._cacheData=!1;var j=function k(){e(this,k),this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(h.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(a){if(this._cacheAsBitmap!==a){this._cacheAsBitmap=a;var b=void 0;a?(this._cacheData||(this._cacheData=new j),b=this._cacheData,b.originalRenderWebGL=this.renderWebGL,b.originalRenderCanvas=this.renderCanvas,b.originalUpdateTransform=this.updateTransform,b.originalCalculateBounds=this._calculateBounds,b.originalGetLocalBounds=this.getLocalBounds,b.originalDestroy=this.destroy,b.originalContainsPoint=this.containsPoint,b.originalMask=this._mask,b.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(b=this._cacheData,b.sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=b.originalRenderWebGL,this.renderCanvas=b.originalRenderCanvas,this._calculateBounds=b.originalCalculateBounds,this.getLocalBounds=b.originalGetLocalBounds,this.destroy=b.originalDestroy,this.updateTransform=b.originalUpdateTransform,this.containsPoint=b.originalContainsPoint,this._mask=b.originalMask,this.filterArea=b.originalFilterArea)}}}}),h.prototype._renderCachedWebGL=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(a),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(a))},h.prototype._initCachedDisplayObject=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.alpha;this.alpha=1,a.currentRenderer.flush();var c=this.getLocalBounds().clone();if(this._filters){var d=this._filters[0].padding;c.pad(d)}var e=a._activeRenderTarget,f=a.filterManager.filterStack,h=g.RenderTexture.create(0|c.width,0|c.height),j=i;j.tx=-c.x,j.ty=-c.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,a.render(this,h,!0,j,!0),a.bindRenderTarget(e),a.filterManager.filterStack=f,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var k=new g.Sprite(h);k.transform.worldTransform=this.transform.worldTransform,k.anchor.x=-(c.x/c.width),k.anchor.y=-(c.y/c.height),k.alpha=b,k._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=k,this.transform._parentID=-1,this.updateTransform(),this.containsPoint=k.containsPoint.bind(k)}},h.prototype._renderCachedCanvas=function(a){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(a),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(a))},h.prototype._initCachedDisplayObjectCanvas=function(a){if(!this._cacheData||!this._cacheData.sprite){var b=this.getLocalBounds(),c=this.alpha;this.alpha=1;var d=a.context,e=g.RenderTexture.create(0|b.width,0|b.height),f=i;this.transform.worldTransform.copy(f),f.invert(),f.tx-=b.x,f.ty-=b.y,this.renderCanvas=this._cacheData.originalRenderCanvas,a.render(this,e,!0,f,!1),a.context=d,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var h=new g.Sprite(e);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(b.x/b.width),h.anchor.y=-(b.y/b.height),h._bounds=this._bounds,h.alpha=c,this.updateTransform(),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=h,this.containsPoint=h.containsPoint.bind(h)}},h.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},h.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},h.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null},h.prototype._cacheAsBitmapDestroy=function(){this.cacheAsBitmap=!1,this.destroy()}},{"../core":61}],129:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}var e=a("../core"),f=d(e);f.DisplayObject.prototype.name=null,f.Container.prototype.getChildByName=function(a){for(var b=0;b<this.children.length;b++)if(this.children[b].name===a)return this.children[b];return null}},{"../core":61}],130:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}var e=a("../core"),f=d(e);f.DisplayObject.prototype.getGlobalPosition=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new f.Point,b=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,a,b):(a.x=this.position.x,a.y=this.position.y),a}},{"../core":61}],131:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0,c.BitmapText=c.TilingSpriteRenderer=c.TilingSprite=c.AnimatedSprite=c.TextureTransform=void 0;var e=a("./TextureTransform");Object.defineProperty(c,"TextureTransform",{enumerable:!0,get:function(){return d(e)["default"]}});var f=a("./AnimatedSprite");Object.defineProperty(c,"AnimatedSprite",{enumerable:!0,get:function(){return d(f)["default"]}});var g=a("./TilingSprite");Object.defineProperty(c,"TilingSprite",{enumerable:!0,get:function(){return d(g)["default"]}});var h=a("./webgl/TilingSpriteRenderer");Object.defineProperty(c,"TilingSpriteRenderer",{enumerable:!0,get:function(){return d(h)["default"]}});var i=a("./BitmapText");Object.defineProperty(c,"BitmapText",{enumerable:!0,get:function(){return d(i)["default"]}}),a("./cacheAsBitmap"),a("./getChildByName"),a("./getGlobalPosition")},{"./AnimatedSprite":124,"./BitmapText":125,"./TextureTransform":126,"./TilingSprite":127,"./cacheAsBitmap":128,"./getChildByName":129,"./getGlobalPosition":130,"./webgl/TilingSpriteRenderer":132}],132:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../core"),i=d(h),j=a("../../core/const"),k=(a("path"),new i.Matrix),l=new Float32Array(4),m=function(a){function b(c){e(this,b);var d=f(this,a.call(this,c));return d.shader=null,d.simpleShader=null,d.quad=null,d}return g(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new i.Shader(a,"attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTransform;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","varying vec2 vTextureCoord;\r\n\r\nuniform sampler2D uSampler;\r\nuniform vec4 uColor;\r\nuniform mat3 uMapCoord;\r\nuniform vec4 uClampFrame;\r\nuniform vec2 uClampOffset;\r\n\r\nvoid main(void)\r\n{\r\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\r\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\r\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\r\n\r\n    vec4 sample = texture2D(uSampler, coord);\r\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\r\n\r\n    gl_FragColor = sample * color ;\r\n}\r\n"),this.simpleShader=new i.Shader(a,"attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 translationMatrix;\r\nuniform mat3 uTransform;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\r\n}\r\n","varying vec2 vTextureCoord;\r\n\r\nuniform sampler2D uSampler;\r\nuniform vec4 uColor;\r\n\r\nvoid main(void)\r\n{\r\n    vec4 sample = texture2D(uSampler, vTextureCoord);\r\n    vec4 color = vec4(uColor.rgb * uColor.a, uColor.a);\r\n    gl_FragColor = sample * color;\r\n}\r\n"),this.renderer.bindVao(null),this.quad=new i.Quad(a,this.renderer.state.attribState),this.quad.initVao(this.shader)},b.prototype.render=function(a){var b=this.renderer,c=this.quad;b.bindVao(c.vao);var d=c.vertices;d[0]=d[6]=a._width*-a.anchor.x,d[1]=d[3]=a._height*-a.anchor.y,d[2]=d[4]=a._width*(1-a.anchor.x),d[5]=d[7]=a._height*(1-a.anchor.y),d=c.uvs,d[0]=d[6]=-a.anchor.x,d[1]=d[3]=-a.anchor.y,d[2]=d[4]=1-a.anchor.x,d[5]=d[7]=1-a.anchor.y,c.upload();var e=a._texture,f=e.baseTexture,g=a.tileTransform.localTransform,h=a.uvTransform,m=f.isPowerOfTwo&&e.frame.width===f.width&&e.frame.height===f.height;m&&(f._glTextures[b.CONTEXT_UID]?m=f.wrapMode!==j.WRAP_MODES.CLAMP:f.wrapMode===j.WRAP_MODES.CLAMP&&(f.wrapMode=j.WRAP_MODES.REPEAT));var n=m?this.simpleShader:this.shader;b.bindShader(n);var o=e.width,p=e.height,q=a._width,r=a._height;k.set(g.a*o/q,g.b*o/r,g.c*p/q,g.d*p/r,g.tx/q,g.ty/r),k.invert(),m?k.append(h.mapCoord):(n.uniforms.uMapCoord=h.mapCoord.toArray(!0),n.uniforms.uClampFrame=h.uClampFrame,n.uniforms.uClampOffset=h.uClampOffset),n.uniforms.uTransform=k.toArray(!0);var s=l;i.utils.hex2rgb(a.tint,s),s[3]=a.worldAlpha,n.uniforms.uColor=s,n.uniforms.translationMatrix=a.transform.worldTransform.toArray(!0),n.uniforms.uSampler=b.bindTexture(e),b.setBlendMode(a.blendMode),c.vao.draw(this.renderer.gl.TRIANGLES,6,0)},b}(i.ObjectRenderer);c["default"]=m,i.WebGLRenderer.registerPlugin("tilingSprite",m)},{"../../core":61,"../../core/const":42,path:22}],133:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../../core"),k=e(j),l=a("./BlurXFilter"),m=d(l),n=a("./BlurYFilter"),o=d(n),p=function(a){function b(c,d,e,h){f(this,b);var i=g(this,a.call(this));return i.blurXFilter=new m["default"](c,d,e,h),i.blurYFilter=new o["default"](c,d,e,h),i.resolution=1,i.padding=0,i.resolution=e||1,i.quality=d||4,i.blur=c||8,i}return h(b,a),b.prototype.apply=function(a,b,c){var d=a.getRenderTarget(!0);this.blurXFilter.apply(a,b,d,!0),this.blurYFilter.apply(a,d,c,!1),a.returnRenderTarget(d)},i(b,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(a){this.blurXFilter.quality=this.blurYFilter.quality=a}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(a){this.blurXFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(a){this.blurYFilter.blur=a,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}}]),b}(k.Filter);c["default"]=p},{"../../core":61,"./BlurXFilter":134,"./BlurYFilter":135}],134:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../../core"),k=e(j),l=a("./generateBlurVertSource"),m=d(l),n=a("./generateBlurFragSource"),o=d(n),p=a("./getMaxBlurKernelSize"),q=d(p),r=function(a){function b(c,d,e,h){f(this,b),h=h||5;var i=(0,m["default"])(h,!0),j=(0,o["default"])(h),k=g(this,a.call(this,i,j));return k.resolution=e||1,k._quality=0,k.quality=d||4,k.strength=c||8,k.firstRun=!0,k}return h(b,a),b.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,f=(0,q["default"])(e);this.vertexSrc=(0,m["default"])(f,!0),this.fragmentSrc=(0,o["default"])(f),this.firstRun=!1}if(this.uniforms.strength=1/c.size.width*(c.size.width/b.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(var g=a.getRenderTarget(!0),h=b,i=g,j=0;j<this.passes-1;j++){a.applyFilter(this,h,i,!0);var k=i;i=h,h=k}a.applyFilter(this,h,c,d),a.returnRenderTarget(g)}},i(b,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}]),b}(k.Filter);c["default"]=r},{"../../core":61,"./generateBlurFragSource":136,"./generateBlurVertSource":137,"./getMaxBlurKernelSize":138}],135:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),j=a("../../core"),k=e(j),l=a("./generateBlurVertSource"),m=d(l),n=a("./generateBlurFragSource"),o=d(n),p=a("./getMaxBlurKernelSize"),q=d(p),r=function(a){function b(c,d,e,h){f(this,b),h=h||5;var i=(0,m["default"])(h,!1),j=(0,o["default"])(h),k=g(this,a.call(this,i,j));return k.resolution=e||1,k._quality=0,k.quality=d||4,k.strength=c||8,k.firstRun=!0,k}return h(b,a),b.prototype.apply=function(a,b,c,d){if(this.firstRun){var e=a.renderer.gl,f=(0,q["default"])(e);this.vertexSrc=(0,m["default"])(f,!1),this.fragmentSrc=(0,o["default"])(f),this.firstRun=!1}if(this.uniforms.strength=1/c.size.height*(c.size.height/b.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)a.applyFilter(this,b,c,d);else{for(var g=a.getRenderTarget(!0),h=b,i=g,j=0;j<this.passes-1;j++){a.applyFilter(this,h,i,!0);var k=i;i=h,h=k}a.applyFilter(this,h,c,d),a.returnRenderTarget(g)}},i(b,[{key:"blur",get:function(){return this.strength},set:function(a){this.padding=2*Math.abs(a),this.strength=a}},{key:"quality",get:function(){return this._quality},set:function(a){this._quality=a,this.passes=a}}]),b}(k.Filter);c["default"]=r},{"../../core":61,"./generateBlurFragSource":136,"./generateBlurVertSource":137,"./getMaxBlurKernelSize":138}],136:[function(a,b,c){"use strict";function d(a){for(var b=e[a],c=b.length,d=f,g="",h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;",i=void 0,j=0;a>j;j++){var k=h.replace("%index%",j);i=j,j>=c&&(i=a-j-1),k=k.replace("%value%",b[i]),g+=k,
g+="\n"}return d=d.replace("%blur%",g),d=d.replace("%size%",a)}c.__esModule=!0,c["default"]=d;var e={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},f=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],137:[function(a,b,c){"use strict";function d(a,b){var c=Math.ceil(a/2),d=e,f="",g=void 0;g=b?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var h=0;a>h;h++){var i=g.replace("%index%",h);i=i.replace("%sampleIndex%",h-(c-1)+".0"),f+=i,f+="\n"}return d=d.replace("%blur%",f),d=d.replace("%size%",a)}c.__esModule=!0,c["default"]=d;var e=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],138:[function(a,b,c){"use strict";function d(a){for(var b=a.getParameter(a.MAX_VARYING_VECTORS),c=15;c>b;)c-=2;return c}c.__esModule=!0,c["default"]=d},{}],139:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../../core"),j=d(i),k=(a("path"),function(a){function b(){e(this,b);var c=f(this,a.call(this,"attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n    vTextureCoord = aTextureCoord;\r\n}","varying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\nuniform float m[20];\r\n\r\nvoid main(void)\r\n{\r\n\r\n    vec4 c = texture2D(uSampler, vTextureCoord);\r\n\r\n    gl_FragColor.r = (m[0] * c.r);\r\n        gl_FragColor.r += (m[1] * c.g);\r\n        gl_FragColor.r += (m[2] * c.b);\r\n        gl_FragColor.r += (m[3] * c.a);\r\n        gl_FragColor.r += m[4] * c.a;\r\n\r\n    gl_FragColor.g = (m[5] * c.r);\r\n        gl_FragColor.g += (m[6] * c.g);\r\n        gl_FragColor.g += (m[7] * c.b);\r\n        gl_FragColor.g += (m[8] * c.a);\r\n        gl_FragColor.g += m[9] * c.a;\r\n\r\n     gl_FragColor.b = (m[10] * c.r);\r\n        gl_FragColor.b += (m[11] * c.g);\r\n        gl_FragColor.b += (m[12] * c.b);\r\n        gl_FragColor.b += (m[13] * c.a);\r\n        gl_FragColor.b += m[14] * c.a;\r\n\r\n     gl_FragColor.a = (m[15] * c.r);\r\n        gl_FragColor.a += (m[16] * c.g);\r\n        gl_FragColor.a += (m[17] * c.b);\r\n        gl_FragColor.a += (m[18] * c.a);\r\n        gl_FragColor.a += m[19] * c.a;\r\n\r\n//    gl_FragColor = vec4(m[0]);\r\n}\r\n"));return c.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],c}return g(b,a),b.prototype._loadMatrix=function(a){var b=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=a;b&&(this._multiply(c,this.uniforms.m,a),c=this._colorMatrix(c)),this.uniforms.m=c},b.prototype._multiply=function(a,b,c){return a[0]=b[0]*c[0]+b[1]*c[5]+b[2]*c[10]+b[3]*c[15],a[1]=b[0]*c[1]+b[1]*c[6]+b[2]*c[11]+b[3]*c[16],a[2]=b[0]*c[2]+b[1]*c[7]+b[2]*c[12]+b[3]*c[17],a[3]=b[0]*c[3]+b[1]*c[8]+b[2]*c[13]+b[3]*c[18],a[4]=b[0]*c[4]+b[1]*c[9]+b[2]*c[14]+b[3]*c[19],a[5]=b[5]*c[0]+b[6]*c[5]+b[7]*c[10]+b[8]*c[15],a[6]=b[5]*c[1]+b[6]*c[6]+b[7]*c[11]+b[8]*c[16],a[7]=b[5]*c[2]+b[6]*c[7]+b[7]*c[12]+b[8]*c[17],a[8]=b[5]*c[3]+b[6]*c[8]+b[7]*c[13]+b[8]*c[18],a[9]=b[5]*c[4]+b[6]*c[9]+b[7]*c[14]+b[8]*c[19],a[10]=b[10]*c[0]+b[11]*c[5]+b[12]*c[10]+b[13]*c[15],a[11]=b[10]*c[1]+b[11]*c[6]+b[12]*c[11]+b[13]*c[16],a[12]=b[10]*c[2]+b[11]*c[7]+b[12]*c[12]+b[13]*c[17],a[13]=b[10]*c[3]+b[11]*c[8]+b[12]*c[13]+b[13]*c[18],a[14]=b[10]*c[4]+b[11]*c[9]+b[12]*c[14]+b[13]*c[19],a[15]=b[15]*c[0]+b[16]*c[5]+b[17]*c[10]+b[18]*c[15],a[16]=b[15]*c[1]+b[16]*c[6]+b[17]*c[11]+b[18]*c[16],a[17]=b[15]*c[2]+b[16]*c[7]+b[17]*c[12]+b[18]*c[17],a[18]=b[15]*c[3]+b[16]*c[8]+b[17]*c[13]+b[18]*c[18],a[19]=b[15]*c[4]+b[16]*c[9]+b[17]*c[14]+b[18]*c[19],a},b.prototype._colorMatrix=function(a){var b=new Float32Array(a);return b[4]/=255,b[9]/=255,b[14]/=255,b[19]/=255,b},b.prototype.brightness=function(a,b){var c=[a,0,0,0,0,0,a,0,0,0,0,0,a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.greyscale=function(a,b){var c=[a,a,a,0,0,a,a,a,0,0,a,a,a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.blackAndWhite=function(a){var b=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.hue=function(a,b){a=(a||0)/180*Math.PI;var c=Math.cos(a),d=Math.sin(a),e=Math.sqrt,f=1/3,g=e(f),h=c+(1-c)*f,i=f*(1-c)-g*d,j=f*(1-c)+g*d,k=f*(1-c)+g*d,l=c+f*(1-c),m=f*(1-c)-g*d,n=f*(1-c)-g*d,o=f*(1-c)+g*d,p=c+f*(1-c),q=[h,i,j,0,0,k,l,m,0,0,n,o,p,0,0,0,0,0,1,0];this._loadMatrix(q,b)},b.prototype.contrast=function(a,b){var c=(a||0)+1,d=-128*(c-1),e=[c,0,0,0,d,0,c,0,0,d,0,0,c,0,d,0,0,0,1,0];this._loadMatrix(e,b)},b.prototype.saturate=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments[1],c=2*a/3+1,d=(c-1)*-.5,e=[c,d,d,0,0,d,c,d,0,0,d,d,c,0,0,0,0,0,1,0];this._loadMatrix(e,b)},b.prototype.desaturate=function(){this.saturate(-1)},b.prototype.negative=function(a){var b=[0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.sepia=function(a){var b=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.technicolor=function(a){var b=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.polaroid=function(a){var b=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.toBGR=function(a){var b=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.kodachrome=function(a){var b=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.browni=function(a){var b=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.vintage=function(a){var b=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.colorTone=function(a,b,c,d,e){a=a||.2,b=b||.15,c=c||16770432,d=d||3375104;var f=(c>>16&255)/255,g=(c>>8&255)/255,h=(255&c)/255,i=(d>>16&255)/255,j=(d>>8&255)/255,k=(255&d)/255,l=[.3,.59,.11,0,0,f,g,h,a,0,i,j,k,b,0,f-i,g-j,h-k,0,0];this._loadMatrix(l,e)},b.prototype.night=function(a,b){a=a||.1;var c=[-2*a,-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.predator=function(a,b){var c=[11.224130630493164*a,-4.794486999511719*a,-2.8746118545532227*a,0*a,.40342438220977783*a,-3.6330697536468506*a,9.193157196044922*a,-2.951810836791992*a,0*a,-1.316135048866272*a,-3.2184197902679443*a,-4.2375030517578125*a,7.476448059082031*a,0*a,.8044459223747253*a,0,0,0,1,0];this._loadMatrix(c,b)},b.prototype.lsd=function(a){var b=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(b,a)},b.prototype.reset=function(){var a=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(a,!1)},h(b,[{key:"matrix",get:function(){return this.uniforms.m},set:function(a){this.uniforms.m=a}}]),b}(j.Filter));c["default"]=k,k.prototype.grayscale=k.prototype.greyscale},{"../../core":61,path:22}],140:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../../core"),j=d(i),k=(a("path"),function(a){function b(c,d){e(this,b);var g=new j.Matrix;c.renderable=!1;var h=f(this,a.call(this,"attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\nuniform mat3 filterMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec2 vFilterCoord;\r\n\r\nvoid main(void)\r\n{\r\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\r\n   vTextureCoord = aTextureCoord;\r\n}","varying vec2 vFilterCoord;\r\nvarying vec2 vTextureCoord;\r\n\r\nuniform vec2 scale;\r\n\r\nuniform sampler2D uSampler;\r\nuniform sampler2D mapSampler;\r\n\r\nuniform vec4 filterClamp;\r\n\r\nvoid main(void)\r\n{\r\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\r\n\r\n   map -= 0.5;\r\n   map.xy *= scale;\r\n\r\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\r\n}\r\n"));return h.maskSprite=c,h.maskMatrix=g,h.uniforms.mapSampler=c.texture,h.uniforms.filterMatrix=g.toArray(!0),h.uniforms.scale={x:1,y:1},null!==d&&void 0!==d||(d=20),h.scale=new j.Point(d,d),h}return g(b,a),b.prototype.apply=function(a,b,c){var d=1/c.destinationFrame.width*(c.size.width/b.size.width);this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*d,this.uniforms.scale.y=this.scale.y*d,a.applyFilter(this,b,c)},h(b,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(a){this.uniforms.mapSampler=a}}]),b}(j.Filter));c["default"]=k},{"../../core":61,path:22}],141:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../core"),i=d(h),j=(a("path"),function(a){function b(){return e(this,b),f(this,a.call(this,"\r\nattribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\n\r\nvarying vec2 v_rgbNW;\r\nvarying vec2 v_rgbNE;\r\nvarying vec2 v_rgbSW;\r\nvarying vec2 v_rgbSE;\r\nvarying vec2 v_rgbM;\r\n\r\nuniform vec4 filterArea;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvec2 mapCoord( vec2 coord )\r\n{\r\n    coord *= filterArea.xy;\r\n    coord += filterArea.zw;\r\n\r\n    return coord;\r\n}\r\n\r\nvec2 unmapCoord( vec2 coord )\r\n{\r\n    coord -= filterArea.zw;\r\n    coord /= filterArea.xy;\r\n\r\n    return coord;\r\n}\r\n\r\nvoid texcoords(vec2 fragCoord, vec2 resolution,\r\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\r\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\r\n               out vec2 v_rgbM) {\r\n    vec2 inverseVP = 1.0 / resolution.xy;\r\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\r\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\r\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\r\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\r\n    v_rgbM = vec2(fragCoord * inverseVP);\r\n}\r\n\r\nvoid main(void) {\r\n\r\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n   vTextureCoord = aTextureCoord;\r\n\r\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\r\n\r\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\r\n}",'varying vec2 v_rgbNW;\r\nvarying vec2 v_rgbNE;\r\nvarying vec2 v_rgbSW;\r\nvarying vec2 v_rgbSE;\r\nvarying vec2 v_rgbM;\r\n\r\nvarying vec2 vTextureCoord;\r\nuniform sampler2D uSampler;\r\nuniform vec4 filterArea;\r\n\r\n/**\r\n Basic FXAA implementation based on the code on geeks3d.com with the\r\n modification that the texture2DLod stuff was removed since it\'s\r\n unsupported by WebGL.\r\n \r\n --\r\n \r\n From:\r\n https://github.com/mitsuhiko/webgl-meincraft\r\n \r\n Copyright (c) 2011 by Armin Ronacher.\r\n \r\n Some rights reserved.\r\n \r\n Redistribution and use in source and binary forms, with or without\r\n modification, are permitted provided that the following conditions are\r\n met:\r\n \r\n * Redistributions of source code must retain the above copyright\r\n notice, this list of conditions and the following disclaimer.\r\n \r\n * Redistributions in binary form must reproduce the above\r\n copyright notice, this list of conditions and the following\r\n disclaimer in the documentation and/or other materials provided\r\n with the distribution.\r\n \r\n * The names of the contributors may not be used to endorse or\r\n promote products derived from this software without specific\r\n prior written permission.\r\n \r\n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\r\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\r\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\r\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\r\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\r\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\r\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\r\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\r\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\r\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\r\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\r\n */\r\n\r\n#ifndef FXAA_REDUCE_MIN\r\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\r\n#endif\r\n#ifndef FXAA_REDUCE_MUL\r\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\r\n#endif\r\n#ifndef FXAA_SPAN_MAX\r\n#define FXAA_SPAN_MAX     8.0\r\n#endif\r\n\r\n//optimized version for mobile, where dependent\r\n//texture reads can be a bottleneck\r\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\r\n          vec2 v_rgbNW, vec2 v_rgbNE,\r\n          vec2 v_rgbSW, vec2 v_rgbSE,\r\n          vec2 v_rgbM) {\r\n    vec4 color;\r\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\r\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\r\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\r\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\r\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\r\n    vec4 texColor = texture2D(tex, v_rgbM);\r\n    vec3 rgbM  = texColor.xyz;\r\n    vec3 luma = vec3(0.299, 0.587, 0.114);\r\n    float lumaNW = dot(rgbNW, luma);\r\n    float lumaNE = dot(rgbNE, luma);\r\n    float lumaSW = dot(rgbSW, luma);\r\n    float lumaSE = dot(rgbSE, luma);\r\n    float lumaM  = dot(rgbM,  luma);\r\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\r\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\r\n    \r\n    mediump vec2 dir;\r\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\r\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\r\n    \r\n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\r\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\r\n    \r\n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\r\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\r\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\r\n                  dir * rcpDirMin)) * inverseVP;\r\n    \r\n    vec3 rgbA = 0.5 * (\r\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\r\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\r\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\r\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\r\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\r\n    \r\n    float lumaB = dot(rgbB, luma);\r\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\r\n        color = vec4(rgbA, texColor.a);\r\n    else\r\n        color = vec4(rgbB, texColor.a);\r\n    return color;\r\n}\r\n\r\nvoid main() {\r\n\r\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\r\n\r\n      vec4 color;\r\n\r\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\r\n\r\n      gl_FragColor = color;\r\n}\r\n'))}return g(b,a),b}(i.Filter));c["default"]=j},{"../../core":61,path:22}],142:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./fxaa/FXAAFilter");Object.defineProperty(c,"FXAAFilter",{enumerable:!0,get:function(){return d(e)["default"]}});var f=a("./noise/NoiseFilter");Object.defineProperty(c,"NoiseFilter",{enumerable:!0,get:function(){return d(f)["default"]}});var g=a("./displacement/DisplacementFilter");Object.defineProperty(c,"DisplacementFilter",{enumerable:!0,get:function(){return d(g)["default"]}});var h=a("./blur/BlurFilter");Object.defineProperty(c,"BlurFilter",{enumerable:!0,get:function(){return d(h)["default"]}});var i=a("./blur/BlurXFilter");Object.defineProperty(c,"BlurXFilter",{enumerable:!0,get:function(){return d(i)["default"]}});var j=a("./blur/BlurYFilter");Object.defineProperty(c,"BlurYFilter",{enumerable:!0,get:function(){return d(j)["default"]}});var k=a("./colormatrix/ColorMatrixFilter");Object.defineProperty(c,"ColorMatrixFilter",{enumerable:!0,get:function(){return d(k)["default"]}});var l=a("./void/VoidFilter");Object.defineProperty(c,"VoidFilter",{enumerable:!0,get:function(){return d(l)["default"]}})},{"./blur/BlurFilter":133,"./blur/BlurXFilter":134,"./blur/BlurYFilter":135,"./colormatrix/ColorMatrixFilter":139,"./displacement/DisplacementFilter":140,"./fxaa/FXAAFilter":141,"./noise/NoiseFilter":143,"./void/VoidFilter":144}],143:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../../core"),j=d(i),k=(a("path"),function(a){function b(){e(this,b);var c=f(this,a.call(this,"attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n    vTextureCoord = aTextureCoord;\r\n}","precision highp float;\r\n\r\nvarying vec2 vTextureCoord;\r\nvarying vec4 vColor;\r\n\r\nuniform float noise;\r\nuniform sampler2D uSampler;\r\n\r\nfloat rand(vec2 co)\r\n{\r\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\r\n}\r\n\r\nvoid main()\r\n{\r\n    vec4 color = texture2D(uSampler, vTextureCoord);\r\n\r\n    float diff = (rand(gl_FragCoord.xy) - 0.5) * noise;\r\n\r\n    color.r += diff;\r\n    color.g += diff;\r\n    color.b += diff;\r\n\r\n    gl_FragColor = color;\r\n}\r\n"));return c.noise=.5,c}return g(b,a),h(b,[{key:"noise",get:function(){return this.uniforms.noise},set:function(a){this.uniforms.noise=a}}]),b}(j.Filter));c["default"]=k},{"../../core":61,path:22}],144:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../core"),i=d(h),j=(a("path"),function(a){function b(){e(this,b);var c=f(this,a.call(this,"attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 projectionMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n    vTextureCoord = aTextureCoord;\r\n}","varying vec2 vTextureCoord;\r\n\r\nuniform sampler2D uSampler;\r\n\r\nvoid main(void)\r\n{\r\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\r\n}\r\n"));return c.glShaderKey="void",c}return g(b,a),b}(i.Filter));c["default"]=j},{"../../core":61,path:22}],145:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("../core"),g=d(f),h=function(){function a(){e(this,a),this.global=new g.Point,this.target=null,this.originalEvent=null,this.identifier=null}return a.prototype.getLocalPosition=function(a,b,c){return a.worldTransform.applyInverse(c||this.global,b)},a}();c["default"]=h},{"../core":61}],146:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(){d(this,a),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return a.prototype.stopPropagation=function(){this.stopped=!0},a.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},a}();c["default"]=e},{}],147:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=a("../core"),j=e(i),k=a("./InteractionData"),l=d(k),m=a("./InteractionEvent"),n=d(m),o=a("./InteractionTrackingData"),p=d(o),q=a("eventemitter3"),r=d(q),s=a("./interactiveTarget"),t=d(s),u=a("ismobilejs"),v=d(u);Object.assign(j.DisplayObject.prototype,t["default"]);var w="MOUSE",x=function(a){function b(c,d){f(this,b);var e=g(this,a.call(this));return d=d||{},e.renderer=c,e.autoPreventDefault=void 0===d.autoPreventDefault||d.autoPreventDefault,e.interactionFrequency=d.interactionFrequency||10,e.mouse=new l["default"],e.mouse.identifier=w,e.mouse.global.set(-999999),e.activeInteractionData={},e.activeInteractionData[w]=e.mouse,e.interactionDataPool=[],e.eventData=new n["default"],e.interactionDOMElement=null,e.moveWhenInside=!1,e.eventsAdded=!1,e.mouseOverRenderer=!1,e.supportsTouchEvents="ontouchstart"in window,e.supportsPointerEvents=!!window.PointerEvent,e.normalizeTouchEvents=!e.supportsPointerEvents&&e.supportsTouchEvents,e.normalizeMouseEvents=!e.supportsPointerEvents&&!v["default"].any,e.onPointerUp=e.onPointerUp.bind(e),e.processPointerUp=e.processPointerUp.bind(e),e.onPointerCancel=e.onPointerCancel.bind(e),e.processPointerCancel=e.processPointerCancel.bind(e),e.onPointerDown=e.onPointerDown.bind(e),e.processPointerDown=e.processPointerDown.bind(e),e.onPointerMove=e.onPointerMove.bind(e),e.processPointerMove=e.processPointerMove.bind(e),e.onPointerOut=e.onPointerOut.bind(e),e.processPointerOverOut=e.processPointerOverOut.bind(e),e.onPointerOver=e.onPointerOver.bind(e),e.defaultCursorStyle="inherit",e.currentCursorStyle="inherit",e._tempPoint=new j.Point,e.resolution=1,e.setTargetElement(e.renderer.view,e.renderer.resolution),e}return h(b,a),b.prototype.setTargetElement=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=a,this.resolution=b,this.addEvents()},b.prototype.addEvents=function(){this.interactionDOMElement&&(j.ticker.shared.add(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0))),this.eventsAdded=!0)},b.prototype.removeEvents=function(){this.interactionDOMElement&&(j.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents&&(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)),window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},b.prototype.update=function(a){if(this._deltaTime+=a,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement)){if(this.didMove)return void(this.didMove=!1);this.cursor=this.defaultCursorStyle;for(var b in this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(b)){var c=this.activeInteractionData[b];if(c.originalEvent&&"touch"!==c.pointerType){var d=this.configureInteractionEventForDOMEvent(this.eventData,c.originalEvent,c);this.processInteractive(d,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)}},b.prototype.dispatchEvent=function(a,b,c){c.stopped||(c.currentTarget=a,c.type=b,a.emit(b,c),a[b]&&a[b](c))},b.prototype.mapPositionToPoint=function(a,b,c){var d=void 0;d=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var e=navigator.isCocoonJS?this.resolution:1/this.resolution;
a.x=(b-d.left)*(this.interactionDOMElement.width/d.width)*e,a.y=(c-d.top)*(this.interactionDOMElement.height/d.height)*e},b.prototype.processInteractive=function(a,b,c,d,e){if(!b||!b.visible)return!1;var f=a.data.global;e=b.interactive||e;var g=!1,h=e;if(b.hitArea&&(h=!1),d&&b._mask&&(b._mask.containsPoint(f)||(d=!1)),d&&b.filterArea&&(b.filterArea.contains(f.x,f.y)||(d=!1)),b.interactiveChildren&&b.children)for(var i=b.children,j=i.length-1;j>=0;j--){var k=i[j];if(this.processInteractive(a,k,c,d,h)){if(!k.parent)continue;g=!0,h=!1,d=!1}}return e&&(d&&!g&&(b.hitArea?(b.worldTransform.applyInverse(f,this._tempPoint),g=b.hitArea.contains(this._tempPoint.x,this._tempPoint.y)):b.containsPoint&&(g=b.containsPoint(f))),b.interactive&&(g&&!a.target&&(a.target=b),c(a,b,g))),g},b.prototype.onPointerDown=function(a){var b=this.normalizeToPointerData(a);!this.autoPreventDefault||"touch"!==b[0].pointerType&&"mouse"!==b[0].pointerType||a.preventDefault();for(var c=b.length,d=0;c>d;d++){var e=b[d],f=this.getInteractionDataForPointerId(e.pointerId),g=this.configureInteractionEventForDOMEvent(this.eventData,e,f);if(g.data.originalEvent=a,this.processInteractive(g,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",g),"touch"===e.pointerType)this.emit("touchstart",g);else if("mouse"===e.pointerType){var h=2===e.button||3===e.which;this.emit(h?"rightdown":"mousedown",this.eventData)}}},b.prototype.processPointerDown=function(a,b,c){var d=a.data.originalEvent,e=a.data.identifier;if(c)if(b.getTrackedPointers()[e]=new p["default"](e),this.dispatchEvent(b,"pointerdown",a),"touchstart"===d.type||"touch"===d.pointerType)this.dispatchEvent(b,"touchstart",a);else if("mousedown"===d.type||"mouse"===d.pointerType){var f=2===d.button||3===d.which;f?b.getTrackedPointers()[e].rightDown=!0:b.getTrackedPointers()[e].leftDown=!0,this.dispatchEvent(b,f?"rightdown":"mousedown",a)}},b.prototype.onPointerComplete=function(a,b,c){for(var d=this.normalizeToPointerData(a),e=d.length,f=0;e>f;f++){var g=d[f],h=this.getInteractionDataForPointerId(g.pointerId),i=this.configureInteractionEventForDOMEvent(this.eventData,g,h);if(i.data.originalEvent=a,this.processInteractive(i,this.renderer._lastObjectRendered,c,!0),this.emit(b?"pointercancel":"pointerup",i),"mouse"===g.pointerType){var j=2===g.button||3===g.which;this.emit(j?"rightup":"mouseup",i)}else"touch"===g.pointerType&&(this.emit(b?"touchcancel":"touchend",i),this.releaseInteractionDataForPointerId(g.pointerId,h))}},b.prototype.onPointerCancel=function(a){this.onPointerComplete(a,!0,this.processPointerCancel)},b.prototype.processPointerCancel=function(a,b){var c=a.data.originalEvent,d=a.data.identifier;void 0!==b.getTrackedPointers()[d]&&(delete b.getTrackedPointers()[d],this.dispatchEvent(b,"pointercancel",a),"touchcancel"!==c.type&&"touch"!==c.pointerType||this.dispatchEvent(b,"touchcancel",a))},b.prototype.onPointerUp=function(a){this.onPointerComplete(a,!1,this.processPointerUp)},b.prototype.processPointerUp=function(a,b,c){var d=a.data.originalEvent,e=a.data.identifier,f=b.getTrackedPointers()[e],g="touchend"===d.type||"touch"===d.pointerType,h=0===d.type.indexOf("mouse")||"mouse"===d.pointerType;if(c?(this.dispatchEvent(b,"pointerup",a),g&&this.dispatchEvent(b,"touchend",a),void 0!==b.getTrackedPointers()[e]&&(delete b.getTrackedPointers()[e],this.dispatchEvent(b,"pointertap",a),g&&this.dispatchEvent(b,"tap",a))):void 0!==b.getTrackedPointers()[e]&&(delete b.getTrackedPointers()[e],this.dispatchEvent(b,"pointerupoutside",a),g&&this.dispatchEvent(b,"touchendoutside",a)),h){var i=2===d.button||3===d.which,j=p["default"].FLAGS,k=i?j.RIGHT_DOWN:j.LEFT_DOWN,l=void 0!==f&&f.flags|k;c?(this.dispatchEvent(b,i?"rightup":"mouseup",a),l&&this.dispatchEvent(b,i?"rightclick":"click",a)):l&&this.dispatchEvent(b,i?"rightupoutside":"mouseupoutside",a)}},b.prototype.onPointerMove=function(a){var b=this.normalizeToPointerData(a);"mouse"===b[0].pointerType&&(this.didMove=!0,this.cursor=this.defaultCursorStyle);for(var c=b.length,d=0;c>d;d++){var e=b[d],f=this.getInteractionDataForPointerId(e.pointerId),g=this.configureInteractionEventForDOMEvent(this.eventData,e,f);g.data.originalEvent=a;var h="touch"!==e.pointerType||this.moveWhenInside;this.processInteractive(g,this.renderer._lastObjectRendered,this.processPointerMove,h),this.emit("pointermove",g),"touch"===e.pointerType&&this.emit("touchmove",g),"mouse"===e.pointerType&&this.emit("mousemove",g)}"mouse"===b[0].pointerType&&this.currentCursorStyle!==this.cursor&&(this.currentCursorStyle=this.cursor,this.interactionDOMElement.style.cursor=this.cursor)},b.prototype.processPointerMove=function(a,b,c){var d=a.data.originalEvent,e="touchmove"===d.type||"touch"===d.pointerType,f="mousemove"===d.type||"mouse"===d.pointerType;"touchmove"!==d.type&&this.processPointerOverOut(a,b,c),this.moveWhenInside&&!c||(this.dispatchEvent(b,"pointermove",a),e&&this.dispatchEvent(b,"touchmove",a),f&&this.dispatchEvent(b,"mousemove",a))},b.prototype.onPointerOut=function(a){var b=this.normalizeToPointerData(a),c=b[0];"mouse"===c.pointerType&&(this.mouseOverRenderer=!1,this.interactionDOMElement.style.cursor=this.defaultCursorStyle);var d=this.getInteractionDataForPointerId(c.pointerId),e=this.configureInteractionEventForDOMEvent(this.eventData,c,d);e.data.originalEvent=c,this.processInteractive(e,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",e),"mouse"===c.pointerType&&this.emit("mouseout",e)},b.prototype.processPointerOverOut=function(a,b,c){var d=a.data.originalEvent,e=a.data.identifier,f="mouseover"===d.type||"mouseout"===d.type||"mouse"===d.pointerType,g=b.getTrackedPointers()[e];void 0!==g&&(c&&this.mouseOverRenderer?(g.over||(g.over=!0,this.dispatchEvent(b,"pointerover",a),f&&this.dispatchEvent(b,"mouseover",a)),f&&b.buttonMode&&(this.cursor=b.defaultCursor)):g.over&&(g.over=!1,this.dispatchEvent(b,"pointerout",this.eventData),f&&this.dispatchEvent(b,"mouseout",a)))},b.prototype.onPointerOver=function(a){var b=this.normalizeToPointerData(a),c=b[0],d=this.getInteractionDataForPointerId(c.pointerId),e=this.configureInteractionEventForDOMEvent(this.eventData,c,d);e.data.originalEvent=c,"mouse"===c.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",e),"mouse"===c.pointerType&&this.emit("mouseover",e)},b.prototype.getInteractionDataForPointerId=function(a){if(a===w)return this.mouse;if(this.activeInteractionData[a])return this.activeInteractionData[a];var b=this.interactionDataPool.pop()||new l["default"];return b.identifier=a,this.activeInteractionData[a]=b,b},b.prototype.releaseInteractionDataForPointerId=function(a){var b=this.activeInteractionData[a];b&&(delete this.activeInteractionData[a],this.interactionDataPool.push(b))},b.prototype.configureInteractionEventForDOMEvent=function(a,b,c){return a.data=c,this.mapPositionToPoint(c.global,b.clientX,b.clientY),navigator.isCocoonJS&&"touch"===event.pointerType&&(c.global.x=c.global.x/this.resolution,c.global.y=c.global.y/this.resolution),"touch"===b.pointerType&&(b.globalX=c.global.x,b.globalY=c.global.y),c.originalEvent=b,a._reset(),a},b.prototype.normalizeToPointerData=function(a){var b=[];if(this.supportsTouchEvents&&a instanceof TouchEvent)for(var c=0,d=a.changedTouches.length;d>c;c++){var e=a.changedTouches[c];"undefined"==typeof e.button&&(e.button=a.touches.length?1:0),"undefined"==typeof e.buttons&&(e.buttons=a.touches.length?1:0),"undefined"==typeof e.isPrimary&&(e.isPrimary=1===a.touches.length),"undefined"==typeof e.width&&(e.width=e.radiusX||1),"undefined"==typeof e.height&&(e.height=e.radiusY||1),"undefined"==typeof e.tiltX&&(e.tiltX=0),"undefined"==typeof e.tiltY&&(e.tiltY=0),"undefined"==typeof e.pointerType&&(e.pointerType="touch"),"undefined"==typeof e.pointerId&&(e.pointerId=e.identifier||0),"undefined"==typeof e.pressure&&(e.pressure=e.force||.5),"undefined"==typeof e.rotation&&(e.rotation=e.rotationAngle||0),"undefined"==typeof e.layerX&&(e.layerX=e.offsetX=e.clientX),"undefined"==typeof e.layerY&&(e.layerY=e.offsetY=e.clientY),b.push(e)}else a instanceof MouseEvent?("undefined"==typeof a.isPrimary&&(a.isPrimary=!0),"undefined"==typeof a.width&&(a.width=1),"undefined"==typeof a.height&&(a.height=1),"undefined"==typeof a.tiltX&&(a.tiltX=0),"undefined"==typeof a.tiltY&&(a.tiltY=0),"undefined"==typeof a.pointerType&&(a.pointerType="mouse"),"undefined"==typeof a.pointerId&&(a.pointerId=w),"undefined"==typeof a.pressure&&(a.pressure=.5),"undefined"==typeof a.rotation&&(a.rotation=0),b.push(a)):b.push(a);return b},b.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},b}(r["default"]);c["default"]=x,j.WebGLRenderer.registerPlugin("interaction",x),j.CanvasRenderer.registerPlugin("interaction",x)},{"../core":61,"./InteractionData":145,"./InteractionEvent":146,"./InteractionTrackingData":148,"./interactiveTarget":150,eventemitter3:3,ismobilejs:4}],148:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=function(){function a(b){d(this,a),this._pointerId=b,this._flags=a.FLAGS.NONE}return a.prototype._doSet=function(a,b){b?this._flags=this._flags|a:this._flags=this._flags&~a},e(a,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(a){this._flags=a}},{key:"over",get:function(){return 0!==(this._flags|this.constructor.FLAGS.OVER)},set:function(a){this._doSet(this.constructor.FLAGS.OVER,a)}},{key:"rightDown",get:function(){return 0!==(this._flags|this.constructor.FLAGS.RIGHT_DOWN)},set:function(a){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,a)}},{key:"leftDown",get:function(){return 0!==(this._flags|this.constructor.FLAGS.LEFT_DOWN)},set:function(a){this._doSet(this.constructor.FLAGS.LEFT_DOWN,a)}}]),a}();c["default"]=f,f.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],149:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./InteractionData");Object.defineProperty(c,"InteractionData",{enumerable:!0,get:function(){return d(e)["default"]}});var f=a("./InteractionManager");Object.defineProperty(c,"InteractionManager",{enumerable:!0,get:function(){return d(f)["default"]}});var g=a("./interactiveTarget");Object.defineProperty(c,"interactiveTarget",{enumerable:!0,get:function(){return d(g)["default"]}})},{"./InteractionData":145,"./InteractionManager":147,"./interactiveTarget":150}],150:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]={interactive:!1,interactiveChildren:!0,hitArea:null,buttonMode:!1,defaultCursor:"pointer",getTrackedPointers:function(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers}}},{}],151:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){var c={},d=a.data.getElementsByTagName("info")[0],e=a.data.getElementsByTagName("common")[0];c.font=d.getAttribute("face"),c.size=parseInt(d.getAttribute("size"),10),c.lineHeight=parseInt(e.getAttribute("lineHeight"),10),c.chars={};for(var f=a.data.getElementsByTagName("char"),g=0;g<f.length;g++){var i=parseInt(f[g].getAttribute("id"),10),k=new h.Rectangle(parseInt(f[g].getAttribute("x"),10)+b.frame.x,parseInt(f[g].getAttribute("y"),10)+b.frame.y,parseInt(f[g].getAttribute("width"),10),parseInt(f[g].getAttribute("height"),10));c.chars[i]={xOffset:parseInt(f[g].getAttribute("xoffset"),10),yOffset:parseInt(f[g].getAttribute("yoffset"),10),xAdvance:parseInt(f[g].getAttribute("xadvance"),10),kerning:{},texture:new h.Texture(b.baseTexture,k)}}for(var l=a.data.getElementsByTagName("kerning"),m=0;m<l.length;m++){var n=parseInt(l[m].getAttribute("first"),10),o=parseInt(l[m].getAttribute("second"),10),p=parseInt(l[m].getAttribute("amount"),10);c.chars[o]&&(c.chars[o].kerning[n]=p)}a.bitmapFont=c,j.BitmapText.fonts[c.font]=c}c.__esModule=!0,c.parse=e,c["default"]=function(){return function(a,b){if(!a.data||!a.isXml)return void b();if(0===a.data.getElementsByTagName("page").length||0===a.data.getElementsByTagName("info").length||null===a.data.getElementsByTagName("info")[0].getAttribute("face"))return void b();var c=a.isDataUrl?"":g.dirname(a.url);a.isDataUrl&&("."===c&&(c=""),this.baseUrl&&c&&("/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(c+="/"),c=c.replace(this.baseUrl,""))),c&&"/"!==c.charAt(c.length-1)&&(c+="/");var d=c+a.data.getElementsByTagName("page")[0].getAttribute("file");if(h.utils.TextureCache[d])e(a,h.utils.TextureCache[d]),b();else{var f={crossOrigin:a.crossOrigin,loadType:i.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata};this.add(a.name+"_image",d,f,function(c){e(a,c.texture),b()})}}};var f=a("path"),g=d(f),h=a("../core"),i=a("resource-loader"),j=a("../extras")},{"../core":61,"../extras":131,path:22,"resource-loader":35}],152:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./loader");Object.defineProperty(c,"Loader",{enumerable:!0,get:function(){return d(e)["default"]}});var f=a("./bitmapFontParser");Object.defineProperty(c,"bitmapFontParser",{enumerable:!0,get:function(){return d(f)["default"]}}),Object.defineProperty(c,"parseBitmapFontData",{enumerable:!0,get:function(){return f.parse}});var g=a("./spritesheetParser");Object.defineProperty(c,"spritesheetParser",{enumerable:!0,get:function(){return d(g)["default"]}});var h=a("./textureParser");Object.defineProperty(c,"textureParser",{enumerable:!0,get:function(){return d(h)["default"]}});var i=a("resource-loader");Object.defineProperty(c,"Resource",{enumerable:!0,get:function(){return i.Resource}})},{"./bitmapFontParser":151,"./loader":153,"./spritesheetParser":154,"./textureParser":155,"resource-loader":35}],153:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("resource-loader"),i=d(h),j=a("./textureParser"),k=d(j),l=a("./spritesheetParser"),m=d(l),n=a("./bitmapFontParser"),o=d(n),p=function(a){function b(c,d){e(this,b);for(var g=f(this,a.call(this,c,d)),h=0;h<b._pixiMiddleware.length;++h)g.use(b._pixiMiddleware[h]());return g}return g(b,a),b.addPixiMiddleware=function(a){b._pixiMiddleware.push(a)},b}(i["default"]);c["default"]=p,p._pixiMiddleware=[i["default"].middleware.parsing.blob,k["default"],m["default"],o["default"]];var q=i["default"].Resource;q.setExtensionXhrType("fnt",q.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":151,"./spritesheetParser":154,"./textureParser":155,"resource-loader":35}],154:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0,c["default"]=function(){return function(a,b){var c=void 0,d=a.name+"_image";if(!a.data||!a.isJson||!a.data.frames||this.resources[d])return void b();var e={crossOrigin:a.crossOrigin,loadType:f.Resource.LOAD_TYPE.IMAGE,metadata:a.metadata.imageMetadata};c=a.isDataUrl?a.data.meta.image:h["default"].dirname(a.url.replace(this.baseUrl,""))+"/"+a.data.meta.image,this.add(d,c,e,function(c){function d(b,c){for(var d=b;c>d-b&&d<i.length;){var e=i[d],f=h[e].frame;if(f){var g=null,k=null,m=new j.Rectangle(0,0,h[e].sourceSize.w/n,h[e].sourceSize.h/n);g=h[e].rotated?new j.Rectangle(f.x/n,f.y/n,f.h/n,f.w/n):new j.Rectangle(f.x/n,f.y/n,f.w/n,f.h/n),h[e].trimmed&&(k=new j.Rectangle(h[e].spriteSourceSize.x/n,h[e].spriteSourceSize.y/n,f.w/n,f.h/n)),a.textures[e]=new j.Texture(l,g,m,k,h[e].rotated?2:0),j.utils.TextureCache[e]=a.textures[e]}d++}}function e(){return o*k<i.length}function f(a){d(o*k,k),o++,setTimeout(a,0)}function g(){f(function(){e()?g():b()})}a.textures={};var h=a.data.frames,i=Object.keys(h),l=c.texture.baseTexture,m=a.data.meta.scale,n=j.utils.getResolutionOfUrl(a.url,null);null===n&&(n=void 0!==m?m:1),1!==n&&(l.resolution=n,l.update());var o=0;i.length<=k?(d(0,k),b()):g()})}};var f=a("resource-loader"),g=a("path"),h=e(g),i=a("../core"),j=d(i),k=1e3},{"../core":61,path:22,"resource-loader":35}],155:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}c.__esModule=!0,c["default"]=function(){return function(a,b){if(a.data&&a.isImage){var c=new f.BaseTexture(a.data,null,f.utils.getResolutionOfUrl(a.url));c.imageUrl=a.url,a.texture=new f.Texture(c),f.utils.BaseTextureCache[a.name]=c,f.utils.TextureCache[a.name]=a.texture,a.name!==a.url&&(f.utils.BaseTextureCache[a.url]=c,f.utils.TextureCache[a.url]=a.texture)}b()}};var e=a("../core"),f=d(e)},{"../core":61}],156:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("../core"),j=d(i),k=new j.Point,l=new j.Polygon,m=function(a){function b(c,d,g,h,i){e(this,b);var k=f(this,a.call(this));return k._texture=null,k.uvs=g||new Float32Array([0,0,1,0,1,1,0,1]),k.vertices=d||new Float32Array([0,0,100,0,100,100,0,100]),k.indices=h||new Uint16Array([0,1,3,2]),k.dirty=0,k.indexDirty=0,k.blendMode=j.BLEND_MODES.NORMAL,k.canvasPadding=0,k.drawMode=i||b.DRAW_MODES.TRIANGLE_MESH,k.texture=c,k.shader=null,k.tintRgb=new Float32Array([1,1,1]),k._glDatas={},k.pluginName="mesh",k}return g(b,a),b.prototype._renderWebGL=function(a){a.setObjectRenderer(a.plugins[this.pluginName]),a.plugins[this.pluginName].render(this)},b.prototype._renderCanvas=function(a){a.plugins[this.pluginName].render(this)},b.prototype._onTextureUpdate=function(){},b.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},b.prototype.containsPoint=function(a){if(!this.getBounds().contains(a.x,a.y))return!1;this.worldTransform.applyInverse(a,k);for(var c=this.vertices,d=l.points,e=this.indices,f=this.indices.length,g=this.drawMode===b.DRAW_MODES.TRIANGLES?3:1,h=0;f>h+2;h+=g){var i=2*e[h],j=2*e[h+1],m=2*e[h+2];if(d[0]=c[i],d[1]=c[i+1],d[2]=c[j],d[3]=c[j+1],d[4]=c[m],d[5]=c[m+1],l.contains(k.x,k.y))return!0}return!1},h(b,[{key:"texture",get:function(){return this._texture},set:function(a){this._texture!==a&&(this._texture=a,a&&(a.baseTexture.hasLoaded?this._onTextureUpdate():a.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return j.utils.rgb2hex(this.tintRgb)},set:function(a){this.tintRgb=j.utils.hex2rgb(a,this.tintRgb)}}]),b}(j.Container);c["default"]=m,m.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":61}],157:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Plane"),j=d(i),k=10,l=function(a){function b(c,d,g,h,i){e(this,b);var j=f(this,a.call(this,c,4,4)),l=j.uvs;return l[6]=l[14]=l[22]=l[30]=1,l[25]=l[27]=l[29]=l[31]=1,j._origWidth=c.width,j._origHeight=c.height,j._uvw=1/j._origWidth,j._uvh=1/j._origHeight,j.width=c.width,j.height=c.height,l[2]=l[10]=l[18]=l[26]=j._uvw*d,l[4]=l[12]=l[20]=l[28]=1-j._uvw*h,l[9]=l[11]=l[13]=l[15]=j._uvh*g,l[17]=l[19]=l[21]=l[23]=1-j._uvh*i,j.leftWidth="undefined"!=typeof d?d:k,j.rightWidth="undefined"!=typeof h?h:k,j.topHeight="undefined"!=typeof g?g:k,j.bottomHeight="undefined"!=typeof i?i:k,j}return g(b,a),b.prototype.updateHorizontalVertices=function(){var a=this.vertices;a[9]=a[11]=a[13]=a[15]=this._topHeight,a[17]=a[19]=a[21]=a[23]=this._height-this._bottomHeight,a[25]=a[27]=a[29]=a[31]=this._height},b.prototype.updateVerticalVertices=function(){var a=this.vertices;a[2]=a[10]=a[18]=a[26]=this._leftWidth,a[4]=a[12]=a[20]=a[28]=this._width-this._rightWidth,a[6]=a[14]=a[22]=a[30]=this._width},b.prototype._renderCanvas=function(a){var b=a.context;b.globalAlpha=this.worldAlpha;var c=this.worldTransform,d=a.resolution;a.roundPixels?b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d|0,c.ty*d|0):b.setTransform(c.a*d,c.b*d,c.c*d,c.d*d,c.tx*d,c.ty*d);var e=this._texture.baseTexture,f=e.source,g=e.width,h=e.height;this.drawSegment(b,f,g,h,0,1,10,11),this.drawSegment(b,f,g,h,2,3,12,13),this.drawSegment(b,f,g,h,4,5,14,15),this.drawSegment(b,f,g,h,8,9,18,19),this.drawSegment(b,f,g,h,10,11,20,21),this.drawSegment(b,f,g,h,12,13,22,23),this.drawSegment(b,f,g,h,16,17,26,27),this.drawSegment(b,f,g,h,18,19,28,29),this.drawSegment(b,f,g,h,20,21,30,31)},b.prototype.drawSegment=function(a,b,c,d,e,f,g,h){var i=this.uvs,j=this.vertices,k=(i[g]-i[e])*c,l=(i[h]-i[f])*d,m=j[g]-j[e],n=j[h]-j[f];1>k&&(k=1),1>l&&(l=1),1>m&&(m=1),1>n&&(n=1),a.drawImage(b,i[e]*c,i[f]*d,k,l,j[e],j[f],m,n)},h(b,[{key:"width",get:function(){return this._width},set:function(a){this._width=a,this.updateVerticalVertices()}},{key:"height",get:function(){return this._height},set:function(a){this._height=a,this.updateHorizontalVertices()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(a){this._leftWidth=a;var b=this.uvs,c=this.vertices;b[2]=b[10]=b[18]=b[26]=this._uvw*a,c[2]=c[10]=c[18]=c[26]=a,this.dirty=!0}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(a){this._rightWidth=a;var b=this.uvs,c=this.vertices;b[4]=b[12]=b[20]=b[28]=1-this._uvw*a,c[4]=c[12]=c[20]=c[28]=this._width-a,this.dirty=!0}},{key:"topHeight",get:function(){return this._topHeight},set:function(a){this._topHeight=a;var b=this.uvs,c=this.vertices;b[9]=b[11]=b[13]=b[15]=this._uvh*a,c[9]=c[11]=c[13]=c[15]=a,this.dirty=!0}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(a){this._bottomHeight=a;var b=this.uvs,c=this.vertices;b[17]=b[19]=b[21]=b[23]=1-this._uvh*a,c[17]=c[19]=c[21]=c[23]=this._height-a,this.dirty=!0}}]),b}(j["default"]);c["default"]=l},{"./Plane":158}],158:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("./Mesh"),i=d(h),j=function(a){function b(c,d,g){e(this,b);var h=f(this,a.call(this,c));return h._ready=!0,h.verticesX=d||10,h.verticesY=g||10,h.drawMode=i["default"].DRAW_MODES.TRIANGLES,h.refresh(),h}return g(b,a),b.prototype.refresh=function(){for(var a=this.verticesX*this.verticesY,b=[],c=[],d=[],e=[],f=this.texture,g=this.verticesX-1,h=this.verticesY-1,i=f.width/g,j=f.height/h,k=0;a>k;k++)if(f._uvs){var l=k%this.verticesX,m=k/this.verticesX|0;b.push(l*i,m*j),d.push(f._uvs.x0+(f._uvs.x1-f._uvs.x0)*(l/(this.verticesX-1)),f._uvs.y0+(f._uvs.y3-f._uvs.y0)*(m/(this.verticesY-1)))}else d.push(0);for(var n=g*h,o=0;n>o;o++){var p=o%g,q=o/g|0,r=q*this.verticesX+p,s=q*this.verticesX+p+1,t=(q+1)*this.verticesX+p,u=(q+1)*this.verticesX+p+1;e.push(r,s,t),e.push(s,u,t)}this.vertices=new Float32Array(b),this.uvs=new Float32Array(d),this.colors=new Float32Array(c),this.indices=new Uint16Array(e),this.indexDirty=!0},b.prototype._onTextureUpdate=function(){i["default"].prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},b}(i["default"]);c["default"]=j},{"./Mesh":156}],159:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a){return a&&a.__esModule?a:{"default":a}}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=a("./Mesh"),j=e(i),k=a("../core"),l=d(k),m=function(a){function b(c,d){f(this,b);var e=g(this,a.call(this,c));return e.points=d,e.vertices=new Float32Array(4*d.length),e.uvs=new Float32Array(4*d.length),e.colors=new Float32Array(2*d.length),e.indices=new Uint16Array(2*d.length),e._ready=!0,e.refresh(),e}return h(b,a),b.prototype.refresh=function(){var a=this.points;if(!(a.length<1)&&this._texture._uvs){this.vertices.length/4!==a.length&&(this.vertices=new Float32Array(4*a.length),this.uvs=new Float32Array(4*a.length),this.colors=new Float32Array(2*a.length),this.indices=new Uint16Array(2*a.length));var b=this.uvs,c=this.indices,d=this.colors,e=this._texture._uvs,f=new l.Point(e.x0,e.y0),g=new l.Point(e.x2-e.x0,e.y2-e.y0);b[0]=0+f.x,b[1]=0+f.y,b[2]=0+f.x,b[3]=Number(g.y)+f.y,d[0]=1,d[1]=1,c[0]=0,c[1]=1;for(var h=a.length,i=1;h>i;i++){var j=4*i,k=i/(h-1);b[j]=k*g.x+f.x,b[j+1]=0+f.y,b[j+2]=k*g.x+f.x,b[j+3]=Number(g.y)+f.y,j=2*i,d[j]=1,d[j+1]=1,j=2*i,c[j]=j,c[j+1]=j+1}this.dirty++,this.indexDirty++}},b.prototype._onTextureUpdate=function(){a.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},b.prototype.updateTransform=function(){var a=this.points;if(!(a.length<1)){for(var b=a[0],c=void 0,d=0,e=0,f=this.vertices,g=a.length,h=0;g>h;h++){var i=a[h],j=4*h;c=h<a.length-1?a[h+1]:i,e=-(c.x-b.x),d=c.y-b.y;var k=10*(1-h/(g-1));k>1&&(k=1);var l=Math.sqrt(d*d+e*e),m=this._texture.height/2;d/=l,e/=l,d*=m,e*=m,f[j]=i.x+d,f[j+1]=i.y+e,f[j+2]=i.x-d,f[j+3]=i.y-e,b=i}this.containerUpdateTransform()}},b}(j["default"]);c["default"]=m},{"../core":61,"./Mesh":156}],160:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var g=a("../../core"),h=e(g),i=a("../Mesh"),j=d(i),k=function(){function a(b){f(this,a),this.renderer=b}return a.prototype.render=function(a){var b=this.renderer,c=b.context,d=a.worldTransform,e=b.resolution;b.roundPixels?c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e|0,d.ty*e|0):c.setTransform(d.a*e,d.b*e,d.c*e,d.d*e,d.tx*e,d.ty*e),b.setBlendMode(a.blendMode),a.drawMode===j["default"].DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(a):this._renderTriangles(a)},a.prototype._renderTriangleMesh=function(a){for(var b=a.vertices.length/2,c=0;b-2>c;c++){var d=2*c;this._renderDrawTriangle(a,d,d+2,d+4)}},a.prototype._renderTriangles=function(a){for(var b=a.indices,c=b.length,d=0;c>d;d+=3){var e=2*b[d],f=2*b[d+1],g=2*b[d+2];this._renderDrawTriangle(a,e,f,g)}},a.prototype._renderDrawTriangle=function(a,b,c,d){var e=this.renderer.context,f=a.uvs,g=a.vertices,h=a._texture;if(h.valid){var i=h.baseTexture,j=i.source,k=i.width,l=i.height,m=f[b]*i.width,n=f[c]*i.width,o=f[d]*i.width,p=f[b+1]*i.height,q=f[c+1]*i.height,r=f[d+1]*i.height,s=g[b],t=g[c],u=g[d],v=g[b+1],w=g[c+1],x=g[d+1];if(a.canvasPadding>0){var y=a.canvasPadding/a.worldTransform.a,z=a.canvasPadding/a.worldTransform.d,A=(s+t+u)/3,B=(v+w+x)/3,C=s-A,D=v-B,E=Math.sqrt(C*C+D*D);s=A+C/E*(E+y),v=B+D/E*(E+z),C=t-A,D=w-B,E=Math.sqrt(C*C+D*D),t=A+C/E*(E+y),w=B+D/E*(E+z),C=u-A,D=x-B,E=Math.sqrt(C*C+D*D),u=A+C/E*(E+y),x=B+D/E*(E+z)}e.save(),e.beginPath(),e.moveTo(s,v),e.lineTo(t,w),e.lineTo(u,x),e.closePath(),e.clip();var F=m*q+p*o+n*r-q*o-p*n-m*r,G=s*q+p*u+t*r-q*u-p*t-s*r,H=m*t+s*o+n*u-t*o-s*n-m*u,I=m*q*u+p*t*o+s*n*r-s*q*o-p*n*u-m*t*r,J=v*q+p*x+w*r-q*x-p*w-v*r,K=m*w+v*o+n*x-w*o-v*n-m*x,L=m*q*x+p*w*o+v*n*r-v*q*o-p*n*x-m*w*r;e.transform(G/F,J/F,H/F,K/F,I/F,L/F),e.drawImage(j,0,0,k*i.resolution,l*i.resolution,0,0,k,l),e.restore()}},a.prototype.renderMeshFlat=function(a){var b=this.renderer.context,c=a.vertices,d=c.length/2;b.beginPath();for(var e=1;d-2>e;++e){var f=2*e,g=c[f],h=c[f+1],i=c[f+2],j=c[f+3],k=c[f+4],l=c[f+5];b.moveTo(g,h),b.lineTo(i,j),b.lineTo(k,l)}b.fillStyle="#FF0000",b.fill(),b.closePath()},a.prototype.destroy=function(){this.renderer=null},a}();c["default"]=k,h.CanvasRenderer.registerPlugin("mesh",k)},{"../../core":61,"../Mesh":156}],161:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./Mesh");Object.defineProperty(c,"Mesh",{enumerable:!0,get:function(){return d(e)["default"]}});var f=a("./webgl/MeshRenderer");Object.defineProperty(c,"MeshRenderer",{enumerable:!0,get:function(){return d(f)["default"]}});var g=a("./canvas/CanvasMeshRenderer");Object.defineProperty(c,"CanvasMeshRenderer",{enumerable:!0,get:function(){return d(g)["default"]}});var h=a("./Plane");Object.defineProperty(c,"Plane",{enumerable:!0,
get:function(){return d(h)["default"]}});var i=a("./NineSlicePlane");Object.defineProperty(c,"NineSlicePlane",{enumerable:!0,get:function(){return d(i)["default"]}});var j=a("./Rope");Object.defineProperty(c,"Rope",{enumerable:!0,get:function(){return d(j)["default"]}})},{"./Mesh":156,"./NineSlicePlane":157,"./Plane":158,"./Rope":159,"./canvas/CanvasMeshRenderer":160,"./webgl/MeshRenderer":162}],162:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=a("../../core"),j=e(i),k=a("pixi-gl-core"),l=d(k),m=a("../Mesh"),n=d(m),o=(a("path"),function(a){function b(c){f(this,b);var d=g(this,a.call(this,c));return d.shader=null,d}return h(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.shader=new j.Shader(a,"attribute vec2 aVertexPosition;\r\nattribute vec2 aTextureCoord;\r\n\r\nuniform mat3 translationMatrix;\r\nuniform mat3 projectionMatrix;\r\n\r\nvarying vec2 vTextureCoord;\r\n\r\nvoid main(void)\r\n{\r\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r\n\r\n    vTextureCoord = aTextureCoord;\r\n}\r\n","varying vec2 vTextureCoord;\r\nuniform float alpha;\r\nuniform vec3 tint;\r\n\r\nuniform sampler2D uSampler;\r\n\r\nvoid main(void)\r\n{\r\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * vec4(tint * alpha, alpha);\r\n}\r\n")},b.prototype.render=function(a){var b=this.renderer,c=b.gl,d=a._texture;if(d.valid){var e=a._glDatas[b.CONTEXT_UID];e||(b.bindVao(null),e={shader:this.shader,vertexBuffer:l["default"].GLBuffer.createVertexBuffer(c,a.vertices,c.STREAM_DRAW),uvBuffer:l["default"].GLBuffer.createVertexBuffer(c,a.uvs,c.STREAM_DRAW),indexBuffer:l["default"].GLBuffer.createIndexBuffer(c,a.indices,c.STATIC_DRAW),vao:null,dirty:a.dirty,indexDirty:a.indexDirty},e.vao=new l["default"].VertexArrayObject(c).addIndex(e.indexBuffer).addAttribute(e.vertexBuffer,e.shader.attributes.aVertexPosition,c.FLOAT,!1,8,0).addAttribute(e.uvBuffer,e.shader.attributes.aTextureCoord,c.FLOAT,!1,8,0),a._glDatas[b.CONTEXT_UID]=e),a.dirty!==e.dirty&&(e.dirty=a.dirty,e.uvBuffer.upload(a.uvs)),a.indexDirty!==e.indexDirty&&(e.indexDirty=a.indexDirty,e.indexBuffer.upload(a.indices)),e.vertexBuffer.upload(a.vertices),b.bindShader(e.shader),e.shader.uniforms.uSampler=b.bindTexture(d),b.state.setBlendMode(a.blendMode),e.shader.uniforms.translationMatrix=a.worldTransform.toArray(!0),e.shader.uniforms.alpha=a.worldAlpha,e.shader.uniforms.tint=a.tintRgb;var f=a.drawMode===n["default"].DRAW_MODES.TRIANGLE_MESH?c.TRIANGLE_STRIP:c.TRIANGLES;b.bindVao(e.vao),e.vao.draw(f,a.indices.length,0)}},b}(j.ObjectRenderer));c["default"]=o,j.WebGLRenderer.registerPlugin("mesh",o)},{"../../core":61,"../Mesh":156,path:22,"pixi-gl-core":12}],163:[function(a,b,c){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../core"),i=d(h),j=function(a){function b(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,d=arguments[1],g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384;e(this,b);var h=f(this,a.call(this)),j=16384;return g>j&&(g=j),g>c&&(g=c),h._properties=[!1,!0,!1,!1,!1],h._maxSize=c,h._batchSize=g,h._glBuffers={},h._bufferToUpdate=0,h.interactiveChildren=!1,h.blendMode=i.BLEND_MODES.NORMAL,h.roundPixels=!0,h.baseTexture=null,h.setProperties(d),h}return g(b,a),b.prototype.setProperties=function(a){a&&(this._properties[0]="scale"in a?!!a.scale:this._properties[0],this._properties[1]="position"in a?!!a.position:this._properties[1],this._properties[2]="rotation"in a?!!a.rotation:this._properties[2],this._properties[3]="uvs"in a?!!a.uvs:this._properties[3],this._properties[4]="alpha"in a?!!a.alpha:this._properties[4])},b.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},b.prototype.renderWebGL=function(a){var b=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return b.onChildrenChange(0)})),a.setObjectRenderer(a.plugins.particle),a.plugins.particle.render(this))},b.prototype.onChildrenChange=function(a){var b=Math.floor(a/this._batchSize);b<this._bufferToUpdate&&(this._bufferToUpdate=b)},b.prototype.renderCanvas=function(a){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var b=a.context,c=this.worldTransform,d=!0,e=0,f=0,g=0,h=0,i=a.blendModes[this.blendMode];i!==b.globalCompositeOperation&&(b.globalCompositeOperation=i),b.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var j=0;j<this.children.length;++j){var k=this.children[j];if(k.visible){var l=k.texture.frame;if(b.globalAlpha=this.worldAlpha*k.alpha,k.rotation%(2*Math.PI)===0)d&&(b.setTransform(c.a,c.b,c.c,c.d,c.tx*a.resolution,c.ty*a.resolution),d=!1),e=k.anchor.x*(-l.width*k.scale.x)+k.position.x+.5,f=k.anchor.y*(-l.height*k.scale.y)+k.position.y+.5,g=l.width*k.scale.x,h=l.height*k.scale.y;else{d||(d=!0),k.displayObjectUpdateTransform();var m=k.worldTransform;a.roundPixels?b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution|0,m.ty*a.resolution|0):b.setTransform(m.a,m.b,m.c,m.d,m.tx*a.resolution,m.ty*a.resolution),e=k.anchor.x*-l.width+.5,f=k.anchor.y*-l.height+.5,g=l.width,h=l.height}var n=k.texture.baseTexture.resolution;b.drawImage(k.texture.baseTexture.source,l.x*n,l.y*n,l.width*n,l.height*n,e*n,f*n,g*n,h*n)}}}},b.prototype.destroy=function(b){if(a.prototype.destroy.call(this,b),this._buffers)for(var c=0;c<this._buffers.length;++c)this._buffers[c].destroy();this._properties=null,this._buffers=null},b}(i.Container);c["default"]=j},{"../core":61}],164:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./ParticleContainer");Object.defineProperty(c,"ParticleContainer",{enumerable:!0,get:function(){return d(e)["default"]}});var f=a("./webgl/ParticleRenderer");Object.defineProperty(c,"ParticleRenderer",{enumerable:!0,get:function(){return d(f)["default"]}})},{"./ParticleContainer":163,"./webgl/ParticleRenderer":166}],165:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var f=a("pixi-gl-core"),g=d(f),h=a("../../core/utils/createIndicesForQuads"),i=d(h),j=function(){function a(b,c,d,f){e(this,a),this.gl=b,this.vertSize=2,this.vertByteSize=4*this.vertSize,this.size=f,this.dynamicProperties=[],this.staticProperties=[];for(var g=0;g<c.length;++g){var h=c[g];h={attribute:h.attribute,size:h.size,uploadFunction:h.uploadFunction,offset:h.offset},d[g]?this.dynamicProperties.push(h):this.staticProperties.push(h)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.initBuffers()}return a.prototype.initBuffers=function(){var a=this.gl,b=0;this.indices=(0,i["default"])(this.size),this.indexBuffer=g["default"].GLBuffer.createIndexBuffer(a,this.indices,a.STATIC_DRAW),this.dynamicStride=0;for(var c=0;c<this.dynamicProperties.length;++c){var d=this.dynamicProperties[c];d.offset=b,b+=d.size,this.dynamicStride+=d.size}this.dynamicData=new Float32Array(this.size*this.dynamicStride*4),this.dynamicBuffer=g["default"].GLBuffer.createVertexBuffer(a,this.dynamicData,a.STREAM_DRAW);var e=0;this.staticStride=0;for(var f=0;f<this.staticProperties.length;++f){var h=this.staticProperties[f];h.offset=e,e+=h.size,this.staticStride+=h.size}this.staticData=new Float32Array(this.size*this.staticStride*4),this.staticBuffer=g["default"].GLBuffer.createVertexBuffer(a,this.staticData,a.STATIC_DRAW),this.vao=new g["default"].VertexArrayObject(a).addIndex(this.indexBuffer);for(var j=0;j<this.dynamicProperties.length;++j){var k=this.dynamicProperties[j];this.vao.addAttribute(this.dynamicBuffer,k.attribute,a.FLOAT,!1,4*this.dynamicStride,4*k.offset)}for(var l=0;l<this.staticProperties.length;++l){var m=this.staticProperties[l];this.vao.addAttribute(this.staticBuffer,m.attribute,a.FLOAT,!1,4*this.staticStride,4*m.offset)}},a.prototype.uploadDynamic=function(a,b,c){for(var d=0;d<this.dynamicProperties.length;d++){var e=this.dynamicProperties[d];e.uploadFunction(a,b,c,this.dynamicData,this.dynamicStride,e.offset)}this.dynamicBuffer.upload()},a.prototype.uploadStatic=function(a,b,c){for(var d=0;d<this.staticProperties.length;d++){var e=this.staticProperties[d];e.uploadFunction(a,b,c,this.staticData,this.staticStride,e.offset)}this.staticBuffer.upload()},a.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},a}();c["default"]=j},{"../../core/utils/createIndicesForQuads":115,"pixi-gl-core":12}],166:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var i=a("../../core"),j=e(i),k=a("./ParticleShader"),l=d(k),m=a("./ParticleBuffer"),n=d(m),o=function(a){function b(c){f(this,b);var d=g(this,a.call(this,c));return d.shader=null,d.indexBuffer=null,d.properties=null,d.tempMatrix=new j.Matrix,d.CONTEXT_UID=0,d}return h(b,a),b.prototype.onContextChange=function(){var a=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new l["default"](a),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,uploadFunction:this.uploadAlpha,offset:0}]},b.prototype.start=function(){this.renderer.bindShader(this.shader)},b.prototype.render=function(a){var b=a.children,c=a._maxSize,d=a._batchSize,e=this.renderer,f=b.length;if(0!==f){f>c&&(f=c);var g=a._glBuffers[e.CONTEXT_UID];g||(g=a._glBuffers[e.CONTEXT_UID]=this.generateBuffers(a)),this.renderer.setBlendMode(a.blendMode);var h=e.gl,i=a.worldTransform.copy(this.tempMatrix);i.prepend(e._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=i.toArray(!0),this.shader.uniforms.uAlpha=a.worldAlpha;var j=b[0]._texture.baseTexture;this.shader.uniforms.uSampler=e.bindTexture(j);for(var k=0,l=0;f>k;k+=d,l+=1){var m=f-k;m>d&&(m=d);var n=g[l];n.uploadDynamic(b,k,m),a._bufferToUpdate===l&&(n.uploadStatic(b,k,m),a._bufferToUpdate=l+1),e.bindVao(n.vao),n.vao.draw(h.TRIANGLES,6*m)}}},b.prototype.generateBuffers=function(a){for(var b=this.renderer.gl,c=[],d=a._maxSize,e=a._batchSize,f=a._properties,g=0;d>g;g+=e)c.push(new n["default"](b,this.properties,f,e));return c},b.prototype.uploadVertices=function(a,b,c,d,e,f){for(var g=0,h=0,i=0,j=0,k=0;c>k;++k){var l=a[b+k],m=l._texture,n=l.scale.x,o=l.scale.y,p=m.trim,q=m.orig;p?(h=p.x-l.anchor.x*q.width,g=h+p.width,j=p.y-l.anchor.y*q.height,i=j+p.height):(g=q.width*(1-l.anchor.x),h=q.width*-l.anchor.x,i=q.height*(1-l.anchor.y),j=q.height*-l.anchor.y),d[f]=h*n,d[f+1]=j*o,d[f+e]=g*n,d[f+e+1]=j*o,d[f+2*e]=g*n,d[f+2*e+1]=i*o,d[f+3*e]=h*n,d[f+3*e+1]=i*o,f+=4*e}},b.prototype.uploadPosition=function(a,b,c,d,e,f){for(var g=0;c>g;g++){var h=a[b+g].position;d[f]=h.x,d[f+1]=h.y,d[f+e]=h.x,d[f+e+1]=h.y,d[f+2*e]=h.x,d[f+2*e+1]=h.y,d[f+3*e]=h.x,d[f+3*e+1]=h.y,f+=4*e}},b.prototype.uploadRotation=function(a,b,c,d,e,f){for(var g=0;c>g;g++){var h=a[b+g].rotation;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},b.prototype.uploadUvs=function(a,b,c,d,e,f){for(var g=0;c>g;++g){var h=a[b+g]._texture._uvs;h?(d[f]=h.x0,d[f+1]=h.y0,d[f+e]=h.x1,d[f+e+1]=h.y1,d[f+2*e]=h.x2,d[f+2*e+1]=h.y2,d[f+3*e]=h.x3,d[f+3*e+1]=h.y3,f+=4*e):(d[f]=0,d[f+1]=0,d[f+e]=0,d[f+e+1]=0,d[f+2*e]=0,d[f+2*e+1]=0,d[f+3*e]=0,d[f+3*e+1]=0,f+=4*e)}},b.prototype.uploadAlpha=function(a,b,c,d,e,f){for(var g=0;c>g;g++){var h=a[b+g].alpha;d[f]=h,d[f+e]=h,d[f+2*e]=h,d[f+3*e]=h,f+=4*e}},b.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),a.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},b}(j.ObjectRenderer);c["default"]=o,j.WebGLRenderer.registerPlugin("particle",o)},{"../../core":61,"./ParticleBuffer":165,"./ParticleShader":167}],167:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}c.__esModule=!0;var h=a("../../core/Shader"),i=d(h),j=function(a){function b(c){return e(this,b),f(this,a.call(this,c,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute float aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","varying vec2 vTextureCoord;","varying float vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying float vColor;","uniform sampler2D uSampler;","uniform float uAlpha;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor * uAlpha;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return g(b,a),b}(i["default"]);c["default"]=j},{"../../core/Shader":41}],168:[function(a,b,c){"use strict";Math.sign||(Math.sign=function(a){return a=Number(a),0===a||isNaN(a)?a:a>0?1:-1})},{}],169:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("object-assign"),f=d(e);Object.assign||(Object.assign=f["default"])},{"object-assign":5}],170:[function(a,b,c){"use strict";a("./Object.assign"),a("./requestAnimationFrame"),a("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":168,"./Object.assign":169,"./requestAnimationFrame":171}],171:[function(a,b,c){(function(a){"use strict";var b=16;Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),a.performance&&a.performance.now||!function(){var b=Date.now();a.performance||(a.performance={}),a.performance.now=function(){return Date.now()-b}}();for(var c=Date.now(),d=["ms","moz","webkit","o"],e=0;e<d.length&&!a.requestAnimationFrame;++e){var f=d[e];a.requestAnimationFrame=a[f+"RequestAnimationFrame"],a.cancelAnimationFrame=a[f+"CancelAnimationFrame"]||a[f+"CancelRequestAnimationFrame"]}a.requestAnimationFrame||(a.requestAnimationFrame=function(a){if("function"!=typeof a)throw new TypeError(a+"is not a function");var d=Date.now(),e=b+c-d;return 0>e&&(e=0),c=d,setTimeout(function(){c=Date.now(),a(performance.now())},e)}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(a){return clearTimeout(a)})}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],172:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){return b instanceof l.Text&&(b.updateText(!0),!0)}function h(a,b){if(b instanceof l.TextStyle){var c=l.Text.getFontStyle(b);return l.Text.fontPropertiesCache[c]||l.Text.calculateFontProperties(c),!0}return!1}function i(a,b){if(a instanceof l.Text){-1===b.indexOf(a.style)&&b.push(a.style),-1===b.indexOf(a)&&b.push(a);var c=a._texture.baseTexture;return-1===b.indexOf(c)&&b.push(c),!0}return!1}function j(a,b){return a instanceof l.TextStyle&&(-1===b.indexOf(a)&&b.push(a),!0)}c.__esModule=!0;var k=a("../core"),l=e(k),m=a("./limiters/CountLimiter"),n=d(m),o=l.ticker.shared;l.settings.UPLOADS_PER_FRAME=4;var p=function(){function a(b){var c=this;f(this,a),this.limiter=new n["default"](l.settings.UPLOADS_PER_FRAME),this.renderer=b,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){c.queue&&c.prepareItems()},this.register(i,g),this.register(j,h)}return a.prototype.upload=function(a,b){"function"==typeof a&&(b=a,a=null),a&&this.add(a),this.queue.length?(b&&this.completes.push(b),this.ticking||(this.ticking=!0,o.addOnce(this.tick,this))):b&&b()},a.prototype.tick=function(){setTimeout(this.delayedTick,0)},a.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){for(var a=this.queue[0],b=!1,c=0,d=this.uploadHooks.length;d>c;c++)if(this.uploadHooks[c](this.uploadHookHelper,a)){this.queue.shift(),b=!0;break}b||this.queue.shift()}if(this.queue.length)o.addOnce(this.tick,this);else{this.ticking=!1;var e=this.completes.slice(0);this.completes.length=0;for(var f=0,g=e.length;g>f;f++)e[f]()}},a.prototype.register=function(a,b){return a&&this.addHooks.push(a),b&&this.uploadHooks.push(b),this},a.prototype.add=function(a){for(var b=0,c=this.addHooks.length;c>b&&!this.addHooks[b](a,this.queue);b++);if(a instanceof l.Container)for(var d=a.children.length-1;d>=0;d--)this.add(a.children[d]);return this},a.prototype.destroy=function(){this.ticking&&o.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},a}();c["default"]=p},{"../core":61,"./limiters/CountLimiter":175}],173:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){if(b instanceof l.BaseTexture){var c=b.source,d=0===c.width?a.canvas.width:Math.min(a.canvas.width,c.width),e=0===c.height?a.canvas.height:Math.min(a.canvas.height,c.height);return a.ctx.drawImage(c,0,0,d,e,0,0,a.canvas.width,a.canvas.height),!0}return!1}function j(a,b){if(a instanceof l.BaseTexture)return-1===b.indexOf(a)&&b.push(a),!0;if(a._texture&&a._texture instanceof l.Texture){var c=a._texture.baseTexture;return-1===b.indexOf(c)&&b.push(c),!0}return!1}c.__esModule=!0;var k=a("../../core"),l=e(k),m=a("../BasePrepare"),n=d(m),o=16,p=function(a){function b(c){f(this,b);var d=g(this,a.call(this,c));return d.uploadHookHelper=d,d.canvas=document.createElement("canvas"),d.canvas.width=o,d.canvas.height=o,d.ctx=d.canvas.getContext("2d"),d.register(j,i),d}return h(b,a),b.prototype.destroy=function(){a.prototype.destroy.call(this),this.ctx=null,this.canvas=null},b}(n["default"]);c["default"]=p,l.CanvasRenderer.registerPlugin("prepare",p)},{"../../core":61,"../BasePrepare":172}],174:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./webgl/WebGLPrepare");Object.defineProperty(c,"webgl",{enumerable:!0,get:function(){return d(e)["default"]}});var f=a("./canvas/CanvasPrepare");Object.defineProperty(c,"canvas",{enumerable:!0,get:function(){return d(f)["default"]}});var g=a("./BasePrepare");Object.defineProperty(c,"BasePrepare",{enumerable:!0,get:function(){return d(g)["default"]}});var h=a("./limiters/CountLimiter");Object.defineProperty(c,"CountLimiter",{enumerable:!0,get:function(){return d(h)["default"]}});var i=a("./limiters/TimeLimiter");Object.defineProperty(c,"TimeLimiter",{enumerable:!0,get:function(){return d(i)["default"]}})},{"./BasePrepare":172,"./canvas/CanvasPrepare":173,"./limiters/CountLimiter":175,"./limiters/TimeLimiter":176,"./webgl/WebGLPrepare":177}],175:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.maxItemsPerFrame=b,this.itemsLeft=0}return a.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},a.prototype.allowedToUpload=function(){return this.itemsLeft-->0},a}();c["default"]=e},{}],176:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=function(){function a(b){d(this,a),this.maxMilliseconds=b,this.frameStart=0}return a.prototype.beginFrame=function(){this.frameStart=Date.now()},a.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},a}();c["default"]=e},{}],177:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}function f(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function g(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function h(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b)}function i(a,b){return b instanceof n.BaseTexture&&(b._glTextures[a.CONTEXT_UID]||a.textureManager.updateTexture(b),!0)}function j(a,b){return b instanceof n.Graphics&&((b.dirty||b.clearDirty||!b._webGL[a.plugins.graphics.CONTEXT_UID])&&a.plugins.graphics.updateGraphics(b),!0)}function k(a,b){if(a instanceof n.BaseTexture)return-1===b.indexOf(a)&&b.push(a),!0;if(a._texture&&a._texture instanceof n.Texture){var c=a._texture.baseTexture;return-1===b.indexOf(c)&&b.push(c),!0}return!1}function l(a,b){return a instanceof n.Graphics&&(b.push(a),!0)}c.__esModule=!0;var m=a("../../core"),n=e(m),o=a("../BasePrepare"),p=d(o),q=function(a){function b(c){f(this,b);var d=g(this,a.call(this,c));return d.uploadHookHelper=d.renderer,d.register(k,i).register(l,j),d}return h(b,a),b}(p["default"]);c["default"]=q,n.WebGLRenderer.registerPlugin("prepare",q)},{"../../core":61,"../BasePrepare":172}],178:[function(a,b,c){(function(b){"use strict";function d(a){if(a&&a.__esModule)return a;var b={};if(null!=a)for(var c in a)Object.prototype.hasOwnProperty.call(a,c)&&(b[c]=a[c]);return b["default"]=a,b}c.__esModule=!0,c.loader=c.prepare=c.particles=c.mesh=c.loaders=c.interaction=c.filters=c.extras=c.extract=c.accessibility=void 0;var e=a("./deprecation");Object.keys(e).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return e[a]}})});var f=a("./core");Object.keys(f).forEach(function(a){"default"!==a&&"__esModule"!==a&&Object.defineProperty(c,a,{enumerable:!0,get:function(){return f[a]}})}),a("./polyfill");var g=a("./accessibility"),h=d(g),i=a("./extract"),j=d(i),k=a("./extras"),l=d(k),m=a("./filters"),n=d(m),o=a("./interaction"),p=d(o),q=a("./loaders"),r=d(q),s=a("./mesh"),t=d(s),u=a("./particles"),v=d(u),w=a("./prepare"),x=d(w);c.accessibility=h,c.extract=j,c.extras=l,c.filters=n,c.interaction=p,c.loaders=r,c.mesh=t,c.particles=v,c.prepare=x;var y=r&&r.Loader?new r.Loader:null;c.loader=y,b.PIXI=c}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":40,"./core":61,"./deprecation":120,"./extract":122,"./extras":131,"./filters":142,"./interaction":149,"./loaders":152,"./mesh":161,"./particles":164,"./polyfill":170,"./prepare":174}]},{},[178])(178)}),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.pixiAnimate=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var f=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),g=a("./AnimatorTimeline"),h=d(g),i=[],j=function(){function a(){e(this,a)}return a.play=function(a,b,c){var d=!1,e=void 0,f=void 0,g="function"==typeof b;if(void 0===b||g)e=0,f=a.totalFrames-1,g&&(c=b);else{if(e=a.labelsMap[b],f=a.labelsMap[b+this.STOP_LABEL],void 0===f&&(f=a.labelsMap[b+this.LOOP_LABEL],d=!0),void 0===e)throw new Error("No start label matching '"+b+"'");if(void 0===f)throw new Error("No end label matching '"+b+"'")}return this.fromTo(a,e,f,d,c)},a.to=function(a,b,c){return this.fromTo(a,a.currentFrame,b,!1,c)},a.fromTo=function(a,b,c,d,e){if("string"==typeof b){var f=b;if(b=a.labelsMap[f],void 0===b)throw new Error("No start label matching '"+f+"'")}if("string"==typeof c){var g=c;if(c=a.labelsMap[g],void 0===c)throw new Error("No end label matching '"+g+"'")}if(0>b)throw new Error("Start frame is out of bounds");if(c>=a.totalFrames)throw new Error("End frame is out of bounds");if(b>=c)throw new Error("End frame is before start frame");this.stop(a),d=!!d;var i=h["default"].create(a,b,c,d,e);return this._timelines.push(i),a.currentFrame!==b?a.gotoAndPlay(b):a.play(),i},a.stop=function(a){for(var b=0,c=this._timelines.length;c>b;b++){var d=this._timelines[b];if(d.instance===a){this._internalStop(d);break}}},a.stopAll=function(){for(var a=this._timelines.length-1;a>=0;a--)this._internalStop(this._timelines[a])},a._internalStop=function(a){this._timelines.splice(this._timelines.indexOf(a),1),a.instance.stop(),a.destroy()},f(a,null,[{key:"_timelines",get:function(){return i}},{key:"STOP_LABEL",get:function(){return"_stop"}},{key:"LOOP_LABEL",get:function(){return"_loop"}}]),a}();b.exports=j},{"./AnimatorTimeline":2}],2:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}var e=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),f=[],g=function(){function a(){d(this,a),this._update=this.update.bind(this),this.init(null,0,0,!1,null)}return a.prototype.init=function(a,b,c,d,e){this.instance=a,this.loop=d,this.start=b,this.end=c,this.callback=e,a&&(a.gotoAndStop(b),a._beforeUpdate=this._update)},a.prototype.destroy=function(){this.instance._beforeUpdate=null,this.init(null,0,0,!1,null),a._pool.push(this)},a.prototype.update=function(a){var b=void 0;return a.currentFrame>=this.end&&(a.currentFrame=this.end,this.loop?(a._updateTimeline(),a.gotoAndPlay(this.start)):(a.stop(),this.callback&&(b=this.callback),this.stop())),b},a.prototype.stop=function(){PIXI.animate.Animator._internalStop(this)},a.create=function(b,c,d,e,f){var g;return g=this._pool.length?this._pool.pop():new a,g.init(b,c,d,e,f),g},e(a,[{key:"progress",get:function(){var a=(this.instance.currentFrame-this.start)/(this.end-this.start);return Math.max(0,Math.min(1,a))}}],[{key:"_pool",get:function(){return f}}]),a}();b.exports=g},{}],3:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}function e(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function f(a,b){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!b||"object"!=typeof b&&"function"!=typeof b?a:b}function g(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function, not "+typeof b);a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(a,b):a.__proto__=b);
}c.__esModule=!0;var h=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(a,d.key,d)}}return function(b,c,d){return c&&a(b.prototype,c),d&&a(b,d),b}}(),i=a("./Timeline"),j=d(i),k=a("./utils"),l=d(k),m=PIXI.Container,n=PIXI.ticker.shared,o=function(a){function b(c,d,g,h,i){e(this,b);var j=f(this,a.call(this));if(c=void 0===c?{}:c,c="number"==typeof c?{mode:c||b.INDEPENDENT,duration:d||0,loop:void 0===g||g,labels:i||{},framerate:h||0,startPosition:0}:Object.assign({mode:b.INDEPENDENT,startPosition:0,loop:!0,labels:{},duration:0,framerate:0},c),j.mode=c.mode,j.startPosition=c.startPosition,j.loop=!!c.loop,j.currentFrame=0,j._labels=[],j._labelDict=c.labels,c.labels){for(var k in c.labels){var l={label:k,position:c.labels[k]};j._labels.push(l)}j._labels.sort(function(a,b){return a.position-b.position})}return j.selfAdvance=!0,j.paused=!1,j.actionsEnabled=!0,j.autoReset=!0,j._synchOffset=0,j._prevPos=-1,j._t=0,j._framerate=c.framerate,j._duration=0,j._totalFrames=c.duration,j._timelines=[],j._timedChildTimelines=[],j._depthSorted=[],j._actions=[],j._beforeUpdate=null,j.mode===b.INDEPENDENT&&(j._tickListener=j._tickListener.bind(j),j._onAdded=j._onAdded.bind(j),j._onRemoved=j._onRemoved.bind(j),j.on("added",j._onAdded),j.on("removed",j._onRemoved)),c.framerate&&(j.framerate=c.framerate),j.advance=j.advance,j._updateTimeline=j._updateTimeline,j._setTimelinePosition=j._setTimelinePosition,j._goto=j._goto,j}return g(b,a),b.prototype._onAdded=function(){this._framerate||(this.framerate=this.parentFramerate),n.add(this._tickListener)},b.prototype._tickListener=function(a){if(this.paused||!this.selfAdvance)return void(this._prevPos<0&&this._goto(this.currentFrame));var b=a/n.speed/PIXI.settings.TARGET_FPMS/1e3;this.advance(b)},b.prototype._onRemoved=function(){n.remove(this._tickListener)},b.prototype._autoExtend=function(a){this._totalFrames<a&&(this._totalFrames=a)},b.prototype._parseProperties=function(a){"string"==typeof a.t?a.t=l["default"].hexToUint(a.t):"number"==typeof a.v&&(a.v=!!a.v)},b.prototype._getChildTimeline=function(a){for(var b=this._timelines.length-1;b>=0;--b)if(this._timelines[b].target===a)return this._timelines[b];var c=new j["default"](a);return this._timelines.push(c),c},b.prototype.addTimedMask=function(a,b){for(var c in b)this.addKeyframe(a,{m:b[c]},parseInt(c,10));return this._setTimelinePosition(this.currentFrame,this.currentFrame,!0),this},b.prototype.am=function(a,b){return this.addTimedMask(a,b)},b.prototype.addTween=function(a,b,c,d,e){var f=this._getChildTimeline(a);return this._parseProperties(b),f.addTween(b,c,d,e),this._autoExtend(c+d),this},b.prototype.addKeyframe=function(a,b,c){var d=this._getChildTimeline(a);return this._parseProperties(b),d.addKeyframe(b,c),this._autoExtend(c),this},b.prototype.at=function(a,b,c,d){return this.addTimedChild(a,b,c,d)},b.prototype.addTimedChild=function(a,c,d,e){void 0===c&&(c=0),(void 0===d||1>d)&&(d=this._totalFrames||1),a.mode===b.SYNCHED&&(a.parentStartPosition=c);var f=void 0,g=void 0;for(g=this._timedChildTimelines.length-1;g>=0;--g)if(this._timedChildTimelines[g].target===a){f=this._timedChildTimelines[g];break}if(f||(f=[],f.target=a,this._timedChildTimelines.push(f)),l["default"].fillFrames(f,c,d),this._totalFrames<c+d&&(this._totalFrames=c+d),e){"string"==typeof e&&(e=l["default"].deserializeKeyframes(e));var h={};for(var i in e)h=Object.assign({},h,e[i]),this.addKeyframe(a,h,parseInt(i,10));this._getChildTimeline(a).extendLastFrame(c+d)}return this._setTimelinePosition(c,this.currentFrame,!0),this},b.prototype.aa=function(a,b){return this.addAction(a,b)},b.prototype.addAction=function(a,b){if("string"==typeof b){var c=this._labelDict[b];if(void 0===c)throw"The label '"+b+"' does not exist on this timeline";b=c}var d=this._actions;return d.length<=b&&(d.length=b+1),this._totalFrames<b&&(this._totalFrames=b),d[b]?d[b].push(a):d[b]=[a],this},b.prototype.ps=function(a,b){return this.playSound(a,b)},b.prototype.playSound=function(a,b){return PIXI.animate.sound.emit("play",a,!!b,this),this},b.prototype.play=function(){this.paused=!1},b.prototype.stop=function(){this.paused=!0},b.prototype.gotoAndPlay=function(a){this.paused=!1,this._goto(a)},b.prototype.gotoAndStop=function(a){this.paused=!0,this._goto(a)},b.prototype.advance=function(a){this._framerate||(this.framerate=this.parentFramerate),a&&(this._t+=a),this._t>this._duration&&(this._t=this.loop?this._t-this._duration:this._duration),this.currentFrame=Math.floor(this._t*this._framerate+1e-8),this.currentFrame>=this._totalFrames&&(this.currentFrame=this._totalFrames-1);var b=void 0;this._beforeUpdate&&(b=this._beforeUpdate(this)),this._updateTimeline(),b&&b()},b.prototype._goto=function(a){var b="string"==typeof a?this._labelDict[a]:a;void 0!==b&&(this._prevPos=NaN,this.currentFrame=b,this._framerate||(this.framerate=this.parentFramerate),this._framerate>0?this._t=b/this._framerate:this._t=0,this._updateTimeline())},b.prototype._reset=function(){this._prevPos=-1,this._t=0,this.currentFrame=0},b.prototype._updateTimeline=function(){var a=this.mode!==b.INDEPENDENT;a&&(this.currentFrame=this.startPosition+(this.mode===b.SINGLE_FRAME?0:this._synchOffset),this.currentFrame>=this._totalFrames&&(this.currentFrame%=this._totalFrames)),this._prevPos!==this.currentFrame&&(this._setTimelinePosition(this._prevPos,this.currentFrame,!a&&this.actionsEnabled),this._prevPos=this.currentFrame)},b.prototype._setTimelinePosition=function(a,c,d){var e=void 0,f=void 0,g=void 0,h=this._timelines;for(e=h.length-1;e>=0;--e){var i=h[e];for(f=0,g=i.length;g>f;++f){var j=i[f];if(c>=j.startFrame&&c<=j.endFrame){j.setPosition(c);break}}}var k=this._timedChildTimelines,l=this._depthSorted;for(e=0,g=k.length;g>e;++e){var m=k[e].target,n=k[e][c];n?(l.push(m),m.parent!==this&&(this.addChild(m),m.mode===b.INDEPENDENT&&m.autoReset&&m._reset())):n||m.parent!==this||this.removeChild(m)}for(e=0,g=l.length;g>e;e++){var o=l[e],p=this.children.indexOf(o);p!==e&&this.addChildAt(o,e)}l.length=0;var q=this.children,r=void 0;for(e=0,g=q.length;g>e;++e)r=q[e],r.mode===b.SYNCHED&&(r._synchOffset=c-r.parentStartPosition,r._updateTimeline());if(d){var s=this._actions,t=!1;for(a>c?(g=s.length,t=!0):g=Math.min(c+1,s.length),e=a>=0?a+1:c;g>e;++e){if(s[e]){var u=s[e];for(f=0;f<u.length;++f)u[f].call(this)}t&&e===g-1&&(e=0,g=c+1,t=!1)}}},b.prototype.destroy=function(b){this._tickListener&&(n.remove(this._tickListener),this._tickListener=null);var c=[],d=this._timelines;if(d)for(var e=0;e<d.length;e++){var f=d[e];c.push(f.target),f._currentProps=null,f.length=0}if(d=this._timedChildTimelines)for(var g=0;g<d.length;g++){var h=d[g];c.indexOf(h.target)<0&&c.push(h.target),h._currentProps=null,h.length=0}for(var i=0;i<c.length;i++)this.children.indexOf(c[i])<0&&c[i].destroy(b);c.length=0,this._actions=null,this._timelines=null,this._depthSorted=null,this._timedChildTimelines=null,this._beforeUpdate=null,this._labels=null,this._labelDict=null,a.prototype.destroy.call(this,b)},h(b,[{key:"labels",get:function(){return this._labels}},{key:"labelsMap",get:function(){return this._labelDict}},{key:"currentLabel",get:function(){for(var a=this._labels,b=null,c=0,d=a.length;d>c&&a[c].position<=this.currentFrame;++c)b=a[c].label;return b}},{key:"elapsedTime",get:function(){return this._t},set:function(a){this._t=a}},{key:"framerate",get:function(){return this._framerate},set:function(a){a>0?(this._framerate=a,this._duration=a?this._totalFrames/a:0,this._t=this.currentFrame/a):this._t=this._framerate=this._duration=0}},{key:"totalFrames",get:function(){return this._totalFrames}},{key:"parentFramerate",get:function(){for(var a=this,c=a._framerate;(a=a.parent)&&!c;)a.mode===b.INDEPENDENT&&(c=a._framerate);return c||b.DEFAULT_FRAMERATE}}]),b}(m);o.INDEPENDENT=0,o.SINGLE_FRAME=1,o.SYNCHED=2,o.DEFAULT_FRAMERATE=24,o.extend=o.e=function(a){return a.prototype=Object.create(o.prototype),a.prototype.__parent=o.prototype,a.prototype.constructor=a,a},c["default"]=o},{"./Timeline":6,"./utils":11}],4:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},f=a("./utils"),g=d(f),h={};Object.defineProperty(h,"add",{enumerable:!1,value:function(a,b){"string"==typeof b&&(b=g["default"].deserializeShapes(b));for(var c=0;c<b.length;c++)for(var d=b[c],e=0;e<d.length;e++){var f=d[e];"string"==typeof f&&"#"===f[0]&&(d[e]=g["default"].hexToUint(f))}h[a]=b}}),Object.defineProperty(h,"fromCache",{enumerable:!1,value:function(a){return h[a]||null}}),Object.defineProperty(h,"remove",{enumerable:!1,value:function(a){if("object"!==("undefined"==typeof a?"undefined":e(a)))h[a]&&(h[a].length=0,delete h[a]);else for(var b in a)h.remove(b)}}),Object.defineProperty(h,"removeAll",{enumerable:!1,value:function(){for(var a in h)h.remove(a)}}),c["default"]=h},{"./utils":11}],5:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./ShapesCache"),f=d(e),g=function(){return function(a,b){var c=a.url,d=a.data;c.search(/\.shapes\.(json|txt)$/i)>-1?f["default"].add(a.name,d):d.nodeName&&"IMG"===d.nodeName&&PIXI.Texture.addTextureToCache(PIXI.Texture.fromFrame(c),a.name),b()}};PIXI.loaders.Loader.addPixiMiddleware(g),c["default"]=g},{"./ShapesCache":4}],6:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./Tween"),f=d(e),g=function(a){Array.call(this),this.target=a,this._currentProps={}},h=g.prototype=Object.create(Array.prototype);h.addTween=function(a,b,c,d){this.extendLastFrame(b-1);var e={},g=void 0;for(g in a)if(this._currentProps.hasOwnProperty(g))e[g]=this._currentProps[g];else for(var h=e[g]=this.getPropFromShorthand(g),i=this.length-1;i>=0;--i)this[i].startProps[g]=h,this[i].endProps[g]=h;var j=new f["default"](this.target,e,a,b,c,d);this.push(j),Object.assign(this._currentProps,j.endProps)},h.addKeyframe=function(a,b){this.extendLastFrame(b-1);var c=Object.assign({},this._currentProps,a),d=new f["default"](this.target,c,null,b,0);this.push(d),Object.assign(this._currentProps,d.endProps)},h.extendLastFrame=function(a){if(this.length){var b=this[this.length-1];b.endFrame<a&&(b.isTweenlessFrame?b.endFrame=a:this.addKeyframe(this._currentProps,b.endFrame+1,a-b.endFrame+1))}},h.getPropFromShorthand=function(a){var b=this.target;switch(a){case"x":return b.position.x;case"y":return b.position.y;case"sx":return b.scale.x;case"sy":return b.scale.y;case"kx":return b.skew.x;case"ky":return b.skew.y;case"r":return b.rotation;case"a":return b.alpha;case"v":return b.visible;case"m":return b.mask}return null},c["default"]=g},{"./Tween":7}],7:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}function e(a,b,c){return a+(b-a)*c}function f(a,b,c){var d=Math.abs(b-a);d>j&&(b>a?a+=k:b+=j+k);var e=a+(b-a)*c;return e}function g(a,b,c){switch(b){case"x":a.transform.position.x=c;break;case"y":a.transform.position.y=c;break;case"sx":a.transform.scale.x=c;break;case"sy":a.transform.scale.y=c;break;case"kx":a.transform.skew.x=c;break;case"ky":a.transform.skew.y=c;break;case"r":a.transform.rotation=c;break;case"a":a.alpha=c;break;case"t":a.i(c);break;case"c":a.c.apply(a,c);break;case"v":a.visible=c;break;case"m":a.ma(c)}}c.__esModule=!0;var h=function(){function a(b,c,e,f,g,h){d(this,a),this.target=b,this.startProps=c,this.endProps={},this.duration=g,this.startFrame=f,this.endFrame=f+g,this.ease=h,this.isTweenlessFrame=!e;var i=void 0;if(e)for(i in e)this.endProps[i]=e[i];for(i in c)this.endProps.hasOwnProperty(i)||(this.endProps[i]=c[i])}return a.prototype.setPosition=function(a){if(a>=this.endFrame)return void this.setToEnd();if(this.isTweenlessFrame)return void this.setToEnd();var b=(a-this.startFrame)/this.duration;this.ease&&(b=this.ease(b));var c=this.target,d=this.startProps,e=this.endProps;for(var f in e){var h=i[f];h?g(c,f,h(d[f],e[f],b)):g(c,f,d[f])}},a.prototype.setToEnd=function(){var a=this.endProps,b=this.target;for(var c in a)g(b,c,a[c])},a}(),i={x:e,y:e,sx:e,sy:e,kx:e,ky:e,r:f,a:e,t:null,v:null,c:null,m:null,g:null},j=Math.PI,k=2*j;c["default"]=h},{}],8:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./load"),f=d(e),g=a("./sound"),h=d(g),i=a("./utils"),j=d(i),k=a("./MovieClip"),l=d(k),m=a("./ShapesCache"),n=d(m),o=a("./SymbolLoader"),p=d(o),q=a("./Timeline"),r=d(q),s=a("./Tween"),t=d(s),u=a("./Animator"),v=d(u),w=a("./AnimatorTimeline"),x=d(w);c["default"]={Animator:v["default"],AnimatorTimeline:x["default"],load:f["default"],sound:h["default"],utils:j["default"],MovieClip:l["default"],ShapesCache:n["default"],SymbolLoader:p["default"],Timeline:r["default"],Tween:t["default"]}},{"./Animator":1,"./AnimatorTimeline":2,"./MovieClip":3,"./ShapesCache":4,"./SymbolLoader":5,"./Timeline":6,"./Tween":7,"./load":9,"./sound":10,"./utils":11}],9:[function(a,b,c){"use strict";c.__esModule=!0;var d=PIXI.loaders.Resource;d.setExtensionLoadType("wav",d.LOAD_TYPE.AUDIO),d.setExtensionLoadType("mp3",d.LOAD_TYPE.AUDIO),d.setExtensionLoadType("ogg",d.LOAD_TYPE.AUDIO);var e=function(a,b,c,d){function e(){var b=new a.stage;a.parent&&a.parent.addChild(b),a.complete&&a.complete(b,f)}"function"==typeof b?(d=c,c=b,b=null):"string"==typeof c&&(d=c,c=null),"function"==typeof a&&(a={stage:a,parent:b,basePath:d||"",complete:c}),a=Object.assign({stage:null,parent:null,basePath:"",complete:null},a||{});var f=new PIXI.loaders.Loader,g=a.stage.assets||{};if(g&&Object.keys(g).length){var h=a.basePath;h&&(h+="/");for(var i in g)f.add(i,h+g[i]);f.once("complete",e).load()}else e();return f};c["default"]=e},{}],10:[function(a,b,c){"use strict";c.__esModule=!0,c["default"]=new PIXI.utils.EventEmitter},{}],11:[function(a,b,c){"use strict";function d(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}c.__esModule=!0;var e=null,f=function(){function a(){d(this,a)}return a.hexToUint=function(a){return a=a.substr(1),3===a.length&&(a=a.replace(/([a-f0-9])/g,"$1$1")),parseInt(a,16)},a.fillFrames=function(a,b,c){var d=a.length;if(b+c>d&&(a.length=b+c,b>d))if(a.fill)a.fill(!1,d,b);else for(var e=d;b>e;++e)a[e]=!1;if(a.fill)a.fill(!0,b,b+c);else for(var f=a.length,g=b;f>g;++g)a[g]=!0},a.deserializeKeyframes=function(a){for(var b={},c=0,d={X:"x",Y:"y",A:"sx",B:"sy",C:"kx",D:"ky",R:"r",L:"a",T:"t",F:"c",V:"v"},e=void 0,f="",g=!1,h=void 0,i={};c<=a.length;)e=a[c],d[e]?(g||(g=!0,b[f]=i),h&&(i[h]=this.parseValue(h,f)),h=d[e],f="",c++):e&&" "!==e?(f+=e,c++):(c++,i[h]=this.parseValue(h,f),f="",h=null,i={},g=!1);return b},a.deserializeShapes=function(a){for(var b=[],c=a.split("\n"),d=/^[a-z]{1,2}$/,e=0;e<c.length;e++){for(var f=c[e].split(" "),g=0;g<f.length;g++){var h=f[g];"#"===h[0]||d.test(h)||(f[g]=parseFloat(h))}b.push(f)}return b},a.parseValue=function(a,b){switch(a){case"c":return b=b.split(","),b.forEach(function(a,b,c){c[b]=parseFloat(a)}),b;case"t":return b;case"v":return!!parseInt(b);default:return parseFloat(b)}},a.upload=function(a,b,c){e||(e=a.plugins.prepare,e.register(this.addMovieClips)),e.upload(b,c)},a.addMovieClips=function(a){return a instanceof PIXI.animate.MovieClip&&(a._timedChildTimelines.forEach(function(b){var c=a.children.indexOf(b.target);-1===c&&e.add(b.target)}),!0)},a}();c["default"]=f},{}],12:[function(a,b,c){"use strict";var d=PIXI.Container.prototype;d.ac=d.addChild,PIXI.Container.extend=PIXI.Container.e=function(a){return a.prototype=Object.create(d),a.prototype.__parent=d,a.prototype.constructor=a,a}},{}],13:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}var e=a("../animate/utils"),f=d(e),g=PIXI.DisplayObject.prototype,h=void 0;PIXI.filters&&(h=PIXI.filters.ColorMatrixFilter),g.setRenderable=g.re=function(a){return this.renderable=!!a,this},g.t=g.setTransform,g.setMask=g.ma=function(a){return a&&!(a instanceof PIXI.Graphics||a instanceof PIXI.Sprite)?("undefined"!=typeof console&&console.warn&&console.warn("Warning: Masks can only be PIXI.Graphics or PIXI.Sprite objects."),this):(this.mask=a,this)},g.setAlpha=g.a=function(a){return this.alpha=a,this},g.setTint=g.i=function(a){"string"==typeof a&&(a=f["default"].hexToUint(a));var b=a>>16&255,c=a>>8&255,d=255&a;return this.c(b/255,0,c/255,0,d/255,0)},g.setColorTransform=g.c=function(a,b,c,d,e,f){var g=this.colorTransformFilter;return g.matrix[0]=a,g.matrix[4]=b,g.matrix[6]=c,g.matrix[9]=d,g.matrix[12]=e,g.matrix[14]=f,this.filters=[g],this},g.hasOwnProperty("colorTransformFilter")||Object.defineProperty(g,"colorTransformFilter",{set:function(a){this._colorTransformFilter=a},get:function(){return this._colorTransformFilter||new h}}),PIXI.DisplayObject.extend=PIXI.DisplayObject.e=function(a){return a.prototype=Object.create(g),a.prototype.__parent=g,a.prototype.constructor=a,a}},{"../animate/utils":11}],14:[function(a,b,c){"use strict";var d=PIXI.Graphics.prototype;d.drawCommands=d.d=function(a){for(var b,c=[],d=0;d<=a.length;){var e=a[d++];void 0===e||this[e]?(b&&(this[b].apply(this,c),c.length=0),b=e):c.push(e)}return this},d.c=d.closePath,d.h=d.addHole,d.m=d.moveTo,d.l=d.lineTo,d.q=d.quadraticCurveTo,d.b=d.bezierCurveTo,d.f=d.beginFill,d.s=d.lineStyle,d.dr=d.drawRect,d.rr=d.drawRoundedRect,d.rc=d.drawRoundedRect,d.dc=d.drawCircle,d.ar=d.arc,d.at=d.arcTo,d.de=d.drawEllipse,d.lf=function(a){return this.f(a[0])},d.rf=function(a){return this.f(a[0])},d.bf=function(){return this.f(0)},d.sd=function(){return this},d.bs=function(){return this},d.ls=function(){return this},d.rs=function(){return this}},{}],15:[function(a,b,c){"use strict";var d=PIXI.Sprite.prototype;PIXI.Sprite.extend=PIXI.Sprite.e=function(a){return a.prototype=Object.create(d),a.prototype.__parent=d,a.prototype.constructor=a,a}},{}],16:[function(a,b,c){"use strict";var d=PIXI.Text.prototype;d.setAlign=d.g=function(a){this.style.align=a||"left";var b;if("string"==typeof a)switch(a){case"center":b=.5;break;case"right":b=1;break;case"left":b=0}else b=(a+1)/2;return this.anchor.x=b,this};var e={o:"font",z:"fontSize",f:"fontFamily",y:"fontStyle",g:"fontWeight",i:"fill",a:"align",s:"stroke",t:"strokeThickness",w:"wordWrap",d:"wordWrapWidth",l:"lineHeight",h:"dropShadow",c:"dropShadowColor",n:"dropShadowAngle",b:"dropShadowBlur",p:"padding",x:"textBaseline",j:"lineJoin",m:"miterLimit",e:"letterSpacing"};d.setStyle=d.ss=function(a){for(var b in e)void 0!==a[b]&&(a[e[b]]=a[b],delete a[b]);return this.style=a,this},d.setShadow=d.sh=function(a,b,c){var d=this.style;return d.dropShadow=!0,void 0!==a&&(a="#"+a.toString(16)),d.dropShadowColor=f(a,d.dropShadowColor),d.dropShadowAngle=f(b,d.dropShadowAngle),d.dropShadowDistance=f(c,d.dropShadowDistance),this};var f=function(a,b){return void 0===a?b:a}},{}],17:[function(a,b,c){"use strict";function d(a){return a&&a.__esModule?a:{"default":a}}c.__esModule=!0;var e=a("./Container"),f=d(e),g=a("./DisplayObject"),h=d(g),i=a("./Sprite"),j=d(i),k=a("./Graphics"),l=d(k),m=a("./Text"),n=d(m);c["default"]={Container:f["default"],DisplayObject:h["default"],Sprite:j["default"],Graphics:l["default"],Text:n["default"]}},{"./Container":12,"./DisplayObject":13,"./Graphics":14,"./Sprite":15,"./Text":16}],18:[function(a,b,c){"use strict";if("undefined"!=typeof b&&b.exports)"undefined"==typeof PIXI&&("undefined"!=typeof atom&&(global.Function=a("loophole").Function),a("./pixi.min.js")),b.exports=a("./animate")["default"];else if("undefined"==typeof PIXI)throw"Requires PIXI";a("./mixins"),PIXI.animate=a("./animate")["default"],PIXI.animate.VERSION="0.7.4"},{"./animate":8,"./mixins":17,"./pixi.js":void 0,"./pixi.min.js":void 0,loophole:void 0}]},{},[18])(18)}),!function(){"use strict";!function(a){"extend"in a||(a.extend=function(b,c){if(c){"string"==typeof c&&(c=a.include(c));var d=c.prototype;b.prototype=Object.create(d),Object.defineProperty(b.prototype,"__parent",{configurable:!0,writable:!0,value:d})}return Object.defineProperty(b.prototype,"constructor",{configurable:!0,writable:!0,value:b}),b.extend=function(c){return a.extend(c,b)},b.prototype})}(window),function(a,b){if(!("include"in a)){var c=function(c,d){var e=c.split("."),f=a,g="";d=d!==b?!!d:!0;for(var h=0,i=e.length;i>h;h++){if(g=e[h],!f[g]){if(!d)return null;throw"Unable to include '"+c+"'"}f=f[g]}return f};a.include=c}}(window),function(a,b){if(!("mixin"in a)){var c=function(c,d){if("string"==typeof d&&(d=a.include(d)),!d.prototype)throw"no mixin prototype";var e=d.prototype;for(var f in e){var g=b.getOwnPropertyDescriptor(e,f);g?b.defineProperty(c,f,g):c[f]=e[f]}return d.apply(c,Array.prototype.slice.call(arguments,2)),c};a.mixin=c}}(window,Object),function(a){if(!("namespace"in a)){var b=function(b){for(var c=b.split("."),d=a,e="",f=0,g=c.length;g>f;f++)e=c[f],d[e]=d[e]||{},d=d[e];return d};a.namespace=b}}(window),function(a,b,c){a.prototype.shuffle||c.defineProperty(a.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var a,c,d=this.length;d;a=b.floor(b.random()*d),c=this[--d],this[d]=this[a],this[a]=c);return this}}),a.prototype.random||c.defineProperty(a.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[b.floor(b.random()*this.length)]}}),a.prototype.last||c.defineProperty(a.prototype,"last",{enumerable:!1,writable:!1,value:function(){return this[this.length-1]}}),a.prototype.append||c.defineProperty(a.prototype,"append",{enumerable:!1,writable:!1,value:function(){for(var b=arguments,c=0,d=b.length;d>c;++c){var e=b[c];if(a.isArray(e))for(var f=0,g=e.length;g>f;++f)this.push(e[f]);else this.push(e)}return this}})}(Array,Math,Object),function(a){a.randomInt=function(b,c){return void 0===c&&(c=b,b=0),a.floor(a.random()*(c-b+1))+b},a.randomFloat=function(b,c){return void 0===c&&(c=b,b=0),a.random()*(c-b)+b},a.dist=function(b,c,d,e){return a.sqrt(a.distSq(b,c,d,e))},a.distSq=function(a,b,c,d){return"number"==typeof a.x&&a.x==a.x&&(d=c,c=b,b=a.y,a=a.x),"number"==typeof c.x&&c.x==c.x&&(d=c.y,c=c.x),(a-c)*(a-c)+(b-d)*(b-d)},a.clamp=function(a,b,c){return void 0===c&&(c=b,b=0),a>c?c:b>a?b:a},a.roundDecimal=function(b,c){return a.round(b/c)*c}}(Math),function(a,b){a.prototype.toPaddedString||b.defineProperty(a.prototype,"toPaddedString",{enumerable:!1,writable:!1,value:function(a){a||(a=2);var b,c=this;0>c&&(c*=-1,b="-");for(var d=String(Math.floor(c));d.length<a;)d="0"+d;return b&&(d=b+d),d}})}(Number,Object),function(a,b,c){a.merge=function(b,c){b&&"object"==typeof b||(b={});for(var d in c)if(c.hasOwnProperty(d)){var e=c[d];if("object"==typeof e&&a.isPlain(e)){b[d]=a.merge(b[d],e);continue}b[d]=e}for(var f=2,g=arguments.length;g>f;f++)a.merge(b,arguments[f]);return b},a.isPlain=function(a){var d,e=b.hasOwnProperty;if(!a||"object"!=typeof a||a.nodeType||a===window)return!1;try{if(a.constructor&&!e.call(a,"constructor")&&!e.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(f){return!1}if(b.ownLast)for(d in a)return e.call(a,d);for(d in a);return d===c||e.call(a,d)},a.prototype.clone||a.defineProperty(a.prototype,"clone",{enumerable:!1,writable:!0,value:function(){var a={},b=this;for(var c in b)a[c]=b[c];return a}})}(Object,{}),function(){var a=include("createjs.RequestUtils",!1),b=include("createjs.AbstractLoader",!1);if(a){var c=a.getTypeByExtension;a.getTypeByExtension=function(a){if(a)switch(a.toLowerCase()){case"fnt":return b.XML}return c(a)}}}(),function(a,b){b.defineProperty(a.prototype,"format",{enumerable:!1,writable:!1,value:function(){if(arguments.length<1)return this;var a=Array.isArray(a)?a:Array.prototype.slice.call(arguments);return this.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(b,c,d){return d?c+a[parseInt(d)-1]:c+a.shift()}).replace(/%%s/g,"%s")}}),a.prototype.reverse||b.defineProperty(a.prototype,"reverse",{enumerable:!1,writable:!1,value:function(){for(var a="",b=this.length-1;b>=0;b--)a+=this[b];return a}})}(String,Object),function(){function a(){this.currentCallCount=0}var b={};b.create=function(b,c){if(!b)return null;("number"!=typeof c||1>c)&&(c=2);var d=function(){++d.currentCallCount>=c&&b()};return d.currentCallCount=0,d.reset=a,d},namespace("springroll").CombinedCallback=b}(),function(a){var b,c=function(c,d,e,f,g){b||(b=include("springroll.Application")),"boolean"==typeof e&&(e={repeat:!!e,autoDestroy:f===a?!0:!!f,useFrames:!!g}),e=Object.merge({repeat:!1,autoDestroy:!0,useFrames:!1},e||{}),this._callback=c,this._delay=d,this._timer=d,this._repeat=e.repeat,this._autoDestroy=e.autoDestroy,this._useFrames=e.useFrames,this._paused=!1,this._update=this._update.bind(this),b.instance.on("update",this._update)},d=extend(c);d._update=function(a){return this._callback?(this._timer-=this._useFrames?1:a,void(this._timer<=0&&(this._callback(this),this._repeat?this._timer+=this._delay:this._autoDestroy?this.destroy():b.instance.off("update",this._update)))):void this.destroy()},d.restart=function(){if(this._callback){var a=b.instance;a.has("update",this._update)||a.on("update",this._update),this._timer=this._delay,this._paused=!1}},d.stop=function(){b.instance.off("update",this._update),this._paused=!1},Object.defineProperty(d,"paused",{get:function(){return this._paused},set:function(a){if(this._callback){var c=b.instance;this._paused&&!a?(this._paused=!1,c.has("update",this._update)||c.on("update",this._update)):a&&c.has("update",this._update)&&(this._paused=!0,c.off("update",this._update))}}}),d.destroy=function(){b.instance.off("update",this._update),this._callback=null},namespace("springroll").DelayedCall=c}(),function(){var a,b=function(b,c,d){void 0===a&&(a=include("springroll.Debug",!1)),this.name=b,this._value=c,this._toString=d||this.name};Object.defineProperty(b.prototype,"asInt",{get:function(){return this._value}}),b.prototype.toString=function(){return this._toString};var c=function(){var a=Array.isArray(arguments[0])?arguments[0]:Array.prototype.slice.call(arguments);Object.defineProperty(this,"_byValue",{enumerable:!1,writable:!1,value:[]}),Object.defineProperty(this,"rawEnumValues",{enumerable:!1,writable:!1,value:a});for(var c,d,e,f=0,g=0,h=a.length;h>g;++g)"string"==typeof a[g]?e=a[g]:(e=a[g].name,d=a[g].value||f,f=d),this[e]||(c="string"==typeof a[g]?new b(e,f,e):new b(e,d,a[g].toString||e),this[c.name]=c,this._byValue[f]?Array.isArray(this._byValue[f])?this._byValue[f].push(c):this._byValue[f]=[this._byValue[f],c]:this._byValue[f]=c,f++);Object.defineProperty(this,"length",{enumerable:!1,writable:!1,value:a.length}),Object.defineProperty(this,"next",{enumerable:!1,writable:!1,value:function(a){var b=a.asInt+1;return b>=f?this.first:this.valueFromInt(b)}}),Object.defineProperty(this,"first",{enumerable:!1,writable:!1,value:this.valueFromInt(a[0].value||0)}),Object.defineProperty(this,"last",{enumerable:!1,writable:!1,value:this.valueFromInt(f-1)})},d=extend(c);Object.defineProperty(d,"valueFromInt",{enumerable:!1,writable:!1,value:function(a){var b=this._byValue[a];return b?Array.isArray(b)?b[0]:b:null}}),namespace("springroll").Enum=c}(),function(a){var b={},c=window.Storage!==a,d=-1;if(c)try{localStorage.setItem("LS_TEST","test"),localStorage.removeItem("LS_TEST")}catch(e){c=!1}b.remove=function(a){c?(localStorage.removeItem(a),sessionStorage.removeItem(a)):b.write(a,"",d)},b.write=function(a,b,e){if(c)e?sessionStorage.setItem(a,JSON.stringify(b)):localStorage.setItem(a,JSON.stringify(b));else{var f;f=e?e!==d?"":"; expires=Thu, 01 Jan 1970 00:00:00 GMT":"; expires="+new Date(2147483646e3).toGMTString(),document.cookie=a+"="+escape(JSON.stringify(b))+f+"; path=/"}},b.read=function(a){if(c){var d=localStorage.getItem(a)||sessionStorage.getItem(a);return d?JSON.parse(d,b.reviver):null}var e,f,g=a+"=",h=document.cookie.split(";"),i=0;for(i=0,f=h.length;f>i;i++){for(e=h[i];" "==e.charAt(0);)e=e.substring(1,e.length);if(0===e.indexOf(g))return JSON.parse(unescape(e.substring(g.length,e.length)),b.reviver)}return null},b.reviver=function(a,b){if(b&&"string"==typeof b.__classname){var c=include(b.__classname,!1);if(c){var d=new c;if(d.fromJSON)return d.fromJSON(b),d}}return b},namespace("springroll").SavedData=b}(),function(a){var b=include("performance",!1),c=b&&(b.now||b.mozNow||b.msNow||b.oNow||b.webkitNow);c&&(b.now=c);var d={};d.now=c?function(){return b.now()}:Date.now,namespace("springroll").TimeUtils=d}(window),function(){var a=function(a){this.max=-1,this.options=[];var b=0;for(var c in a)b+=a[c],this.options.push({key:c,value:b}),this.max+=a[c]},b=extend(a);b.random=function(){for(var a=Math.randomInt(0,this.max),b=0,c=this.options,d=c.length;d>b;++b)if(a<c[b].value)return c[b].key;return null},namespace("springroll").WeightedRandom=a}(),function(){for(var a=["ms","moz","webkit","o"],b=a.length,c=0;b>c&&!window.requestAnimationFrame;++c)window.requestAnimationFrame=window[a[c]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[a[c]+"CancelAnimationFrame"]||window[a[c]+"CancelRequestAnimationFrame"];if(!window.requestAnimationFrame){var d=include("springroll.TimeUtils"),e=0;window.requestAnimationFrame=function(a){var b=d.now(),c=Math.max(0,16-(b-e)),f=window.setTimeout(function(){a(b+c)},c);return e=b+c,f},window.cancelAnimationFrame=function(a){clearTimeout(a)}}window.requestAnimFrame=window.requestAnimationFrame}(),function(a){function b(a,b){return a._priority-b._priority}function c(a){if(null===a)return"null";var b=typeof a;return"object"===b||"function"===b?Object.prototype.toString.call(a).match(/\s([a-z]+)/i)[1].toLowerCase()||"object":b}var d=function(){this._listeners={},this._destroyed=!1},e=extend(d);Object.defineProperty(e,"destroyed",{enumerable:!0,get:function(){return this._destroyed}}),e.trigger=function(b){if(!this._destroyed&&this._listeners.hasOwnProperty(b)&&this._listeners[b]!==a){var c,d=this._listeners[b].slice();arguments.length>1&&(c=Array.prototype.slice.call(arguments,1));for(var e=d.length-1;e>=0;--e){var f=d[e];f._eventDispatcherOnce&&(delete f._eventDispatcherOnce,this.off(b,f)),f.apply(this,c)}}},e.once=function(a,b,c){return this.on(a,b,c,!0)},e.on=function(a,d,e,f){if(!this._destroyed){if("object"===c(a))for(var g in a)a.hasOwnProperty(g)&&this.on(g,a[g],e,f);else if("function"===c(d))for(var h,i=a.split(" "),j=null,k=0,l=i.length;l>k;k++)j=i[k],h=this._listeners.hasOwnProperty(j)?this._listeners[j]:this._listeners[j]=[],f&&(d._eventDispatcherOnce=!0),d._priority=parseInt(e)||0,-1===h.indexOf(d)&&(h.push(d),h.length>1&&h.sort(b));else if(Array.isArray(d))for(var m=0,n=d.length;n>m;m++)this.on(a,d[m],e,f);return this}},e.off=function(b,c){if(!this._destroyed){if(b===a)this._listeners={};else if(Array.isArray(c))for(var d=0,e=c.length;e>d;d++)this.off(b,c[d]);else for(var f,g,h=b.split(" "),i=null,j=0,k=h.length;k>j;j++)i=h[j],this._listeners.hasOwnProperty(i)&&(f=this._listeners[i],c===a?f.length=0:(g=f.indexOf(c),-1!==g&&f.splice(g,1)));return this}},e.has=function(a,b){if(!a||!this._listeners.hasOwnProperty(a))return!1;var c=this._listeners[a];return c?b?c.indexOf(b)>=0:c.length>0:!1},e.destroy=function(){this._destroyed=!0,this._listeners=null},namespace("springroll").EventDispatcher=d}(),function(a){var b=include("springroll.EventDispatcher"),c=function(){b.call(this),this._properties={}},d=b.prototype,e=b.extend(c),f=function(a,b){var c=this._properties[a];if(c.readOnly)throw"Property '"+a+"' is read-only";var d=c.value;c.value=b,d!=b&&this.trigger(a,b)},g=function(a){var b=this._properties[a];if(b.responder){var c=b.responder();return b.value=c,c}return b.value};e.add=function(b,c,d){var e=this._properties,i=e[b];if(i!==a)return i.setValue(c),i.setReadOnly(d===a?i.readOnly:d),this;if(this.hasOwnProperty(b))throw"Object already has property "+b;return e[b]=new h(b,c,d),Object.defineProperty(this,b,{get:g.bind(this,b),set:f.bind(this,b)}),this},e.respond=function(b,c){var d=this._properties[b];if(d===a)throw"Property "+b+" does not exist";
return d.responder=c,d.value=c(),this},e.destroy=function(){var a;for(var b in this._properties)a=this._properties[b],a.value=null,a.responder=null;this._properties=null,d.destroy.call(this)};var h=function(a,b,c){this.name=a,this.setValue(b),this.setReadOnly(c),this.responder=null};h.prototype.setValue=function(b){this.value=b===a?null:b},h.prototype.setReadOnly=function(b){this.readOnly=b===a?!1:!!b},namespace("springroll").PropertyDispatcher=c}(),function(a){var b,c=include("springroll.PropertyDispatcher"),d=function(d,e){b===a&&(b=include("springroll.Debug",!1)),c.call(this),this._options=e||{},this._app=d},e=c.extend(d);e.init=function(){var a=this._options;this._app,a=Object.merge({},a),a.useQueryString&&Object.merge(a,f());for(var b in a)this.add(b,a[b]);var c=this._properties;for(var d in c)this.trigger(d,c[d].value)};var f=function(){var b={},c=window.location.search;if(!c)return b;var d=c.substr(c.indexOf("?")+1),e=d.indexOf("#");d=0>e?d:d.substring(0,e);for(var f,g=d.split("&"),h=0,i=g.length;i>h;h++){f=g[h].split("=");var j=f[1];"true"===j||j===a?j=!0:"false"===j&&(j=!1),b[f[0]]=j}return b};e.asDOMElement=function(a){var b=this._properties[a];b&&b.value&&"string"==typeof b.value&&(b.value=document.getElementById(b.value))},e.override=function(b,c){var d=this._properties[b];if(d===a)throw"Invalid override "+b;return d.setValue(c),this},namespace("springroll").ApplicationOptions=d}(),function(){var a,b=function(b){a||(a=include("springroll.Application")),this.priority=b||0,this.setup=function(){},this.preload=null,this.teardown=function(){},a._plugins.push(this),a._plugins.sort(function(a,b){return b.priority-a.priority})};namespace("springroll").ApplicationPlugin=b}(),function(a){var b=include("springroll.TimeUtils"),c=include("springroll.EventDispatcher"),d=include("springroll.ApplicationOptions"),e=include("springroll.DelayedCall"),f=function(a,b){if(r)throw"Only one Application can be opened at a time";r=this,c.call(this),this.options=new d(this,a),this.display=null,this.init=b||null,this.pluginLoad=null,q={},p=[],j=this._tick.bind(this),f._plugins.forEach(function(a){a.setup.call(r)}),this.options.init(),this.name=this.options.name,setTimeout(this._preInit.bind(this),0)};f.version="0.4.26";var g=c.prototype,h=c.extend(f);f._plugins=[];var i=0,j=null,k=!1,l=!0,m=-1,n=!1,o=0,p=null,q=null,r=null;Object.defineProperty(f,"instance",{get:function(){return r}}),h._preInit=function(){if(!this.destroyed){var a=this.options;n=a.raf,a.on("raf",function(a){n=a}),a.on("fps",function(a){"number"==typeof a&&(o=1e3/a|0)}),a.canvasId&&a.display&&this.addDisplay(a.canvasId,a.display,a.displayOptions);var b=[];f._plugins.forEach(function(a){a.preload&&b.push(a.preload.bind(r))}),this.pluginLoad=this.load(b,{complete:this._doInit.bind(this),progress:s.bind(this),autoStart:!1,startAll:!1}),this.pluginLoad.start()}};var s=function(a){this.trigger("pluginProgress",a)};h._doInit=function(){this.destroyed||(this.pluginLoad=null,this.trigger("beforeInit"),this.paused=!1,this.trigger("init"),this.init&&this.init.call(this),this.trigger("afterInit"))},Object.defineProperty(h,"enabled",{set:function(a){l=a,p.forEach(function(b){b.enabled=a})},get:function(){return l}}),Object.defineProperty(h,"paused",{get:function(){return k},set:function(a){k=!!a,this.internalPaused(k)}}),h.internalPaused=function(a){this.trigger("pause",a),this.trigger(a?"paused":"resumed",a),a?-1!=m&&(n?cancelAnimationFrame(m):clearTimeout(m),m=-1):-1==m&&j&&(i=b.now(),m=n?requestAnimFrame(j):t(j))};var t=function(a,b){var c=o;return b&&(c=Math.max(0,o-b)),setTimeout(a,c)};h.addDisplay=function(a,b,c){if(q[a])throw"Display exists with id '"+a+"'";var d=new b(a,c);return q[a]=d,p.push(d),d.enabled=l,this.display||(this.display=d),this.trigger("displayAdded",d),d},Object.defineProperty(h,"displays",{get:function(){return p}}),h.getDisplay=function(a){return q[a]},h.removeDisplay=function(a){var b=q[a];b&&(p.splice(p.indexOf(b),1),b.destroy(),delete q[a],this.trigger("displayRemoved",a))},h._tick=function(){if(k)return void(m=-1);var a=b.now(),c=a-i;if(i=a,this.trigger("update",c),p)for(var d=0;d<p.length;d++)p[d].render(c);j&&(m=n?requestAnimFrame(j):t(j,b.now()-i))},h.setTimeout=function(a,b,c,d){return new e(a,b,!1,d,c)},h.setInterval=function(a,b,c){return new e(a,b,!0,!1,c)},h.destroy=function(){if(!this.destroyed){this.paused=!0,this.trigger("destroy");var a=f._plugins.slice().reverse();a.forEach(function(a){a.teardown.call(r)}),p.forEach(function(a){a.destroy()}),p=null,q=null,r=j=null,this.display=null,this.options.destroy(),this.options=null,g.destroy.call(this)}},h.toString=function(){return"[Application name='"+this.name+"']"},namespace("springroll").Application=f}(),function(){var a=include("springroll.ApplicationPlugin"),b=include("createjs.Tween",!1),c=include("createjs.Ticker",!1),d=new a(120);d.setup=function(){var a=this.options;a.add("raf",!0,!0),a.add("fps",60,!0),a.add("useQueryString",!1,!0),a.add("canvasId",null,!0),a.add("display",null,!0),a.add("displayOptions",null,!0);var d=this;a.add("updateTween",!0,!0).on("updateTween",function(a){b&&(c&&c.setPaused(!!a),d.off("update",b.tick),a&&d.on("update",b.tick))}),a.add("name","",!0)}}(),function(a,b,c){var d=function(a,d){this._onFocus=a,this._onBlur=d,this._enabled=!1,(f||b.onfocusin!==c)&&(this._onToggle=function(){b.hidden||b.webkitHidden||b.msHidden||b.mozHidden?this._onBlur():this._onFocus()}.bind(this),this.enabled=!0)},e=extend(d),f=null;b.hidden!==c?f="visibilitychange":b.mozHidden!==c?f="mozvisibilitychange":b.msHidden!==c?f="msvisibilitychange":b.webkitHidden!==c&&(f="webkitvisibilitychange");var g=!f&&b.onfocusin!==c;Object.defineProperty(e,"enabled",{get:function(){return this._enabled},set:function(c){c=!!c,this._enabled!=c&&(this._enabled=c,a.removeEventListener("pagehide",this._onBlur),a.removeEventListener("pageshow",this._onFocus),a.removeEventListener("blur",this._onBlur),a.removeEventListener("focus",this._onFocus),a.removeEventListener("visibilitychange",this._onToggle),b.removeEventListener(f,this._onToggle,!1),g&&(b.removeEventListener("focusin",this._onFocus),b.removeEventListener("focusout",this._onBlur)),c&&(b.addEventListener(f,this._onToggle,!1),a.addEventListener("pagehide",this._onBlur),a.addEventListener("pageshow",this._onFocus),a.addEventListener("blur",this._onBlur),a.addEventListener("focus",this._onFocus),a.addEventListener("visibilitychange",this._onToggle,!1),g&&(b.addEventListener("focusin",this._onFocus),b.addEventListener("focusout",this._onBlur))))}}),e.destroy=function(){f&&this._onToggle&&(this.enabled=!1,this._onToggle=null,this._onFocus=null,this._onBlur=null)},namespace("springroll").PageVisibility=d}(window,document),function(){var a=include("springroll.ApplicationPlugin"),b=new a;b.setup=function(){var a=include("springroll.PageVisibility"),b=this._visibility=new a(d.bind(this),c.bind(this));this.options.add("autoPause",!0).on("autoPause",function(a){b.enabled=a}).respond("autoPause",function(){return b.enabled}),Object.defineProperty(this,"autoPaused",{set:function(a){this.paused||this.internalPaused(a)}})};var c=function(){this.autoPaused=!0},d=function(){this.autoPaused=!1};b.teardown=function(){this._visibility&&this._visibility.destroy(),this._visibility=null}}(),function(){var a=function(){this._filters=[]},b=extend(a);b.add=function(a,b){if(!a||"string"!=typeof a&&a instanceof RegExp==0)throw"invalide replace value";if("string"!=typeof b)throw"invalid replacement value";if(this._filters){for(var c=this._filters.length-1;c>=0;c--)if(a.toString()==this._filters[c].replace.toString())throw"Filter already exists.";this._filters.push({replace:a,replacement:b})}},b.filter=function(a){if(!this._filters)return a;for(var b=this._filters.length-1;b>=0;b--){var c=this._filters[b].replace,d=this._filters[b].replacement;a=a.replace(c,d)}return a},b.destroy=function(){this._filters=null},namespace("springroll").StringFilters=a}(),function(){var a=include("springroll.ApplicationPlugin"),b=new a(110);b.setup=function(){var a=include("springroll.StringFilters");this.filters=new a},b.teardown=function(){this.filters&&this.filters.destroy(),this.filters=null}}(),function(){var a=include("springroll.ApplicationPlugin"),b=include("devicePixelRatio",!1),c=new a(100),d=null,e=0,f=0,g=0,h=0,i={width:0,height:0,normalWidth:0,normalHeight:0},j=null;c.setup=function(){var a=this.options;a.add("maxWidth",0),a.add("maxHeight",0),a.add("uniformResize",!0),a.add("responsive",!1,!0),a.add("resizeElement","frame",!0),a.add("enableHiDPI",!1),a.on("maxWidth",function(a){e=a}),a.on("maxHeight",function(a){f=a}),this.once("displayAdded",function(a){g=a.width,h=a.height,e||(e=g),f||(f=h)}),this.realWidth=0,this.realHeight=0,this.triggerResize=function(){if(d){i.width=0|(d.innerWidth||d.clientWidth),i.height=0|(d.innerHeight||d.clientHeight),this.calculateDisplaySize(i);var a=this.realWidth=i.width,c=this.realHeight=i.height,e=i.normalWidth,f=i.normalHeight,g=this.options.responsive,h=this.options.enableHiDPI;this.displays.forEach(function(d){g?(h&&b&&(d.canvas.style.width=a+"px",d.canvas.style.height=c+"px",a*=b,c*=b),d.resize(a,c)):(d.canvas.style.width=a+"px",d.canvas.style.height=c+"px",h&&b&&(e*=b,f*=b),d.resize(e,f))}),this.trigger("resize",g?a:e,g?c:f),this.displays.forEach(function(a){a.render(0,!0)})}},this.onWindowResize=function(){this.triggerResize(),j=this.setTimeout(function(){this.triggerResize(),j=null}.bind(this),500)},this.calculateDisplaySize=function(a){if(h&&this.options.uniformResize){var b=e/h,c=g/f,d=g/h,i=a.width/a.height;c>i?a.height=a.width/c:i>b&&(a.width=a.height*b),i=a.width/a.height,a.normalWidth=g,a.normalHeight=h,i>d?a.normalWidth=h*i:d>i&&(a.normalHeight=g/i),a.width=Math.ceil(a.width),a.height=Math.ceil(a.height),a.normalWidth=Math.ceil(a.normalWidth),a.normalHeight=Math.ceil(a.normalHeight)}},this.once("beforeInit",this.triggerResize)},c.preload=function(a){var b=this.options;b.asDOMElement("resizeElement"),b.resizeElement&&(d=b.resizeElement,this.onWindowResize=this.onWindowResize.bind(this),window.addEventListener("resize",this.onWindowResize)),a()},c.teardown=function(){j&&(j.destroy(),j=null),d&&window.removeEventListener("resize",this.onWindowResize),d=null,i.width=i.height=i.normalWidth=i.normalHeight=g=h=f=e=0}}(),function(a){var b=function(a){this._app=a,this._versions={},this._filters=[],this._globalVersion=null,this._applySpecificVersion=this._applySpecificVersion.bind(this),this._applyGlobalVersion=this._applyGlobalVersion.bind(this),this.cacheBust=!1},c=extend(b);Object.defineProperty(c,"cacheBust",{get:function(){return!(!this._globalVersion||0!==this._globalVersion.indexOf("cb="))},set:function(a){if(a)this._globalVersion="cb="+Date.now(),this.unregisterURLFilter(this._applySpecificVersion),this.registerURLFilter(this._applyGlobalVersion);else{var b=this._app.options.version;this._globalVersion=b?"v="+b:null,this._globalVersion?(this.unregisterURLFilter(this._applySpecificVersion),this.registerURLFilter(this._applyGlobalVersion)):(this.unregisterURLFilter(this._applyGlobalVersion),this.registerURLFilter(this._applySpecificVersion))}}}),c.destroy=function(){this._app=null,this._versions=null,this._filters=null,this._applySpecificVersion=null,this._applyGlobalVersion=null},c.addVersionsFile=function(a,b,c){if(this.cacheBust)return void(b&&b());this.addVersion(a,Date.now().toString()),a=this._applySpecificVersion(a);var d=this;this._app.load(a,function(a){if(a){var e,f,g=a.replace(/\r/g,"").split("\n");for(e=0,len=g.length;e<len;e++)g[e]&&(f=g[e].split(" "),2==f.length&&d.addVersion((c||"")+f[0],f[1]))}b&&b()})},c.addVersion=function(a,b){this._versions[a]||(this._versions[a]=b)},c.registerURLFilter=function(a){-1==this._filters.indexOf(a)&&this._filters.push(a)},c.unregisterURLFilter=function(a){var b=this._filters.indexOf(a);b>-1&&this._filters.splice(b,1)},c._applySpecificVersion=function(a){var b=this._app.options.basePath;if(b&&b.indexOf("?")>0)return a;var c=this._versions[a];return c&&/(\?|\&)v\=[0-9]*/.test(a)===!1&&(a=a+(a.indexOf("?")<0?"?":"&")+"v="+c.version),a},c._applyGlobalVersion=function(a){if(!this._globalVersion)return a;var b=this._app.options.basePath;if(b&&b.indexOf("?")>0)return a;var c=0===this._globalVersion.indexOf("cb=")?/(\?|\&)cb\=[0-9]*/:/(\?|\&)v\=/;return c.test(a)===!1&&(a=a+(a.indexOf("?")<0?"?":"&")+this._globalVersion),a},c._applyBasePath=function(a){var b=this._app.options.basePath;return b&&/^http(s)?\:/.test(a)===!1&&-1==a.search(b)&&(a=b+a),a},c.prepare=function(a,b){b&&(a=this._applyBasePath(a));for(var c=0,d=this._filters.length;d>c;++c)a=this._filters[c](a);return a},namespace("springroll").CacheManager=b}(),function(){var a,b=include("springroll.Application"),c=function(b,d){if(void 0===a&&(a=include("springroll.Debug",!1)),this.status=c.WAITING,this.complete=b.complete||null,this.cache=!!b.cache,this.id=b.id||null,this.type=b.type||null,this.original=b,this.cache&&!this.id){if(d&&"string"==typeof d){var e=d.lastIndexOf(".");e>-1&&(d=d.substr(0,e));var f=d.lastIndexOf("/");f>-1&&(d=d.substr(f+1)),b.id=this.id=d}this.id||(this.cache=!1)}},d=extend(c);c.WAITING=0,c.RUNNING=1,c.FINISHED=2,d.start=function(a){a()},d.filter=function(a){var c=b.instance.assetManager.sizes;if(a&&c.test(a)){var d=c.size(this.original.sizes);a=c.filter(a,d),this.original.scale=d.scale}return a},d.load=function(a,c){return b.instance.load(a,c)},d.simpleLoad=function(a,c,d,e){return b.instance.loader.load(a,c,d,e)},d.destroy=function(){this.status=c.FINISHED,this.id=null,this.type=null,this.complete=null,this.original=null},namespace("springroll").Task=c}(),function(){var a=include("springroll.Task"),b=function(b){a.call(this,b),this.async=b.async},c=a.extend(b);b.test=function(a){return!!a.async},c.start=function(a){this.async(a)},c.destroy=function(){a.prototype.destroy.call(this),this.async=null},namespace("springroll").FunctionTask=b}(),function(){var a=include("springroll.Task"),b=function(b){a.call(this,b,b.color),this.color=this.filter(b.color),this.alpha=this.filter(b.alpha)},c=a.extend(b);b.test=function(a){return!!a.color&&!!a.alpha},c.start=function(a){this.load({_alpha:this.alpha,_color:this.color},function(c){a(b.mergeAlpha(c._color,c._alpha)),c._color.src=c._alpha.src=""})},b.mergeAlpha=function(a,b,c){c||(c=document.createElement("canvas")),c.width=Math.max(b.width,a.width),c.height=Math.max(b.height,a.height);var d=c.getContext("2d");return d.save(),d.drawImage(a,0,0),d.globalCompositeOperation="destination-in",d.drawImage(b,0,0),d.restore(),c},namespace("springroll").ColorAlphaTask=b}(),function(){var a=include("springroll.Task"),b=function(b){a.call(this,b),this.assets=b.assets,this.cacheAll=b.cacheAll,this.progress=b.progress},c=a.extend(b);b.test=function(a){return!!a.assets&&(Array.isArray(a.assets)||Object.isPlain(a.assets))},c.start=function(a){this.load(this.assets,{complete:a,progress:this.progress,cacheAll:this.cacheAll})},c.destroy=function(){a.prototype.destroy.call(this),this.assets=null},namespace("springroll").ListTask=b}(),function(){var a=include("springroll.Task"),b=function(b){a.call(this,b,b.src),this.src=this.filter(b.src),this.progress=b.progress||null,this.data=b.data||null,this.advanced=!!b.advanced},c=a.extend(b);b.test=function(a){return!!a.src},c.start=function(a){var b=this.advanced;this.simpleLoad(this.src,function(c){var d=c;d&&!b&&(d=c.content,c.destroy()),a(d)},this.progress,this.data)},c.destroy=function(){a.prototype.destroy.call(this),this.data=null,this.progress=null},namespace("springroll").LoadTask=b}(),function(a){var b,c=include("createjs.LoadQueue"),d=include("createjs.Sound",!1),e=function(){c.call(this,!0),b===a&&(b=include("springroll.Debug",!1)),this.retries=0,this.url=null,this.preparedUrl=null,this.data=null,this.onComplete=null,this.onProgress=null,this._onFailed=this._onFailed.bind(this),this._onProgress=this._onProgress.bind(this),this._onCompleted=this._onCompleted.bind(this),d&&this.installPlugin(d)},f=extend(e,c);e.MAX_RETRIES=3,f.toString=function(){return"[LoaderItem(url:'"+this.url+"')]"},Object.defineProperty(f,"basePath",{set:function(a){this._basePath=a}}),Object.defineProperty(f,"crossOrigin",{set:function(a){this._crossOrigin=a}}),f.clear=function(){this.basePath="",this.crossOrigin=!1,this.retries=0,this.onComplete=null,this.onProgress=null,this.data=null,this.preparedUrl=null,this.url=null,this.removeAllEventListeners(),this.removeAll(),this.close()},f.start=function(a){this.addEventListener("fileload",this._onCompleted),this.addEventListener("error",this._onFailed),this.addEventListener("fileprogress",this._onProgress),this._internalStart()},f._internalStart=function(){var a=this.preparedUrl;this.data&&this.data.id&&(a={id:this.data.id,src:a,data:this.data}),this.loadFile(a)},f._onProgress=function(a){this.onProgress&&this.onProgress(this.progress)},f._onFailed=function(a){this.retry()},f.retry=function(){this.retries++,this.retries>e.MAX_RETRIES?this.onComplete(this,null):this._internalStart()},f._onCompleted=function(a){this.onComplete(this,a.result)},namespace("springroll").LoaderItem=e}(),function(){var a=function(a,b,c){this.content=a,this.url=b,this.data=c,this.id=null},b=extend(a);b.toString=function(){return"[LoaderResult(url: '"+this.url+"')]"},b.reset=function(){this.content=this.url=this.data=this.id=null},b.destroy=function(){this.reset()},namespace("springroll").LoaderResult=a}(),function(a){var b=include("springroll.LoaderItem"),c=include("springroll.CacheManager"),d=include("springroll.LoaderResult"),e=function(a){this.app=a,this.maxCurrentLoads=2,this.cacheManager=new c(a),this.items={},this.itemPool=[]},f=extend(e);f.destroy=function(){this.itemPool&&this.itemPool.forEach(function(a){a.clear()}),this.itemPool=null,this.cacheManager&&this.cacheManager.destroy(),this.cacheManager=null,this.items=null},f.load=function(b,c,d,e){var f=this.app.options,g=this._getItem(),h=f.basePath;return h!==a&&/^http(s)?\:/.test(b)===!1&&-1==b.search(h)&&(g.basePath=h),g.crossOrigin=f.crossOrigin,g.url=b,g.preparedUrl=this.cacheManager.prepare(b),g.onComplete=this._onComplete.bind(this,c),g.onProgress=d||null,g.data=e||null,g.setMaxConnections(this.maxCurrentLoads),this.items[b]=g,g.start(),g},f._onComplete=function(a,b,c){c&&(c=new d(c,b.url,b.data)),a(c),this._putItem(b)},f.cancel=function(a){var b=this.items[a];return b?(b.clear(),this._putItem(b),!0):!1},f._getItem=function(){var a=this.itemPool;return a.length?a.pop():new b},f._putItem=function(a){delete this.items[a.url],a.clear(),this.itemPool.push(a)},namespace("springroll").Loader=e}(),function(a){function b(a){a&&(a.destroy&&a.destroy(),"IMG"==a.tagName&&(a.src=""))}var c,d=function(){c===a&&(c=include("springroll.Debug",!1)),this._cache={}},e=extend(d);e.read=function(a){return this._cache[a]||null},e.write=function(a,b){this._cache[a]&&this["delete"](a),this._cache[a]=b},e["delete"]=function(a){var c="string"==typeof a?a:a.id;if(c){var d=this._cache[c];if(d){if(Object.isPlain(d))for(var e in d)b(d[e]);else Array.isArray(d)?d.forEach(b):b(d);delete this._cache[c]}}},e.empty=function(){for(var a in this._cache)this["delete"](a)},e.destroy=function(){this.empty(),this._cache=null},namespace("springroll").AssetCache=d}(),function(){var a,b=include("devicePixelRatio",!1)||1,c=function(){void 0===a&&(a=include("springroll.Debug",!1)),this._sizes=[],this._sizesMap={},this._preferredSize=null},d=extend(c);c.SIZE_TOKEN="%SIZE%",d.reset=function(){this._sizes.length=0,this._sizesMap={}},d.define=function(a,b,c,d){var e={id:a,maxSize:b,scale:c,fallback:d};this._sizesMap[a]=e,this._sizes.push(e),this._sizes.sort(function(a,b){return a.maxSize-b.maxSize})},d.filter=function(a,b){return b=b||this._preferredSize,a.replace(c.SIZE_TOKEN,b.id)},d.test=function(a){return a.indexOf(c.SIZE_TOKEN)>-1},d.size=function(a){var b=this._preferredSize,c=b.fallback;if(a&&!a[b.id])for(var d=0,e=c.length;e>d;d++){var f=c[d];if(a[f]!==!1){b=this._sizesMap[f];break}}if(!b)throw"Asset does not support any valid size";return b},d.refresh=function(a,c){for(var d=Math.min(a,c),e=null,f=this._sizes,g=f.length-1;g>=0&&f[g].maxSize/b>d;--g)e=f[g];this._preferredSize=e},d.destroy=function(){this._preferredSize=null,this._sizes=null,this._sizesMap=null},namespace("springroll").AssetSizes=c}(),function(a){function b(a){return c(a)?{src:a}:d(a)?{async:a}:a}function c(a){return"string"==typeof a}function d(a){return"function"==typeof a}var e,f=include("springroll.Task"),g=include("springroll.EventDispatcher"),h=function(a){g.call(this),this.manager=a,this.mode=k,this.startAll=!0,this.cacheAll=!1,this.tasks=[],this.results=null,this.running=!1,this.numLoaded=0,this.total=0,this.type=null},i=g.extend(h);i.setup=function(a,b){this.startAll=b.startAll,this.cacheAll=b.cacheAll,this.type=b.type,this.mode=this.addTasks(a),this.results=m(this.mode),b.autoStart&&this.start()},i.start=function(){this.trigger("progress",0),this.running=!0,this.nextTask()},i.reset=function(){this.tasks.forEach(function(a){a.status=f.FINISHED,a.destroy()}),this.total=0,this.numLoaded=0,this.mode=k,this.tasks.length=0,this.results=null,this.type=null,this.startAll=!0,this.cacheAll=!1,this.running=!1};var j=0,k=1,l=2;i.addTasks=function(c){var d,e=k;c=b(c),c.type===a&&this.type&&(c.type=this.type);var f=this.getTaskByAsset(c);if(f)return this.addTask(c),j;c.type===this.type&&this.type&&delete c.type;var g;if(Array.isArray(c))for(var h=0;h<c.length;h++)d=b(c[h]),g=this.addTask(d),g.id||(e=l);else if(Object.isPlain(c))for(var i in c)d=b(c[i]),g=this.addTask(d),g.id||(g.id=i);return e},i.addTask=function(b){b.type===a&&this.type&&(b.type=this.type);var c,d=this.getTaskByAsset(b);return d?(b.cache===a&&this.cacheAll&&(b.cache=!0),c=new d(b),this.tasks.push(c),++this.total):e&&e.error("Unable to find a task definition for asset",b),c},i.getTaskByAsset=function(a){for(var b,c=this.manager.taskDefs,d=0,e=c.length;e>d;d++)if(b=c[d],b.test(a))return b;return null},i.nextTask=function(){for(var a=this.tasks,b=0;b<a.length;b++){var c=a[b];if(c.status===f.WAITING&&(c.status=f.RUNNING,c.start(this.taskDone.bind(this,c)),!this.startAll))return}},i.taskDone=function(a,b){if(this.running){b=b||null;var c=this.tasks.indexOf(a);if(-1!==c){this.tasks.splice(c,1);var d=[];if(b){switch(this.mode){case j:this.results=b;break;case l:this.results.push(b);break;case k:this.results[a.id]=b}a.cache&&this.manager.cache.write(a.id,b)}a.complete&&a.complete(b,a.original,d),this.trigger("taskDone",b,a.original,d),a.destroy();var e=this.addTasks(d);if(this.trigger("progress",++this.numLoaded/this.total),this.mode===k&&e!==this.mode)throw"Assets require IDs";this.tasks.length?this.nextTask():this.trigger("complete",this.results)}}};var m=function(a){switch(a){case j:return null;case l:return[];case k:return{}}};i.destroy=function(){g.prototype.destroy.call(this),this.reset(),this.tasks=null,this.manager=null},namespace("springroll").AssetLoad=h}(),function(a){var b=include("springroll.AssetLoad"),c=include("springroll.AssetCache"),d=include("springroll.AssetSizes"),e=(include("springroll.Task"),function(){this.loads=[],this.loadPool=[],this.taskDefs=[],this.cache=new c,this.sizes=new d,this.defaultType=null,this.sizes.define("half",400,.5,["full"]),this.sizes.define("full",1e4,1,["half"])}),f=extend(e);f.register=function(a,b){"string"==typeof a&&(a=include(a,!1)),a&&(a.priority=b||0,this.taskDefs.push(a),this.taskDefs.sort(function(a,b){return b.priority-a.priority}))},f.load=function(a,b){b=Object.merge({complete:null,progress:null,taskDone:null,cacheAll:!1,startAll:!0,autoStart:!0,type:this.defaultType},b);var c=this.getLoad();return this.loads.push(c),b.complete=this._onLoaded.bind(this,b.complete,c),c.once("complete",b.complete),b.progress&&c.on("progress",b.progress),b.taskDone&&c.on("taskDone",b.taskDone),c.setup(a,b),c},f.poolLoad=function(a){a.off("complete progress taskDone"),a.reset(),this.loadPool.push(a)},f.getLoad=function(){return this.loadPool.length>0?this.loadPool.pop():new b(this)},f._onLoaded=function(a,b,c){var d=this.loads.indexOf(b);d>-1&&this.loads.splice(d,1),a&&a(c),this.poolLoad(b)},f.destroy=function(){this.sizes.destroy(),this.sizes=null,this.cache.destroy(),this.cache=null,this.loadPool=null,this.loads=null,this.taskDefs=null},namespace("springroll").AssetManager=e}(),function(){var a=include("springroll.ApplicationPlugin"),b=include("springroll.Loader"),c=include("springroll.AssetManager"),d=new a(100);d.setup=function(){var a=this.loader=new b(this),d=this.assetManager=new c;d.register("springroll.LoadTask"),d.register("springroll.ListTask"),d.register("springroll.FunctionTask",10),d.register("springroll.ColorAlphaTask",20);var e=this.options;e.add("cacheBust",!1).respond("cacheBust",function(){return a.cacheManager.cacheBust}).on("cacheBust",function(b){a.cacheManager.cacheBust="true"==b||!!b}),e.add("basePath"),e.add("version",null,!0),e.add("versionsFile",null,!0),e.add("defaultAssetType").on("defaultAssetType",function(a){d.defaultType=a}),this.load=function(a,b,c,e,f){var g;return"string"==typeof a?a={src:a,progress:c||null,complete:b||null,cache:!!e,data:f||null}:(g=b,"function"==typeof b&&(g={complete:b})),d.load(a,g)},this.unload=function(a){"string"==typeof a&&(a=Array.prototype.slice.call(arguments));for(var b=0;b<a.length;b++)d.cache["delete"](a[b])},this.unloadAll=function(){d.cache.empty()},this.getCache=function(a){return d.cache.read(a)},this.on("resize",function(){d.sizes.refresh(this.realWidth,this.realHeight)}),this.once("beforeInit",function(){this.display&&d.sizes.refresh(this.realWidth,this.realHeight)})},d.preload=function(a){this.triggerResize();var b=this.options.versionsFile;b?this.loader.cacheManager.addVersionsFile(b,a):a()},d.teardown=function(){this.loader&&(this.loader.destroy(),this.loader=null),this.assetManager&&(this.assetManager.destroy(),this.assetManager=null)}}(),function(){var a,b=include("springroll.ApplicationPlugin"),c=new b(80);c.setup=function(){a=include("springroll.Debug",!1);var b=this.options;b.add("configPath",null,!0),b.add("preload",[],!0),this.config=null,this._assetLoad=null,this._numLoaded=0,this._total=0,this._progress=-1,this.on("pluginProgress",d.bind(this))},c.preload=function(a){var b=[],c=this.options.configPath;c?b.push({id:"config",src:c,cache:!1,complete:f.bind(this)}):e(this,b);var h=g.bind(this,a);b.length?this._assetLoad=this.load(b,{complete:h,progress:d.bind(this),cacheAll:!0}):h()};var d=function(){this._assetLoad&&(this._numLoaded=this._assetLoad.numLoaded,this._total=this._assetLoad.total);var a=this._numLoaded+this.pluginLoad.numLoaded,b=this._total+this.pluginLoad.total,c=a/b;c>this._progress&&(this._progress=c,this.trigger("progress",c))},e=function(a,b){b.append(a.options.preload),a.trigger("loading",b)},f=function(a,b,c){this.config=a,this.trigger("configLoaded",a,c),e(this,c)},g=function(a,b){this._assetLoad=null,this.trigger("loaded",b),a()};c.teardown=function(){this.config=null}}(),function(a){var b=include("springroll.EventDispatcher"),c=function(a,c){b.call(this),c=c||{},this.canvas=document.getElementById(a),this.id=a,this.width=this.canvas.width,this.height=this.canvas.height,this.stage=null,this.paused=!1,this._enabled=!1,this._visible="none"!=this.canvas.style.display,this.adapter=null},d=b.extend(c);Object.defineProperty(d,"enabled",{get:function(){return this._enabled},set:function(a){var b=this._enabled;this._enabled=a,b!=a&&(this.trigger(a?"enabled":"disabled"),this.trigger("enable",a))}}),Object.defineProperty(d,"visible",{get:function(){return this._visible},set:function(a){var b=this._visible;this._visible=a,this.canvas.style.display=a?"block":"none",b!=a&&(this.trigger(a?"visible":"hidden"),this.trigger("visibility",a))}}),d.resize=function(a,b){this.width=this.canvas.width=a,this.height=this.canvas.height=b},d.render=function(a,b){},d.destroy=function(){this.enabled=!1,this.adapter=null,this.stage=null,this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas),this.canvas.onmousedown=null,this.canvas=null},namespace("springroll").AbstractDisplay=c}(),function(){var a=include("springroll.Application"),b=include("springroll.Loader"),c=include("springroll.PropertyDispatcher"),d=include("springroll.EventDispatcher");a.prototype.getDisplays=function(a){return"function"==typeof a&&_displays.forEach(a),_displays},d.mixIn=function(a,b){return mixin(a,d)},Object.defineProperty(b,"instance",{get:function(){return a.instance.loader}}),c.prototype.readOnly=function(a){for(var b,c,d=0;d<arguments.length;d++){if(c=arguments[d],b=this._properties[c],void 0===b)throw"Property "+c+" does not exist";b.readOnly=!0}return this}}()}(),!function(){"use strict";!function(){var a=include("springroll.SavedData"),b=function(a){this.container=a,this.id=""},c=extend(b);c.read=function(b,c){return this.container.supported?void this.container.fetch("userDataRead",function(a){c(a.data)},this.id+b,!0):c(a.read(this.id+b))},c.write=function(b,c,d){return this.container.supported?void this.container.fetch("userDataWrite",function(a){d&&d()},{name:this.id+b,value:c},!0):(a.write(this.id+b,c),void(d&&d()))},c.remove=function(b,c){return this.container.supported?void this.container.fetch("userDataRemove",function(a){c&&c()},this.id+b,!0):(a.remove(this.id+b),void(c&&c()))},c.destroy=function(){this.id=null,this.container=null},namespace("springroll").UserData=b}(),function(a){var b=include("springroll.ApplicationPlugin"),c=include("springroll.PageVisibility"),d=include("springroll.UserData"),e=include("Bellhop"),f=new b(200);f.setup=function(){var a=this.options,b=this.container=new e;b.connect(),this.userData=new d(b),a.add("keepFocus",!1).on("keepFocus",function(a){b.send("keepFocus",a)}),this.once("beforeInit",function(){b.send("loaded")}),b.send("loading"),this.singlePlay=!1,this.playOptions={},this.singlePlayEnd=function(){return this.singlePlay?(this.endGame(),!0):!1},this.endGame=function(a){this.trigger("endGame",a||"game_completed"),this.destroy()},this.once("beforeInit",function(){var a=!!this.sound;this.container.send("features",{sound:a,hints:!!this.hints,music:a&&this.sound.contextExists("music"),vo:a&&this.sound.contextExists("vo"),sfx:a&&this.sound.contextExists("sfx"),captions:!!this.captions})}),b.supported&&(b.fetch("singlePlay",o.bind(this)),b.fetch("playOptions",n.bind(this))),window.onerror=h.bind(this),window.onunload=window.onbeforeunload=g.bind(this)};var g=function(){return window.onunload=window.onbeforeunload=null,this.endGame("left_site"),a},h=function(a){return this.container.supported?(this.container.send("localError",String(a)),!0):void 0};f.preload=function(a){if(!this.name)throw"Application name is empty";if(this.userData.id=this.name,this.container.supported){this.container.on({soundMuted:j.bind(this),captionsMuted:k.bind(this),musicMuted:l.bind(this,"music"),voMuted:l.bind(this,"vo"),sfxMuted:l.bind(this,"sfx"),captionsStyles:m.bind(this),pause:i.bind(this),close:p.bind(this)}),this.options.autoPause=!1;var b=this.container;this._pageVisibility=new c(b.send.bind(b,"focus",!0),b.send.bind(b,"focus",!1))}a()};var i=function(a){var b=!!a.data;this.autoPaused=b,this.enabled=!b},j=function(a){this.sound&&(this.sound.muteAll=!!a.data)},k=function(a){this.captions&&(this.captions.mute=!!a.data)},l=function(a,b){this.sound&&this.sound.setContextMute(a,!!b.data)},m=function(a){var b=a.data,c=this.captions||{},d=c.textField||null;d&&d.nodeName&&(d.className="size-"+b.size+" bg-"+b.background+" color-"+b.color+" edge-"+b.edge+" font-"+b.font+" align-"+b.align)},n=function(a){Object.merge(this.playOptions,a.data||{})},o=function(a){this.singlePlay=!!a.data},p=function(){this.endGame("closed_container")};f.teardown=function(){window.onerror=null,this._pageVisibility&&(this._pageVisibility.destroy(),this._pageVisibility=null),this.userData&&(this.userData.destroy(),this.userData=null),this.container&&(this.container.send("endGame"),this.container.destroy(),this.container=null)}}()}(),!function(){"use strict";!function(a){var b,c,d=include("springroll.EventDispatcher"),e=function(a,e){
d.call(this),c||(c=include("springroll.Application"),b=include("springroll.Debug",!1)),e=Object.merge({next:null,previous:null,delayLoad:0,preload:[],scaling:null},e||{});var f=this.app=c.instance;this.voPlayer=f.voPlayer||null,this.sound=f.sound||null,this.config=f.config||null,this.scaling=f.scaling||null,this.scalingItems=e.scaling||null,this.stateId=null,this.manager=null,this.panel=a,this.preload=e.preload,this.preloaded=!1,this.assets=null,this._destroyed=!1,this._active=!1,this._isLoading=!1,this._canceled=!1,this._onEnterProceed=null,this._onLoadingComplete=null,this._enabled=!1,this._nextState=e.next,this._prevState=e.previous,this.delayLoad=e.delayLoad,this.panel.visible=!1},f=d.prototype,g=d.extend(e),h=function(){};g.exit=h,g.exitStart=h,g.cancel=h,g.enter=h,g.enterDone=h,g.nextState=function(){var a=typeof this._nextState;this._nextState&&("function"===a?this._nextState():"string"===a&&(this.manager.state=this._nextState))},g.previousState=function(){var a=typeof this._prevState;this._prevState&&("function"===a?this._prevState():"string"===a&&(this.manager.state=this._prevState))},g.loadingStart=function(){this._isLoading||(this._isLoading=!0,this.manager.loadingStart(),this._onLoadingComplete=this._onEnterProceed,this._onEnterProceed=null)},g.loadingDone=function(b){if(b===a&&(b=this.delayLoad),this._isLoading){if(b&&"number"==typeof b)return this.panel.visible=!0,void this.app.setTimeout(this.loadingDone.bind(this,0),b,!0);this._isLoading=!1,this.manager.loadingDone(),this._onLoadingComplete&&(this._onLoadingComplete(),this._onLoadingComplete=null)}},Object.defineProperty(g,"canceled",{get:function(){return this._canceled}}),Object.defineProperty(g,"active",{get:function(){return this._active}}),Object.defineProperty(g,"enabled",{get:function(){return this._enabled},set:function(a){var b=this._enabled;this._enabled=a,b!=a&&this.trigger("enabled",a)}}),Object.defineProperty(g,"destroyed",{get:function(){return this._destroyed}}),g._internalExit=function(){this.preloaded=!1;var a=this.panel,b=this.scalingItems,c=this.scaling;c&&b&&("panel"==b?c.removeItem(a):c.removeItems(a,b)),this.preload.length&&this.app.unload(this.preload),this._isTransitioning&&(this._isTransitioning=!1,this.manager.animator&&this.manager.animator.stop(a)),this._enabled=!1,a.visible=!1,this._active=!1,this.exit(),this.trigger("exit")},g._internalEntering=function(){this.enter(),this.trigger("enter"),this.loadingStart(),this.preloaded=!1;var a=[];this.trigger("loading",a),this.preload.length&&(a=this.preload.concat(a)),a.length?this.app.load(a,{complete:this._onLoaded.bind(this),progress:i.bind(this),cacheAll:!0}):this._onLoaded(null)};var i=function(a){this.trigger("progress",a),this.manager.trigger("progress",a)};g._onLoaded=function(a){if(this.assets=a,this.preloaded=!0,this.trigger("loaded",a),this.scaling){var b=this.scalingItems;b&&("panel"==b?(this.panel.x=this.panel.y=0,this.panel.scaleX=this.panel.scaleY=1,this.scaling.addItem(this.panel,{align:"top-left",titleSafe:!0})):this.scaling.addItems(this.panel,b))}this.loadingDone()},g._internalExitStart=function(){this.exitStart(),this.trigger("exitStart")},g._internalEnter=function(a){this._isTransitioning&&(this._isTransitioning=!1,this.manager.animator&&this.manager.animator.stop(this.panel)),this._enabled=!1,this._active=!0,this._canceled=!1,this._onEnterProceed=a,this._internalEntering(),this._onEnterProceed&&(this._onEnterProceed(),this._onEnterProceed=null)},g._internalCancel=function(){this._active=!1,this._canceled=!0,this._isLoading=!1,this._internalExit(),this.cancel(),this.trigger("cancel")},g._internalEnterDone=function(){this._canceled||(this.enabled=!0,this.enterDone(),this.trigger("enterDone"))},g.destroy=function(){this._destroyed||(this.trigger("destroy"),this.app=null,this.scaling=null,this.sound=null,this.voPlayer=null,this.config=null,this.scalingItems=null,this.assets=null,this.preload=null,this.panel=null,this.manager=null,this._destroyed=!0,this._onEnterProceed=null,this._onLoadingComplete=null,f.destroy.call(this))},namespace("springroll").State=e}(),function(a){var b=function(b,c,d){this.currentState=c,this.visibleState=d===a?c:d,this.type=b};extend(b),b.VISIBLE="onVisible",b.HIDDEN="onHidden",namespace("springroll").StateEvent=b}(),function(a){var b=(include("springroll.Debug",!1),include("springroll.EventDispatcher")),c=(include("springroll.State"),include("springroll.StateEvent")),d=function(a){b.call(this),this.animator=null,this.transition=null,this.waitForLoadingComplete=!1,this._transitionSounds=a||null,this._states={},this._state=null,this._stateId=null,this._oldState=null,this._isLoading=!1,this._isTransitioning=!1,this._destroyed=!1,this.enabled=!0,this._onTransitionLoading=this._onTransitionLoading.bind(this),this._onTransitionOut=this._onTransitionOut.bind(this),this._onStateLoaded=this._onStateLoaded.bind(this),this._onTransitionIn=this._onTransitionIn.bind(this)},e=b.extend(d),f=d.TRANSITION_IN="onTransitionIn",g=d.TRANSITION_LOADING="onTransitionLoading",h=d.TRANSITION_IN_DONE="onTransitionInDone",i=d.TRANSITION_OUT="onTransitionOut",j=d.TRANSITION_OUT_DONE="onTransitionOutDone",k=d.TRANSITION_INIT_DONE="onInitDone",l=d.LOADING_START="onLoadingStart",m=d.LOADING_DONE="onLoadingDone";e.addState=function(a,b){this._states[a]=b,b.stateId=a,b.manager=this},Object.defineProperty(e,"currentState",{get:function(){return this._state}}),e.getStateById=function(a){return this._states[a]},e.isBusy=function(){return this._isLoading||this._isTransitioning},e.loadingStart=function(){this._destroyed||(this.trigger(l),this._onTransitionLoading())},e.loadingDone=function(){this._destroyed||this.trigger(m)},Object.defineProperty(e,"enabled",{set:function(a){this.trigger("enabled",a)}}),e.refresh=function(){this.state=this._stateId},Object.defineProperty(e,"state",{set:function(a){this._isTransitioning||(this._stateId=a,this.enabled=!1,this._oldState=this._state,this._state=this._states[a],this._oldState?this._isLoading?(this._oldState._internalCancel(),this._isLoading=!1,this._state._internalEnter(this._onStateLoaded)):(this._isTransitioning=!0,this._oldState._internalExitStart(),this.enabled=!1,this.trigger(i),this._transitioning(i,this._onTransitionOut)):(this._isTransitioning=!0,this.transition&&(this.transition.visible=!0),this._onTransitionLoading(),this.trigger(k),this._isLoading=!0,this._state._internalEnter(this._onStateLoaded)))},get:function(){return this._stateId}}),e._onTransitionOut=function(){this.trigger(j),this._isTransitioning=!1,this.has(c.HIDDEN)&&this.trigger(c.HIDDEN,new c(c.HIDDEN,this._state,this._oldState)),this._oldState.panel.visible=!1,this._oldState._internalExit(),this._oldState=null,this._onTransitionLoading(),this._isLoading=!0,this._state._internalEnter(this._onStateLoaded)},e._onStateLoaded=function(){if(this._isLoading=!1,this._isTransitioning=!0,this.has(c.VISIBLE)&&this.trigger(c.VISIBLE,new c(c.VISIBLE,this._state)),this._state.panel.visible=!0,this.waitForLoadingComplete&&this.animator.hasAnimation(this.transition,g)){var a=this.animator.getTimeline(this.transition);a.onComplete=function(){this.trigger(f),this._transitioning(f,this._onTransitionIn)}.bind(this),a.isLooping=!1}else this.trigger(f),this._transitioning(f,this._onTransitionIn)},e._onTransitionIn=function(){this.transition&&(this.transition.visible=!1),this.trigger(h),this._isTransitioning=!1,this.enabled=!0,this._state._internalEnterDone()},e._onTransitionLoading=function(){if(this.transition){var a,b=this._transitionSounds;b&&(a=b.loading||b.loop);var c=this.animator;c.hasAnimation(this.transition,g)?(this.trigger(g),c.play(this.transition,{anim:g,audio:a})):c.hasAnimation(this.transition,"transitionLoop")&&(this.trigger(g),c.play(this.transition,{anim:"transitionLoop",audio:a}))}},e.showTransitionOut=function(a){this.enabled=!1,this._transitioning(i,function(){this._onTransitionLoading(),a&&a()}.bind(this))},e.showTransitionIn=function(a){this._transitioning(f,function(){this.enabled=!0,this.transition.visible=!1,a&&a()}.bind(this))},e._transitioning=function(a,b){var c=this.transition,d=this._transitionSounds;if(!c)return b();c.visible=!0;var e;d&&(e=a==f?d["in"]:d.out),this.animator.play(c,{anim:a,audio:e},b)},e.destroy=function(){if(this._destroyed=!0,this.off(),this.transition&&this.animator.stop(this.transition),this._state&&this._state._internalExit(),this._states)for(var a in this._states)this._states[a].destroy(),delete this._states[a];this.transition=null,this._state=null,this._oldState=null,this._states=null},namespace("springroll").StateManager=d}(),function(){var a=include("springroll.ApplicationPlugin"),b=include("springroll.StateManager"),c=(include("springroll.Debug",!1),new a);c.setup=function(){this._states=null,this.manager=null,this._transition=null,Object.defineProperty(this,"transition",{set:function(a){if(!this.display)throw"No default display";if(a&&!this.animator)throw"No animation module";var b=this.display.stage;this._transition&&b.removeChild(this._transition),this._transition=a,this.manager&&(this.manager.transition=a),a&&(a.stop&&a.stop(),b.addChild(a))},get:function(){return this._transition}}),this.options.add("state",null,!0),this.options.add("transition"),this.options.add("transitionSounds",{"in":null,out:null},!0),Object.defineProperty(this,"states",{set:function(a){if(this.manager)throw"States already set";if(!this.display)throw"No default display";var c=this.manager=new b(this.options.transitionSounds);c.animator=this.animator,c.on("enabled",function(a){this.display.enabled=a}.bind(this));var d=this.display.stage;for(var e in a)c.addState(e,a[e]),d.addChild(a[e].panel),this.trigger("stateAdded",e,a[e]);this._states=a;var f=this._transition||this.options.transition;f&&(this.transition=f,f.gotoAndStop&&f.gotoAndStop("onTransitionOut_stop")),this.options.state&&(c.state=this.options.state)},get:function(){return this._states}})},c.teardown=function(){this._state=null,this.manager&&(this.manager.destroy(),this.manager=null),this.transition&&(this.display&&this.display.adapter.removeChildren(this.transition),this.transition=null)}}(),function(){var a=include("springroll.StateManager"),b=a.prototype;b.changeTransition=function(a){this.transition=a},b.getCurrentState=function(){return this.currentState},b.setState=function(a){this.state=a},b.next=function(){this._state.nextState()},b.previous=function(){this._state.previousState()},Object.defineProperty(include("springroll"),"BaseState",{get:function(){return include("springroll.State")}})}()}(),!function(){"use strict";!function(){var a=function(a){this.id=a,this.volume=1,this.muted=!1,this.sounds=[],this.subContexts=[]};namespace("springroll").SoundContext=a}(),function(){var a,b=function(){a||(a=include("springroll.Sound")),this._channel=null,this._endFunc=null,this._endCallback=null,this._startFunc=null,this._startParams=null,this.alias=null,this._fTime=0,this._fDur=0,this._fStart=0,this._fEnd=0,this.curVol=0,this._pan=0,this.length=0,this.paused=!1,this.globallyPaused=!1,this.isValid=!0},c=extend(b);Object.defineProperty(c,"position",{get:function(){return this._channel?this._channel.getPosition():0}}),c.stop=function(){var b=a.instance;if(b){var c=b._sounds[this.alias];if(!c)return;var d=c.playing.indexOf(this);d>-1&&c.playing.splice(d,1),d=c.waitingToPlay.indexOf(this),d>-1&&c.waitingToPlay.splice(d,1),b._stopInst(this)}},c.updateVolume=function(b){if(this._channel){if(void 0===b){var c=a.instance,d=c._sounds[this.alias];if(d.context){var e=c._contexts[d.context];b=e.muted?0:e.volume}else b=1}this._channel.setVolume(b*this.curVol)}},Object.defineProperty(c,"volume",{get:function(){return this.curVol},set:function(a){this.curVol=a,this.updateVolume()}}),Object.defineProperty(c,"pan",{get:function(){return this._pan},set:function(a){this._pan=a,this._channel&&(this._channel.pan=a)}}),c.pause=function(){this.globallyPaused=!1,this.paused||(this.paused=!0,this._channel&&(this._channel.pause(),a.instance._onInstancePaused()))},c.resume=function(){this.paused&&(this.paused=!1,this._channel&&(a.instance._onInstanceResume(),this._channel.resume(),this._channel.gainNode&&(this._channel._volume=-1,this._channel.gainNode.gain.value=0),this.updateVolume()))},namespace("springroll").SoundInstance=b}(),function(){var a=include("springroll.Task"),b=include("springroll.Application"),c=function(b){a.call(this,b,b.sounds[0]),this.sounds=b.sounds},d=a.prototype,e=a.extend(c);c.test=function(a){return!!a.sounds&&Array.isArray(a.sounds)},e.start=function(a){var c=b.instance.sound,d=this.sounds;c.preload(d,function(){d.destroy=function(){c.unload(this),this.length=0,delete this.destroy},a(d)})},e.destroy=function(){this.sounds=null,d.destroy.call(this)},namespace("springroll").SoundTask=c}(),function(){function a(){var a=l.activePlugin,b=a._audioSources,c=a._soundInstances,d=a._loaders;j.context.close&&j.context.close();var e=window.AudioContext||window.webkitAudioContext;j.context=new e,j.call(a),a._loaders=d,a._audioSources=b,a._soundInstances=c;for(var f in c)for(var g=c[f],h=0;h<g.length;++h){var i=g[h];i.panNode.disconnect(0),i.gainNode.disconnect(0),i.gainNode=j.context.createGain(),i.panNode=j.context.createPanner(),i.panNode.panningModel=j._panningModel,i.panNode.connect(i.gainNode),i._updatePan(),(i._position<0||void 0===i._position)&&(i._position=0)}}function b(a){j.playEmptySound(),("running"==j.context.state||void 0===j.context.state)&&(p.preventDefaultOnUnmute&&a.preventDefault(),document.removeEventListener("touchstart",b),document.removeEventListener("touchend",b),document.removeEventListener("mousedown",b),p.systemMuted=!1,p.trigger("systemUnmuted"))}function c(a){return"string"==typeof a}function d(a){return"function"==typeof a}var e,f,g,h=include("springroll.Application"),i=include("springroll.EventDispatcher"),j=include("createjs.WebAudioPlugin"),k=include("createjs.FlashAudioPlugin",!1),l=include("createjs.Sound"),m=include("springroll.Enum"),n=function(){g||(e=include("springroll.Debug",!1),f=include("springroll.SoundContext"),g=include("springroll.SoundInstance")),i.call(this),this._sounds={},this._fades=[],this._pool=[],this.supportedSound=null,this._contexts={},this._update=this._update.bind(this),this._markLoaded=this._markLoaded.bind(this),this._playAfterLoad=this._playAfterLoad.bind(this),this.isSupported=!0,this.systemMuted=createjs.BrowserDetect.isIOS,this.preventDefaultOnUnmute=!0},o=(i.prototype,i.extend(n)),p=null,q=new m("unloaded","loading","loaded");n.init=function(a,c){var e=h.instance.options;d(a)&&(a={ready:a});var f={plugins:e.forceFlashAudio?[k]:[j,k],types:["ogg","mp3"],swfPath:"assets/swfs/",ready:null};if(a=Object.merge({},f,a),a.ready=a.ready||c,!a.ready)throw"springroll.Sound.init requires a ready callback";if(k){var g=e.basePath;k.swfPath=(g||"")+a.swfPath}if(l.registerPlugins(a.plugins),createjs.BrowserDetect.isIOS&&l.activePlugin instanceof j&&"running"!=l.activePlugin.context.state?(document.addEventListener("touchstart",b),document.addEventListener("touchend",b),document.addEventListener("mousedown",b)):this.systemMuted=!1,p=new n,l.getCapabilities())p._initComplete(a.types,a.ready);else if(l.activePlugin){var i;i=function(){l.getCapabilities()&&(h.instance.off("update",i),p._initComplete(a.types,a.ready))},h.instance.on("update",i)}else p.isSupported=!1,a.ready&&a.ready();return p},o._initComplete=function(a,b){if(k&&l.activePlugin instanceof k)p.supportedSound=".mp3";else for(var c,d=0,e=a.length;e>d;++d)if(c=a[d],l.getCapability(c)){p.supportedSound="."+c;break}this._fixAndroidAudio=createjs.BrowserDetect.isAndroid&&l.activePlugin instanceof j&&!(navigator.userAgent.indexOf("Gecko")>-1&&navigator.userAgent.indexOf("Firefox")>-1),this._fixAndroidAudio&&(this._numPlayingAudio=0,this._lastAudioTime=Date.now()),b&&b()},Object.defineProperty(n,"instance",{get:function(){return p}}),o.addContext=function(a){if(a){for(var b,d=a.soundManifest||a.sounds||[],e=a.path||"",g=a.preload===!0||!1,h=a.context,i={},j=0,k=d.length;k>j;++j)b=d[j],c(b)&&(b={id:b}),i=this._sounds[b.id]={id:b.id,src:e+(b.src?b.src:b.id)+this.supportedSound,volume:b.volume?b.volume:1,loop:!!b.loop,loadState:q.unloaded,playing:[],waitingToPlay:[],context:b.context||h,playAfterLoad:!1,preloadCallback:null,data:b,duration:0},i.context&&(this._contexts[i.context]||(this._contexts[i.context]=new f(i.context)),this._contexts[i.context].sounds.push(i)),(g||b.preload===!0)&&this.preload(i.id);return this}},o.linkContexts=function(a,b){if(this._contexts[a]||(this._contexts[a]=new f(a)),a=this._contexts[a],Array.isArray(b))for(var c=0;c<b.length;++c)a.subContexts.indexOf(b[c])<0&&a.subContexts.push(b[c]);else a.subContexts.indexOf(b)<0&&a.subContexts.push(b)},o.exists=function(a){return!!this._sounds[a]},o.contextExists=function(a){return!!this._contexts[a]},o.isUnloaded=function(a){return this._sounds[a]?this._sounds[a].loadState==q.unloaded:!1},o.isLoaded=function(a){return this._sounds[a]?this._sounds[a].loadState==q.loaded:!1},o.isLoading=function(a){return this._sounds[a]?this._sounds[a].loadState==q.loading:!1},o.isPlaying=function(a){var b=this._sounds[a];return b?b.playing.length+b.waitingToPlay.length>0:!1},o.getDuration=function(a){var b=this._sounds[a];if(!b)return null;if(!b.duration&&b.loadState==q.loaded){var c=l.play(a,null,null,null,null,0);b.duration=c.getDuration(),c.stop()}return b.duration},o.fadeIn=function(a,b,d,e){var f,g;if(c(a)){if(f=this._sounds[a],!f)return;f.playing.length&&(g=f.playing[f.playing.length-1])}else g=a,f=this._sounds[g.alias];if(g&&g._channel){g._fTime=0,g._fDur=b>0?b:500,g._fEnd=d||g.curVol,g._fStop=!1;var i=e>0?e:0;g.volume=g._fStart=i,-1==this._fades.indexOf(g)&&(this._fades.push(g),1==this._fades.length&&h.instance.on("update",this._update))}},o.fadeOut=function(a,b,d,e,f){var g,i;if(c(a)){if(g=this._sounds[a],!g)return;g.playing.length&&(i=g.playing[g.playing.length-1])}else i=a;i&&i._channel&&(i._fTime=0,i._fDur=b>0?b:500,e>0?(i.volume=e,i._fStart=e):i._fStart=i.volume,i._fEnd=d||0,f=void 0===f?0===i._fEnd:!!f,i._fStop=f,-1==this._fades.indexOf(i)&&(this._fades.push(i),1==this._fades.length&&h.instance.on("update",this._update)))},o._update=function(a){for(var b,c,d,e,f,g=this._fades,i=g.length-1;i>=0;--i)b=g[i],b.paused||(c=b._fTime+=a,c>=b._fDur?b._fStop?(d=this._sounds[b.alias],d&&d.playing.splice(d.playing.indexOf(b),1),this._stopInst(b)):(b.curVol=b._fEnd,b.updateVolume(),g.splice(i,1)):(e=c/b._fDur,f=b._fEnd>b._fStart?b._fStart+(b._fEnd-b._fStart)*e:b._fEnd+(b._fStart-b._fEnd)*e,b.curVol=f,b.updateVolume()));0===g.length&&h.instance.off("update",this._update)},o.play=function(b,c,e,f,g,h,i,j,k){var m;if(c&&d(c)&&(m=c,c=null),m=(c?c.complete:m)||null,e=(c?c.start:e)||null,f=!!(c?c.interrupt:f),g=(c?c.delay:g)||0,h=(c?c.offset:h)||0,i=c?c.loop:i,j=c?c.volume:j,k=(c?c.pan:k)||0,!this.isSupported)return void(m&&setTimeout(m,0));i===!0&&(i=-1);var n=this._sounds[b];if(!n)return void(m&&m());(n.loop&&void 0===i||null===i)&&(i=-1),j="number"==typeof j?j:n.volume;var o,p,r=n.loadState;if(r==q.loaded){this._fixAndroidAudio&&(this._numPlayingAudio?(this._numPlayingAudio++,this._lastAudioTime=-1):(Date.now()-this._lastAudioTime>=3e4&&a(),this._numPlayingAudio=1,this._lastAudioTime=-1));var s=l.play(b,f,g,h,i,j,k);return s&&s.playState!=l.PLAY_FAILED?(o=this._getSoundInst(s,n.id),s.handleExtraData&&s.handleExtraData(n.data),o.curVol=j,o._pan=k,n.playing.push(o),o._endCallback=m,o.updateVolume(),o.length=s.getDuration(),n.duration||(n.duration=o.length),o._channel.addEventListener("complete",o._endFunc),e&&setTimeout(e,0),o):(m&&m(),null)}return r==q.unloaded?(n.playAfterLoad=!0,o=this._getSoundInst(null,n.id),o.curVol=j,o._pan=k,n.waitingToPlay.push(o),o._endCallback=m,o._startFunc=e,o._startParams?(p=o._startParams,p[0]=f,p[1]=g,p[2]=h,p[3]=i):o._startParams=[f,g,h,i],this.preload(n.id),o):r==q.loading?(n.playAfterLoad=!0,o=this._getSoundInst(null,n.id),o.curVol=j,o._pan=k,n.waitingToPlay.push(o),o._endCallback=m,o._startFunc=e,o._startParams?(p=o._startParams,p[0]=f,p[1]=g,p[2]=h,p[3]=i):o._startParams=[f,g,h,i],o):void 0},o._getSoundInst=function(a,b){var c;return this._pool.length?c=this._pool.pop():(c=new g,c._endFunc=this._onSoundComplete.bind(this,c)),c._channel=a,c.alias=b,c.length=a?a.getDuration():0,c.isValid=!0,c},o._playAfterLoad=function(b){var d=c(b)?b:b.data.id,e=this._sounds[d];if(e.loadState=q.loaded,e.playAfterLoad){this._fixAndroidAudio&&this._lastAudioTime>0&&Date.now()-this._lastAudioTime>=3e4&&a();for(var f,g,h,i,j,k=e.waitingToPlay,m=0,n=k.length;n>m;++m)f=k[m],g=f._startParams,h=f.curVol,j=f._pan,i=l.play(d,g[0],g[1],g[2],g[3],h,j),i&&i.playState!=l.PLAY_FAILED?(this._fixAndroidAudio&&(this._numPlayingAudio?(this._numPlayingAudio++,this._lastAudioTime=-1):(this._numPlayingAudio=1,this._lastAudioTime=-1)),e.playing.push(f),f._channel=i,i.handleExtraData&&i.handleExtraData(e.data),f.length=i.getDuration(),e.duration||(e.duration=f.length),f.updateVolume(),i.addEventListener("complete",f._endFunc),f._startFunc&&f._startFunc(),f.paused&&i.pause()):(f._endCallback&&f._endCallback(),this._poolInst(f));k.length=0}},o._onSoundComplete=function(a){if(a._channel){this._fixAndroidAudio&&0===--this._numPlayingAudio&&(this._lastAudioTime=Date.now()),a._channel.removeEventListener("complete",a._endFunc);var b=this._sounds[a.alias],c=b.playing.indexOf(a);c>-1&&b.playing.splice(c,1);var d=a._endCallback;this._poolInst(a),d&&d()}},o.stop=function(a){var b=this._sounds[a];if(b)if(b.playing.length)this._stopSound(b);else if(b.loadState==q.loading){b.playAfterLoad=!1;for(var c,d=b.waitingToPlay,e=0,f=d.length;f>e;++e)c=d[e],this._poolInst(c);d.length=0}},o._stopSound=function(a){for(var b=a.playing,c=b.length-1;c>=0;--c)this._stopInst(b[c]);b.length=0},o._stopInst=function(a){a._channel&&(!a.paused&&this._fixAndroidAudio&&0===--this._numPlayingAudio&&(this._lastAudioTime=Date.now()),a._channel.removeEventListener("complete",a._endFunc),a._channel.stop());var b=this._fades.indexOf(a);b>-1&&this._fades.splice(b,1),this._poolInst(a)},o.stopContext=function(a){if(a=this._contexts[a]){var b,c,d=a.sounds;for(c=d.length-1;c>=0;--c)b=d[c],b.playing.length?this._stopSound(b):b.loadState==q.loading&&(b.playAfterLoad=!1);for(c=0;c<a.subContexts.length;++c)this.stopContext(a.subContexts[c])}},o.stopAll=function(){for(var a in this._sounds)this.stop(a)},o.pause=function(a,b){c(a)&&(a=this._sounds[a]),b=!!b;var d,e=a.playing;for(d=e.length-1;d>=0;--d)e[d].paused||(e[d].pause(),e[d].globallyPaused=b);for(e=a.waitingToPlay,d=e.length-1;d>=0;--d)e[d].paused||(e[d].pause(),e[d].globallyPaused=b)},o.resume=function(a,b){c(a)&&(a=this._sounds[a]);var d,e=a.playing;for(d=e.length-1;d>=0;--d)e[d].globallyPaused==b&&e[d].resume();for(e=a.waitingToPlay,d=e.length-1;d>=0;--d)e[d].globallyPaused==b&&e[d].resume()},o.pauseContext=function(a){if(a=this._contexts[a]){var b,c,d=a.sounds;for(c=d.length-1;c>=0;--c){b=d[c];var e;for(e=b.playing.length-1;e>=0;--e)b.playing[e].pause();for(e=b.waitingToPlay.length-1;e>=0;--e)b.waitingToPlay[e].pause()}for(c=0;c<a.subContexts.length;++c)this.pauseContext(a.subContexts[c])}},o.resumeContext=function(a){if(a=this._contexts[a]){var b,c,d=a.sounds;for(c=d.length-1;c>=0;--c){b=d[c];var e;for(e=b.playing.length-1;e>=0;--e)b.playing[e].resume();for(e=b.waitingToPlay.length-1;e>=0;--e)b.waitingToPlay[e].resume()}for(c=0;c<a.subContexts.length;++c)this.resumeContext(a.subContexts[c])}},o.pauseAll=function(){var a=this._sounds;for(var b in a)this.pause(a[b],!0)},o.resumeAll=function(){var a=this._sounds;for(var b in a)this.resume(a[b],!0)},o._onInstancePaused=function(){this._fixAndroidAudio&&0===--this._numPlayingAudio&&(this._lastAudioTime=Date.now())},o._onInstanceResume=function(){this._fixAndroidAudio&&(this._lastAudioTime>0&&Date.now()-this._lastAudioTime>3e4&&a(),this._numPlayingAudio++,this._lastAudioTime=-1)},o.setContextMute=function(a,b){if(a=this._contexts[a]){a.muted=b;var c,d,e,f,g=a.volume,h=a.sounds;for(f=h.length-1;f>=0;--f)if(c=h[f],c.playing.length)for(d=c.playing,e=d.length-1;e>=0;--e)d[e].updateVolume(b?0:g);for(f=0;f<a.subContexts.length;++f)this.setContextMute(a.subContexts[f],b)}},Object.defineProperty(o,"muteAll",{set:function(a){l.setMute(!!a)}}),o.setContextVolume=function(a,b){if(a=this._contexts[a]){var c=a.muted;a.volume=b;for(var d,e,f,g=a.sounds,h=g.length-1;h>=0;--h)if(d=g[h],d.playing.length)for(e=d.playing,f=e.length-1;f>=0;--f)e[f].updateVolume(c?0:b)}},o.preload=function(a,b){if(!this.isSupported)return void(b&&setTimeout(b,0));if(c(a)&&(a=[a]),!a||0===a.length)return void(b&&b());for(var d,e=[],f=0,g=a.length;g>f;++f)d=this._sounds[a[f]],d&&d.loadState==q.unloaded&&(d.loadState=q.loading,e.push({id:d.id,src:d.src,complete:this._markLoaded,data:d,advanced:!0}));e.length>0?h.instance.load(e,b):b&&b()},o._markLoaded=function(a){var b=a.data.id,c=this._sounds[b];c&&(c.loadState=q.loaded,c.playAfterLoad&&this._playAfterLoad(b));var d=c.preloadCallback;d&&(c.preloadCallback=null,d())},o.unload=function(a){if(a)for(var b,c=0,d=a.length;d>c;++c)b=this._sounds[a[c]],b&&(this._stopSound(b),b.loadState=q.unloaded),l.removeSound(b.src)},o.unloadAll=function(){var a=[];for(var b in this._sounds)a.push(b);this.unload(a)},o._poolInst=function(a){-1==this._pool.indexOf(a)&&(a._endCallback=a.alias=a._channel=a._startFunc=null,a.curVol=0,a.globallyPaused=a.paused=a.isValid=!1,this._pool.push(a))},o.destroy=function(){if(this.stopAll(),l.removeAllSounds(),k&&l.activePlugin instanceof k){var a=document.getElementById("SoundJSFlashContainer");a&&a.parentNode&&a.parentNode.removeChild(a)}p=null,this._sounds=null,this._volumes=null,this._fades=null,this._contexts=null,this._pool=null},namespace("springroll").Sound=n}(),function(){var a,b=include("springroll.Sound"),c=include("springroll.Application"),d=include("springroll.EventDispatcher"),e=function(){d.call(this),a||(a=include("springroll.Captions",!1)),this._onSoundFinished=this._onSoundFinished.bind(this),this._updateSilence=this._updateSilence.bind(this),this._updateSoloCaption=this._updateSoloCaption.bind(this),this._syncCaptionToSound=this._syncCaptionToSound.bind(this),this._listHelper=[],this.trackSound=!1,this.paused=!1,this.voList=null,this._listCounter=0,this._currentVO=null,this._soundInstance=null,this._callback=null,this._cancelledCallback=null,this._trackedSounds=[],this._timer=0,this._captions=null},f=extend(e,d);Object.defineProperty(f,"playing",{get:function(){return null!==this._currentVO||this._timer>0}}),Object.defineProperty(f,"currentVO",{get:function(){return this._currentVO}}),Object.defineProperty(f,"captions",{set:function(a){this._captions=a,a&&(a.selfUpdate=!1)},get:function(){return this._captions}}),Object.defineProperty(f,"currentPosition",{get:function(){return this.playing?this._soundInstance?this._soundInstance.position:this._currentVO?this._timer:this.voList[this._listCounter]-this._timer:0}}),Object.defineProperty(f,"currentDuration",{get:function(){return this.playing?this._soundInstance?b.instance.getDuration(this._soundInstance.alias):this._currentVO&&this._captions?this._captions.currentDuration:this.voList[this._listCounter]:0}}),f.getElapsed=function(){var a,c,d=0;if(!this.voList)return 0;for(c=0;c<this._listCounter;++c)a=this.voList[c],"string"==typeof a?d+=b.instance.getDuration(a):"number"==typeof a&&(d+=a);return c=this._listCounter,c<this.voList.length&&(a=this.voList[c],"string"==typeof a?d+=this._soundInstance.position:"number"==typeof a&&(d+=a-this._timer)),d},f.pause=function(){!this.paused&&this.playing&&(this.paused=!0,this._soundInstance&&this._soundInstance.pause(),c.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]))},f.resume=function(){this.paused&&(this.paused=!1,this._soundInstance&&this._soundInstance.resume(),this._captions.playing?this._soundInstance?c.instance.on("update",this._syncCaptionToSound):c.instance.on("update",this._updateSoloCaption):c.instance.on("update",this._updateSilence))},f.play=function(a,b,c){this.stop(),this.playing&&this.stop(),this._listCounter=-1,"string"==typeof a?(this._listHelper.length=0,this._listHelper[0]=a,this.voList=this._listHelper):this.voList=a,this._callback=b,this._cancelledCallback=c===!0?b:c,this._onSoundFinished()},f._onSoundFinished=function(){if(this._listCounter>=0&&this.trigger("end",this._currentVO),c.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]),this._captions&&this._soundInstance&&this._captions.seek(this._soundInstance.length),this._soundInstance=null,this._listCounter++,this._listCounter>=this.voList.length){this._captions&&this._captions.stop(),this._currentVO=null,this._cancelledCallback=null;var a=this._callback;this._callback=null,a&&a()}else this._currentVO=this.voList[this._listCounter],"string"==typeof this._currentVO?(this._playSound(),this.trigger("start",this._currentVO)):"function"==typeof this._currentVO?(this._currentVO(),this._onSoundFinished()):(this._timer=this._currentVO,this._currentVO=null,c.instance.on("update",this._updateSilence),this.trigger("start",null))},f._updateSilence=function(a){this._timer-=a,this._timer<=0&&this._onSoundFinished()},f._updateSoloCaption=function(a){this._timer+=a,this._captions.seek(this._timer),this._timer>=this._captions.currentDuration&&this._onSoundFinished()},f._syncCaptionToSound=function(a){this._soundInstance&&this._captions.seek(this._soundInstance.position)},f._playSound=function(){this.trackSound&&-1==this._trackedSounds.indexOf(this._currentVO)&&this._trackedSounds.push(this._currentVO);var a=b.instance;!a.exists(this._currentVO)&&this._captions&&this._captions.hasCaption(this._currentVO)?(this._captions.play(this._currentVO),this._timer=0,c.instance.on("update",this._updateSoloCaption)):(this._soundInstance=a.play(this._currentVO,this._onSoundFinished),this._captions&&(this._captions.play(this._currentVO),c.instance.on("update",this._syncCaptionToSound)));for(var d,e=this.voList.length,f=this._listCounter+1;e>f;++f)if(d=this.voList[f],"string"==typeof d){a.exists(d)&&!a.isLoaded(d)&&a.preload(d);break}},f.stop=function(){this.paused=!1,this._soundInstance&&(this._soundInstance.stop(),this._soundInstance=null),this._currentVO=null,this._captions&&this._captions.stop(),c.instance.off("update",[this._updateSoloCaption,this._syncCaptionToSound,this._updateSilence]),this.voList=null,this._timer=0,this._callback=null;var a=this._cancelledCallback;this._cancelledCallback=null,a&&a()},f.unloadSound=function(){b.instance.unload(this._trackedSounds),this._trackedSounds.length=0},f.destroy=function(){this.stop(),this.voList=null,this._listHelper=null,this._currentVO=null,this._soundInstance=null,this._callback=null,this._cancelledCallback=null,this._trackedSounds=null,this._captions=null,d.prototype.destroy.call(this)},namespace("springroll").VOPlayer=e,namespace("springroll").Sound.VOPlayer=e}(),function(){var a=include("springroll.ApplicationPlugin"),b=include("springroll.Sound"),c=include("springroll.VOPlayer"),d=new a(90);d.setup=function(){this.options.add("swfPath","assets/swfs/",!0),this.options.add("forceFlashAudio",!1,!0),this.options.add("audioTypes",["ogg","mp3"],!0),this._music=null,this._musicInstance=null,this.voPlayer=new c,this.sound=null,this.assetManager.register("springroll.SoundTask"),Object.defineProperty(this,"music",{set:function(a){if(a!=this._music){var b=this.sound;this._music&&(b.fadeOut(this._music),this._musicInstance=null),this._music=a,a&&(this._musicInstance=b.play(this._music,{start:b.fadeIn.bind(b,a),loop:-1}))}},get:function(){return this._music}}),Object.defineProperty(this,"musicInstance",{get:function(){return this._musicInstance}}),this.once("configLoaded",function(a){var b=a.sounds,c=this.sound;b&&(b.vo&&c.addContext(b.vo),b.sfx&&c.addContext(b.sfx),b.music&&c.addContext(b.music))})};var e="soundReady";d.preload=function(a){b.init({swfPath:this.options.swfPath,types:this.options.audioTypes,ready:function(){if(!this.destroyed){var c=this.sound=b.instance;
this.on({paused:function(){c.pauseAll()},resumed:function(){c.resumeAll()}}),this.trigger(e),a()}}.bind(this)})},d.teardown=function(){this.voPlayer&&(this.voPlayer.destroy(),this.voPlayer=null),this.sound&&(this.sound.destroy(),this.sound=null)}}(),function(){var a=include("springroll.Sound"),b=include("springroll.SoundInstance"),c=include("springroll.VOPlayer"),d=a.prototype;Object.defineProperty(d,"soundEnabled",{get:function(){return this.isSupported}}),d.loadConfig=function(a){return this.addContext(a)},d.preloadSound=function(a,b){this.preload(a,b)},d.unpauseAll=function(){this.resumeAll()},d.unpauseSound=function(a){this.resume(a)},d.pauseSound=function(a){this.pause(a)},d=b.prototype,d.unpause=function(){this.resume()},d=c.prototype,Object.defineProperty(d,"soundList",{get:function(){return this.voList}})}()}(),!function(){"use strict";!function(a){var b=include("PIXI.extras.BitmapText",!1);if(b){var c=b.prototype;c.setPivotToAlign=!1,c._orig_updateText=c.updateText,c.updateText=function(){if(this._orig_updateText(),this.setPivotToAlign)switch(this.align){case"center":this.pivot.x=this.textWidth/2;break;case"right":this.pivot.x=this.textWidth;break;default:this.pivot.x=0}}}}(),function(a){var b=include("PIXI.Container",!1);if(b){var c=b.prototype;c.useBoundsForSize=!0,c._width=0,c._height=0,Object.getOwnPropertyDescriptor(c,"width").configurable&&(Object.defineProperty(c,"width",{configurable:!0,get:function(){return this.useBoundsForSize?this.scale.x*this.getLocalBounds().width:this.scale.x*this._width},set:function(a){if(this.useBoundsForSize){var b=this.getLocalBounds().width;0!==b?this.scale.x=a/b:this.scale.x=1,this._width=a}else 0===this._width?this._width=a/this.scale.x:this.scale.x=a/this._width}}),Object.defineProperty(c,"height",{configurable:!0,get:function(){return this.useBoundsForSize?this.scale.y*this.getLocalBounds().height:this.scale.y*this._height},set:function(a){if(this.useBoundsForSize){var b=this.getLocalBounds().height;0!==b?this.scale.y=a/b:this.scale.y=1,this._height=a}else 0===this._height?this._height=a/this.scale.y:this.scale.y=a/this._height}}))}}(),function(a){var b=include("PIXI.interaction.InteractionManager",!1);if(b){var c=b.prototype;c.removeClickEvents=function(){this.interactionDOMElement&&(window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),this.interactionDOMElement.removeEventListener("mousedown",this.onMouseDown,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onTouchStart,!0),this.interactionDOMElement.removeEventListener("touchend",this.onTouchEnd,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onTouchMove,!0),window.removeEventListener("mouseup",this.onMouseUp,!0))}}}(),function(a){var b=include("PIXI.Point",!1);if(b){var c=b.prototype;c.dotProd=function(a){return this.x*a.x+this.y*a.y},c.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.lengthSq=function(){return this.x*this.x+this.y*this.y},c.normalize=function(){var a=1/this.length();this.x*=a,this.y*=a},c.subtract=function(a){this.x-=a.x,this.y-=a.y},c.add=function(a){this.x+=a.x,this.y+=a.y},c.truncate=function(a){var b=this.length();if(b>a){var c=a/b;this.x*=c,this.y*=c}},c.scaleBy=function(a){this.x*=a,this.y*=a},c.distance=function(a){var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},c.distanceSq=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},b.localToGlobal=function(a,b,c,d){return d||(d=new PIXI.Point),d.x=b,d.y=c,a.toGlobal(d,d)},b.globalToLocal=function(a,b,c,d){return d||(d=new PIXI.Point),d.x=b,d.y=c,a.toLocal(d,null,d)},b.localToLocal=function(a,b,c,d,e){return e||(e=new PIXI.Point),e.x=c,e.y=d,b.toLocal(e,a,e)},c.toString=function(){return"("+this.x+", "+this.y+")"}}}(),function(a){var b=180/Math.PI,c=function(a,b,c,d,e){for(this.x=a||0,this.y=b||0,this.radius=c||0,this.startAngle=d||0;this.startAngle<0;)this.startAngle+=360;this.endAngle=e||0,this.endAngle<this.startAngle&&(this.endAngle+=360)},d=c.prototype;d.clone=function(){return new PIXI.Sector(this.x,this.y,this.radius,this.startAngle,this.endAngle)},d.contains=function(a,c){if(this.radius<=0)return!1;var d=this.x-a,e=this.y-c,f=this.radius*this.radius;if(d*=d,e*=e,d+e>f)return!1;for(var g=Math.atan2(c-this.y,a-this.x)*b;g<this.startAngle;)g+=360;return g>=this.startAngle&&g<=this.endAngle},d.constructor=c,namespace("PIXI").Sector=c}(),function(a){var b=include("PIXI.Text",!1);if(b){var c=b.prototype;c.setPivotToAlign=!1,c._orig_updateText=c.updateText,c.updateText=function(){if(this._orig_updateText(),this.setPivotToAlign)switch(this.style.align){case"center":this.pivot.x=this._width/2;break;case"right":this.pivot.x=this._width;break;default:this.pivot.x=0}}}}(),function(){var a,b=include("springroll.ColorAlphaTask"),c=include("springroll.Task"),d=include("PIXI.Texture"),e=include("PIXI.BaseTexture"),f=include("PIXI.utils"),g=include("springroll.Application"),h=function(b,d){a||(a=include("springroll.pixi.PixiDisplay")),c.call(this,b,d||b.image),this.image=this.filter(b.image),this.color=this.filter(b.color),this.alpha=this.filter(b.alpha),this.uploadToGPU=!!b.uploadToGPU},i=c.extend(h);h.test=function(a){return"pixi"==a.type&&(!!a.image||!!a.alpha&&!!a.color)},i.start=function(a){this.loadImage({},a)},i.loadImage=function(c,h,i){this.image?c._image=this.image:(c._color=this.color,c._alpha=this.alpha),this.load(c,function(c){var j;j=c._image?c._image:b.mergeAlpha(c._color,c._alpha);var k=this.original.scale;k&&1!==k||(k=f.getResolutionOfUrl(this.image||this.color));var l=new d(new e(j,null,k));if(l.baseTexture.imageUrl=this.image,this.cache&&!i){var m=this.id;f.useFilenamesForTextures||(m=this.image||this.color),f.TextureCache[m]=l,f.BaseTextureCache[m]=l.baseTexture,l.__T_destroy=l.destroy,l.destroy=function(){this.__destroyed||(this.__destroyed=!0,this.__T_destroy(!0),f.TextureCache[m]==this&&delete f.TextureCache[m])}}if(this.uploadToGPU){var n=g.instance.displays;for(var o in n){var p=n[o];if(p instanceof a&&p.isWebGL){p.renderer.updateTexture(l);break}}}h(l,c)}.bind(this))},i.destroy=function(){c.prototype.destroy.call(this)},namespace("springroll.pixi").TextureTask=h}(),function(a){var b=include("PIXI.Rectangle"),c=include("PIXI.Texture"),d=include("PIXI.utils"),e=function(a,e,f){this.baseTexture=a.baseTexture,this.texture=a,this.frames={};var g=e.meta&&"http://www.codeandweb.com/texturepacker"==e.meta.app,h=e.frames;for(var i in h){var j=h[i],k=i.lastIndexOf(".");k>0&&(i=i.substring(0,k)),k=i.lastIndexOf("/"),k>=0&&(i=i.substring(k+1));var l=j.frame;if(l){var m=null,n=null;m=j.rotated&&g?new b(l.x,l.y,l.h,l.w):new b(l.x,l.y,l.w,l.h),j.trimmed&&(n=new b(j.spriteSourceSize.x,j.spriteSourceSize.y,j.sourceSize.w,j.sourceSize.h)),this.frames[i]=new c(this.baseTexture,m,m.clone(),n,j.rotated),f&&(d.TextureCache[i]=this.frames[i])}}},f=extend(e);f.getFrame=function(a){return this.frames[a]||null},f.getFrames=function(b,c,d,e,f){e===a&&(e=4),0>e&&(e=0),f||(f=[]);var g,h,i=[],j=[];for(g=1;e>g;++g){var k="";h=1;for(var l=0;g>l;++l)k+="0",h*=10;i.unshift(k),j.push(h)}var m,n,o=j.length;for(g=c,n=d;n>=g;++g){var p=null;for(h=0;o>h;++h)if(g<j[h]){p=i[h]+g;break}p||(p=g.toString());var q=b.replace("#",p),r=this.frames[q];r&&(m=r),m&&f.push(m)}return f},f.destroy=function(){this.texture.destroy(!0),this.texture=null,this.baseTexture=null,this.frames=null},namespace("springroll.pixi").TextureAtlas=e}(),function(){var a=include("springroll.pixi.TextureTask"),b=(include("PIXI.Texture"),include("springroll.pixi.TextureAtlas")),c=(include("PIXI.utils"),function(b,c){a.call(this,b,c||b.atlas),this.atlas=this.filter(b.atlas)}),d=a.extend(c);c.test=function(b){return!!b.atlas&&a.test(b)},d.start=function(a){this.loadAtlas({},a)},d.loadAtlas=function(a,c,d){a._atlas=this.atlas,this.loadImage(a,function(a,e){var f=e._atlas,g=new b(a,f,this.cache&&!d);f.meta&&f.meta.scale&&1!=parseFloat(f.meta.scale)&&(a.baseTexture.resolution=parseFloat(e._atlas.meta.scale),a.baseTexture.update()),c(g,e)}.bind(this),!0)},namespace("springroll.pixi").TextureAtlasTask=c}(),function(){var a=include("springroll.pixi.TextureTask"),b=include("PIXI.Texture"),c=include("PIXI.Rectangle"),d=include("PIXI.extras.BitmapText",!1);if(include("PIXI.utils"),d){var e=function(b){a.call(this,b,b.font),this.font=this.filter(b.font)},f=a.extend(e);e.test=function(b){return!!b.font&&a.test(b)},f.start=function(a){this.loadImage({_font:this.font},function(e,f){var g=f._font,h={},i=g.getElementsByTagName("info")[0],j=g.getElementsByTagName("common")[0];h.font=i.getAttribute("face"),h.size=parseInt(i.getAttribute("size"),10),h.lineHeight=parseInt(j.getAttribute("lineHeight"),10),h.chars={};var k,l=g.getElementsByTagName("char");for(k=0;k<l.length;k++){var m=l[k],n=parseInt(m.getAttribute("id"),10),o=new c(parseInt(m.getAttribute("x"),10)+e.frame.x,parseInt(m.getAttribute("y"),10)+e.frame.y,parseInt(m.getAttribute("width"),10),parseInt(m.getAttribute("height"),10));h.chars[n]={xOffset:parseInt(m.getAttribute("xoffset"),10),yOffset:parseInt(m.getAttribute("yoffset"),10),xAdvance:parseInt(m.getAttribute("xadvance"),10),kerning:{},texture:new b(e.baseTexture,o)}}var p=g.getElementsByTagName("kerning");for(k=0;k<p.length;k++){var q=p[k],r=parseInt(q.getAttribute("first"),10),s=parseInt(q.getAttribute("second"),10),t=parseInt(q.getAttribute("amount"),10);h.chars[s].kerning[r]=t}this.cache&&d.fonts&&(d.fonts[h.font]=h),h.destroy=function(){h.chars=null,e.destroy()},a(h,f)}.bind(this),!0)},namespace("springroll.pixi").BitmapFontTask=e}}(),function(){var a=include("springroll.ApplicationPlugin"),b=new a;b.setup=function(){this.assetManager.register("springroll.pixi.TextureTask",60),this.assetManager.register("springroll.pixi.TextureAtlasTask",70),this.assetManager.register("springroll.pixi.BitmapFontTask",80),this.once("displayAdded",function(a){var b=this.options;!b.defaultAssetType&&a instanceof include("springroll.PixiDisplay")&&(b.defaultAssetType="pixi")})}}(),function(a){var b={};b.Circle=include("PIXI.Circle"),b.Ellipse=include("PIXI.Ellipse"),b.Rectangle=include("PIXI.Rectangle"),b.Sector=include("PIXI.Sector"),b.Point=include("PIXI.Point"),b.Polygon=include("PIXI.Polygon"),b.useRadians=!0,b.getLocalBounds=function(a){var b,c=a.width,d=a.height;return b=c&&d?new PIXI.Rectangle(-a.pivot.x,-a.pivot.y,c/a.scale.x,d/a.scale.y):new PIXI.Rectangle,b.right=b.x+b.width,b.bottom=b.y+b.height,b},b.getScale=function(b,c){return c!==a?b.scale[c]:b.scale},b.setPosition=function(b,c,d){return d!==a?b.position[d]=c:(c.x!==a&&(b.position.x=c.x),c.y!==a&&(b.position.y=c.y)),b},b.getPosition=function(b,c){return c!==a?b.position[c]:b.position},b.setScale=function(b,c,d){return d!==a?b.scale[d]=c:b.scale.x=b.scale.y=c,b},b.setPivot=function(b,c,d){return d!==a&&(b.pivot[d]=c),b.pivot=c,b},b.setHitArea=function(a,b){return a.hitArea=b,a},b.getBitmapSize=function(a){return{h:a.height/a.scale.y,w:a.width/a.scale.x}},b.removeChildren=function(a){a.removeChildren()},b.contains=function(a,b){for(;b;){if(b==a)return!0;b=b.parent}return!1},namespace("springroll.pixi").DisplayAdapter=b}(),function(a){var b=include("springroll.AbstractDisplay"),c=include("PIXI.Container"),d=include("PIXI.CanvasRenderer"),e=include("PIXI.WebGLRenderer"),f=include("PIXI.autoDetectRenderer"),g=function(a,g){b.call(this,a,g),g=g||{},this.keepMouseover=g.keepMouseover||!1,this._autoPreventDefault=g.hasOwnProperty("autoPreventDefault")?g.autoPreventDefault:!0,this.stage=new c,this.renderer=null;var h={view:this.canvas,transparent:!!g.transparent,antialias:!!g.antiAlias,preserveDrawingBuffer:!!g.preserveDrawingBuffer,clearBeforeRender:!!g.clearView,backgroundColor:g.backgroundColor||0,autoResize:!1},i=!!g.preMultAlpha;if(h.transparent&&!i&&(h.transparent="notMultiplied"),"webgl"!=g.forceContext){var j=window.navigator.userAgent;j.indexOf("Trident/7.0")>0&&(g.forceContext="canvas2d")}"canvas2d"==g.forceContext?this.renderer=new d(this.width,this.height,h):"webgl"==g.forceContext?this.renderer=new e(this.width,this.height,h):this.renderer=f(this.width,this.height,h),this.isWebGL=this.renderer instanceof e,this.adapter=include("springroll.pixi.DisplayAdapter"),this.autoPreventDefault=this._autoPreventDefault},h=b.prototype,i=b.extend(g);Object.defineProperty(i,"enabled",{get:function(){return this._enabled},set:function(a){Object.getOwnPropertyDescriptor(h,"enabled").set.call(this,a);var b=this.renderer.plugins.interaction;b&&(a?b.setTargetElement(this.canvas):this.keepMouseover?b.removeClickEvents():b.removeEvents())}}),Object.defineProperty(i,"autoPreventDefault",{get:function(){return this._autoPreventDefault},set:function(a){this._autoPreventDefault=!!a;var b=this.renderer.plugins.interaction;b&&(b.autoPreventDefault=this._autoPreventDefault)}}),i.resize=function(a,b){h.resize.call(this,a,b),this.renderer.resize(a,b)},i.render=function(a,b){(b||!this.paused&&this._visible)&&this.renderer.render(this.stage)},i.destroy=function(){this.stage.destroy(),h.destroy.call(this),this.renderer.destroy(),this.renderer=null},namespace("springroll").PixiDisplay=g,namespace("springroll.pixi").PixiDisplay=g}(),function(){function a(a){e+=a,b.update(e)}var b=include("PIXI.ticker.shared",!1),c=include("springroll.ApplicationPlugin");if(b){var d=new c,e=0;b.autoStart=!1,b.stop(),d.setup=function(){this.on("update",a,300)}}}(),function(a){var b=include("springroll.pixi.PixiDisplay"),c=include("springroll.Application");a.defineProperty(b.prototype,"animator",{get:function(){return c.instance.animator}})}(Object)}(),!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.pako=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){"use strict";var d="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;c.assign=function(a){for(var b=Array.prototype.slice.call(arguments,1);b.length;){var c=b.shift();if(c){if("object"!=typeof c)throw new TypeError(c+"must be non-object");for(var d in c)c.hasOwnProperty(d)&&(a[d]=c[d])}}return a},c.shrinkBuf=function(a,b){return a.length===b?a:a.subarray?a.subarray(0,b):(a.length=b,a)};var e={arraySet:function(a,b,c,d,e){if(b.subarray&&a.subarray)return void a.set(b.subarray(c,c+d),e);for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){var b,c,d,e,f,g;for(d=0,b=0,c=a.length;c>b;b++)d+=a[b].length;for(g=new Uint8Array(d),e=0,b=0,c=a.length;c>b;b++)f=a[b],g.set(f,e),e+=f.length;return g}},f={arraySet:function(a,b,c,d,e){for(var f=0;d>f;f++)a[e+f]=b[c+f]},flattenChunks:function(a){return[].concat.apply([],a)}};c.setTyped=function(a){a?(c.Buf8=Uint8Array,c.Buf16=Uint16Array,c.Buf32=Int32Array,c.assign(c,e)):(c.Buf8=Array,c.Buf16=Array,c.Buf32=Array,c.assign(c,f))},c.setTyped(d)},{}],2:[function(a,b,c){"use strict";function d(a,b){if(65537>b&&(a.subarray&&g||!a.subarray&&f))return String.fromCharCode.apply(null,e.shrinkBuf(a,b));for(var c="",d=0;b>d;d++)c+=String.fromCharCode(a[d]);return c}var e=a("./common"),f=!0,g=!0;try{String.fromCharCode.apply(null,[0])}catch(h){f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(h){g=!1}for(var i=new e.Buf8(256),j=0;256>j;j++)i[j]=j>=252?6:j>=248?5:j>=240?4:j>=224?3:j>=192?2:1;i[254]=i[254]=1,c.string2buf=function(a){var b,c,d,f,g,h=a.length,i=0;for(f=0;h>f;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),i+=128>c?1:2048>c?2:65536>c?3:4;for(b=new e.Buf8(i),g=0,f=0;i>g;f++)c=a.charCodeAt(f),55296===(64512&c)&&h>f+1&&(d=a.charCodeAt(f+1),56320===(64512&d)&&(c=65536+(c-55296<<10)+(d-56320),f++)),128>c?b[g++]=c:2048>c?(b[g++]=192|c>>>6,b[g++]=128|63&c):65536>c?(b[g++]=224|c>>>12,b[g++]=128|c>>>6&63,b[g++]=128|63&c):(b[g++]=240|c>>>18,b[g++]=128|c>>>12&63,b[g++]=128|c>>>6&63,b[g++]=128|63&c);return b},c.buf2binstring=function(a){return d(a,a.length)},c.binstring2buf=function(a){for(var b=new e.Buf8(a.length),c=0,d=b.length;d>c;c++)b[c]=a.charCodeAt(c);return b},c.buf2string=function(a,b){var c,e,f,g,h=b||a.length,j=new Array(2*h);for(e=0,c=0;h>c;)if(f=a[c++],128>f)j[e++]=f;else if(g=i[f],g>4)j[e++]=65533,c+=g-1;else{for(f&=2===g?31:3===g?15:7;g>1&&h>c;)f=f<<6|63&a[c++],g--;g>1?j[e++]=65533:65536>f?j[e++]=f:(f-=65536,j[e++]=55296|f>>10&1023,j[e++]=56320|1023&f)}return d(j,e)},c.utf8border=function(a,b){var c;for(b=b||a.length,b>a.length&&(b=a.length),c=b-1;c>=0&&128===(192&a[c]);)c--;return 0>c?b:0===c?b:c+i[a[c]]>b?c:b}},{"./common":1}],3:[function(a,b,c){"use strict";function d(a,b,c,d){for(var e=65535&a|0,f=a>>>16&65535|0,g=0;0!==c;){g=c>2e3?2e3:c,c-=g;do e=e+b[d++]|0,f=f+e|0;while(--g);e%=65521,f%=65521}return e|f<<16|0}b.exports=d},{}],4:[function(a,b,c){"use strict";b.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],5:[function(a,b,c){"use strict";function d(){for(var a,b=[],c=0;256>c;c++){a=c;for(var d=0;8>d;d++)a=1&a?3988292384^a>>>1:a>>>1;b[c]=a}return b}function e(a,b,c,d){var e=f,g=d+c;a^=-1;for(var h=d;g>h;h++)a=a>>>8^e[255&(a^b[h])];return-1^a}var f=d();b.exports=e},{}],6:[function(a,b,c){"use strict";function d(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}b.exports=d},{}],7:[function(a,b,c){"use strict";var d=30,e=12;b.exports=function(a,b){var c,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;c=a.state,f=a.next_in,B=a.input,g=f+(a.avail_in-5),h=a.next_out,C=a.output,i=h-(b-a.avail_out),j=h+(a.avail_out-257),k=c.dmax,l=c.wsize,m=c.whave,n=c.wnext,o=c.window,p=c.hold,q=c.bits,r=c.lencode,s=c.distcode,t=(1<<c.lenbits)-1,u=(1<<c.distbits)-1;a:do{15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=r[p&t];b:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,0===w)C[h++]=65535&v;else{if(!(16&w)){if(0===(64&w)){v=r[(65535&v)+(p&(1<<w)-1)];continue b}if(32&w){c.mode=e;break a}a.msg="invalid literal/length code",c.mode=d;break a}x=65535&v,w&=15,w&&(w>q&&(p+=B[f++]<<q,q+=8),x+=p&(1<<w)-1,p>>>=w,q-=w),15>q&&(p+=B[f++]<<q,q+=8,p+=B[f++]<<q,q+=8),v=s[p&u];c:for(;;){if(w=v>>>24,p>>>=w,q-=w,w=v>>>16&255,!(16&w)){if(0===(64&w)){v=s[(65535&v)+(p&(1<<w)-1)];continue c}a.msg="invalid distance code",c.mode=d;break a}if(y=65535&v,w&=15,w>q&&(p+=B[f++]<<q,q+=8,w>q&&(p+=B[f++]<<q,q+=8)),y+=p&(1<<w)-1,y>k){a.msg="invalid distance too far back",c.mode=d;break a}if(p>>>=w,q-=w,w=h-i,y>w){if(w=y-w,w>m&&c.sane){a.msg="invalid distance too far back",c.mode=d;break a}if(z=0,A=o,0===n){if(z+=l-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}else if(w>n){if(z+=l+n-w,w-=n,x>w){x-=w;do C[h++]=o[z++];while(--w);if(z=0,x>n){w=n,x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}}}else if(z+=n-w,x>w){x-=w;do C[h++]=o[z++];while(--w);z=h-y,A=C}for(;x>2;)C[h++]=A[z++],C[h++]=A[z++],C[h++]=A[z++],x-=3;x&&(C[h++]=A[z++],x>1&&(C[h++]=A[z++]))}else{z=h-y;do C[h++]=C[z++],C[h++]=C[z++],C[h++]=C[z++],x-=3;while(x>2);x&&(C[h++]=C[z++],x>1&&(C[h++]=C[z++]))}break}}break}}while(g>f&&j>h);x=q>>3,f-=x,q-=x<<3,p&=(1<<q)-1,a.next_in=f,a.next_out=h,a.avail_in=g>f?5+(g-f):5-(f-g),a.avail_out=j>h?257+(j-h):257-(h-j),c.hold=p,c.bits=q}},{}],8:[function(a,b,c){"use strict";function d(a){return(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24)}function e(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function f(a){var b;return a&&a.state?(b=a.state,a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=L,b.last=0,b.havedict=0,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new s.Buf32(pa),b.distcode=b.distdyn=new s.Buf32(qa),b.sane=1,b.back=-1,D):G}function g(a){var b;return a&&a.state?(b=a.state,b.wsize=0,b.whave=0,b.wnext=0,f(a)):G}function h(a,b){var c,d;return a&&a.state?(d=a.state,0>b?(c=0,b=-b):(c=(b>>4)+1,48>b&&(b&=15)),b&&(8>b||b>15)?G:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,g(a))):G}function i(a,b){var c,d;return a?(d=new e,a.state=d,d.window=null,c=h(a,b),c!==D&&(a.state=null),c):G}function j(a){return i(a,sa)}function k(a){if(ta){var b;for(q=new s.Buf32(512),r=new s.Buf32(32),b=0;144>b;)a.lens[b++]=8;for(;256>b;)a.lens[b++]=9;for(;280>b;)a.lens[b++]=7;for(;288>b;)a.lens[b++]=8;for(w(y,a.lens,0,288,q,0,a.work,{bits:9}),b=0;32>b;)a.lens[b++]=5;w(z,a.lens,0,32,r,0,a.work,{bits:5}),ta=!1}a.lencode=q,a.lenbits=9,a.distcode=r,a.distbits=5}function l(a,b,c,d){var e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new s.Buf8(f.wsize)),d>=f.wsize?(s.arraySet(f.window,b,c-f.wsize,f.wsize,0),f.wnext=0,f.whave=f.wsize):(e=f.wsize-f.wnext,e>d&&(e=d),s.arraySet(f.window,b,c-d,e,f.wnext),d-=e,d?(s.arraySet(f.window,b,c-d,d,0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0}function m(a,b){var c,e,f,g,h,i,j,m,n,o,p,q,r,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,Aa=0,Ba=new s.Buf8(4),Ca=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!a||!a.state||!a.output||!a.input&&0!==a.avail_in)return G;c=a.state,c.mode===W&&(c.mode=X),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,o=i,p=j,xa=D;a:for(;;)switch(c.mode){case L:if(0===c.wrap){c.mode=X;break}for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(2&c.wrap&&35615===m){c.check=0,Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0),m=0,n=0,c.mode=M;break}if(c.flags=0,c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&m)<<8)+(m>>8))%31){a.msg="incorrect header check",c.mode=ma;break}if((15&m)!==K){a.msg="unknown compression method",c.mode=ma;break}if(m>>>=4,n-=4,wa=(15&m)+8,0===c.wbits)c.wbits=wa;else if(wa>c.wbits){a.msg="invalid window size",c.mode=ma;break}c.dmax=1<<wa,a.adler=c.check=1,c.mode=512&m?U:W,m=0,n=0;break;case M:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.flags=m,(255&c.flags)!==K){a.msg="unknown compression method",c.mode=ma;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=ma;break}c.head&&(c.head.text=m>>8&1),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=N;case N:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.time=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,Ba[2]=m>>>16&255,Ba[3]=m>>>24&255,c.check=u(c.check,Ba,4,0)),m=0,n=0,c.mode=O;case O:for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.head&&(c.head.xflags=255&m,c.head.os=m>>8),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0,c.mode=P;case P:if(1024&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length=m,c.head&&(c.head.extra_len=m),512&c.flags&&(Ba[0]=255&m,Ba[1]=m>>>8&255,c.check=u(c.check,Ba,2,0)),m=0,n=0}else c.head&&(c.head.extra=null);c.mode=Q;case Q:if(1024&c.flags&&(q=c.length,q>i&&(q=i),q&&(c.head&&(wa=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Array(c.head.extra_len)),s.arraySet(c.head.extra,e,g,q,wa)),512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,c.length-=q),c.length))break a;c.length=0,c.mode=R;case R:if(2048&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.name+=String.fromCharCode(wa));while(wa&&i>q);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.name=null);c.length=0,c.mode=S;case S:if(4096&c.flags){if(0===i)break a;q=0;do wa=e[g+q++],c.head&&wa&&c.length<65536&&(c.head.comment+=String.fromCharCode(wa));while(wa&&i>q);if(512&c.flags&&(c.check=u(c.check,e,q,g)),i-=q,g+=q,wa)break a}else c.head&&(c.head.comment=null);c.mode=T;case T:if(512&c.flags){for(;16>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(65535&c.check)){a.msg="header crc mismatch",c.mode=ma;break}m=0,n=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=W;break;case U:for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}a.adler=c.check=d(m),m=0,n=0,c.mode=V;case V:if(0===c.havedict)return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,F;a.adler=c.check=1,c.mode=W;case W:if(b===B||b===C)break a;case X:if(c.last){m>>>=7&n,n-=7&n,c.mode=ja;break}for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}switch(c.last=1&m,m>>>=1,n-=1,3&m){case 0:c.mode=Y;break;case 1:if(k(c),c.mode=ca,b===C){m>>>=2,n-=2;break a}break;case 2:c.mode=_;break;case 3:a.msg="invalid block type",c.mode=ma}m>>>=2,n-=2;break;case Y:for(m>>>=7&n,n-=7&n;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if((65535&m)!==(m>>>16^65535)){a.msg="invalid stored block lengths",c.mode=ma;break}if(c.length=65535&m,m=0,n=0,c.mode=Z,b===C)break a;case Z:c.mode=$;case $:if(q=c.length){if(q>i&&(q=i),q>j&&(q=j),0===q)break a;s.arraySet(f,e,g,q,h),i-=q,g+=q,j-=q,h+=q,c.length-=q;break}c.mode=W;break;case _:for(;14>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(c.nlen=(31&m)+257,m>>>=5,n-=5,c.ndist=(31&m)+1,m>>>=5,n-=5,c.ncode=(15&m)+4,m>>>=4,n-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=ma;break}c.have=0,c.mode=aa;case aa:for(;c.have<c.ncode;){for(;3>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.lens[Ca[c.have++]]=7&m,m>>>=3,n-=3}for(;c.have<19;)c.lens[Ca[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,ya={bits:c.lenbits},xa=w(x,c.lens,0,19,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid code lengths set",c.mode=ma;break}c.have=0,c.mode=ba;case ba:for(;c.have<c.nlen+c.ndist;){for(;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(16>sa)m>>>=qa,n-=qa,c.lens[c.have++]=sa;else{if(16===sa){for(za=qa+2;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m>>>=qa,n-=qa,0===c.have){a.msg="invalid bit length repeat",c.mode=ma;break}wa=c.lens[c.have-1],q=3+(3&m),m>>>=2,n-=2}else if(17===sa){for(za=qa+3;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=3+(7&m),m>>>=3,n-=3}else{for(za=qa+7;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=qa,n-=qa,wa=0,q=11+(127&m),m>>>=7,n-=7}if(c.have+q>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=ma;break}for(;q--;)c.lens[c.have++]=wa}}if(c.mode===ma)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=ma;break}if(c.lenbits=9,ya={bits:c.lenbits},xa=w(y,c.lens,0,c.nlen,c.lencode,0,c.work,ya),c.lenbits=ya.bits,xa){a.msg="invalid literal/lengths set",c.mode=ma;break}if(c.distbits=6,c.distcode=c.distdyn,ya={bits:c.distbits},xa=w(z,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,ya),c.distbits=ya.bits,xa){a.msg="invalid distances set",c.mode=ma;break}if(c.mode=ca,b===C)break a;case ca:c.mode=da;case da:if(i>=6&&j>=258){a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,v(a,p),h=a.next_out,f=a.output,j=a.avail_out,g=a.next_in,e=a.input,i=a.avail_in,m=c.hold,n=c.bits,c.mode===W&&(c.back=-1);break}for(c.back=0;Aa=c.lencode[m&(1<<c.lenbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(ra&&0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.lencode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=ta+qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,c.length=sa,0===ra){c.mode=ia;break}if(32&ra){c.back=-1,c.mode=W;break}if(64&ra){a.msg="invalid literal/length code",c.mode=ma;break}c.extra=15&ra,c.mode=ea;case ea:if(c.extra){for(za=c.extra;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.length+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=fa;case fa:for(;Aa=c.distcode[m&(1<<c.distbits)-1],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(0===(240&ra)){for(ta=qa,ua=ra,va=sa;Aa=c.distcode[va+((m&(1<<ta+ua)-1)>>ta)],qa=Aa>>>24,ra=Aa>>>16&255,sa=65535&Aa,!(n>=ta+qa);){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}m>>>=ta,n-=ta,c.back+=ta}if(m>>>=qa,n-=qa,c.back+=qa,64&ra){a.msg="invalid distance code",c.mode=ma;break}c.offset=sa,c.extra=15&ra,c.mode=ga;case ga:if(c.extra){for(za=c.extra;za>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}c.offset+=m&(1<<c.extra)-1,m>>>=c.extra,n-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=ma;break}c.mode=ha;case ha:if(0===j)break a;if(q=p-j,c.offset>q){if(q=c.offset-q,q>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=ma;break}q>c.wnext?(q-=c.wnext,r=c.wsize-q):r=c.wnext-q,q>c.length&&(q=c.length),pa=c.window}else pa=f,r=h-c.offset,q=c.length;q>j&&(q=j),j-=q,c.length-=q;do f[h++]=pa[r++];while(--q);0===c.length&&(c.mode=da);break;case ia:if(0===j)break a;f[h++]=c.length,j--,c.mode=da;break;case ja:if(c.wrap){for(;32>n;){if(0===i)break a;i--,m|=e[g++]<<n,n+=8}if(p-=j,a.total_out+=p,c.total+=p,p&&(a.adler=c.check=c.flags?u(c.check,f,p,h-p):t(c.check,f,p,h-p)),p=j,(c.flags?m:d(m))!==c.check){a.msg="incorrect data check",c.mode=ma;break}m=0,n=0}c.mode=ka;case ka:if(c.wrap&&c.flags){for(;32>n;){if(0===i)break a;i--,m+=e[g++]<<n,n+=8}if(m!==(4294967295&c.total)){a.msg="incorrect length check",c.mode=ma;break}m=0,n=0}c.mode=la;case la:xa=E;break a;case ma:xa=H;break a;case na:return I;case oa:default:return G}return a.next_out=h,a.avail_out=j,a.next_in=g,a.avail_in=i,c.hold=m,c.bits=n,(c.wsize||p!==a.avail_out&&c.mode<ma&&(c.mode<ja||b!==A))&&l(a,a.output,a.next_out,p-a.avail_out)?(c.mode=na,I):(o-=a.avail_in,p-=a.avail_out,a.total_in+=o,a.total_out+=p,c.total+=p,c.wrap&&p&&(a.adler=c.check=c.flags?u(c.check,f,p,a.next_out-p):t(c.check,f,p,a.next_out-p)),a.data_type=c.bits+(c.last?64:0)+(c.mode===W?128:0)+(c.mode===ca||c.mode===Z?256:0),(0===o&&0===p||b===A)&&xa===D&&(xa=J),xa)}function n(a){if(!a||!a.state)return G;var b=a.state;return b.window&&(b.window=null),a.state=null,D}function o(a,b){var c;return a&&a.state?(c=a.state,0===(2&c.wrap)?G:(c.head=b,b.done=!1,D)):G}function p(a,b){var c,d,e,f=b.length;return a&&a.state?(c=a.state,0!==c.wrap&&c.mode!==V?G:c.mode===V&&(d=1,d=t(d,b,f,0),d!==c.check)?H:(e=l(a,b,f,f))?(c.mode=na,I):(c.havedict=1,D)):G}var q,r,s=a("../utils/common"),t=a("./adler32"),u=a("./crc32"),v=a("./inffast"),w=a("./inftrees"),x=0,y=1,z=2,A=4,B=5,C=6,D=0,E=1,F=2,G=-2,H=-3,I=-4,J=-5,K=8,L=1,M=2,N=3,O=4,P=5,Q=6,R=7,S=8,T=9,U=10,V=11,W=12,X=13,Y=14,Z=15,$=16,_=17,aa=18,ba=19,ca=20,da=21,ea=22,fa=23,ga=24,ha=25,ia=26,ja=27,ka=28,la=29,ma=30,na=31,oa=32,pa=852,qa=592,ra=15,sa=ra,ta=!0;c.inflateReset=g,c.inflateReset2=h,c.inflateResetKeep=f,c.inflateInit=j,c.inflateInit2=i,c.inflate=m,c.inflateEnd=n,c.inflateGetHeader=o,c.inflateSetDictionary=p,c.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":1,"./adler32":3,"./crc32":5,"./inffast":7,"./inftrees":9}],9:[function(a,b,c){"use strict";var d=a("../utils/common"),e=15,f=852,g=592,h=0,i=1,j=2,k=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],l=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],n=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];
b.exports=function(a,b,c,o,p,q,r,s){var t,u,v,w,x,y,z,A,B,C=s.bits,D=0,E=0,F=0,G=0,H=0,I=0,J=0,K=0,L=0,M=0,N=null,O=0,P=new d.Buf16(e+1),Q=new d.Buf16(e+1),R=null,S=0;for(D=0;e>=D;D++)P[D]=0;for(E=0;o>E;E++)P[b[c+E]]++;for(H=C,G=e;G>=1&&0===P[G];G--);if(H>G&&(H=G),0===G)return p[q++]=20971520,p[q++]=20971520,s.bits=1,0;for(F=1;G>F&&0===P[F];F++);for(F>H&&(H=F),K=1,D=1;e>=D;D++)if(K<<=1,K-=P[D],0>K)return-1;if(K>0&&(a===h||1!==G))return-1;for(Q[1]=0,D=1;e>D;D++)Q[D+1]=Q[D]+P[D];for(E=0;o>E;E++)0!==b[c+E]&&(r[Q[b[c+E]]++]=E);if(a===h?(N=R=r,y=19):a===i?(N=k,O-=257,R=l,S-=257,y=256):(N=m,R=n,y=-1),M=0,E=0,D=F,x=q,I=H,J=0,v=-1,L=1<<H,w=L-1,a===i&&L>f||a===j&&L>g)return 1;for(var T=0;;){T++,z=D-J,r[E]<y?(A=0,B=r[E]):r[E]>y?(A=R[S+r[E]],B=N[O+r[E]]):(A=96,B=0),t=1<<D-J,u=1<<I,F=u;do u-=t,p[x+(M>>J)+u]=z<<24|A<<16|B|0;while(0!==u);for(t=1<<D-1;M&t;)t>>=1;if(0!==t?(M&=t-1,M+=t):M=0,E++,0===--P[D]){if(D===G)break;D=b[c+r[E]]}if(D>H&&(M&w)!==v){for(0===J&&(J=H),x+=F,I=D-J,K=1<<I;G>I+J&&(K-=P[I+J],!(0>=K));)I++,K<<=1;if(L+=1<<I,a===i&&L>f||a===j&&L>g)return 1;v=M&w,p[v]=H<<24|I<<16|x-q|0}}return 0!==M&&(p[x+M]=D-J<<24|64<<16|0),s.bits=H,0}},{"../utils/common":1}],10:[function(a,b,c){"use strict";b.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],11:[function(a,b,c){"use strict";function d(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}b.exports=d},{}],"/lib/inflate.js":[function(a,b,c){"use strict";function d(a){if(!(this instanceof d))return new d(a);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},a||{});var b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),!(b.windowBits>=0&&b.windowBits<16)||a&&a.windowBits||(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&0===(15&b.windowBits)&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var c=g.inflateInit2(this.strm,b.windowBits);if(c!==j.Z_OK)throw new Error(k[c]);this.header=new m,g.inflateGetHeader(this.strm,this.header)}function e(a,b){var c=new d(b);if(c.push(a,!0),c.err)throw c.msg;return c.result}function f(a,b){return b=b||{},b.raw=!0,e(a,b)}var g=a("./zlib/inflate"),h=a("./utils/common"),i=a("./utils/strings"),j=a("./zlib/constants"),k=a("./zlib/messages"),l=a("./zlib/zstream"),m=a("./zlib/gzheader"),n=Object.prototype.toString;d.prototype.push=function(a,b){var c,d,e,f,k,l,m=this.strm,o=this.options.chunkSize,p=this.options.dictionary,q=!1;if(this.ended)return!1;d=b===~~b?b:b===!0?j.Z_FINISH:j.Z_NO_FLUSH,"string"==typeof a?m.input=i.binstring2buf(a):"[object ArrayBuffer]"===n.call(a)?m.input=new Uint8Array(a):m.input=a,m.next_in=0,m.avail_in=m.input.length;do{if(0===m.avail_out&&(m.output=new h.Buf8(o),m.next_out=0,m.avail_out=o),c=g.inflate(m,j.Z_NO_FLUSH),c===j.Z_NEED_DICT&&p&&(l="string"==typeof p?i.string2buf(p):"[object ArrayBuffer]"===n.call(p)?new Uint8Array(p):p,c=g.inflateSetDictionary(this.strm,l)),c===j.Z_BUF_ERROR&&q===!0&&(c=j.Z_OK,q=!1),c!==j.Z_STREAM_END&&c!==j.Z_OK)return this.onEnd(c),this.ended=!0,!1;m.next_out&&(0===m.avail_out||c===j.Z_STREAM_END||0===m.avail_in&&(d===j.Z_FINISH||d===j.Z_SYNC_FLUSH))&&("string"===this.options.to?(e=i.utf8border(m.output,m.next_out),f=m.next_out-e,k=i.buf2string(m.output,e),m.next_out=f,m.avail_out=o-f,f&&h.arraySet(m.output,m.output,e,f,0),this.onData(k)):this.onData(h.shrinkBuf(m.output,m.next_out))),0===m.avail_in&&0===m.avail_out&&(q=!0)}while((m.avail_in>0||0===m.avail_out)&&c!==j.Z_STREAM_END);return c===j.Z_STREAM_END&&(d=j.Z_FINISH),d===j.Z_FINISH?(c=g.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===j.Z_OK):d===j.Z_SYNC_FLUSH?(this.onEnd(j.Z_OK),m.avail_out=0,!0):!0},d.prototype.onData=function(a){this.chunks.push(a)},d.prototype.onEnd=function(a){a===j.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg},c.Inflate=d,c.inflate=e,c.inflateRaw=f,c.ungzip=e},{"./utils/common":1,"./utils/strings":2,"./zlib/constants":4,"./zlib/gzheader":6,"./zlib/inflate":8,"./zlib/messages":10,"./zlib/zstream":11}]},{},[])("/lib/inflate.js")}),function(a,b,c){"use strict";var d={value:!1,writable:!0},e={},f=0;a.recycle={add:function(a,g,h,i){var j=a===c,k=[];return h&&e[h]&&console.warn('Recycle cache for "'+h+'" already exists.'),e[h||"cache-"+f++]=k,b.defineProperties(a,{setUp:{value:j?g?function(){var a=0,c=null;for(k.length?(c=k.pop(),c.recycled=!1):(c=[],b.defineProperty(c,"recycled",d)),a=0;a<arguments.length;a++)c.push(arguments[a]);return c}:function(){var a=0,b=null;for(b=k.length?k.pop():[],a=0;a<arguments.length;a++)b.push(arguments[a]);return b}:g?function(){var a=null;return k.length?(a=k.pop(),a.recycled=!1):(a=b.create(this.prototype),b.defineProperty(a,"recycled",d)),this.apply(a,arguments),a}:function(){var a=null;return a=k.length?k.pop():b.create(this.prototype),this.apply(a,arguments),a}},recycle:{value:g?function(a){a.recycled?console.warn("WHOA! I have already been recycled!",a):(a.recycled=!0,k.push(a))}:function(a){k.push(a)}}}),b.defineProperty(a.prototype,"recycle",{value:i||(j?function(b){var c=0;if(b>1)for(c=this.length,b-=1;c--;)this[c].recycle(b);this.length=0,a.recycle(this)}:function(){a.recycle(this)})}),k},cache:e}}(window,Object,Array),this.platypus=this.platypus||{},function(a){"use strict";var b=function(){},c=navigator.userAgent.toLowerCase(),d=c.search("edge")>-1,e=c.search("ipod")>-1,f=c.search("iphone")>-1,g=c.search("ipad")>-1,h=c.search("android")>-1,i=c.search("silk")>-1,j=e||f||g,k=j||h||i;a.supports={touch:"undefined"!==window.ontouchstart,edge:d,iPod:e,iPhone:f,iPad:g,safari:c.search("safari")>-1&&!d,ie:c.search("msie")>-1||c.search("trident")>-1,firefox:c.search("firefox")>-1,android:h,chrome:c.search("chrome")>-1&&!d,silk:i,iOS:j,mobile:k,desktop:!k},a.debug=springroll.Debug||{error:b,log:b,olive:b,warn:b},a.version="0.10.5",a.buildDate="Mon, 02 Jan 2017 17:38:49 GMT"}(this.platypus),function(a,b){"use strict";var c=a.prototype;c.union||b.defineProperty(c,"union",{value:function(a){var b=0,c=a.length;for(b=0;c>b;b++)-1===this.indexOf(a[b])&&this.push(a[b]);return this}}),c.greenSlice||b.defineProperty(c,"greenSlice",{value:function(){var b=a.setUp(),c=0,d=this.length;for(c=0;d>c;c++)b[c]=this[c];return b}}),c.greenSplice||b.defineProperty(c,"greenSplice",{value:function(a){var b=0,c=this[a],d=this.length;if(0>a||a>=d)return null;for(b=a+1;d>b;b++)this[b-1]=this[b];return d&&(this.length-=1),c}}),recycle.add(a,!!springroll.Debug,"Array")}(Array,Object),function(){"use strict";var a=include("PIXI.Graphics"),b=a.prototype;b.a=b.a||b.arc,b.at=b.at||b.arcTo,b.bt=b.bt||b.bezierCurveTo,b.c=b.c||b.clear,b.dc=b.dc||b.drawCircle,b.de=b.de||b.drawEllipse,b.dr=b.dr||b.drawRect,b.ef=b.ef||b.endFill,b.f=b.f||b.beginFill,b.lt=b.lt||b.lineTo,b.mt=b.mt||b.moveTo,b.qt=b.qt||b.quadraticCurveTo,b.r=b.r||b.drawRect,b.rr=b.rr||b.drawRoundedRect}(),function(a,b){"use strict";var c=a.prototype;c.greenSplit||b.defineProperty(c,"greenSplit",{value:function(a){var b=this.toString(),c=0,d=0,e=Array.setUp();if(a){for(d=b.indexOf(a),c=a.length;d>=0;)e.push(b.substr(0,d)),b=b.substr(d+c),d=b.indexOf(a);e.push(b)}else for(d=this.length,c=d-1;d--;)e.push(this[c-d]);return e}})}(String,Object),function(a){"use strict";var b=null,c=null,d=null;window.Map||(b={value:null},c=function(){b.value={},a.defineProperty(this,"map",b)},d=c.prototype,a.defineProperties(d,{get:{value:function(a){return this.map[a]}},has:{value:function(a){return this.map.hasOwnProperty(a)}},set:{value:function(a,b){return this.map[a]=b,this}},"delete":{value:function(a){var b=this.map[a];return delete this.map[a],b}}}),window.Map=c)}(Object),platypus.Async=function(){"use strict";var a=function(){this.increment-=1,this.increment||(setTimeout(this.finalCallback,0),this.recycle())},b=function(b,c){var d=a.bind(this),e=b.length;if(e)for(this.increment=e,this.finalCallback=c;e--;)b[e](d);else c(),this.recycle()};return recycle.add(b,!!springroll.Debug,"Async",function(){this.increment=0,this.finalCallback=null}),b}(),platypus.Data=function(){"use strict";var a=function(a){var b=arguments.length,c="";if(a)if("string"==typeof a)for(b%2&&(this[b]=null,b-=1);b;)this[arguments[b-2]]=arguments[b-1],b-=2;else for(c in a)a.hasOwnProperty(c)&&(this[c]=a[c])};return recycle.add(a,!!springroll.Debug,"Data",function(){var b="";for(b in this)this.hasOwnProperty(b)&&delete this[b];a.recycle(this)}),a}(),platypus.DataMap=function(){"use strict";var a=include("window.Map"),b=function(a,b,c){return this.get(b)!==c&&(this.has(b)||a.push(b),this.set(b,c)),c},c=function(a,b){var c=a.indexOf(b),d=this.get(b);return c>=0&&(a.greenSplice(c),this["delete"](b)),d},d=function(a){for(var b=a.length;b--;)this["delete"](a[b]);a.length=0},e={get:{value:null},has:{value:null},keys:{value:null},set:{value:null},"delete":{value:null},clear:{value:null}},f=function(f){var g=arguments.length,h="",i=null,j=null,k=null;if(this.map||(k=e,j=this.map=new a,i=k.keys.value=Array.setUp(),k.get.value=j.get.bind(j),k.has.value=j.has.bind(j),k.set.value=b.bind(j,i),k["delete"].value=c.bind(j,i),k.clear.value=d.bind(j,i),Object.defineProperties(this,k)),f)if(i=f.keys,"string"==typeof f)for(g%2&&(g-=1,this.set(arguments[g],null));g;)g-=2,this.set(arguments[g],arguments[g+1]);else if(i)for(g=i.length;g--;)this.set(i[g],f.get(i[g]));else for(h in f)f.hasOwnProperty(h)&&this.set(h,f[h])};return recycle.add(f,!!springroll.Debug,"DataMap",function(){this.clear(),f.recycle(this)}),f}(),function(){"use strict";var a=include("PIXI.BaseTexture"),b=include("platypus.Data"),c=include("PIXI.Point"),d=include("PIXI.Rectangle"),e=include("PIXI.Sprite"),f=include("PIXI.Texture"),g={},h={},i=function(){},j={texture:f.EMPTY,anchor:new c(0,0)},k=/[\[\]{},-]/g,l=function(b){var c=0,d=Array.setUp(),e=null,f=platypus.game.app.assetManager.cache,g=h,i=null;for(c=0;c<b.length;c++)if(i=b[c],"string"==typeof i){if(!g[i]){if(e=f.read(i),!e){platypus.debug.warn('"'+i+'" is not a loaded asset.');break}g[i]=new a(e)}d.push(g[i])}else d.push(new a(i));return d},m=function(a){var b=0;if(a.id)return a.id;for(b=0;b<a.images.length;b++)if("string"!=typeof a.images[b])return"";return a.id=JSON.stringify(a).replace(k,""),a.id},n=function(a,c){var d=Array.setUp(),e=0;for(e=0;a>e;e++)d.push(c[e]||j);return b.setUp("id","default","frames",d,"next","default","speed",1)},o=function(a,c){var d="",e=b.setUp(),f=0,g=null,h="";for(h in a)if(a.hasOwnProperty(h)){for(d=a[h],g=d.frames.greenSlice(),f=g.length;f--;)g[f]=c[g[f]]||j;e[h]=b.setUp("id",h,"frames",g,"next",d.next,"speed",d.speed)}return e["default"]||(e["default"]=n(c.length,c)),e},p=function(a){var e=0,g=null,h=null,i=a.frames,j=a.images,k=null,m=Array.setUp(),p=l(j);for(e=0;e<i.length;e++)h=i[e],k=new f(p[h[4]],new d(h[0],h[1],h[2],h[3])),m.push({texture:k,anchor:new c((h[5]||0)/k.width,(h[6]||0)/k.height)});return g=o(a.animations,m),g["default"]||(g["default"]=n(m.length,m)),p.recycle(),b.setUp("textures",m,"animations",g)},q=function(a,e){var g=0,h=null,i=null,j=a.frames,k=a.images,m=null,n=Array.setUp(),p=l(k);for(g=0;g<j.length;g++)i=j[g],m=new f(p[i[4]],new d(i[0],i[1],i[2],i[3])),n.push({texture:m,anchor:new c((i[5]||0)/m.width,(i[6]||0)/m.height)});return h=o(a.animations,n),p.recycle(),b.setUp("textures",n,"animations",h,"viable",1,"cacheId",e)},r=function(a,b){var c=60,d=m(a),f=d?g[d]:null,h=(a.framerate||c)/c;d?f?(f.viable+=1,this.cacheId=d):(f=g[d]=q(a,d),this.cacheId=d):f=p(a),e.call(this,f.textures[0].texture),this._animations=f.animations,this._animation=null,this.animationSpeed=h,this.currentAnimation=null,this._currentTime=0,this.playing=!1,this._visible=!0,this._updating=!1,this.update=i,f.textures.length<2?this.gotoAndStop(b):this.gotoAndPlay(b)},s=r.prototype=Object.create(e.prototype);r.prototype.constructor=r,platypus.PIXIAnimation=r,Object.defineProperties(s,{visible:{get:function(){return this._visible},set:function(a){this._visible=a,this._syncUpdate()}},currentFrame:{get:function(){var a=this._animation.frames;return a[Math.floor(this._currentTime)%a.length]}},paused:{get:function(){return!this.playing},set:function(a){(a&&this.playing||!a&&!this.playing)&&(this.playing=!a,this._syncUpdate())}}}),s.stop=function(){this.paused=!0},s.play=function(){this.paused=!1},s._syncUpdate=function(){var a=function(a){var b=null,c="",d=0;this._currentTime+=this.animationSpeed*this._animation.speed*a*.06,d=Math.floor(this._currentTime),0>d&&(d=0),d<this._animation.frames.length?(b=this._animation.frames[d%this._animation.frames.length],this._texture=b.texture,this.anchor=b.anchor):d>=this._animation.frames.length&&(c=this._animation.id,this.gotoAndPlay(this._animation.next),this.emit("complete",c))};return function(){var b=this.playing&&this._visible;b!==this._updating&&(this._updating=b,b?this.update=a:this.update=i)}}(),s.gotoAndStop=function(a){this.stop(),this._currentTime=0,this._animation=this._animations[a],this._animation||(this._animation=this._animations["default"]),this._texture=this._animation.frames[0].texture,this.anchor=this._animation.frames[0].anchor},s.gotoAndPlay=function(a,b){(this.currentAnimation!==a||b!==!1)&&(this._currentTime=0,this._animation=this._animations[a],this.currentAnimation=a,this._animation||(this._animation=this._animations["default"],this.currentAnimation="default"),this._texture=this._animation.frames[0].texture,this.anchor=this._animation.frames[0].anchor),this.play()},s.has=function(a){return!!this._animations[a]},s.destroy=function(){var a="";if(this.stop(),e.prototype.destroy.call(this),this.cacheId&&(g[this.cacheId].viable-=1,g[this.cacheId].viable<=0)){g[this.cacheId].textures.recycle();for(a in g[this.cacheId].animations)g[this.cacheId].animations.hasOwnProperty(a)&&g[this.cacheId].animations[a].frames.recycle();delete g[this.cacheId]}},r.preloadBaseTextures=function(a){var b=h,c="";if(a.updateTexture)for(c in b)b.hasOwnProperty(c)&&a.updateTexture(b[c])},r.EmptySpriteSheet={framerate:60,frames:[],images:[],animations:{},recycleSpriteSheet:function(){}},r.formatSpriteSheet=function(){var a=/([\w-]+)\.(\w+)$/,c=function(a,b,c,d,e){var f="";for(f in a)a.hasOwnProperty(f)&&(b[f]&&(b[f].frames.recycle(),b[f].recycle(),platypus.debug.olive('PIXIAnimation "'+e+'": Overwriting duplicate animation for "'+f+'".')),b[f]=g(f,a[f],c,d))},d=function(a,b,c,d){var e=0,f=a.width,g=a.height,h=a.regX||0,i=a.regY||0,j=0,k=0,l=0,m=0;for(e=0;e<d.length;e++)for(j=d[e].realWidth-f,k=d[e].realHeight-g,m=0;k>=m;m+=g)for(l=0;j>=l;l+=f)b.push([l,m,f,g,e+c,h,i])},e=function(a,b,c){var d=null,e=0;for(e=0;e<a.length;e++)d=a[e],b.push(Array.setUp(d[0],d[1],d[2],d[3],d[4]+c,d[5],d[6]))},f=function(a,b){var f=null,g=b.animations,i=b.images,j=b.framerate||60,k=b.frames,m=0,n=Array.setUp(),o=i.length,p=k.length,q=a.animations,r=a.images,s=a.framerate||60,t=a.frames;for(b.id?b.id+=";"+(a.id||a.images.join(",")):b.id=a.id||a.images.join(","),m=0;m<r.length;m++)n.push(h(r[m])),i.push(n[m]);return Array.isArray(t)?e(t,k,o):(f=l(n),d(t,k,o,f),f.recycle()),c(q,g,s/j,p,b.id),n.recycle(),b},g=function(a,c,d,e){var f=0,g=0,h=Array.setUp(),i=0;if("number"==typeof c)return h.push(c+e),b.setUp("frames",h,"next",a,"speed",d);if(Array.isArray(c)){for(g=c[0]||0,i=(c[1]||g)+1+e,g+=e,f=g;i>f;f++)h.push(f);return b.setUp("frames",h,"next",c[2]||a,"speed",(c[3]||1)*d)}for(f=0;f<c.frames.length;f++)h.push(c.frames[f]+e);return b.setUp("frames",h,"next",c.next||a,"speed",(c.speed||1)*d)},h=function(b){var c=!1;return"string"==typeof b&&(c=b.match(a))?c[1]:b},i=function(){var a=this.animations,b="";for(b in a)a.hasOwnProperty(b)&&a[b].frames.recycle(),a[b].recycle();this.frames.recycle(2),this.images.recycle(),this.recycle()},j=function(a,b){for(var c=a.length,d=null;c--;)d=a[c],"string"==typeof d&&(d=platypus.game.settings.spriteSheets[d]),d&&f(d,b);return b};return function(a){var c=r.EmptySpriteSheet,d=a;if("string"==typeof d&&(d=platypus.game.settings.spriteSheets[a]),d){if(c=b.setUp("animations",b.setUp(),"framerate",60,"frames",Array.setUp(),"id","","images",Array.setUp(),"recycleSpriteSheet",i),Array.isArray(d))return j(d,c);if(d)return f(d,c)}return c}}()}(),platypus.StateMap=function(){"use strict";var a=include("platypus.DataMap"),b=function(b){var c=arguments.length;c?1===c&&"string"==typeof b?(a.call(this),this.updateFromString(b)):a.apply(this,arguments):a.call(this)},c=extend(b,a);return Object.defineProperty(c,"updateFromString",{value:function(a){for(var b=a.greenSplit(","),c=b.length,d="";c--;)d=b[c],d&&("!"===d.substr(0,1)?this.set(d.substr(1),!1):this.set(d,!0));return b.recycle(),this}}),Object.defineProperty(c,"update",{value:function(a){for(var b=a.keys,c=b.length,d="",e=!1,f=!1;c--;)d=b[c],f=a.get(d),this.get(d)!==f&&(this.set(d,f),e=!0);return e}}),Object.defineProperty(c,"includes",{value:function(a){for(var b=a.keys,c=b.length,d="";c--;)if(d=b[c],this.get(d)!==a.get(d))return!1;return!0}}),Object.defineProperty(c,"intersects",{value:function(a){for(var b=a.keys,c=b.length,d="";c--;)if(d=b[c],this.get(d)===a.get(d))return!0;return!1}}),recycle.add(b,!!springroll.Debug,"StateMap",function(){this.clear(),b.recycle(this)}),b}(),platypus.Component=function(){"use strict";var a=include("platypus.Data"),b=function(){return Array.setUp()},c=function(b,c){this.type=b,this.owner=c,this.publicMethods=a.setUp(),this.listener=a.setUp("events",Array.setUp(),"messages",Array.setUp())},d=c.prototype;return d.toString=function(){return"[Component "+this.type+"]"},d.destroy=function(){var a="";if(this.listener){this._destroy&&this._destroy();for(a in this.publicMethods)this.publicMethods.hasOwnProperty(a)&&this.removeMethod(a);this.publicMethods.recycle(),this.removeEventListeners(),this.listener.events.recycle(),this.listener.messages.recycle(),this.listener.recycle(),this.listener=null}},d.removeEventListeners=function(a){var b=0,c=null,d=null;if(a)for(b=0;b<a.length;b++)this.removeEventListener(a[b]);else{for(c=this.listener.events,d=this.listener.messages,b=0;b<c.length;b++)this.owner.off(c[b],d[b]);c.length=0,d.length=0}},d.addEventListener=function(a,b,c){var d=b.bind(this);this.listener.events.push(a),this.listener.messages.push(d),this.owner.on(a,d,c)},d.addMethod=function(a,b){this.owner[a]?platypus.debug.warn(this.owner.type+': Entity already has a method called "'+a+'". Method not added.'):(this.owner[a]=function(){return b.apply(this,arguments)}.bind(this),this.publicMethods[a]=b)},d.removeEventListener=function(a,b){var c=0,d=this.listener.events,e=this.listener.messages;for(c=d.length-1;c>=0;c--)d[c]!==a||b&&e[c]!==b||(this.owner.off(a,e[c]),this.listener.events.greenSplice(c),this.listener.messages.greenSplice(c))},d.removeMethod=function(a){this.owner[a]?delete this.owner[a]:platypus.debug.warn(this.owner.type+': Entity does not have a method called "'+a+'".'),delete this.publicMethods[a]},c.getAssetList=b,c.getLateAssetList=b,c}(),platypus.Messenger=function(){"use strict";var a=include("springroll.EventDispatcher"),b=function(){a.call(this),this.loopCheck=Array.setUp()},c=!!springroll.Debug,d=c&&window.performance&&window.performance.mark&&window.performance.measure&&window.performance,e=extend(b,a);return e.toString=function(){return"[Messenger Object]"},e._trigger=e.trigger,e.trigger=function(a,b,c){var d=null,e=0,f=0,g=b;if("string"==typeof a)return this.triggerEvent.apply(this,arguments);if(Array.isArray(a)){for(d=Array.prototype.greenSlice.call(arguments),e=0;e<a.length;e++)d[0]=a[e],f+=this.trigger.apply(this,d);return d.recycle(),f}return a.event?("undefined"!=typeof a.message&&(g=a.message),this.triggerEvent(a.event,g,a.debug||c)):(platypus.debug.warn('Event incorrectly formatted: must be string, array, or object containing an "event" property.',a),0)},e.triggerEvent=function(a){var b=0,c=0,d=null,e=this._listeners,f=null;if(!this._destroyed&&e.hasOwnProperty(a)&&e[a]){for(e=e[a].greenSlice(),arguments.length>1&&(f=Array.prototype.greenSlice.call(arguments),f.greenSplice(0)),b=c=e.length;c--;)d=e[c],d._eventDispatcherOnce&&(delete d._eventDispatcherOnce,this.off(a,d)),d.apply(this,f);f&&f.recycle(),e.recycle()}return b},c&&(e._triggerEvent=e.triggerEvent,e.triggerEvent=function(a,b){var c=0,e=5,f=b&&b.debug,g=0,h=0;if(f||this.debug){for(c=0;c<this.loopCheck.length;c++)if(this.loopCheck[c]===a){if(g+=1,g>e)throw"Endless loop detected for '"+a+"'.";platypus.debug.warn("Event '"+a+"' is nested inside another '"+a+"' event.")}return this.loopCheck.push(a),d&&d.mark("a"),h=this._triggerEvent.apply(this,arguments),d&&(d.mark("b"),d.measure(this.type+":"+a,"a","b")),this.loopCheck.length=this.loopCheck.length-1,f&&(h?platypus.debug.olive('Entity "'+this.type+'": Event "'+a+'" has '+h+" subscriber"+(h>1?"s":"")+".",b):platypus.debug.warn('Entity "'+this.type+'": Event "'+a+'" has no subscribers.',b)),h}return this._triggerEvent.apply(this,arguments)}),e.getMessageIds=function(){return Object.keys(this._listeners)},e.eventDispatcherDestroy=e.destroy,e.destroy=function(){this.loopCheck.recycle(),this.eventDispatcherDestroy()},b}(),platypus.Entity=function(){"use strict";var a=include("platypus.Data"),b=include("platypus.StateMap"),c=function(a,b,c){this.addComponent(new a(this,b,c))},d={},e=function(e,f,g){var h=0,i=null,j=Array.setUp(),k=a.setUp(e),l=k.components,m=a.setUp(k.properties),n=a.setUp(f),o=a.setUp(n.properties),p=Array.setUp(),q=Array.setUp();if(platypus.Messenger.call(this),this.components=Array.setUp(),this.type=k.id||"none",this.id=n.id||o.id,this.id||(d[this.type]||(d[this.type]=0),this.id=this.type+"-"+d[this.type],d[this.type]+=1),this.setProperty(m),this.setProperty(o),this.on("set-property",function(a){this.setProperty(a)}.bind(this)),this.state=b.setUp(this.state),this.lastState=b.setUp(),this.trigger=this.triggerEvent=function(a,b){p.push(a),q.push(b)},l)for(h=0;h<l.length;h++)i=l[h],i&&(platypus.components[i.type]?j.push(c.bind(this,platypus.components[i.type],i)):platypus.debug.warn('Entity "'+this.type+'": Component "'+i.type+'" is not defined.',i));platypus.Async.setUp(j,function(){for(delete this.trigger,delete this.triggerEvent,h=0;h<p.length;h++)this.trigger(p[h],q[h]);p.recycle(),q.recycle(),this.triggerEvent("load"),g&&g()}.bind(this)),j.recycle(),k.recycle(),m.recycle(),n.recycle(),o.recycle()},f=e.prototype=new platypus.Messenger;return f.toString=function(){return"[Entity "+this.type+"]"},f.addComponent=function(a){return this.components.push(a),this.triggerEvent("component-added",a),a},f.removeComponent=function(a){var b=0;if("string"==typeof a){for(b=0;b<this.components.length;b++)if(this.components[b].type===a)return a=this.components[b],this.components.greenSplice(b),this.triggerEvent("component-removed",a),a.destroy(),a}else for(b=0;b<this.components.length;b++)if(this.components[b]===a)return this.components.greenSplice(b),this.triggerEvent("component-removed",a),a.destroy(),a;return!1},f.setProperty=function(a){var b="";for(b in a)a.hasOwnProperty(b)&&(this[b]=a[b])},f.messengerDestroy=f.destroy,f.destroy=function(){var a=this.components,b=a.length;if(!this._destroyed){for(;b--;)a[b].destroy();a.recycle(),this.state.recycle(),this.state=null,this.lastState.recycle(),this.lastState=null,this.messengerDestroy()}},e.getAssetList=function(a,b){var c=0,d=null,f=null,g=null,h=null;if(a.type)return h=platypus.game.settings.entities[a.type],h?e.getAssetList(h,a.properties):(platypus.debug.warn('Entity "'+a.type+'": This entity is not defined.',a),g);for(g=Array.setUp(),c=0;c<a.components.length;c++)d=a.components[c]&&a.components[c].type&&platypus.components[a.components[c].type],d&&(f=d.getAssetList(a.components[c],a.properties,b),g.union(f),f.recycle());return g},e.getLateAssetList=function(a,b,c){var d=0,f=null,g=null,h=null;if(a.type)return e.getLateAssetList(platypus.game.settings.entities[a.type],b,c);for(h=Array.setUp(),d=0;d<a.components.length;d++)f=a.components[d]&&a.components[d].type&&platypus.components[a.components[d].type],f&&(g=f.getLateAssetList(a.components[d],a.properties,b,c),h.union(g),g.recycle());return h},e}(),platypus.Scene=function(){"use strict";var a=include("platypus.Data"),b=include("platypus.Entity"),c=include("platypus.PIXIAnimation"),d=include("springroll.State"),e=/^(?:\w+:\/{2}\w+(?:\.\w+)*\/?)?(?:[\/.]*?(?:[^?]+)?\/)?(?:([^\/?]+)\.(\w+))(?:\?\S*)?$/,f=function(){var a=function(a,b){for(var c=b.length;c--;)if(b[c].id===a)return!0;return!1};return function(b,c){for(var d=null,e=platypus.game.app.assetManager.cache._cache,f=Array.setUp(),h=b.length;h--;)d=g(b[h]),e[d.id]||a(d.id,c)?d.recycle():f.push(d);return f}}(),g=function(b){var c=b.match(e),d=a.setUp("id",b,"src",b);return c?d.id=c[1]:platypus.debug.warn("Scene: A listed asset should provide the entire file path since version 0.9.0."),d},h=function(a){this.app.unload(a),a.recycle()},i=function(a,c,d){this.layers.push(new b(a,{properties:c},d))},j=function(){var a=0,b="",d=Array.setUp(),e=this.layerDefinitions,f=!0,g=!1,h=null,j=null;for(this.stillLoading=!0,this.stillEntering=!0,this.storeMessages=!0,this.storedMessages=Array.setUp(),this.layers=Array.setUp(),a=0;a<e.length;a++){if(g=e[a],h={stage:this.stage,parent:this},g.properties)for(b in g.properties)g.properties.hasOwnProperty(b)&&(h[b]=g.properties[b]);if(g.type&&(g=platypus.game.settings.entities[g.type]),f=!0,g.filter){if(g.filter.includes){f=!1;for(b in g.filter.includes)g.filter.includes.hasOwnProperty(b)&&platypus.supports[g.filter.includes[b]]&&(f=!0)}if(g.filter.excludes)for(b in g.filter.excludes)g.filter.excludes.hasOwnProperty(b)&&platypus.supports[g.filter.excludes[b]]&&(f=!1)}f&&d.push(i.bind(this,g,h))}for(platypus.Async.setUp(d,function(){platypus.debug.olive("Scene loaded: "+this.id),this.triggerOnChildren("scene-loaded",this.data),c.preloadBaseTextures(this.app.display.renderer),this.stillLoading=!1,this.stillEntering||this.sceneLive()}.bind(this)),j=this.storedMessages,this.storeMessages=!1,a=0;a<j.length;a++)this.triggerOnChildren(j[a].message,j[a].value);j.recycle(),this.storedMessages=null,d.recycle()},k=function(a,b){var c=this.getLateAssetList(a);c.length?(b.union(c),this.once("exit",h.bind(this,c))):c.recycle()},l=function(a,b){var c=null;d.call(this,a,b.options),c=this.getAssetList(b),this.id=b.id,this.preload.union(c),this.layerDefinitions=b.layers,this.storeMessages=!1,this.storedMessages=null,this.stage=a,this.layers=null,this.assets=b.assets||null,this.stillLoading=!1,this.stillEntering=!1,this.on("loading",k.bind(this,b)),this.on("loaded",j),c.recycle()},m=extend(l,d);return m.enterDone=function(){this.stillEntering=!1,this.stillLoading||this.sceneLive()},m.sceneLive=function(){platypus.game.currentScene=this,platypus.debug.olive("Scene live: "+this.id),this.triggerOnChildren("scene-live",this.data)},m.exitStart=function(){platypus.debug.olive("Scene ending: "+this.id),this.triggerOnChildren("scene-ended",this.data)},m.triggerOnChildren=function(a,b){var c=0;if(this.storeMessages)this.storedMessages.push({message:a,value:b});else for(c=0;c<this.layers.length;c++)this.layers[c].trigger(a,b)},m.getEntityById=function(a){var b=0,c=null;for(b=0;b<this.layers.length;b++){if(this.layers[b].id===a)return this.layers[b];if(this.layers[b].getEntityById&&(c=this.layers[b].getEntityById(a)))return c}return null},m.getEntitiesByType=function(a){var b=0,c=null,d=Array.setUp();for(b=0;b<this.layers.length;b++)this.layers[b].type===a&&d.push(this.layers[b]),this.layers[b].getEntitiesByType&&(c=this.layers[b].getEntitiesByType(a),d.union(c),c.recycle());return d},m.exit=function(){var a=0;for(a=0;a<this.layers.length;a++)this.layers[a].destroy();this.layers.recycle(),this.layers=null,platypus.game.currentScene=null},m.getAssetList=function(a){var c=0,d=null,e=Array.setUp();for(a.assets&&e.union(a.assets),c=0;c<a.layers.length;c++)d=b.getAssetList(a.layers[c]),e.union(d),d.recycle();return d=f(e,this.preload),e.recycle(),d},m.getLateAssetList=function(a){var c=0,d=null,e=Array.setUp();for(c=0;c<a.layers.length;c++)d=b.getLateAssetList(a.layers[c],null,this.data),e.union(d),d.recycle();return d=f(e,this.preload),e.recycle(),d},l}(),platypus.Game=function(){"use strict";var a=include("PIXI.Container"),b=include("platypus.Scene"),c=include("window.XMLHttpRequest"),d=function(a,b){var d=new c;d.open("GET",a,!0),d.responseType="text",d.onload=function(){var c=null;if(200===d.status)try{c=JSON.parse(d.responseText)}catch(e){platypus.debug.warn('Error parsing "'+a+'": '+e.message)}else platypus.debug.warn('Error opening "'+a+'": '+d.description);b(c)},d.send()},e=function(a,b){var c=0,f="",g=0,h=function(){g-=1,g||b(a)},i=function(a,b,c){e(a[b],function(d){a[b]=d,c(d)})};if(a){if(Array.isArray(a)){if(g=a.length)for(c=0;c<a.length;c++)i(a,c,h);else b(a);return}if("object"==typeof a){if(a.src&&a.src.length>5&&".json"===a.src.substring(a.src.length-5).toLowerCase())e(a.src,function(c){a.src!==c&&(a=c),b(a)});else{for(f in a)a.hasOwnProperty(f)&&(g+=1);if(g)for(f in a)a.hasOwnProperty(f)&&i(a,f,h);else b(a)}return}if("string"==typeof a&&a.length>5&&".json"===a.substring(a.length-5).toLowerCase())return void d(a,function(a){"object"==typeof a?e(a,b):b(a)})}b(a)},f=function(c,d,f){var g=function(c){var d="",e="",g=this.app.states||{};platypus.game=this,this.currentScene=null,this.settings=c,this.stage=this.app.display.stage;for(e in c.scenes)c.scenes.hasOwnProperty(e)&&(d=c.scenes[e].id=c.scenes[e].id||e,g[d]=new b(new a,c.scenes[e]));this.app.states||(this.app.states=g),f&&f(this),window.getEntityById=function(a){return this.getEntityById(a)}.bind(this),window.getEntitiesByType=function(a){return this.getEntitiesByType(a)}.bind(this),window.getVisibleSprites=function(a,b){var c=0;if(b=b||Array.setUp(),a=a||this.stage,!a.texture&&a.visible){for(c=0;c<a.children.length;c++)window.getVisibleSprites(a.children[c],b);return b}return a.visible?(b.push(a),b):b}.bind(this)}.bind(this);return c?(this.app=d,void("string"==typeof c?e(c,g):g(c))):void platypus.debug.warn("No game definition is supplied. Game not created.")},g=f.prototype;return g.tick=function(a){this.currentScene&&this.currentScene.triggerOnChildren("tick",a)},g.loadScene=function(){var c=function(c,d){var e="",f=null;"string"==typeof c?(this.app.states[c].data=d,this.app.manager.state=c):(e=c.id=c.id||"new-scene",f=new b(new a,c),f.data=d,this.app.manager.addState(e,f),this.stage.addChild(f.panel),this.app.trigger("stateAdded",e,f),this.app.manager.state=e)};return function(a,b){window.setTimeout(c.bind(this,a,b),1)}}(),g.getEntityById=function(a){return this.currentScene?this.currentScene.getEntityById(a):null},g.getEntitiesByType=function(a){return this.currentScene?this.currentScene.getEntitiesByType(a):Array.setUp()},g.destroy=function(){},f}(),platypus.Vector=function(){"use strict";var a=function(a,b,c){this.matrix?(this.matrix[0]=0,this.matrix[1]=0,this.matrix[2]=0):this.matrix=Array.setUp(0,0,0),this.set(a,b,c)},b=a.prototype;return Object.defineProperty(b,"x",{get:function(){return this.matrix[0]},set:function(a){this.matrix[0]=a}}),Object.defineProperty(b,"y",{get:function(){return this.matrix[1]},set:function(a){this.matrix[1]=a}}),Object.defineProperty(b,"z",{get:function(){return this.matrix[2]},set:function(a){this.matrix[2]=a}}),b.toString=function(){return"["+this.matrix.join(",")+"]"},b.set=function(a,b,c){return a&&a.matrix?this.setVector(a,b):a&&Array.isArray(a)?this.setArray(a,b):this.setXYZ(a,b,c)},b.setXYZ=function(a,b,c){var d=this.matrix;return d[0]=a||0,d[1]=b||0,d[2]=c||0,this},b.setVector=function(a,b){return this.setArray(a.matrix,b)},b.setArray=function(a,b){for(var c=b||a.length,d=this.matrix;c--;)d[c]=a[c];return this},b.equals=function(a,b,c){var d=null,e=0,f=this.matrix;if(a&&Array.isArray(a)){for(e=b||a.length;e--;)if(f[e]!==a[e])return!1;
return!0}if(a&&a.matrix){for(d=a.matrix,e=b||d.length;e--;)if(f[e]!==d[e])return!1;return!0}return!("number"!=typeof a||f[0]!==a||"number"==typeof b&&f[1]!==b||"number"==typeof c&&f[2]!==c)},b.magnitude=function(a){var b=0,c=0;for(a=a||this.matrix.length,c=0;a>c;c++)b+=Math.pow(this.matrix[c],2);return Math.sqrt(b)},b.getAngle=function(){var a=this.magnitude(2),b=0;return 0!==a&&(b=Math.acos(this.x/a),this.y<0&&(b=2*Math.PI-b)),b},b.getUnit=function(){return platypus.Vector.setUp(this).normalize()},b.getInverse=function(){return platypus.Vector.setUp(this).multiply(-1)},b.normalize=function(){var a=this.magnitude();return 0===a?this:this.multiply(1/a)},b.cross=function(){var a=function(a,b,c,d){return a*d-b*c};return function(b){var c=a(this.y,this.z,b.y,b.z),d=-a(this.x,this.z,b.x,b.z),e=a(this.x,this.y,b.x,b.y);return this.x=c,this.y=d,this.z=e,this}}(),b.getCrossProduct=function(a){return platypus.Vector.setUp(this).cross(a)},b.rotate=function(a,b){var c=b,d=null,e=Math.cos(a),f=Math.sin(a),g=1-e,h=0,i=0,j=0,k=platypus.Vector.setUp();return c?"x"===c?c=k.setXYZ(1,0,0):"y"===c?c=k.setXYZ(0,1,0):"z"===c&&(c=k.setXYZ(0,0,1)):c=k.setXYZ(0,0,1),h=c.x,i=c.y,j=c.z,d=Array.setUp(Array.setUp(e+h*h*g,h*i*g-j*f,h*j*g+i*f),Array.setUp(i*h*g+j*f,e+i*i*g,i*j*g-h*f),Array.setUp(j*h*g-i*f,j*i*g+h*f,e+j*j*g)),this.multiply(d),k.recycle(),d.recycle(2),this},b.multiply=function(a,b){var c=0,d=0,e=null,f=0;if(Array.isArray(a)){for(e=this.matrix.greenSlice(),f=b||a.length,c=0;f>c;c++)for(this.matrix[c]=0,d=0;f>d;d++)this.matrix[c]+=e[d]*a[c][d];e.recycle()}else for(f=b||this.matrix.length,c=0;f>c;c++)this.matrix[c]*=a;return this},b.add=function(b,c,d){var e=b,f=0,g=0;for(Array.isArray(e)?f=c||this.matrix.length:e instanceof a?(e=e.matrix,f=c||this.matrix.length):(e=[b||0,c||0,d||0],f=this.matrix.length),g=0;f>g;g++)this.matrix[g]+=e[g];return this},b.addVector=function(a,b){return this.add(a,b)},b.subtractVector=function(a,b){return this.add(a.getInverse(),b)},b.scale=function(a,b){return this.multiply(a,b)},b.dot=function(a,b){var c=0,d=0,e=this.matrix,f=a.matrix;for(d=b||e.length;d--;)c+=e[d]*(f[d]||0);return c},b.angleTo=function(a){var b=this.getUnit(),c=a.getUnit(),d=0;return b.magnitude()&&c.magnitude()?d=Math.acos(b.dot(c)):(platypus.debug.warn("Vector: Attempted to find the angle of a zero-length vector."),d=NaN),b.recycle(),c.recycle(),d},b.signedAngleTo=function(a,b){var c=this.getUnit(),d=a.getUnit(),e=c.getCrossProduct(d),f=0;return f=e.dot(b)<0?-Math.acos(c.dot(d)):Math.acos(c.dot(d)),c.recycle(),d.recycle(),e.recycle(),f},b.scalarProjection=function(b){var c=null,d=0;return"number"==typeof b?this.magnitude(2)*Math.cos(b):(c=a.setUp(b).normalize(),d=this.dot(c),c.recycle(),d)},b.copy=function(){return platypus.Vector.setUp(this)},a.assign=function(){var a=function(a,b,c,d){var e=null,f=!1;"string"==typeof a&&"undefined"!=typeof b[a]&&(e=b[a],delete b[a],f=!0),Object.defineProperty(b,a,{get:function(){return c.matrix[d]},set:function(a){c.matrix[d]=a},enumerable:!0}),f&&(b[a]=e)};return function(b,c){var d=0;if(b&&c){if(!b[c]){for(b[c]=platypus.Vector.setUp(),d=2;d<arguments.length;d++)arguments[d]!==c&&a(arguments[d],b,b[c],d-2);return null}return b[c]}return null}}(),recycle.add(a,!!springroll.Debug,"Vector",function(){this.matrix.length=0,a.recycle(this)}),a}(),platypus.AABB=function(){"use strict";var a=function(b,c,d,e){b instanceof a?this.set(b):(this.empty=!0,this.setAll(b,c,d,e))},b=a.prototype;return b.setAll=function(a,b,c,d){return this.empty=!1,this.x=a,this.y=b,this.resize(c,d),this},b.setBounds=function(a,b,c,d){return this.empty=!1,this.x=(c+a)/2,this.y=(b+d)/2,this.resize(c-a,d-b),this},b.set=function(a){return this.empty=a.empty,this.x=a.x,this.y=a.y,this.width=a.width,this.height=a.height,this.halfWidth=a.halfWidth,this.halfHeight=a.halfHeight,this.left=a.left,this.right=a.right,this.top=a.top,this.bottom=a.bottom,this},b.toString=function(){return"[AABB: "+this.width+"x"+this.height+" ("+this.x+", "+this.y+")]"},b.reset=function(){return this.empty=!0,this},b.resize=function(a,b){var c=a||0,d=b||0,e=c/2,f=d/2;return this.width=c,this.height=d,this.halfWidth=e,this.halfHeight=f,"number"==typeof this.x?(this.left=-e+this.x,this.right=e+this.x):this.empty=!0,"number"==typeof this.y?(this.top=-f+this.y,this.bottom=f+this.y):this.empty=!0,this},b.include=function(a){return this.empty?this.set(a):(this.left>a.left&&(this.left=a.left),this.right<a.right&&(this.right=a.right),this.top>a.top&&(this.top=a.top),this.bottom<a.bottom&&(this.bottom=a.bottom),this.width=this.right-this.left,this.height=this.bottom-this.top,this.halfWidth=this.width/2,this.halfHeight=this.height/2,this.x=this.left+this.halfWidth,this.y=this.top+this.halfHeight),this},b.move=function(a,b){return this.moveX(a),this.moveY(b),this},b.moveX=function(a){return this.x=a,this.left=-this.halfWidth+a,this.right=this.halfWidth+a,this},b.moveY=function(a){return this.y=a,this.top=-this.halfHeight+a,this.bottom=this.halfHeight+a,this},b.moveXBy=function(a){return this.moveX(this.x+a)},b.moveYBy=function(a){return this.moveY(this.y+a)},b.equals=function(a){return!this.empty&&!a.empty&&this.left===a.left&&this.top===a.top&&this.right===a.right&&this.bottom===a.bottom},b.contains=function(a){return a.top>=this.top&&a.bottom<=this.bottom&&a.left>=this.left&&a.right<=this.right},b.containsVector=function(a){return this.containsPoint(a.x,a.y)},b.containsPoint=function(a,b){return b>=this.top&&b<=this.bottom&&a>=this.left&&a<=this.right},b.collides=function(a){return a.bottom>this.top&&a.top<this.bottom&&a.right>this.left&&a.left<this.right},b.intersects=function(a){return a.bottom>=this.top&&a.top<=this.bottom&&a.right>=this.left&&a.left<=this.right},b.getIntersectionArea=function(a){var b=Math.max,c=Math.min;return this.intersects(a)?(c(this.bottom,a.bottom)-b(this.top,a.top))*(c(this.right,a.right)-b(this.left,a.left)):0},recycle.add(a,!!springroll.Debug,"AABB"),a}(),platypus.ActionState=function(){"use strict";var a=include("platypus.Data"),b=include("platypus.StateMap"),c=function(c,d,e){this.event=c,this.trigger=e,this.active=!1,this.wasActive=!1,this.valid=!0,this.wasValid=!0,this.states=b.setUp(d),this.inputs=Array.setUp(),this.stateSummary=a.setUp("pressed",!1,"released",!1,"triggered",!1)},d=function(a){return a},e=c.prototype;return e.update=function(a){var b=this.stateSummary;return this.valid=a.includes(this.states),this.active=this.inputs.some(d),b.pressed=this.valid&&this.active,b.released=this.wasActive&&(!this.valid&&this.wasValid||this.valid&&!this.active),b.triggered=this.valid&&this.active&&!this.wasActive,this.wasValid=this.valid,this.wasActive=this.active,b.pressed||b.released||b.triggered},e.resolve=function(){this.trigger(this.event,this.stateSummary)},recycle.add(c,!!springroll.Debug,"ActionState",function(){this.states.recycle(),this.stateSummary.recycle(),this.inputs.recycle(),c.recycle(this)}),c}(),platypus.CollisionData=function(){"use strict";var a=include("platypus.Vector"),b=function(c){this.vector||(this.vector=a.setUp()),c instanceof b?this.copy(c):this.set.apply(this,arguments)},c=b.prototype;return c.set=function(a,b,c,d,e,f,g,h,i){this.occurred=a||!1,this.direction=b||null,this.position=c||null,this.deltaMovement=d||null,this.aABB=e||null,this.thisShape=f||null,this.thatShape=g||null,this.vector.set(h),this.stuck=i||0},c.copy=function(a){this.occurred=a.occurred,this.direction=a.direction,this.position=a.position,this.deltaMovement=a.deltaMovement,this.aABB=a.aABB,this.thisShape=a.thisShape,this.thatShape=a.thatShape,this.vector.setVector(a.vector),this.stuck=a.stuck},recycle.add(b,!!springroll.Debug,"CollisionData"),b}(),platypus.CollisionDataContainer=function(){"use strict";var a=function(){this.xData||this.yData?this.reset():(this.xData=Array.setUp(),this.yData=Array.setUp(),this.xDeltaMovement=1/0,this.yDeltaMovement=1/0)},b=a.prototype;return b.tryToAddX=function(a){return a.deltaMovement>this.xDeltaMovement?!1:(a.deltaMovement<this.xDeltaMovement&&this.resetX(a.deltaMovement),this.xData.push(a),!0)},b.tryToAddY=function(a){return a.deltaMovement>this.yDeltaMovement?!1:(a.deltaMovement<this.yDeltaMovement&&this.resetY(a.deltaMovement),this.yData.push(a),!0)},b.reset=function(){this.resetX(1/0),this.resetY(1/0)},b.resetX=function(a){for(var b=this.xData,c=b.length;c--;)b[c].recycle();b.length=0,this.xDeltaMovement=a},b.resetY=function(a){for(var b=this.yData,c=b.length;c--;)b[c].recycle();b.length=0,this.yDeltaMovement=a},recycle.add(a,!!springroll.Debug,"CollisionDataContainer"),a}(),platypus.CollisionShape=function(){"use strict";var a=include("platypus.AABB"),b=include("platypus.Vector"),c=function(a,b){var c=b.aABB,d=c.halfHeight,e=c.halfWidth,f=Math.abs,g=Math.pow,h=f(a.x-b.x),i=f(a.y-b.y),j=a.radius;return e>h||d>i||e+j>h&&d+j>i&&g(h-e,2)+g(i-d,2)<g(j,2)},d=function(a){var b=Math.pow;return this.aABB.collides(a.aABB)&&("rectangle"===a.type&&c(this,a)||"circle"===a.type&&b(this.x-a.x,2)+b(this.y-a.y,2)<=b(this.radius+a.radius,2))},e=function(){return!1},f=function(a){return this.aABB.collides(a.aABB)&&("rectangle"===a.type||"circle"===a.type&&c(a,this))},g=function(c,g,h){var i=g.regX,j=g.regY,k=g.width||2*g.radius||0,l=g.height||2*g.radius||0,m=g.radius||0,n=g.type||"rectangle";this.initialized||(this.initialized=!0,b.assign(this,"offset","offsetX","offsetY"),b.assign(this,"position","x","y"),b.assign(this,"size","width","height"),this.aABB=a.setUp()),this.owner=c,this.collisionType=h,this.type=n,this.subType="","circle"===n?(k=l=2*m,this.collides=d):"rectangle"===n?this.collides=f:this.collides=e,this.size.setXYZ(k,l),this.radius=m,"number"!=typeof i&&(i=k/2),"number"!=typeof j&&(j=l/2),this.offset.setXYZ(g.offsetX||k/2-i,g.offsetY||l/2-j),c?this.position.setXYZ(c.x,c.y).add(this.offset):this.position.setXYZ(g.x,g.y).add(this.offset),this.aABB.setAll(this.x,this.y,k,l)},h=g.prototype;return h.update=function(a,b){var c=a+this.offsetX,d=b+this.offsetY;this.position.setXYZ(c,d),this.aABB.move(c,d)},h.moveX=function(a){this.x=a,this.aABB.moveX(a)},h.moveY=function(a){this.y=a,this.aABB.moveY(a)},h.getAABB=function(){return this.aABB},h.setXWithEntityX=function(a){this.x=a+this.offsetX,this.aABB.moveX(this.x)},h.setYWithEntityY=function(a){this.y=a+this.offsetY,this.aABB.moveY(this.y)},h.multiply=function(a){var b=this.position,c=this.owner.position;b.subtractVector(c),b.multiply(a),this.offset.multiply(a),this.size.multiply(a),b.addVector(c),this.width=Math.abs(this.width),this.height=Math.abs(this.height),this.aABB.setAll(this.x,this.y,this.width,this.height)},recycle.add(g,!!springroll.Debug,"CollisionShape"),g}(),function(){"use strict";var a=include("platypus.Component"),b="",c=0,d=function(){},e=function(a,b,c){Object.defineProperty(b,a,{get:function(){return c[a]},set:function(b){c[a]=b},enumerable:!0})},f=function(a,b){return function(){a.apply(this,arguments),b.apply(this,arguments)}};platypus.components={},platypus.createComponentClass=function(g,h){var i=function(b,d,f){var i="",j="",k="",l="";if(a.call(this,g.id,b),h&&h.call(this),g.properties)for(i in g.properties)g.properties.hasOwnProperty(i)&&("undefined"!=typeof d[i]?this[i]=d[i]:"undefined"!=typeof this.owner[i]?this[i]=this.owner[i]:this[i]=g.properties[i]);if(g.publicProperties)for(i in g.publicProperties)g.publicProperties.hasOwnProperty(i)&&(e(i,this,b),"undefined"!=typeof d[i]?this[i]=d[i]:"undefined"!=typeof this.owner[i]?this[i]=this.owner[i]:this[i]=g.publicProperties[i]);if(g.events){c-=1;for(j in g.events)if(g.events.hasOwnProperty(j)&&(this.addEventListener(j,g.events[j],c),d.aliases))for(l in d.aliases)d.aliases.hasOwnProperty(l)&&d.aliases[l]===j&&this.addEventListener(l,g.events[j],c)}if(g.publicMethods)for(j in g.publicMethods)if(g.publicMethods.hasOwnProperty(j)){if(k=j,d.aliases)for(l in d.aliases)d.aliases.hasOwnProperty(l)&&d.aliases[l]===j&&(k=l);this.addMethod(k,g.publicMethods[j])}!this.initialize(d,f)&&f&&f()},j=null,k=i.prototype;if(h){k=extend(i,h);for(b in a.prototype)k[b]?k[b]=f(k[b],a.prototype[b]):k[b]=a.prototype[b]}else k=extend(i,a);if(k.initialize=g.initialize||(g.hasOwnProperty("constructor")?g.constructor:d),g.hasOwnProperty("constructor")&&platypus.debug.warn(g.id+': "constructor" has been deprecated in favor of "initialize" for a component\'s initializing function definition.'),g.methods)for(j in g.methods)g.methods.hasOwnProperty(j)&&("destroy"===j?k._destroy=g.methods[j]:k[j]=g.methods[j]);if(g.publicMethods)for(j in g.publicMethods)g.publicMethods.hasOwnProperty(j)&&(k[j]=g.publicMethods[j]);return i.getAssetList=g.getAssetList||a.getAssetList,i.getLateAssetList=g.getLateAssetList||a.getLateAssetList,platypus.components[g.id]=i,i}}(),function(){"use strict";var a=include("springroll.Application"),b=include("springroll.ApplicationPlugin"),c=include("window.PIXI",!1),d=null,e=new b,f=null,g=function(){var b=function(a,b){var c=204;return Math.floor(c*a/b)},d=function(a,c){var d=0,e=0,f="color: #ffffff; padding:3px 0; border-radius: 6px;",g=0,h=0,i=0,j=null;return c&&(j=c.greenSplit(".")),c&&3===j.length?(g=parseInt(j[0],10),h=parseInt(j[1],10),i=parseInt(j[2],10)):(g=a.charCodeAt(0)||0,h=a.charCodeAt(1)||0,i=a.charCodeAt(2)||0,e=Math.min(g,h,i),g-=e,h-=e,i-=e),j&&j.recycle(),d=Math.max(g,h,i,1),f+" background: rgb("+b(g,d)+","+b(h,d)+","+b(i,d)+");"},e=function(a,b,c){var e=0,f="",g=Array.setUp(a,d(b,b.substr(b.lastIndexOf(" ")-b.length+1)),"");for(e=0;e<c.length;e++)f=c[e],g.push(d(f,f.substr(f.lastIndexOf(" ")-f.length+1)),"");return g};return function(b,d){var f=window.createjs,g=d.options,h=g.author?"by "+g.author:"",i=c,j=d.name||document.title||"",k="Platypus "+platypus.version,l=g.version||"(?)",m=Array.setUp(),n=Array.setUp();g.hideHello||(m=Array.setUp("SpringRoll "+a.version),i&&(m.push("Pixi.js "+i.VERSION),i.animate&&m.push("PixiAnimate "+i.animate.VERSION)),f&&(f.EaselJS&&m.push("EaselJS "+f.EaselJS.version),f.PreloadJS&&m.push("PreloadJS "+f.PreloadJS.version),f.SoundJS&&m.push("SoundJS "+f.SoundJS.version),f.TweenJS&&m.push("TweenJS "+f.TweenJS.version)),"(?)"!==l&&(j+=" "+l),platypus.supports.firefox||platypus.supports.chrome?(m.push(k),n=e("\n%c "+j+" %c "+h+" \n\nUsing %c "+m.join(" %c %c ")+" %c\n\n",j,m),console.log.apply(console,n),n.recycle()):console.log('--- "'+j+'" '+h+" - Using "+m.join(", ")+", and "+k+" ---"),m.recycle()),platypus.debug.olive("Game config loaded.",b)}}(),h=function(a){var b=null,c=null,d=null,e={};for(b in a)if(a[b].id)e[b]=a[b];else{c=h(a[b]);for(d in c)c.hasOwnProperty(d)&&(e[d]=c[d])}return e},i=function(a){var b="";for(b in a)a.hasOwnProperty(b)&&(a[b].id=b)};c&&c.utils.skipHello(),e.setup=function(){var a="",b=document.getElementsByName("author"),c=this.options;b.length&&(a=b[0].getAttribute("content")||""),c.add("author",a,!0),c.add("hideHello",!1,!0)},e.preload=function(a){var b=this.config.platypus||this.config,c=null,e=320,j={delta:0};b?(this.options.debug&&(b.debug=!0),g(b,this),b.entities=h(b.entities),b.spriteSheets&&i(b.spriteSheets),c=this.platypus=new platypus.Game(b,this),d=function(a){j.delta=a,c.tick(j)},this.on("update",d,e),f=function(a){c.currentScene&&c.currentScene.triggerOnChildren("resize",a)},this.on("resize",f)):platypus.debug.warn("PlatypusPlugin: Platypus requires a game configuration."),a()},e.teardown=function(){this.platypus&&(this.off("update",d),this.off("resize",f),this.platypus.destroy(),delete this.platypus)}}(),function(){"use strict";return platypus.createComponentClass({id:"EventRender",properties:{animationMap:null,component:null,restart:!0},initialize:function(){var a=function(a,b){this.owner.triggerEvent("play-animation",a,b)},b=function(a,b){this.playAnimation(a,b)};return function(){var c="",d=this.animationMap;for(c in d)d.hasOwnProperty(c)&&(this.component?this.addEventListener(c,b.bind(this.component,d[c],this.restart)):this.addEventListener(c,a.bind(this,d[c],this.restart)))}}()})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("PIXI.Circle"),c=include("platypus.Data"),d=include("PIXI.Rectangle"),e={};return platypus.createComponentClass({id:"Interactive",properties:{container:null,hitArea:null,hover:!1,relativeToSelf:!1},publicProperties:{buttonMode:!1},initialize:function(){this.pressed=!1,this.camera=a.setUp(),this.hitArea&&(this.container.hitArea=this.setHitArea(this.hitArea))},events:{"camera-update":function(a){this.camera.set(a.viewport)},"handle-render":function(){this.buttonMode!==this.container.buttonMode&&(this.container.buttonMode=this.buttonMode)},"dispatch-event":function(a){this.sprite.dispatchEvent(this.sprite,a.event,a.data)},"input-on":function(){this.removeInputListeners||this.addInputs()},"input-off":function(){this.removeInputListeners&&this.removeInputListeners()}},methods:{addInputs:function(){var a=function(a,b){var d=this.camera,e=this.container,f=null,g=null;e&&b.data.originalEvent&&(g=this.relativeToSelf?e.transform.worldTransform:e.parent.transform.worldTransform,f=c.setUp("event",b.data.originalEvent,"pixiEvent",b,"x",b.data.global.x/g.a+d.left,"y",b.data.global.y/g.d+d.top,"entity",this.owner),this.owner.trigger(a,f),f.recycle())},b=function(b,c){this.pressed||("undefined"!=typeof c.data.identifier&&(e[c.data.identifier.toString()]=this),a.call(this,b,c),c.currentTarget.mouseTarget=!0,this.pressed=!0)},d=function(b,c,d){!this.pressed||"undefined"!=typeof d.data.identifier&&e[d.data.identifier.toString()]!==this?a.call(this,c,d):(a.call(this,b,d),d.currentTarget.mouseTarget=!0)},f=function(b,c){!this.pressed||"undefined"!=typeof c.data.identifier&&e[c.data.identifier.toString()]!==this||("undefined"!=typeof c.data.identifier&&e[c.data.identifier.toString()]===this&&(e[c.data.identifier.toString()]=null),a.call(this,b,c),c.currentTarget.mouseTarget=!1,this.pressed=!1,c.currentTarget.removeDisplayObject&&c.currentTarget.removeDisplayObject())},g=function(a,b,c,d,e,f,g){a.removeListener("mousedown",b),a.removeListener("touchstart",b),a.removeListener("mouseup",c),a.removeListener("touchend",c),a.removeListener("mouseupoutside",c),a.removeListener("touchendoutside",c),a.removeListener("mousemove",d),a.removeListener("touchmove",d),a.removeListener("click",e),a.removeListener("tap",e),this.hover&&(a.removeListener("mouseover",f),a.removeListener("mouseout",g)),a.interactive=!1,this.removeInputListeners=null};return function(){var c=this.container,e=null,h=null,i=null,j=null,k=null,l=null;c.interactive=!0,e=b.bind(this,"mousedown"),j=d.bind(this,"pressmove","mousemove"),k=f.bind(this,"pressup"),l=a.bind(this,"click"),c.addListener("mousedown",e),c.addListener("touchstart",e),c.addListener("mouseup",k),c.addListener("touchend",k),c.addListener("mouseupoutside",k),c.addListener("touchendoutside",k),c.addListener("mousemove",j),c.addListener("touchmove",j),c.addListener("click",l),c.addListener("tap",l),this.hover&&(h=a.bind(this,"mouseover"),i=a.bind(this,"mouseout"),c.addListener("mouseover",h),c.addListener("mouseout",i)),this.removeInputListeners=g.bind(this,c,e,k,j,l,h,i)}}(),setHitArea:function(){var a={};return function(c){var e=null,f="";return f=JSON.stringify(c),e=a[f],e||(e=c.radius?new b(c.x||0,c.y||0,c.radius):new d(c.x||0,c.y||0,c.width||this.owner.width||0,c.height||this.owner.height||0),a[f]=e),e}}(),destroy:function(){var a=function(){this.container.parent.removeChild(this.container),this.container=null};return function(){this.removeInputListeners&&this.removeInputListeners(),this.camera.recycle(),this.container.mouseTarget&&this.container.parent&&(this.container.visible=!1,this.container.removeDisplayObject=a.bind(this))}}()},publicMethods:{}})}(),function(){"use strict";var a=include("platypus.StateMap"),b=function(a){return a},c=function(a,b,c){return c.includes(b)?a:!1},d=function(d,e){return"default"===d?b.bind(null,e):c.bind(null,e,a.setUp(d))};return platypus.createComponentClass({id:"StateRender",properties:{animationMap:null,component:null,forcePlayThrough:!1},initialize:function(){var a="",b="",c=this.animationMap;this.followThroughs={},this.checkStates=Array.setUp(),this.state=this.owner.state,this.stateChange=!0,this.lastState=-1;for(a in c)c.hasOwnProperty(a)&&(b=c[a],"!"===b[b.length-1]?(b=b.substring(0,b.length-1),this.followThroughs[b]=!0):this.followThroughs[b]=!1,this.checkStates.push(d(a,b)));this.waitingAnimation=!1,this.waitingState=0,this.playWaiting=!1,this.animationFinished=!1},events:{"state-changed":function(){this.stateChange=!0},"animation-ended":function(a){a===this.currentAnimation&&(this.waitingAnimation?(this.currentAnimation=this.waitingAnimation,this.waitingAnimation=!1,this.lastState=this.waitingState,this.animationFinished=!1,this.owner.triggerEvent("play-animation",this.currentAnimation)):this.animationFinished=!0)},"update-animation":function(a){var b=0,c=!1;if(this.stateChange){if(this.state.has("visible")&&(this.visible=this.state.get("visible")),this.checkStates)for(b=0;b<this.checkStates.length;b++)if(c=this.checkStates[b](this.state)){this.currentAnimation!==c?!this.followThroughs[this.currentAnimation]&&(!this.forcePlaythrough||this.animationFinished||this.lastState>=+b)?(this.currentAnimation=c,this.lastState=+b,this.animationFinished=!1,a?this.owner.triggerEvent("play-animation",this.currentAnimation):this.owner.triggerEvent("stop-animation",this.currentAnimation)):(this.waitingAnimation=c,this.waitingState=+b):this.waitingAnimation&&!this.followThroughs[this.currentAnimation]&&(this.waitingAnimation=!1);break}this.stateChange=!1}}},methods:{destroy:function(){this.checkStates.recycle(),this.followThroughs=null,this.state=null}},publicMethods:{}})}(),function(){"use strict";var a=include("platypus.Vector");return platypus.createComponentClass({id:"AIChaser",properties:{accelerate:!1,chasing:!0},publicProperties:{speed:.3},initialize:function(){this.target=this.owner.target||null,this.offset=a.setUp(0,0),this.state=this.owner.state,this.state.set("chasing",!1)},events:{load:function(){return this.owner.addMover?void(this.direction=this.owner.addMover({vector:[this.speed,0,0],event:"chase",accelerator:this.accelerate}).vector):void platypus.debug.warn('The "AIChaser" component requires a "Mover" component to function correctly.')},"handle-ai":function(){var b=null,c=0,d=!1;this.target&&this.chasing&&(b=a.setUp(this.offset).add(this.target.position).subtractVector(this.owner.position),c=b.magnitude(2),c&&(d=!0,this.direction.setVector(b).normalize().multiply(this.speed)),b.recycle()),d!==this.state.get("chasing")&&(this.state.set("chasing",d),this.owner.triggerEvent("chase",d))},"set-target":function(a){this.target=a,this.offset.x=0,this.offset.y=0},"set-target-offset":function(a){this.offset.x=a.x,this.offset.y=a.y},"start-chasing":function(a){a&&(this.target=a),this.chasing=!0},"stop-chasing":function(){this.chasing=!1}},methods:{destroy:function(){this.target=null,this.offset.recycle(),this.state=null}}})}(),function(){"use strict";return platypus.createComponentClass({id:"AIPacer",properties:{movement:"both",direction:null},initialize:function(){this.lastDirection="",this.currentDirection=this.direction||("horizontal"===this.movement?"left":"up")},events:{"handle-ai":function(){this.currentDirection!==this.lastDirection&&(this.lastDirection=this.currentDirection,this.owner.triggerEvent("stop"),this.owner.triggerEvent("go-"+this.currentDirection))},"turn-around":function(a){("both"===this.movement||"horizontal"===this.movement)&&(a.x>0?this.currentDirection="left":a.x<0&&(this.currentDirection="right")),("both"===this.movement||"vertical"===this.movement)&&(a.y>0?this.currentDirection="up":a.y<0&&(this.currentDirection="down"))}}})}(),function(){"use strict";var a=include("platypus.Data"),b=include("platypus.StateMap"),c={interrupt:createjs.Sound.INTERRUPT_ANY,delay:0,offset:0,loop:0,volume:1,pan:0,mute:!1,paused:!1},d=function(b){var d="",e=null,f=function(a){a.audio&&this.onComplete(a.audio),a.recycle()};return"string"==typeof b?(d=b,e={}):(d=b.sound,e={interrupt:b.interrupt,delay:b.delay,offset:b.offset,loop:b.loop,volume:b.volume,pan:b.pan,startTime:b.startTime,duration:b.duration,mute:b.mute,paused:b.paused}),function(b){var g=null;b=b||e,g=a.setUp("interrupt",b.interrupt||e.interrupt||c.interrupt,"delay",b.delay||e.delay||c.delay,"loop",b.loop||e.loop||c.loop,"offset",b.offset||e.offset||c.offset,"volume","undefined"!=typeof b.volume?b.volume:"undefined"!=typeof e.volume?e.volume:c.volume,"pan",b.pan||e.pan||c.pan,"mute",b.mute||e.mute||c.mute,"paused",b.paused||e.paused||c.paused),g.complete=f.bind(this,g),g.audio=this.player.play(d,g),g.audio&&(g.audio.soundId=d,this.activeAudioClips.push(g.audio))}},e=function(a,b,c,d){var e=d.includes(a.states);e!==a.playing&&(e?c():this.stopAudio(b,this.forcePlaythrough),a.playing=e)};return platypus.createComponentClass({id:"AudioSFX",properties:{audioMap:null,forcePlayThrough:!0,eventBased:!0,stateBased:!1},initialize:function(a){var b="",c=null,e=null;if(this.activeAudioClips=Array.setUp(),this.state=this.owner.state,this.stateChange=!1,this.player=platypus.game.app.sound,a.audioMap){this.stateBased&&(this.checkStates=Array.setUp());for(b in a.audioMap)a.audioMap.hasOwnProperty(b)&&(e=a.audioMap[b],c=d(e),e.sound&&(e=e.sound),this.eventBased&&this.addEventListener(b,c),this.stateBased&&this.addStateCheck(b,e,c))}this.paused=!1},events:{"handle-render":function(){var a=0,b=null,c=this.state;if(!this.paused&&this.stateBased&&this.stateChange){for(b=this.checkStates,a=b.length;a--;)b[a].check(c);this.stateChange=!1}},"state-changed":function(){this.stateChange=!0},"toggle-mute":function(a){this.handleClip(a,function(a){a&&(a.unmuted?(a.volume=a.unmuted,delete a.unmuted):(a.unmuted=a.volume,a.volume=0))})},"stop-audio":function(a){a?"string"==typeof a?this.stopAudio(a):this.stopAudio(a.audioId||!1,a.playthrough||!1):this.stopAudio()},"mute-audio":function(a){this.handleClip(a,function(a){a&&(a.unmuted=a.volume,a.volume=0)})},"unmute-audio":function(a){this.handleClip(a,function(a){a&&(a.volume=a.unmuted,delete a.unmuted)})},"pause-audio":function(a){this.handleClip(a,function(a){a&&a.pause()})},"unpause-audio":function(a){this.handleClip(a,function(a){a&&a.unpause()})},"set-volume":function(a){var b=0,c=function(a){a.volume=b};"number"==typeof a?(b=a,this.getAllClips(c)):a.volume&&(b=a.volume,this.handleClip(a.soundId,c))}},methods:{handleClip:function(a,b){"string"==typeof a?this.getClipById(a,b):this.getAllClips(b)},getClipById:function(a,b){var c=0,d=this.activeAudioClips;for(c=0;c<d.length;c++)if(d[c].soundId===a)return b&&b(d[c]),d[c];return b&&b(null),null},getAllClips:function(a){var b=0,c=this.activeAudioClips;if(a)for(b=0;b<c.length;b++)a(c[b]);return c},stopAudio:function(){var a=function(a){this.stopAudioInstance(a.currentTarget)};return function(b,c){var d=this.activeAudioClips,e=null,f=d.length;if(b)for(e=a.bind(this);f--;)d[f].soundId===b&&(c?d[f].addEventListener("loop",e):(d[f].stop(),d.greenSplice(f)));else if(c)for(e=a.bind(this);f--;)d[f].addEventListener("loop",e);else{for(;f--;)d[f].stop();d.length=0}}}(),stopAudioInstance:function(a){var b=this.activeAudioClips,c=b.indexOf(a);c>=0&&b.greenSplice(c).stop()},onComplete:function(a){this.owner.destroyed||(this.removeClip(a.audio),this.owner.triggerEvent("clip-complete"))},removeClip:function(a){var b=this.activeAudioClips.indexOf(a);b>=0&&this.activeAudioClips.greenSplice(b)},addStateCheck:function(c,d,f){var g=b.setUp(c),h=a.setUp("states",g,"playing",!1);h.check=e.bind(this,h,d,f.bind(this)),this.checkStates.push(h)},destroy:function(){var a=this.checkStates,b=null,c=0;if(this.stopAudio(),this.activeAudioClips.recycle(),this.state=null,a){for(c=a.length;c--;)b=a[c],b.states.recycle(),b.recycle();a.recycle(),this.checkStates=null}}}})}(),function(){"use strict";var a=include("platypus.Data"),b=function(a,b){return a.time-b.time},c=function(c,d){var e=0;for(e=0;e<c.length;e++)d.push(a.setUp("event",c[e].event,"time",c[e].time||0,"message",c[e].message));return e&&d.sort(b),d},d=function(c,d,e){var f=0,g=e.getElapsed();for(f=0;f<c.length;f++)d.push(a.setUp("event",c[f].event,"time",(c[f].time||0)+g,"message",c[f].message||null));f&&d.sort(b)},e=function(a,b,c){var e=0,f=Array.setUp();for(e=0;e<a.length;e++)a[e].sound?(a[e].events&&f.push(d.bind(this,a[e].events,b,c)),f.push(a[e].sound)):f.push(a[e]);return f},f=function(a,b){this.playingAudio=!1,this.owner.destroyed||(this.checkTimeEvents(!0),this.owner.triggerEvent("sequence-complete")),b.recycle()},g=function(a,b){var d=null,g=Array.setUp(),h=this.player;"string"==typeof a?d=Array.setUp(a):Array.isArray(a)?d=e(a,g,h):(a.events&&c(a.events,g),d=Array.isArray(a.sound)?e(a.sound,g,h):Array.setUp(a.sound)),b&&b.events&&c(b.events,g),h.play(d,f.bind(this,!0,d),f.bind(this,!1,d)),this.eventList.recycle(),this.eventList=g,this.playingAudio=!0};return platypus.createComponentClass({id:"AudioVO",properties:{audioMap:null},initialize:function(){var a="";if(this.eventList=Array.setUp(),this.playingAudio=!1,this.player=platypus.game.app.voPlayer,this.audioMap)for(a in this.audioMap)this.audioMap.hasOwnProperty(a)&&this.addEventListener(a,g.bind(this,this.audioMap[a]));this.paused=!1},events:{"handle-render":function(){this.paused||this.checkTimeEvents(!1)},"stop-audio":function(){this.player.stop()}},methods:{checkTimeEvents:function(a){var b=null,c=this.eventList,d=0,e=this.owner;if(c&&c.length)for(d=this.player.getElapsed();c.length&&(a||c[0].time<=d);)b=c.greenSplice(0),e.trigger(b.event,b.message),b.recycle()},destroy:function(){this.playingAudio&&this.player.stop(),this.eventList.recycle()}}})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("platypus.Data"),c=include("platypus.Vector"),d=function(b,c,d,e){var f=a.setUp(e.x+c,e.y+d,e.width,e.height),g=b.x,h=b.y;return f.top<b.top?h-=b.top-f.top:f.bottom>b.bottom&&(h+=b.bottom-f.bottom),f.left<b.left?g-=b.left-f.left:f.right>b.right&&(g+=b.right-f.right),f.recycle(),this.move(g,h,0)},e=function(){return!1};return platypus.createComponentClass({id:"Camera",properties:{width:0,height:0,mode:"static",overflow:!1,stretch:!1,threshold:1,rotate:!1,x:0,y:0},publicProperties:{canvas:null,transitionX:400,transitionY:600,transitionAngle:600},initialize:function(c){var d=a.setUp(this.x,this.y,this.width,this.height),e=b.setUp("viewport",d,"orientation",c.orientation||0);this.viewport=a.setUp(0,0,0,0),this.worldCamera=e,this.worldDimensions=a.setUp(),this.message=b.setUp("viewport",a.setUp(),"scaleX",0,"scaleY",0,"orientation",0,"stationary",!1,"world",this.worldDimensions),this.cameraLoadedMessage=b.setUp("viewport",this.message.viewport,"world",this.worldDimensions),this.worldIsLoaded=!1,this.following=null,this.state="static","pan"===this.mode&&(this.state="mouse-pan"),this.boundingBox=a.setUp(d.x,d.y,d.width/2,d.height/2),this.lastX=d.x,this.lastY=d.y,this.lastOrientation=e.orientation,this.forwardX=0,this.forwardY=0,this.forwardAngle=0,this.averageOffsetX=0,this.averageOffsetY=0,this.averageOffsetAngle=0,this.offsetX=0,this.offsetY=0,this.offsetAngle=0,this.forwardFollower=b.setUp("x",this.lastX,"y",this.lastY,"orientation",this.lastOrientation),this.lastFollow=b.setUp("entity",null,"mode",null,"offsetX",0,"offsetY",0,"begin",0),this.xMagnitude=0,this.yMagnitude=0,this.xWaveLength=0,this.yWaveLength=0,this.xShakeTime=0,this.yShakeTime=0,this.shakeTime=0,this.shakeIncrementor=0,this.direction=!0,this.stationary=!1,this.viewportUpdate=!1,this.owner.container?this.parentContainer=this.owner.container:this.owner.stage?(this.canvas=this.canvas||platypus.game.app.display.canvas,this.parentContainer=this.owner.stage,this.owner.width=this.canvas.width,this.owner.height=this.canvas.height):platypus.debug.warn("Camera: There appears to be no Container on this entity for the camera to display."),this.container=new PIXI.Container,this.container.visible=!1,this.parentContainer.addChild(this.container),this.movedCamera=!1},events:{load:function(){this.resize()},"render-world":function(a){this.world=a.world,this.container.addChild(this.world)},"child-entity-added":function(a){
this.viewportUpdate=!0,this.worldIsLoaded&&a.triggerEvent("camera-loaded",this.cameraLoadedMessage)},"child-entity-updated":function(a){this.viewportUpdate=!0,this.worldIsLoaded&&a.triggerEvent("camera-update",this.message)},"world-loaded":function(a){var b=this.message;b.viewport.set(this.worldCamera.viewport),this.worldDimensions.set(a.world),this.worldIsLoaded=!0,a.camera&&this.follow(a.camera),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-loaded",this.cameraLoadedMessage),this.updateMovementMethods()},mousedown:function(a){var b=this.worldCamera.viewport;"mouse-pan"===this.state&&(this.mouseVector||(this.mouseVector=c.setUp(),this.mouseWorldOrigin=c.setUp()),this.mouse=this.mouseVector,this.mouse.x=a.event.x,this.mouse.y=a.event.y,this.mouseWorldOrigin.x=b.x,this.mouseWorldOrigin.y=b.y,a.pixiEvent.stopPropagation())},pressmove:function(a){this.mouse&&this.move(this.mouseWorldOrigin.x+(this.mouse.x-a.event.x)/this.world.transform.worldTransform.a,this.mouseWorldOrigin.y+(this.mouse.y-a.event.y)/this.world.transform.worldTransform.d)&&(this.viewportUpdate=!0,this.movedCamera=!0,a.pixiEvent.stopPropagation())},pressup:function(a){this.mouse&&(this.mouse=null,this.movedCamera&&(this.movedCamera=!1,a.pixiEvent.stopPropagation()))},tick:function(a){var b=this.message,c=b.viewport,d=this.worldCamera;"following"===this.state&&this.followingFunction(this.following,a.delta)&&(this.viewportUpdate=!0),this.canvas&&(this.owner.width=this.canvas.width,this.owner.height=this.canvas.height),(this.owner.width!==this.lastWidth||this.owner.height!==this.lastHeight)&&(this.resize(),this.lastWidth=this.owner.width,this.lastHeight=this.owner.height),this.viewportUpdate?(this.viewportUpdate=!1,this.stationary=!1,b.stationary=!1,c.set(d.viewport),this.shakeIncrementor<this.shakeTime&&(this.viewportUpdate=!0,this.shakeIncrementor+=a.delta,this.shakeIncrementor=Math.min(this.shakeIncrementor,this.shakeTime),this.shakeIncrementor<this.xShakeTime&&c.moveX(c.x+Math.sin(this.shakeIncrementor/this.xWaveLength*(2*Math.PI))*this.xMagnitude),this.shakeIncrementor<this.yShakeTime&&c.moveY(c.y+Math.sin(this.shakeIncrementor/this.yWaveLength*(2*Math.PI))*this.yMagnitude)),b.scaleX=this.windowPerWorldUnitWidth,b.scaleY=this.windowPerWorldUnitHeight,b.orientation=d.orientation,this.world.setTransform((c.halfWidth-c.x)*b.scaleX,(c.halfHeight-c.y)*b.scaleY,b.scaleX,b.scaleY,b.orientation),this.container.visible=!0,this.owner.triggerEvent("camera-update",b),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-update",b)):this.stationary||(this.stationary=!0,b.stationary=!0,this.owner.triggerEvent("camera-update",b),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("camera-update",b)),this.lastFollow.begin&&this.lastFollow.begin<Date.now()&&this.follow(this.lastFollow)},"resize-camera":function(a){this.width=a.width,this.height=a.height,this.resize()},relocate:function(){var a=function(a){this.move(a.x,a.y)&&(this.viewportUpdate=!0)},b=function(){this.recycle()};return function(d){var e=null,f=this.worldCamera.viewport;d.time&&window.createjs&&createjs.Tween?(e=c.setUp(f.x,f.y),createjs.Tween.get(e).to({x:d.x,y:d.y},d.time,d.ease).on("change",a.bind(this,e)).call(b.bind(e))):this.move(d.x,d.y)&&(this.viewportUpdate=!0)}}(),follow:function(a){this.follow(a)},shake:function(a){var b=a||{},c=b.xMagnitude||0,d=b.yMagnitude||0,e=b.xFrequency||0,f=b.yFrequency||0,g=1e3,h=b.time||0;this.viewportUpdate=!0,this.shakeIncrementor=0,this.xMagnitude=c,this.yMagnitude=d,0===e?(this.xWaveLength=1,this.xShakeTime=0):(this.xWaveLength=g/e,this.xShakeTime=Math.ceil(h/this.xWaveLength)*this.xWaveLength),0===f?(this.yWaveLength=1,this.yShakeTime=0):(this.yWaveLength=g/f,this.yShakeTime=Math.ceil(h/this.yWaveLength)*this.yWaveLength),this.shakeTime=Math.max(this.xShakeTime,this.yShakeTime)}},methods:{follow:function(a){var b=.1;switch(a.time?(this.lastFollow.begin||(this.lastFollow.entity=this.following,this.lastFollow.mode=this.mode,this.lastFollow.offsetX=this.offsetX,this.lastFollow.offsetY=this.offsetY),this.lastFollow.begin=Date.now()+a.time):this.lastFollow.begin&&(this.lastFollow.begin=0),this.mode=a.mode,a.mode){case"locked":this.state="following",this.following=a.entity,this.followingFunction=this.lockedFollow,this.offsetX=a.offsetX||0,this.offsetY=a.offsetY||0,this.offsetAngle=a.offsetAngle||0;break;case"forward":this.state="following",this.followFocused=!1,this.following=a.entity,this.lastX=a.entity.x-a.offsetX||0,this.lastY=a.entity.y-a.offsetY||0,this.lastOrientation=a.entity.orientation||0,this.forwardX=a.movementX||this.transitionX*b,this.forwardY=a.movementY||this.transitionY*b,this.averageOffsetX=0,this.averageOffsetY=0,this.averageOffsetAngle=0,this.offsetX=a.offsetX||0,this.offsetY=a.offsetY||0,this.offsetAngle=a.offsetAngle||0,this.followingFunction=this.forwardFollow;break;case"bounding":this.state="following",this.following=a.entity,this.offsetX=a.offsetX||0,this.offsetY=a.offsetY||0,this.offsetAngle=a.offsetAngle||0,this.boundingBox.setAll(a.x,a.y,a.width,a.height),this.followingFunction=this.boundingFollow;break;case"anchor-bound":this.state="following",this.following=a.entity,this.followingFunction=d.bind(this,a.anchorAABB,a.offsetX||0,a.offsetY||0);break;case"pan":this.state="mouse-pan",this.following=null,this.followingFunction=null,a&&"number"==typeof a.x&&"number"==typeof a.y&&(this.move(a.x,a.y,a.orientation||0),this.viewportUpdate=!0);break;default:this.state="static",this.following=null,this.followingFunction=null,a&&"number"==typeof a.x&&"number"==typeof a.y&&(this.move(a.x,a.y,a.orientation||0),this.viewportUpdate=!0)}a.begin&&(a.begin=0)},move:function(a,b,c){var d=this.moveX(a);return d=this.moveY(b)||d,this.rotate&&(d=this.reorient(c||0)||d),d},moveX:e,moveY:e,reorient:function(a){var b=1e-4,c=this.worldCamera;return Math.abs(c.orientation-a)>b?(c.orientation=a,!0):!1},lockedFollow:function(){var a=Math.min,b=function(a,b,c){return c*b+(1-c)*a},c=function(b,c){return b?a(c/b,1):1};return function(a,d){var e=this.worldCamera,f=e.viewport,g=b(f.x,a.x,c(this.transitionX,d)),h=b(f.y,a.y,c(this.transitionY,d));return this.rotate?this.move(g,h,b(e.orientation,-(a.orientation||0),c(this.transitionAngle,d))):this.move(g,h,0)}}(),forwardFollow:function(a,b){var c=.9,d=1-c,e=this.forwardFollower,f=!1,g=15,h=g/b,i=this.worldCamera,j=i.viewport,k=a.x+this.offsetX,l=a.y+this.offsetY,m=(a.orientation||0)+this.offsetAngle;return this.followFocused&&this.lastX===k&&this.lastY===l?this.lockedFollow(e,b):(this.averageOffsetX*=c,this.averageOffsetY*=c,this.averageOffsetX+=d*(k-this.lastX)*h,this.averageOffsetY+=d*(l-this.lastY)*h,Math.abs(this.averageOffsetX)>j.width/(2*this.forwardX)&&(this.averageOffsetX=0),Math.abs(this.averageOffsetY)>j.height/(2*this.forwardY)&&(this.averageOffsetY=0),this.rotate&&(this.averageOffsetAngle*=c,this.averageOffsetAngle+=d*(m-this.lastOrientation)*h,Math.abs(this.averageOffsetAngle)>i.orientation/(2*this.forwardAngle)&&(this.averageOffsetAngle=0)),e.x=this.averageOffsetX*this.forwardX+k,e.y=this.averageOffsetY*this.forwardY+l,e.orientation=this.averageOffsetAngle*this.forwardAngle+m,this.lastX=k,this.lastY=l,this.lastOrientation=m,f=this.lockedFollow(e,b),this.followFocused||f||(this.followFocused=!0),f)},boundingFollow:function(a,b){var c=0,d=0,e=this.transitionX?Math.min(b/this.transitionX,1):1,f=1-e,g=this.transitionY?Math.min(b/this.transitionY,1):1,h=1-g,i=this.worldCamera.viewport;return this.boundingBox.move(i.x,i.y),a.x>this.boundingBox.right?c=a.x-this.boundingBox.halfWidth:a.x<this.boundingBox.left&&(c=a.x+this.boundingBox.halfWidth),a.y>this.boundingBox.bottom?d=a.y-this.boundingBox.halfHeight:a.y<this.boundingBox.top&&(d=a.y+this.boundingBox.halfHeight),0!==c&&(c=this.moveX(e*c+f*i.x)),0!==d&&(d=this.moveY(g*d+h*i.y)),c||d},resize:function(){var a=this.width/this.height,b=this.owner.width/this.owner.height,c=this.worldCamera.viewport;this.viewport.setAll(this.owner.width/2,this.owner.height/2,this.owner.width,this.owner.height),this.stretch||(b>a?this.overflow?c.resize(this.height*b,this.height):this.viewport.resize(this.viewport.height*a,this.viewport.height):this.overflow?c.resize(this.width,this.width/b):this.viewport.resize(this.viewport.width,this.viewport.width/a)),this.worldPerWindowUnitWidth=c.width/this.viewport.width,this.worldPerWindowUnitHeight=c.height/this.viewport.height,this.windowPerWorldUnitWidth=this.viewport.width/c.width,this.windowPerWorldUnitHeight=this.viewport.height/c.height,this.container.setTransform(this.viewport.x-this.viewport.halfWidth,this.viewport.y-this.viewport.halfHeight),this.viewportUpdate=!0,this.updateMovementMethods()},updateMovementMethods:function(){var a=e,b=function(){var b=this.worldDimensions;return this.worldCamera.viewport.moveX(b.width/2+b.left),this.moveX=a,!0},c=function(){var b=this.worldDimensions;return this.worldCamera.viewport.moveY(b.height/2+b.top),this.moveY=a,!0},d=function(a){var b=this.worldCamera.viewport,c=this.worldDimensions,d=c.width,e=c.left;return Math.abs(b.x-a)>this.threshold?(a+b.halfWidth>d+e?b.moveX(d-b.halfWidth+e):a<b.halfWidth+e?b.moveX(b.halfWidth+e):b.moveX(a),!0):!1},f=function(a){var b=this.worldCamera.viewport,c=this.worldDimensions,d=c.height,e=c.top;return Math.abs(b.y-a)>this.threshold?(a+b.halfHeight>d+e?b.moveY(d-b.halfHeight+e):a<b.halfHeight+e?b.moveY(b.halfHeight+e):b.moveY(a),!0):!1},g=function(a){var b=this.worldCamera.viewport;return Math.abs(b.x-a)>this.threshold?(b.moveX(a),!0):!1},h=function(a){var b=this.worldCamera.viewport;return Math.abs(b.y-a)>this.threshold?(b.moveY(a),!0):!1};return function(){var a=this.threshold,e=this.worldCamera.viewport,i=this.worldDimensions,j=i.width,k=i.height;j?j<e.width?this.moveX=b:this.moveX=d:this.moveX=g,k?k<e.height?this.moveY=c:this.moveY=f:this.moveY=h,this.threshold=-1,this.moveX(e.x),this.moveY(e.y),this.threshold=a}}(),destroy:function(){this.parentContainer.removeChild(this.container),this.parentContainer=null,this.container=null,this.mouseVector&&(this.mouseVector.recycle(),this.mouseWorldOrigin.recycle()),this.boundingBox.recycle(),this.viewport.recycle(),this.worldCamera.viewport.recycle(),this.worldCamera.recycle(),this.message.viewport.recycle(),this.message.recycle(),this.cameraLoadedMessage.recycle(),this.worldDimensions.recycle(),this.forwardFollower.recycle(),this.lastFollow.recycle()}},publicMethods:{isOnCanvas:function(a){var b=this.canvas;return!a||!(a.x+a.width<0||a.x>b.width||a.y+a.height<0||a.y>b.height)}}})}(),function(){"use strict";var a=include("platypus.Data");return platypus.createComponentClass({id:"CameraFollowMe",properties:{camera:{},mode:"forward",pause:!1},initialize:function(){this.pauseGame=this.pause&&this.camera.time?{time:this.camera.time}:null,this.camera=a.setUp("entity",this.owner,"mode",this.camera.mode||this.mode,"top",this.camera.top,"left",this.camera.left,"offsetX",this.camera.offsetX,"offsetY",this.camera.offsetY,"width",this.camera.width,"height",this.camera.height,"time",this.camera.time)},events:{"follow-me":function(b){var c=null;c=b?a.setUp("entity",this.owner,"mode",b.mode||this.camera.mode,"top",b.top||this.camera.top,"left",b.left||this.camera.left,"offsetX",b.offsetX||this.camera.offsetX,"offsetY",b.offsetY||this.camera.offsetY,"width",b.width||this.camera.width,"height",b.height||this.camera.height,"time",b.time||this.camera.time):a.setUp(this.camera),this.pauseGame&&(this.owner.parent.triggerEvent("pause-logic",this.pauseGame),this.owner.parent.triggerEvent("pause-render",this.pauseGame)),this.owner.parent.triggerEvent("follow",c),c.recycle()}},methods:{destroy:function(){this.camera.recycle()}}})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("platypus.CollisionShape"),c=include("platypus.Data"),d=include("platypus.DataMap"),e=include("platypus.Vector"),f=function(){var a=function(a,b,c,d){d.myType===b&&d.hitType===c&&this.owner.triggerEvent(a,d)},b=function(a,b,c,d){var e=0;if(d.myType===b&&d.hitType===c)for(e=0;e<a.length;e++)this.owner.triggerEvent(a[e],d)},c=function(a,b,c,d){var e=d.x,f=d.y;!d.entity||e||f||(e=d.entity.x-this.owner.x,f=d.entity.y-this.owner.y),d.myType===b&&d.hitType===c&&(f>0&&a.bottom?this.owner.trigger(a.bottom,d):0>f&&a.top&&this.owner.trigger(a.top,d),e>0&&a.right?this.owner.trigger(a.right,d):0>e&&a.left&&this.owner.trigger(a.left,d),a.all&&this.owner.trigger(a.all,d))};return function(d,e,f){return"string"==typeof e?a.bind(d,e,d.collisionType,f):Array.isArray(e)?b.bind(d,e,d.collisionType,f):c.bind(d,e,d.collisionType,f)}}(),g=function(){var b=function(a,b,c){var d=b.keys,e=d.length,f=null;if(c)return f=b.get(c),f?f.getAABB():null;for(a.reset();e--;)a.include(b.get(d[e]).getAABB());return a},f=function(a,b){var c=a.get(b);return c?c.getPreviousAABB():null},g=function(a,b){var c=a.get(b);return c?c.getShapes():null},h=function(a,b){var c=a.get(b);return c?c.getPrevShapes():null},i=function(a,b,c){for(var d=a.keys,e=d.length;e--;)a.get(d[e]).prepareCollision(b,c)},j=function(){var a=function(a,b,c){var d=0,f=b.stuck;f&&(d=a.magnitude(),b.thatShape.owner&&Math.abs(f)>1&&(f*=.05),(!d||d>Math.abs(f))&&(b.vector.x&&(a.x=f,a.y=0),b.vector.y&&(a.x=0,a.y=f),c.stuckWith&&c.stuckWith.recycle(),c.stuckWith=e.setUp(b.thatShape.x,b.thatShape.y)))},b={position:null,unstick:null};return function(c,d){var f=d.xData[0],g=d.yData[0],h=b,i=null;f&&(i=e.setUp(0,0,0),a(i,f,this)),g&&(i=i||e.setUp(0,0,0),a(i,g,this)),h.position=c,h.unstick=i,this.triggerEvent("relocate-entity",h),i&&i.recycle()}}(),k=function(a,b){for(var c=a.keys,d=c.length;d--;)a.get(c[d]).movePreviousX(b)},l=function(){return this.collisionTypes},m=function(){return this.solidCollisionMap},n=function(){return this.getAABB()},o=function(){return this.getPreviousAABB()},p=function(){return this.getShapes()},q=function(){return this.getPrevShapes()},r=function(a,b){this.prepareCollision(a,b)},s=function(a){this.movePreviousX(a)};return function(e,t){var u=t.collisionFunctions;u||(u=t.collisionFunctions=d.setUp(),t.aabb=a.setUp(),t.getAABB=b.bind(t,t.aabb,u),t.getPreviousAABB=f.bind(t,u),t.getShapes=g.bind(t,u),t.getPrevShapes=h.bind(t,u),t.prepareCollision=i.bind(t,u),t.relocateEntity=j.bind(t),t.movePreviousX=k.bind(t,u),t.getCollisionTypes=l.bind(t),t.getSolidCollisions=m.bind(t)),u.set(e.collisionType,c.setUp("getAABB",n.bind(e),"getPreviousAABB",o.bind(e),"getShapes",p.bind(e),"getPrevShapes",q.bind(e),"prepareCollision",r.bind(e),"movePreviousX",s.bind(e)))}}();return platypus.createComponentClass({id:"CollisionBasic",properties:{collisionType:"none",shapeType:"rectangle",ignoreOrientation:!1,regX:null,regY:null,width:0,height:0,radius:0,softCollisions:null,solidCollisions:null,margin:0,shapes:null},publicProperties:{immobile:!1,bullet:!1,jumpThrough:!1},initialize:function(c){var h=null,i=0,j="",k=null,l=this.regX,m=this.regY,n=this.width,o=this.height,p=this.radius,q=0,r=0,s=0,t=0;for("number"==typeof this.margin?(q=this.margin,r=this.margin,s=this.margin,t=this.margin):(q=this.margin.left||0,r=this.margin.right||0,s=this.margin.top||0,t=this.margin.bottom||0),null===l&&(l=this.regX=n/2),null===m&&(m=this.regY=o/2),e.assign(this.owner,"position","x","y","z"),e.assign(this.owner,"previousPosition","previousX","previousY","previousZ"),this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.aabb=a.setUp(),this.prevAABB=a.setUp(),this.shapes?k=this.shapes:"circle"===this.shapeType?(p=p||((n||0)+(o||0))/4,k=[{regX:(isNaN(l)?p:l)-(r-q)/2,regY:(isNaN(m)?p:m)-(t-s)/2,radius:p,type:this.shapeType}]):k=[{regX:(isNaN(l)?(n||0)/2:l)+q,regY:(isNaN(m)?(o||0)/2:m)+s,points:c.points,width:(n||0)+q+r,height:(o||0)+s+t,type:this.shapeType}],this.owner.collisionTypes=this.owner.collisionTypes||Array.setUp(),this.owner.collisionTypes.push(this.collisionType),this.shapes=Array.setUp(),this.prevShapes=Array.setUp(),this.entities=null,i=0;i<k.length;i++)this.shapes.push(b.setUp(this.owner,k[i],this.collisionType)),this.prevShapes.push(b.setUp(this.owner,k[i],this.collisionType)),this.prevAABB.include(this.prevShapes[i].aABB),this.aabb.include(this.shapes[i].aABB);if(g(this,this.owner),this.owner.solidCollisionMap=this.owner.solidCollisionMap||d.setUp(),h=this.owner.solidCollisionMap.set(this.collisionType,Array.setUp()),this.solidCollisions)for(j in this.solidCollisions)this.solidCollisions.hasOwnProperty(j)&&(h.push(j),this.solidCollisions[j]&&this.addEventListener("hit-by-"+j,f(this,this.solidCollisions[j],"solid")));if(this.owner.softCollisionMap=this.owner.softCollisionMap||d.setUp(),h=this.owner.softCollisionMap.set(this.collisionType,Array.setUp()),this.softCollisions)for(j in this.softCollisions)this.softCollisions.hasOwnProperty(j)&&(h.push(j),this.softCollisions[j]&&this.addEventListener("hit-by-"+j,f(this,this.softCollisions[j],"soft")));this.stuck=!1},events:{"collide-on":function(a){var b=this.owner,c=this.collisionType,d=b.collisionTypes;("string"!=typeof a||a===c)&&(-1===d.indexOf(c)&&d.push(c),b.parent.triggerEvent("add-collision-entity",b),this.active=!0)},"collide-off":function(a){var b=0,c=this.owner,d=c.parent,e=this.collisionType,f=c.collisionTypes;("string"!=typeof a||a===e)&&(d.triggerEvent("remove-collision-entity",c),b=f.indexOf(e),b>=0&&f.greenSplice(b),this.active=!1,f.length&&d.triggerEvent("add-collision-entity",c))},"relocate-entity":function(a){var b=a.unstick,c=0,d=0,e=0,f=0,g=this.aabb,h=this.owner,i=null,j=this.shapes;for(b&&(c=b.magnitude()),this.move&&(this.move.recycle(),this.move=null),a.relative?h.position.setVector(h.previousPosition).add(a.position):h.position.setVector(a.position),this.stuck&&(c>0?h.position.add(b):this.stuck=!1),e=h.x,f=h.y,g.reset(),d=j.length;d--;)i=j[d],i.update(e,f),g.include(i.aABB);h.previousPosition.setVector(h.position),c>0&&(this.stuck||(this.stuck=!0),this.move=h.stuckWith.copy().add(-e,-f).normalize())},"handle-logic":function(){this.move&&this.owner.position.add(this.move)},"orientation-updated":function(a){var b=0;if(!this.ignoreOrientation)for(b=0;b<this.shapes.length;b++)this.shapes[b].multiply(a)}},methods:{getAABB:function(){return this.aabb},getPreviousAABB:function(){return this.prevAABB},getShapes:function(){return this.shapes},getPrevShapes:function(){return this.prevShapes},prepareCollision:function(a,b){var c=0,d=null,e=this.shapes,f=this.prevShapes,g=this.aabb;for(this.owner.x=a,this.owner.y=b,this.prevShapes=e,this.shapes=f,this.prevAABB.set(g),g.reset(),c=f.length;c--;)d=f[c],d.update(a,b),g.include(d.aABB)},movePreviousX:function(a){var b=0;for(this.prevAABB.moveX(a),b=0;b<this.prevShapes.length;b++)this.prevShapes[b].setXWithEntityX(a)},destroy:function(){var a=this.owner.collisionFunctions,b=this.collisionType,c=this.owner.collisionTypes.indexOf(b),d=this.owner;for(d.parent.triggerEvent("remove-collision-entity",d),this.aabb.recycle(),delete this.aabb,this.prevAABB.recycle(),delete this.prevAABB,c>=0&&d.collisionTypes.greenSplice(c),d.solidCollisionMap.has(b)&&d.solidCollisionMap["delete"](b).recycle(),d.softCollisionMap.has(b)&&d.softCollisionMap["delete"](b).recycle(),a["delete"](b).recycle(),c=this.shapes.length;c--;)this.shapes[c].recycle(),this.prevShapes[c].recycle();this.shapes.recycle(),this.prevShapes.recycle(),delete this.shapes,delete this.prevShapes,delete this.entities,d.collisionTypes.length?d.parent.triggerEvent("add-collision-entity",d):(a.recycle(),d.collisionFunctions=null,d.solidCollisionMap.recycle(),d.solidCollisionMap=null,d.softCollisionMap.recycle(),d.softCollisionMap=null,d.aabb.recycle(),d.aabb=null)}}})}(),function(){"use strict";var a=function(a,b,c){this.state.get(a)&&this.trigger(b,c)},b=function(a,b,c){this.state.get(a)||this.trigger(b,c)};return platypus.createComponentClass({id:"CollisionFilter",properties:{collisions:{},state:""},initialize:function(){var c="",d=this.collisions,e=this.state;if(d)if("!"===e[0]){e=e.substring(1);for(c in d)d.hasOwnProperty(c)&&this.addEventListener(c,b.bind(this.owner,e,d[c]))}else for(c in d)d.hasOwnProperty(c)&&this.addEventListener(c,a.bind(this.owner,e,d[c]))}})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("platypus.DataMap"),c=include("platypus.Vector");return platypus.createComponentClass({id:"CollisionGroup",initialize:function(){this.solidEntities=Array.setUp(),this.collisionTypes=Array.setUp(),this.shapes=Array.setUp(),this.prevShapes=Array.setUp(),this.terrain=null,this.aabb=a.setUp(this.owner.x,this.owner.y),this.prevAABB=a.setUp(this.owner.x,this.owner.y),this.filteredAABB=a.setUp(),c.assign(this.owner,"position","x","y","z"),c.assign(this.owner,"previousPosition","previousX","previousY","previousZ"),this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.collisionGroup=this.owner.collisionGroup={getAllEntities:function(){var a=0,b=0,c=null;for(a=0;a<this.solidEntities.length;a++)c=this.solidEntities[a],b+=c!==this.owner&&c.collisionGroup?c.collisionGroup.getAllEntities():1;return b}.bind(this),getSize:function(){return this.solidEntities.length}.bind(this),getCollisionTypes:function(){return this.getCollisionTypes()}.bind(this),getSolidCollisions:function(){return this.getSolidCollisions()}.bind(this),getAABB:function(a){return this.getAABB(a)}.bind(this),getPreviousAABB:function(a){return this.getPreviousAABB(a)}.bind(this),getShapes:function(a){return this.getShapes(a)}.bind(this),getPrevShapes:function(a){return this.getPrevShapes(a)}.bind(this),prepareCollision:function(a,b){return this.prepareCollision(a,b)}.bind(this),relocateEntity:function(a,b){return this.relocateEntity(a,b)}.bind(this),movePreviousX:function(a){return this.movePreviousX(a)}.bind(this),getSolidEntities:function(){return this.solidEntities}.bind(this),jumpThrough:!1}},events:{"child-entity-added":function(a){this.addCollisionEntity(a)},"add-collision-entity":function(a){this.addCollisionEntity(a)},"child-entity-removed":function(a){this.removeCollisionEntity(a)},"remove-collision-entity":function(a){this.removeCollisionEntity(a)},"relocate-entity":function(){this.owner.previousPosition.setVector(this.owner.position),this.updateAABB()}},methods:{addCollisionEntity:function(a){var b=0,c=a.collisionTypes;if(c){for(b=c.length;b--;)a.solidCollisionMap.get(c[b]).length&&!a.immobile&&(this.solidEntities[this.solidEntities.length]=a);this.updateAABB()}},removeCollisionEntity:function(a){var b=0,c=0,d=a.collisionTypes;if(d){for(c=d.length;c--;)a.solidCollisionMap.get(d[c]).length&&(b=this.solidEntities.indexOf(a),b>=0&&this.solidEntities.greenSplice(b));this.updateAABB()}},getCollisionTypes:function(){var a=null,b=this.collisionTypes,c=this.solidEntities,d=c.length;for(b.length=0;d--;)a=c[d],a!==this.owner&&a.collisionGroup&&(a=a.collisionGroup),b.union(a.getCollisionTypes());return b},getSolidCollisions:function(){var a=0,c="",d=null,e=null,f=b.setUp(),g=null,h=0,i=null,j=null,k=!1;for(a=0;a<this.solidEntities.length;a++){for(k=!1,e=this.solidEntities[a],e!==this.owner&&e.collisionGroup&&(e=e.collisionGroup,k=!0),g=e.getSolidCollisions(),d=g.keys,h=d.length;h--;)c=d[h],i=f.get(c),j=g.get(c),i||(i=f.set(c,Array.setUp())),i.union(j),k&&j.recycle();k&&g.recycle()}return f},getAABB:function(a){var b=0,c=this.filteredAABB,d=null,e=null,f=this.solidEntities;if(a){for(c.reset(),b=f.length;b--;)d=f[b],d!==this.owner&&d.collisionGroup&&(d=d.collisionGroup),e=d.getAABB(a),e&&c.include(e);return c}return this.aabb},getPreviousAABB:function(a){var b=0,c=this.filteredAABB,d=null,e=null,f=this.solidEntities;if(a){for(c.reset(),b=f.length;b--;)d=f[b],d!==this.owner&&d.collisionGroup&&(d=d.collisionGroup),e=d.getPreviousAABB(a),e&&c.include(e);return c}return this.prevAABB},updateAABB:function(){var a=this.aabb,b=this.solidEntities,c=null,d=b.length,e=this.owner;for(a.reset();d--;)c=b[d],a.include(c!==e&&c.getCollisionGroupAABB?c.getCollisionGroupAABB():c.getAABB())},getShapes:function(a){var b=0,c=null,d=this.shapes,e=null;for(d.length=0,b=0;b<this.solidEntities.length;b++)c=this.solidEntities[b],c!==this.owner&&c.collisionGroup&&(c=c.collisionGroup),e=c.getShapes(a),e&&d.union(e);return d},getPrevShapes:function(a){var b=0,c=null,d=null,e=this.prevShapes;for(e.length=0,b=0;b<this.solidEntities.length;b++)c=this.solidEntities[b],c!==this.owner&&c.collisionGroup&&(c=c.collisionGroup),d=c.getPrevShapes(a),d&&e.union(d);return e},prepareCollision:function(a,b){var c=0,d=null,e=0,f=0;for(c=0;c<this.solidEntities.length;c++)d=this.solidEntities[c],d.saveDX=d.x-d.previousX,d.saveDY=d.y-d.previousY,e=d.saveOX=this.owner.previousX-d.previousX,f=d.saveOY=this.owner.previousY-d.previousY,d!==this.owner&&d.collisionGroup&&(d=d.collisionGroup),d.prepareCollision(a-e,b-f)},movePreviousX:function(a){var b=null,c=0,d=0;for(d=0;d<this.solidEntities.length;d++)b=this.solidEntities[d],c=b.saveOX,b!==this.owner&&b.collisionGroup&&(b=b.collisionGroup),b.movePreviousX(a-c)},relocateEntity:function(a,b){var d=null,e=null,f=0,g=null,h=this.owner,i=this.solidEntities,j=null;for(h.saveDX-=a.x-h.previousX,h.saveDY-=a.y-h.previousY,g=b.xData,f=g.length;f--;)if(g[f].thisShape.owner===h){h.saveDX=0;break}for(g=b.yData,f=g.length;f--;)if(g[f].thisShape.owner===h){h.saveDY=0;break}for(f=0;f<i.length;f++)d=e=i[f],d!==h&&d.collisionGroup&&(d=d.collisionGroup),j=c.setUp(a.x-e.saveOX,a.y-e.saveOY,d.z),d.relocateEntity(j,b),j.recycle(),e.x+=e.saveDX,e.y+=e.saveDY,e!==h&&(e.x+=h.saveDX,e.y+=h.saveDY)},destroy:function(){this.solidEntities.recycle(),this.collisionTypes.recycle(),this.shapes.recycle(),this.prevShapes.recycle(),this.aabb.recycle(),this.prevAABB.recycle(),this.filteredAABB.recycle()}},publicMethods:{getCollisionGroupAABB:function(){return this.getAABB()},getWorldEntities:function(){return this.owner.parent.getWorldEntities()},getWorldTerrain:function(){return this.owner.parent.getWorldTerrain()}}})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("platypus.CollisionShape"),c=include("platypus.Data"),d=268435456,e=536870912,f=2147483648,g=1073741824,h=268435455,i=function(){return this.collisionType},j=function(a){return this.collisionTypeMap[a&h]||this.collisionType},k=function(a){return 0===a?a:a^g^e},l=function(a){return 0===a?a:a^f^e},m=function(a){return 0===a?a:a^f},n=function(a){return 0===a?a:a^g},o=function(a){return 0===a?a:e&a?a^g^e:a^f^e},p=function(a){return 0===a?a:a^f^g},q=function(a){return 0===a?a:e&a?a^f^e:a^g^e},r=function(a,b,c,d,e){var f=0,g=0,h=Array.setUp();for(g=0;e>g;g++)for(h[g]=Array.setUp(),f=0;d>f;f++)h[g][f]=a[b+f][c+g];return h},s=function(a,b,c,d,e){var f=0,g=0,h=Array.setUp();for(g=0;e>g;g++)for(h[g]=Array.setUp(),f=0;d>f;f++)h[g][f]=a[b+f][c+g],a[b+f][c+g]=-1;return h},t=function(a,b,c,d,e,f){var g=0,h=0;for(h=0;f>h;h++)for(g=0;e>g;g++)a[c+g][d+h]=b[h][g];return a},u={diagonal:function(a,b,c,d,e){var f=r(a,b,c,d,e),g=k,h=0,i=0;for(h=0;d>h;h++)for(i=0;e>i;i++)a[b+h][c+i]=g(f[h][i]);return f.recycle(2),a},"diagonal-inverse":function(a,b,c,d,e){var f=r(a,b,c,d,e),g=l,h=0,i=0;for(h=0;d>h;h++)for(i=0;e>i;i++)a[b+d-h-1][c+e-i-1]=g(f[h][i]);return f.recycle(2),a},horizontal:function(a,b,c,d,e){var f=r(a,b,c,d,e),g=m,h=0,i=0;for(i=0;e>i;i++)for(h=0;d>h;h++)a[b+d-h-1][c+i]=g(f[i][h]);return f.recycle(2),a},vertical:function(a,b,c,d,e){var f=r(a,b,c,d,e),g=n,h=0,i=0;for(i=0;e>i;i++)for(h=0;d>h;h++)a[b+h][c+e-i-1]=g(f[i][h]);return f.recycle(2),a},"rotate-90":function(a,b,c,d,e){var f=r(a,b,c,d,e),g=o,h=0,i=0;for(i=0;e>i;i++)for(h=0;d>h;h++)a[b+e-i-1][c+h]=g(f[i][h]);return f.recycle(2),a},"rotate-180":function(a,b,c,d,e){var f=r(a,b,c,d,e),g=p,h=0,i=0;for(i=0;e>i;i++)for(h=0;d>h;h++)a[b+d-h-1][c+e-i-1]=g(f[i][h]);return f.recycle(2),a},"rotate-270":function(a,b,c,d,e){var f=r(a,b,c,d,e),g=q,h=0,i=0;for(i=0;e>i;i++)for(h=0;d>h;h++)a[b+i][c+d-h-1]=g(f[i][h]);return f.recycle(2),a},translate:function(a,b,c,d,e,f,g){var h=s(a,b,c,d,e),i=0,j=0;for(j=0;e>j;j++)for(i=0;d>i;i++)a[b+i+f][c+j+g]=h[j][i];return h.recycle(2),a}};return platypus.createComponentClass({id:"CollisionTiles",properties:{collisionTypeMap:null,collisionType:"tiles",top:0,left:0},publicProperties:{collisionMap:[],tileWidth:10,tileHeight:10},initialize:function(){this.tileOffsetLeft=this.tileWidth/2+this.left,this.tileOffsetTop=this.tileHeight/2+this.top,this.columns=this.collisionMap.length,this.rows=this.collisionMap[0].length,this.shapeDefinition=c.setUp("x",0,"y",0,"type","rectangle","width",this.tileWidth,"height",this.tileHeight),this.storedTiles=Array.setUp(),this.serveTiles=Array.setUp(),this.storedTileIndex=0,this.aabb=a.setUp(),this.aabb.setBounds(this.left,this.top,this.tileWidth*this.columns+this.left,this.tileHeight*this.rows+this.top),this.collisionTypeMap?this.getType=j:this.getType=i},events:{transform:function(a){this.transform(a)},translate:function(a){this.translate(a)}},methods:{getShape:function(a,c,d){var e=this.storedTileIndex,f=null,g=this.storedTiles;return e===g.length?(f=b.setUp(null,this.shapeDefinition,d),g.push(f)):(f=g[e],f.collisionType=d),f.update(a*this.tileWidth+this.tileOffsetLeft,c*this.tileHeight+this.tileOffsetTop),this.storedTileIndex+=1,f},addShape:function(a,b,c,i,j){var k=this.collisionMap[c][i],l=k&h,m=d,n=e,o=f,p=g;return k&&this.getType(l)===j&&(m&=k,m?(n&=k,o&=k,p&=k,n&&o?b.left>=(c+1)*this.tileWidth+this.left&&a.push(this.getShape(c,i,j)):n?b.right<=c*this.tileWidth+this.left&&a.push(this.getShape(c,i,j)):p?b.top>=(i+1)*this.tileHeight+this.top&&a.push(this.getShape(c,i,j)):b.bottom<=i*this.tileHeight+this.top&&a.push(this.getShape(c,i,j))):a.push(this.getShape(c,i,j))),a},destroy:function(){var a=this.storedTiles,b=a.length;for(this.shapeDefinition.recycle(),delete this.shapeDefinition;b--;)a[b].recycle();a.recycle(),delete this.storedTiles,this.serveTiles.recycle(),delete this.serveTiles,this.aabb.recycle(),delete this.aabb}},publicMethods:{getAABB:function(){return this.aabb},isTile:function(a,b){return!(0>a||0>b||a>=this.columns||b>=this.rows||-1===this.collisionMap[a][b])},getTileShapes:function(a,b,c){var d=c||"tiles",e=this.left,f=this.top,g=this.tileHeight,h=this.tileWidth,i=Math.max(Math.floor((a.left-e)/h),0),j=Math.max(Math.floor((a.top-f)/g),0),k=Math.min(Math.ceil((a.right-e)/h),this.columns),l=Math.min(Math.ceil((a.bottom-f)/g),this.rows),m=0,n=0,o=this.serveTiles;for(o.length=0,this.storedTileIndex=0,m=i;k>m;m++)for(n=j;l>n;n++)this.addShape(o,b,m,n,d);return o},transform:function(a){var b=a||{},c=b.left||0,d=b.top||0,e=b.width||this.rows,f=b.height||this.columns,g=b.type||"horizontal";return u[g]?u[g](this.collisionMap,c,d,e,f):null},translate:function(a){var b=a||{},c=b.left||0,d=b.top||0,e=b.width||this.rows,f=b.height||this.columns,g=b.dx||0,h=b.dy||0;return u.translate(this.collisionMap,c,d,e,f,g,h)},getCollisionMatrix:function(a,b,c,d){return r(this.collisionMap,a,b,c,d)},setCollisionMatrix:function(a,b,c,d,e){return t(this.collisionMap,a,b,c,d,e)}}})}(),function(){"use strict";var a=function(a){this.switches.push(a)};return platypus.createComponentClass({id:"ComponentSwitcher",properties:{componentMap:null},initialize:function(){var b="";if(this.switches=Array.setUp(),this.componentMap)for(b in this.componentMap)this.componentMap.hasOwnProperty(b)&&this.addEventListener(b,a.bind(this,b))},events:{"prepare-logic":function(){var a=0;if(this.switches.length){for(a=0;a<this.switches.length;a++)this.switchComponents(this.componentMap[this.switches[a]]);this.switches.length=0}}},methods:{switchComponents:function(a){var b=0,c=0,d=this.owner,e=d.components,f=a.remove,g=a.add;if(f)if(Array.isArray(f))for(b=0;b<f.length;b++)for(c=e.length-1;c>-1;c--)e[c].type===f[b]&&d.removeComponent(e[c]);else for(b=e.length-1;b>-1;b--)e[b].type===f&&d.removeComponent(e[b]);if(g)if(Array.isArray(g))for(b=0;b<g.length;b++)d.addComponent(new platypus.components[g[b].type](d,g[b]));else d.addComponent(new platypus.components[g.type](d,g));d.parent&&d.parent.triggerEvent("child-entity-updated",d),d.triggerEvent("add-remove-component-complete")},destroy:function(){
this.switches.recycle()}},getAssetList:function(a,b,c){var d=a.componentMap||b.componentMap||c.componentMap,e="",f=0,g=null,h=Array.setUp(),i=null;for(e in d)if(d.hasOwnProperty(e))for(f=0;f<d[e].add.length;f++)g=platypus.components[d[e].add[f].type],g&&(i=g.getAssetList(d[e].add[f],b,c),h.union(i),i.recycle());return h}})}(),function(){"use strict";var a=include("platypus.Data");return platypus.createComponentClass({id:"Counter",publicProperties:{total:0},initialize:function(){this.count=0,this.lastTotal=0,this.lastCount=0,this.message=a.setUp("text","")},events:{"handle-logic":function(){var a=!1,b=this.message;this.total!==this.lastTotal&&(this.lastTotal=this.total,a=!0),this.count!==this.lastCount&&(this.lastCount=this.count,a=!0),a&&(this.total?b.text=String(this.count)+"/"+String(this.total):b.text=String(this.count),this.owner.triggerEvent("update-content",b))},"change-total":function(a){this.total=a},"change-count":function(a){this.count=a},"increment-count":function(){this.count+=1}},methods:{destroy:function(){this.message.recycle()}}})}(),function(){"use strict";var a=include("platypus.Data"),b=include("platypus.Entity"),c=function(a){return function(b,c){this.triggerOnChildren(a,b,c)}};return platypus.createComponentClass({id:"EntityContainer",properties:{childEvents:[]},initialize:function(){var a=function(a,b){this.addEntity(a,b)};return function(b,c){var d=0,e=null,f=this.childEvents,g=null;for(e=b.entities&&this.owner.entities?b.entities.concat(this.owner.entities):b.entities||this.owner.entities||null,this.owner.entities=this.entities=Array.setUp(),this.childEvents=Array.setUp(),d=0;d<f.length;d++)this.addNewPublicEvent(f[d]);if(this.addNewPrivateEvent("peer-entity-added"),this.addNewPrivateEvent("peer-entity-removed"),e){for(g=Array.setUp(),d=0;d<e.length;d++)g.push(a.bind(this,e[d]));return platypus.Async.setUp(g,function(){c()}),g.recycle(),!0}return!1}}(),events:{"add-entity":function(a,b){this.addEntity(a,b)},"remove-entity":function(a){this.removeEntity(a)},"child-entity-updated":function(a){this.updateChildEventListeners(a)}},methods:{addNewPublicEvent:function(a){var b=0;for(this.addNewPrivateEvent(a),b=0;b<this.childEvents.length;b++)if(this.childEvents[b]===a)return!1;return this.childEvents.push(a),this.addEventListener(a,c(a)),!0},addNewPrivateEvent:function(a){var b=0,c=0;if(this._listeners[a])return!1;for(this._listeners[a]=Array.setUp(),b=0;b<this.entities.length;b++)if(this.entities[b]._listeners[a])for(c=0;c<this.entities[b]._listeners[a].length;c++)this.addChildEventListener(this.entities[b],a,this.entities[b]._listeners[a][c]);return!0},updateChildEventListeners:function(a){this.removeChildEventListeners(a),this.addChildEventListeners(a)},addChildEventListeners:function(a){var b=0,c="";for(c in this._listeners)if(this._listeners.hasOwnProperty(c)&&a._listeners[c])for(b=0;b<a._listeners[c].length;b++)this.addChildEventListener(a,c,a._listeners[c][b])},removeChildEventListeners:function(a){var b=0,c=null,d=null;if(a.containerListener){for(c=a.containerListener.events,d=a.containerListener.messages,b=0;b<c.length;b++)this.removeChildEventListener(a,c[b],d[b]);c.recycle(),d.recycle(),a.containerListener.recycle(),a.containerListener=null}},addChildEventListener:function(b,c,d){b.containerListener||(b.containerListener=a.setUp("events",Array.setUp(),"messages",Array.setUp())),b.containerListener.events.push(c),b.containerListener.messages.push(d),this.on(c,d,d._priority||0)},removeChildEventListener:function(a,b,c){var d=0,e=a.containerListener.events,f=a.containerListener.messages;for(d=0;d<e.length;d++)e[d]!==b||c&&f[d]!==c||this.off(b,f[d])},destroy:function(){for(var a=this.entities.length,b=null;a--;)b=this.entities[a],this.removeChildEventListeners(b),b.destroy();this.entities.recycle(),delete this.owner.entities,this.childEvents.recycle()}},publicMethods:{getEntityById:function(a){var b=0,c=null;for(b=0;b<this.entities.length;b++){if(this.entities[b].id===a)return this.entities[b];if(this.entities[b].getEntityById&&(c=this.entities[b].getEntityById(a)))return c}return null},getEntitiesByType:function(a){var b=0,c=null,d=Array.setUp();for(b=0;b<this.entities.length;b++)this.entities[b].type===a&&d.push(this.entities[b]),this.entities[b].getEntitiesByType&&(c=this.entities[b].getEntitiesByType(a),d.union(c),c.recycle());return d},addEntity:function(a,c){var d=null,e=0;for(a instanceof b?(d=a,c&&c()):(d="string"==typeof a?new b(platypus.game.settings.entities[a],null,c):a.id?new b(a,null,c):new b(platypus.game.settings.entities[a.type],a,c),this.owner.triggerEvent("entity-created",d)),d.parent=this.owner,d.triggerEvent("adopted",d),e=0;e<this.entities.length&&d.triggerEvent("peer-entity-added",this.entities[e]);e++);return this.triggerEventOnChildren("peer-entity-added",d),this.addChildEventListeners(d),this.entities.push(d),this.owner.triggerEvent("child-entity-added",d),d},removeEntity:function(a){var b=this.entities.indexOf(a);return b>=0?(this.removeChildEventListeners(a),this.entities.greenSplice(b),this.triggerEventOnChildren("peer-entity-removed",a),this.owner.triggerEvent("child-entity-removed",a),a.destroy(),a.parent=null,a):!1},triggerEventOnChildren:function(a,b,c){return this.destroyed?0:(this._listeners[a]||this.addNewPrivateEvent(a),this.triggerEvent(a,b,c))},triggerOnChildren:function(a,b,c){return this.destroyed?0:(this._listeners[a]||this.addNewPrivateEvent(a),this.trigger(a,b,c))}},getAssetList:function(a,c,d){var e=0,f=Array.setUp(),g=Array.setUp(),h=null;for(a.entities&&g.union(a.entities),c&&c.entities?g.union(c.entities):d&&d.entities&&g.union(d.entities),e=0;e<g.length;e++)h=b.getAssetList(g[e]),f.union(h),h.recycle();return g.recycle(),f}},platypus.Messenger)}(),function(){"use strict";var a=include("platypus.ActionState"),b=include("platypus.Data"),c=include("platypus.DataMap"),d=include("platypus.StateMap"),e=function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)},f=function(a,b,c){var d=b.x-a.x,e=b.y-a.y,f=0,g=2*Math.PI;return c?(f=Math.acos(d/c),0>e&&(f=g-f),f):f},g=[null,null,null,null,["east","south","west","north"],null,null,null,["east","southeast","south","southwest","west","northwest","north","northeast"],null,null,null,null,null,null,null,["east","east-southeast","southeast","south-southeast","south","south-southwest","southwest","west-southwest","west","west-northwest","northwest","north-northwest","north","north-northeast","northeast","east-northeast"]],h=["left-button","middle-button","right-button"],i=function(a,b){this.paused||this.owner.trigger(a,b)},j=function(a,b,c){!this.paused&&c[a]&&this.owner.trigger(b,c)};return platypus.createComponentClass({id:"EntityController",properties:{controlMap:{},stateMaps:{}},publicProperties:{paused:!1},initialize:function(a){var e="",f=null;if(this.actions=c.setUp(),this.stateMaps)for(e in this.stateMaps)this.stateMaps.hasOwnProperty(e)&&(f=d.setUp(e),this.addMap(this.stateMaps[e],e,f),f.recycle());this.addMap(this.controlMap,"default"),a.joystick&&(this.joystick=b.setUp("directions",a.joystick.directions||4,"handleEdge",a.joystick.handleEdge||!1,"innerRadius",a.joystick.innerRadius||0,"outerRadius",a.joystick.outerRadius||1/0))},events:{"handle-controller":function(){for(var a=this.actions,b=a.keys,c=b.length,d="",e=Array.setUp(),f=this.owner.state;c--;)d=a.get(b[c]),d.update(f)&&e.push(d);for(c=e.length;c--;)e[c].resolve();e.recycle()},mousedown:function(a){this.owner.triggerEvent("mouse:"+h[a.event.button||0]+":down",a.event),this.joystick&&(this.owner.triggerEvent("joystick:down",a.event),this.handleJoy(a))},pressup:function(a){this.owner.triggerEvent("mouse:"+h[a.event.button||0]+":up",a.event),this.joystick&&(this.owner.triggerEvent("joystick:up",a.event),this.handleJoy(a))},pressmove:function(a){this.joystick&&this.handleJoy(a)},"pause-controls":function(){this.paused=!0},"unpause-controls":function(){this.paused=!1}},methods:{handleJoy:function(a){var b=Math.PI/(this.joystick.directions/2),c=e(this.owner,a),d=0,h="",i="";c>this.joystick.outerRadius||c<this.joystick.innerRadius||this.paused||(d=f(this.owner,a,c),h=g[this.joystick.directions][Math.floor((d+b/2)%(2*Math.PI)/b)],this.joystick.handleEdge&&(b=Math.PI/this.joystick.directions,i=g[2*this.joystick.directions][Math.floor((d+b/2)%(2*Math.PI)/b)],i!==h&&this.owner.triggerEvent(i.replace(h,"").replace("-",""),a)),this.owner.triggerEvent(h,a),this.owner.triggerEvent("joystick-orientation",d))},addController:function(){var b=function(a){this.inputs[a]=!1},c=function(a){this.inputs[a]=!0};return function(d,e,f,g,h){var k=this.actions,l=e+"-"+f+"-"+(h||"all"),m=k.get(l);m||(m=h?k.set(l,a.setUp(f,g,j.bind(this,h))):k.set(l,a.setUp(f,g,i.bind(this)))),this.addEventListener(d+":up",b.bind(m,m.inputs.length)),this.addEventListener(d+":down",c.bind(m,m.inputs.length)),m.inputs.push(!1)}}(),addMap:function(a,b,c){var d=null,e=0,f="",g="";for(g in a)if(a.hasOwnProperty(g))if(d=a[g],"string"==typeof d)this.addController(g,b,d,c);else if(Array.isArray(d))for(e=0;e<d.length;e++)this.addController(g,b,d[e],c);else for(f in d)if(d.hasOwnProperty(f))if("string"==typeof d[f])this.addController(g,b,d[f],c,f);else for(e=0;e<d[f].length;e++)this.addController(g,b,d[f][e],c,f)},destroy:function(){for(var a=this.actions,b=a.keys,c=b.length;c--;)a.get(b[c]).recycle();a.recycle(),this.joystick&&this.joystick.recycle()}}})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("platypus.CollisionData"),c=include("platypus.CollisionDataContainer"),d=include("platypus.Data"),e=include("platypus.DataMap"),f=include("platypus.Vector"),g={entity:null,type:null,x:0,y:0,hitType:null,myType:null},h=function(a,b){return a.collisionGroup.getAllEntities()-b.collisionGroup.getAllEntities()};return platypus.createComponentClass({id:"HandlerCollision",properties:{gridBits:8},initialize:function(){this.againstGrid=d.setUp(),this.solidEntitiesLive=Array.setUp(),this.softEntitiesLive=Array.setUp(),this.allEntitiesLive=Array.setUp(),this.groupsLive=Array.setUp(),this.nonColliders=Array.setUp(),this.terrain=null,this.owner.previousX=this.owner.previousX||this.owner.x,this.owner.previousY=this.owner.previousY||this.owner.y,this.relocationMessage=d.setUp("position",f.setUp(),"relative",!1)},events:{"child-entity-added":function(a){a.collideOff||this.addCollisionEntity(a)},"add-collision-entity":function(a){this.addCollisionEntity(a)},"child-entity-removed":function(a){this.removeCollisionEntity(a)},"remove-collision-entity":function(a){this.removeCollisionEntity(a)},"child-entity-updated":function(a){this.removeCollisionEntity(a),this.addCollisionEntity(a)},"check-collision-group":function(a){this.checkCamera(a.camera,a.entities),this.checkGroupCollisions(),this.checkSolidCollisions(),this.resolveNonCollisions(),this.checkSoftCollisions(a)}},methods:{mapDown:function(b){var c=a.setUp(),d=this.gridBits;return c.setBounds(b.left>>d,b.top>>d,b.right>>d,b.bottom>>d)},getAgainstGrid:function(a,b,c){var e=this.mapDown(b),f=null,g=d.setUp(),h=0,i=null,j=this.againstGrid,k=null,l="",m=0,n=0;if(b.equals(a.againstAABB))return this.getEntityAgainstGrid(a,c);for(m=e.left;m<=e.right;m++)for(n=e.top;n<=e.bottom;n++)if(i=j[(n<<16^m)>>>0])for(h=c.length;h--;)l=c[h],f=i.get(l),f&&f.length&&(k=g[l],k?k.union(f):g[l]=Array.setUp.apply(null,f));return e.recycle(),g},getEntityAgainstGrid:function(a,b){for(var c=a.againstGrid,e=null,f=d.setUp(),g=c.length,h=0,i=null,j=null,k="";g--;)for(i=c[g],h=b.length;h--;)k=b[h],e=i.get(k),e&&e.length&&(j=f[k],j?j.union(e):f[k]=Array.setUp.apply(null,e));return f},removeAgainst:function(a){for(var b=a.againstGrid,c=a.collisionTypes,d=null,e=b.length,f=0,g=0,h=c.length,i=null;e--;)for(i=b[e],f=h;f--;)d=i.get(c[f]),d&&(g=d.indexOf(a),g>=0&&d.greenSplice(g));b.length=0},updateAgainst:function(a){var b=null,c=0,d="",f=a.collisionTypes,g=this.mapDown(a.getAABB()),h=a.againstGrid,i=0,j=null,k=this.againstGrid,l=0,m=0;if(!g.equals(a.againstAABB))for(a.againstAABB.set(g),this.removeAgainst(a),l=g.left;l<=g.right;l++)for(m=g.top;m<=g.bottom;m++){for(i=(m<<16^l)>>>0,j=k[i],j||(j=k[i]=e.setUp()),c=f.length;c--;)d=f[c],b=j.get(d),b||(b=j.set(d,Array.setUp())),b.push(a);h.push(j)}g.recycle()},addCollisionEntity:function(b){b.getTileShapes?this.terrain=b:b.collisionTypes&&(b.againstGrid=Array.setUp(),b.againstAABB=a.setUp(),this.updateAgainst(b))},removeCollisionEntity:function(a){a.againstGrid&&(this.removeAgainst(a),a.againstGrid.recycle(),a.againstGrid=null,a.againstAABB.recycle(),a.againstAABB=null)},checkCamera:function(a,b){var c=b.length,d=0,e=this.allEntitiesLive,f=this.softEntitiesLive,g=this.solidEntitiesLive,i=this.nonColliders,j=this.groupsLive,k=null,l=null,m=!1;for(e.length=0,g.length=0,f.length=0,i.length=0,j.length=0;c--;)if(m=!1,k=b[c],l=k.collisionTypes,!k.immobile&&l&&l.length){if(e.push(k),k!==this.owner)for(d=l.length;d--;)if(k.solidCollisionMap.get(l[d]).length){g.push(k),m=!0;break}for(d=l.length;d--;)if(k.softCollisionMap.get(l[d]).length){f.push(k);break}m||i.push(k),k.collisionGroup&&j.push(k)}j.sort(h)},resolveNonCollisions:function(){var a=null,b=this.relocationMessage,c=this.nonColliders,d=c.length;for(b.relative=!1;d--;)a=c[d],(a.position.x!==a.previousPosition.x||a.position.y!==a.previousPosition.y)&&(b.position.setVector(a.position),a.triggerEvent("relocate-entity",b),this.updateAgainst(a))},checkGroupCollisions:function(){var a=function(a,b,c,d,e,f,h,i){var j=g;j.entity=b,j.myType=c,j.type=d,j.x=e,j.y=f,j.direction=i,j.hitType=h,a.triggerEvent("hit-by-"+d,j),b&&(j.entity=a,j.type=c,j.myType=d,j.x=-e,j.y=-f,j.direction=i.getInverse(),j.hitType=h,b.triggerEvent("hit-by-"+c,j),j.direction.recycle())};return function(){for(var b=0,c=this.groupsLive,d=c.length,e=null,f=null,g=null,h=null;d--;)if(e=c[d],e.collisionGroup.getSize()>1){for(h=this.checkSolidEntityCollision(e,e.collisionGroup),f=h.xData,b=f.length;b--;)g=f[b],a(g.thisShape.owner,g.thatShape.owner,g.thisShape.collisionType,g.thatShape.collisionType,g.direction,0,"solid",g.vector);for(f=h.yData,b=f.length;b--;)g=f[b],a(g.thisShape.owner,g.thatShape.owner,g.thisShape.collisionType,g.thatShape.collisionType,0,g.direction,"solid",g.vector);h.recycle()}}}(),checkSolidCollisions:function(){var a=function(a,b,c,d,e,f,h,i){var j=g;j.entity=b,j.myType=c,j.type=d,j.x=e,j.y=f,j.direction=i,j.hitType=h,a.triggerEvent("hit-by-"+d,j),b&&(j.entity=a,j.type=c,j.myType=d,j.x=-e,j.y=-f,j.direction=i.getInverse(),j.hitType=h,b.triggerEvent("hit-by-"+c,j),j.direction.recycle())};return function(){for(var b=0,c=this.solidEntitiesLive,d=c.length,e=null,f=null,g=null,h=null,i=a;d--;){for(e=c[d],h=this.checkSolidEntityCollision(e,e),f=h.xData,b=f.length;b--;)g=f[b],i(g.thisShape.owner,g.thatShape.owner,g.thisShape.collisionType,g.thatShape.collisionType,g.direction,0,"solid",g.vector);for(f=h.yData,b=f.length;b--;)g=f[b],i(g.thisShape.owner,g.thatShape.owner,g.thisShape.collisionType,g.thatShape.collisionType,0,g.direction,"solid",g.vector);h.recycle()}}}(),checkSolidEntityCollision:function(a,b){var d=c.setUp(),e=0,g=null,h=null,i=a.previousX,j=a.previousY,k=a.x-i,l=a.y-j,m=1/0,n=1/0,o=b.getCollisionTypes(),p=0,q=!1,r=null;if(b.getSolidEntities&&(q=b.getSolidEntities()),g=f.setUp(a.position),k||l){if(a.bullet){for(r=Math.min,p=o.length;p--;)h=b.getAABB(o[p]),m=r(m,h.width),n=r(n,h.height);for(e=Math.ceil(Math.max(Math.abs(k)/m,Math.abs(l)/n)),e=r(e,100),k/=e,l/=e;e--;){if(b.prepareCollision(a.previousX+k,a.previousY+l),g=this.processCollisionStep(a,b,q,d,g.setVector(a.position),k,l,o),g.x===a.previousX&&g.y===a.previousY){b.relocateEntity(g,d);break}b.relocateEntity(g,d)}}else b.prepareCollision(a.previousX+k,a.previousY+l),g=this.processCollisionStep(a,b,q,d,g,k,l,o),b.relocateEntity(g,d);(g.x!==i||g.y!==j)&&this.updateAgainst(a)}return g.recycle(),d},processCollisionStep:function(){var b=a.setUp(),c=function(a,b,c,d,e,f){var g=0;if(c===a)return!1;if(c.jumpThrough&&b.bottom>d.top)return!1;if(a.jumpThrough&&d.bottom>b.top)return!1;if(e)for(g=e.length;g--;)if(c===e[g])return!1;return f.collides(d)};return function(a,d,e,f,g,h,i,j){for(var k=j.length,l=0,m=0,n=0,o=c,p=!1,q=Array.setUp(),r=null,s=null,t=null,u=null,v=null,w="",x=null,y=null,z=null,A=this.terrain,B=null,C=d.getSolidCollisions(),D=null,E=b;k--;){for(q[k]=r=Array.setUp(),u=j[k],s=d.getPreviousAABB(u),t=d.getAABB(u),E.set(t),E.include(s),D=C.get(u),B=this.getAgainstGrid(a,E,D),l=D.length;l--;)if(w=D[l],z=B[w]){for(m=z.length;m--;)if(v=z[m],x=v.getAABB(w),o(a,s,v,x,e,E)){for(y=v.getShapes(w),n=y.length;n--;)r.push(y[n]);p=!0}z.recycle()}else if(A)for(y=A.getTileShapes(E,s,w),m=y.length;m--;)r.push(y[m]),p=!0;B.recycle()}return p&&(g=this.resolveCollisionPosition(a,d,g,q,f,j,h,i)),q.recycle(2),g}}(),resolveCollisionPosition:function(a,b,c,d,e,f,g,h){var i=0,j=null;if(0!==g)for(i=f.length;i--;)j=this.findMinAxisMovement(a,b,f[i],"x",d[i]),j.occurred&&e.tryToAddX(j)||j.recycle();if(j=e.xData[0],j?c.x=a.previousX+j.deltaMovement*j.direction:c.x=a.x,b.movePreviousX(c.x),0!==h)for(i=f.length;i--;)j=this.findMinAxisMovement(a,b,f[i],"y",d[i]),j.occurred&&e.tryToAddY(j)||j.recycle();return j=e.yData[0],j?c.y=a.previousY+j.deltaMovement*j.direction:c.y=a.y,c},findMinAxisMovement:function(a,c,d,e,f){for(var g=b.setUp(),h=c.getShapes(d),i=c.getPrevShapes(d),j=null,k=h.length;k--;)j=this.findMinShapeMovementCollision(i[k],h[k],e,f),j.occurred&&(!g.occurred||j.deltaMovement<g.deltaMovement)?(g.recycle(),g=j):j.recycle();return g},findMinShapeMovementCollision:function(){var a={position:0,contactVector:f.setUp()},c=function(a,b){var c=Math.pow;return Math.sqrt(c(b,2)-c(a,2))},d=function(a,b,c){var d=a-b;return d-d/Math.abs(d)*c},e=function(a,b,e,f,g){var h=0,i=b.aABB,j=i.halfWidth,k=a.x,l=a.y;return l>=i.top&&l<=i.bottom?j+a.radius:(l=d(l,b.y,i.halfHeight),h=j+c(l,a.radius),e===a?(g.x=-d(k-f*h,b.x,j)/2,l=-l):g.x=d(k,b.x-f*h,j)/2,g.y=l,g.normalize(),h)},g=function(a,b,e,f,g){var h=0,i=b.aABB,j=i.halfHeight,k=a.x,l=a.y;return k>=i.left&&k<=i.right?j+a.radius:(k=d(k,b.x,i.halfWidth),h=j+c(k,a.radius),e===a?(k=-k,g.y=-d(l-f*h,b.y,j)/2):g.y=d(l,b.y-f*h,j)/2,g.x=k,g.normalize(),h)},h={x:{rectangle:{rectangle:function(b,c,d){var e=a;return e.position=d.x-b*(d.aABB.halfWidth+c.aABB.halfWidth),e.contactVector.setXYZ(b,0),e},circle:function(b,c,d){var f=a;return f.position=d.x-b*e(d,c,c,b,f.contactVector.setXYZ(b,0)),f}},circle:{rectangle:function(b,c,d){var f=a;return f.position=d.x-b*e(c,d,c,b,f.contactVector.setXYZ(b,0)),f},circle:function(b,d,e){var f=e.y-d.y,g=e.x-b*c(f,d.radius+e.radius),h=a;return h.contactVector.setXYZ(e.x-g,f).normalize(),h.position=g,h}}},y:{rectangle:{rectangle:function(b,c,d){var e=a;return e.position=d.y-b*(d.aABB.halfHeight+c.aABB.halfHeight),e.contactVector.setXYZ(0,b),e},circle:function(b,c,d){var e=a;return e.position=d.y-b*g(d,c,c,b,e.contactVector.setXYZ(0,b)),e}},circle:{rectangle:function(b,c,d){var e=a;return e.position=d.y-b*g(c,d,c,b,e.contactVector.setXYZ(0,b)),e},circle:function(b,d,e){var f=e.x-d.x,g=e.y-b*c(f,d.radius+e.radius),h=a;return h.contactVector.setXYZ(f,e.y-g).normalize(),h.position=g,h}}}};return function(a,c,d,e){var f=0,g=a[d],i=c[d],j=a,k=i>g?1:-1,l=i,m=null,n=b.setUp(),o=null,p=i,q=null;if(g!==i)for(q=h[d][j.type],"x"===d?j.moveX(i):"y"===d&&j.moveY(i),f=e.length;f--;)m=e[f],l=i,j.collides(m)&&(o=q[m.type](k,j,m),l=o.position,k>0?p>l&&(g>l&&(l=g),p=l,n.set(!0,k,p,Math.abs(p-g),m.aABB,c,m,o.contactVector,0)):l>p&&(l>g&&(l=g),p=l,n.set(!0,k,p,Math.abs(p-g),m.aABB,c,m,o.contactVector,0)));return n}}(),checkSoftCollisions:function(){var a=function(a){this.triggerEvent("hit-by-"+a.type,a)};return function(){for(var b=this.softEntitiesLive,c=null,d=b.length,e=a;d--;)c=b[d],this.checkEntityForSoftCollisions(c,e.bind(c))}}(),checkEntityForSoftCollisions:function(a,b){var c=null,d=null,e=g,f=a.collisionTypes.length,h=0,i=0,j=0,k=0,l=null,m=null,n=null,o=null,p=null,q=null,r=!1;for(e.x=0,e.y=0;f--;){for(l=a.collisionTypes[f],m=a.softCollisionMap.get(l),c=this.getEntityAgainstGrid(a,m),h=m.length;h--;)if(o=m[h],n=c[o]){for(i=n.length;i--;)if(d=n[i],d!==a&&a.getAABB(l).collides(d.getAABB(o)))for(r=!1,p=a.getShapes(l),q=d.getShapes(o),j=p.length;j--;){for(k=q.length;k--;)if(p[j].collides(q[k])){e.entity=d,e.type=o,e.myType=l,e.shape=q[k],e.hitType="soft",b(e),r=!0;break}if(r)break}n.recycle()}c.recycle()}},destroy:function(){var a=this.againstGrid,b=null,c="",d=null,e=0;this.groupsLive.recycle(),this.nonColliders.recycle(),this.allEntitiesLive.recycle(),this.softEntitiesLive.recycle(),this.solidEntitiesLive.recycle(),this.relocationMessage.position.recycle(),this.relocationMessage.recycle();for(c in a)if(a.hasOwnProperty(c)){for(b=a[c],d=b.keys,e=d.length;e--;)b.get(d[e]).recycle();b.recycle()}a.recycle(),this.againstGrid=null}},publicMethods:{getWorldEntities:function(){return this.allEntitiesLive},getWorldTerrain:function(){return this.terrain},getEntityCollisions:function(a){var b=Array.setUp();return this.checkEntityForSoftCollisions(a,function(a){b.push(d.setUp(a))}),b}}})}(),function(){"use strict";var a={kc0:"unknown",kc8:"backspace",kc9:"tab",kc12:"numpad-5-shift",kc13:"enter",kc16:"shift",kc17:"ctrl",kc18:"alt",kc19:"pause",kc20:"caps-lock",kc27:"esc",kc32:"space",kc33:"page-up",kc34:"page-down",kc35:"end",kc36:"home",kc37:"left-arrow",kc38:"up-arrow",kc39:"right-arrow",kc40:"down-arrow",kc42:"numpad-multiply",kc43:"numpad-add",kc44:"print-screen",kc45:"insert",kc46:"delete",kc47:"numpad-division",kc48:"0",kc49:"1",kc50:"2",kc51:"3",kc52:"4",kc53:"5",kc54:"6",kc55:"7",kc56:"8",kc57:"9",kc59:"semicolon",kc61:"equals",kc65:"a",kc66:"b",kc67:"c",kc68:"d",kc69:"e",kc70:"f",kc71:"g",kc72:"h",kc73:"i",kc74:"j",kc75:"k",kc76:"l",kc77:"m",kc78:"n",kc79:"o",kc80:"p",kc81:"q",kc82:"r",kc83:"s",kc84:"t",kc85:"u",kc86:"v",kc87:"w",kc88:"x",kc89:"y",kc90:"z",kc91:"left-windows-start",kc92:"right-windows-start",kc93:"windows-menu",kc96:"back-quote",kc106:"numpad-multiply",kc107:"numpad-add",kc109:"numpad-minus",kc110:"numpad-period",kc111:"numpad-division",kc112:"f1",kc113:"f2",kc114:"f3",kc115:"f4",kc116:"f5",kc117:"f6",kc118:"f7",kc119:"f8",kc120:"f9",kc121:"f10",kc122:"f11",kc123:"f12",kc144:"num-lock",kc145:"scroll-lock",kc186:"semicolon",kc187:"equals",kc188:"comma",kc189:"hyphen",kc190:"period",kc191:"forward-slash",kc192:"back-quote",kc219:"open-bracket",kc220:"back-slash",kc221:"close-bracket",kc222:"quote"};return platypus.createComponentClass({id:"HandlerController",initialize:function(){this.callbackKeyUp=null,this.callbackKeyDown=null,platypus.game.settings.debug?(this.callbackKeyDown=function(a){this.keyDown(a)}.bind(this),this.callbackKeyUp=function(a){this.keyUp(a)}.bind(this)):(this.callbackKeyDown=function(a){this.keyDown(a),a.preventDefault()}.bind(this),this.callbackKeyUp=function(a){this.keyUp(a),a.preventDefault()}.bind(this)),window.addEventListener("keydown",this.callbackKeyDown,!0),window.addEventListener("keyup",this.callbackKeyUp,!0)},events:{tick:function(a){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-controller",a)}},methods:{keyDown:function(b){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("key:"+(a["kc"+b.keyCode]||"key-code-"+b.keyCode)+":down",b)},keyUp:function(b){this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("key:"+(a["kc"+b.keyCode]||"key-code-"+b.keyCode)+":up",b)},destroy:function(){window.removeEventListener("keydown",this.callbackKeyDown),window.removeEventListener("keyup",this.callbackKeyUp)}}})}(),function(){"use strict";var a=include("platypus.AABB"),b=function(a,b){var c=a.length;for(b.length=0;c--;)b.push(a[c])},c=function(a,b){return a.alwaysOn||a.aabb&&b.collides(a.getAABB())||"undefined"==typeof a.x||b.containsPoint(a.x,a.y)},d=function(a,b,d){var e=a.length,f=null;for(b.length=0;e--;)f=a[e],c(f,d)&&b.push(f)},e=function(a){return"handle-logic"===a||"handle-post-collision-logic"===a||"prepare-logic"===a||"state-changed"===a||"handle-movement"===a};return platypus.createComponentClass({id:"HandlerLogic",properties:{alwaysOn:!1},publicProperties:{buffer:-1,stepLength:5,maxStepsPerTick:100,timeMultiplier:1},initialize:function(){this.entities=Array.setUp(),this.activeEntities=Array.setUp(),this.removals=Array.setUp(),this.inLogicLoop=!1,this.alwaysOn?(this.updateList=b,this.camera=null):(this.updateList=d,this.camera=a.setUp()),this.paused=0,this.leftoverTime=0,this.message={delta:this.stepLength,tick:null,camera:this.camera,entities:this.activeEntities}},events:{"child-entity-added":function(a){a.getMessageIds().some(e)&&(this.entities.push(a),!this.inLogicLoop||this.camera&&!c(a,this.camera)||this.activeEntities.push(a))},"child-entity-removed":function(a){var b=this.entities.indexOf(a);b>=0&&(this.entities.greenSplice(b),this.inLogicLoop&&this.removals.push(a))},"pause-logic":function(a){a&&a.time?this.paused=a.time:this.paused=-1,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("logic-paused")},"unpause-logic":function(){this.paused=0,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("logic-unpaused")},"camera-update":function(a){var b=this.buffer,c=this.camera,d=null;c&&(-1===b&&(b=a.viewport.width/10),d=a.viewport,c.setBounds(d.left-b,d.top-b,d.right+b,d.bottom+b))},tick:function(a){var b=0,c=0,d=0,e=null,f=this.message,g=this.activeEntities,h=this.removals,i=this.stepLength;for(this.leftoverTime+=a.delta*this.timeMultiplier,d=Math.floor(this.leftoverTime/i)||1,f.delta=i,this.leftoverTime=Math.max(this.leftoverTime-d*i,0),f.tick=a,this.updateList(this.entities,g,this.camera),d=Math.min(d,this.maxStepsPerTick);d--;)if(this.paused>0&&(this.paused-=i,this.paused<0&&(this.paused=0)),!this.paused){for(this.owner.triggerEvent("logic-tick",f),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-ai",f),this.inLogicLoop=!0,b=g.length;b--;)e=g[b],e.triggerEvent("prepare-logic",f),e.triggerEvent("handle-logic",f),e.triggerEvent("handle-movement",f);if(this.inLogicLoop=!1,h.length){for(b=h.length;b--;)c=g.indexOf(h[b]),c>=0&&g.greenSplice(c);h.length=0}if(b=g.length,this.owner.triggerEvent("check-collision-group",f))for(;b--;)e=g[b],e.triggerEvent("handle-post-collision-logic",f),e.lastState.update(e.state)&&e.triggerEvent("state-changed",e.state);else for(;b--;)e=g[b],e.lastState.update(e.state)&&e.triggerEvent("state-changed",e.state)}}},methods:{destroy:function(){this.entities.recycle(),this.activeEntities.recycle(),this.removals.recycle()}}})}(),function(){"use strict";var a=include("PIXI.Container"),b=include("platypus.Data"),c=include("platypus.components.Interactive"),d=include("platypus.Vector");return platypus.createComponentClass({id:"HandlerRender",properties:{interactive:!1,acceptInput:null},initialize:function(){var d=null;this.container=new a,this.acceptInput&&(platypus.debug.warn('Entity "'+this.owner.type+'": HandlerRender "acceptInput" property has been deprecated since 0.9.1 in favor of the "interactive" property which adds an "Interactive" component to the entity to handle input.'),this.interactive=this.interactive||this.acceptInput),this.interactive&&(d=b.setUp("container",this.container,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover,"relativeToSelf",!0),this.owner.addComponent(new c(this.owner,d)),d.recycle()),this.renderMessage=b.setUp("delta",0,"container",this.container)},events:{load:function(){this.owner.triggerEvent("render-world",{world:this.container}),this.owner.triggerEvent("input-on")},"child-entity-added":function(a){a.triggerEvent("handle-render-load",this.renderMessage)},"pause-render":function(a){a&&a.time?this.paused=a.time:this.paused=-1,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("render-paused")},"unpause-render":function(){this.paused=0,this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("render-unpaused")},tick:function(){var a=function(a,b){return a.z-b.z};return function(b){var c=this.renderMessage;c.delta=b.delta,this.paused>0&&(this.paused-=b.delta,this.paused<=0&&(this.paused=0)),this.owner.triggerEventOnChildren&&this.owner.triggerEventOnChildren("handle-render",c),this.container&&this.container.reorder&&(this.container.reorder=!1,this.container.children.sort(a))}}()},methods:{destroy:function(){this.container=null,this.renderMessage.recycle()}},publicMethods:{windowToWorld:function(a,b,c){var e=c||d.setUp();return e.x=a.x*this.worldPerWindowUnitWidth,e.y=a.y*this.worldPerWindowUnitHeight,b!==!1&&(e.x-=this.viewport.x*this.worldPerWindowUnitWidth,e.y-=this.viewport.y*this.worldPerWindowUnitHeight),e},worldToWindow:function(a,b,c){var e=c||d.setUp();return e.x=a.x*this.windowPerWorldUnitWidth,e.y=a.y*this.windowPerWorldUnitHeight,b!==!1&&(e.x+=this.viewport.x,e.y+=this.viewport.y),e}}})}(),function(){"use strict";var a=function(a,b,c,d,e,f){var g=0,h=0,i=0,j=a.greenSlice();if("horizontal"===f){for(h=e-1;h>=0;h--)for(g=h*d,i=0;(h+1)*d>g;g++,i++)j.splice((h+1)*b+i,0,c[g]);return j}return"vertical"===f?a.concat(c):null},b=function(a,b,c,d){var e=0,f="",g=a.greenSlice(),h=null;for(e=0;e<b.length;e++){h={};for(f in b[e])b[e].hasOwnProperty(f)&&(h[f]=b[e][f]);"horizontal"===d?h.x+=c:"vertical"===d&&(h.y+=c),g.push(h)}return g},c=function(c,d,e,f){var g=0,h="";for(c.tilewidth||c.tileheight?(c.tilewidth!==d.tilewidth||c.tileheight!==d.tileheight)&&platypus.debug.warn("Tiled-Loader: Your map has segments with different tile sizes. All tile sizes must match. Segment: "+d):(c.tilewidth=d.tilewidth,c.tileheight=d.tileheight),"horizontal"===e?0===c.height?c.height=d.height:c.height!==d.height&&platypus.debug.warn("Tiled-Loader: You are trying to merge segments with different heights. All segments need to have the same height. Level: "+c+" Segment: "+d):"vertical"===e&&(0===c.width?c.width=d.width:c.width!==d.width&&platypus.debug.warn("Tiled-Loader: You are trying to merge segments with different widths. All segments need to have the same width. Level: "+c+" Segment: "+d)),g=0;g<d.layers.length;g++)if(c.layers[g])c.layers[g].type===d.layers[g].type?c.layers[g].data&&d.layers[g].data?(f(d.layers[g]),"horizontal"===e?(c.layers[g].data=a(c.layers[g].data,c.width,d.layers[g].data,d.width,c.height,e),c.layers[g].width+=d.width):"vertical"===e&&(c.layers[g].data=a(c.layers[g].data,c.height,d.layers[g].data,d.height,c.width,e),c.layers[g].height+=d.height)):c.layers[g].objects&&d.layers[g].objects&&("horizontal"===e?c.layers[g].objects=b(c.layers[g].objects,d.layers[g].objects,c.width*c.tilewidth,e):"vertical"===e&&(c.layers[g].objects=b(c.layers[g].objects,d.layers[g].objects,c.height*c.tileheight,e))):platypus.debug.warn("Tiled-Loader: The layers in your level segments do not match. Level: "+c+" Segment: "+d);else{f(d.layers[g]),c.layers[g]={};for(h in d.layers[g])d.layers[g].hasOwnProperty(h)&&(c.layers[g][h]=d.layers[g][h])}"horizontal"===e?c.width+=d.width:"vertical"===e&&(c.height+=d.height);for(h in d)d.hasOwnProperty(h)&&!c[h]&&(c[h]=d[h])},d=function(a,b){var d=0,e=0,f=platypus.game.settings.levels,g={height:0,width:0,layers:[]},h={height:0,width:0,layers:[]},i=a[d].length;for(d=0;d<a.length;d++){for(i!==a[d].length&&platypus.debug.warn("Tiled-Loader: Your map is not square. Maps must have an equal number of segments in every row."),g={height:0,width:0,layers:[]},e=0;e<a[d].length;e++)"string"==typeof a[d][e]?c(g,f[a[d][e]],"horizontal",b):c(g,a[d][e],"horizontal",b);c(h,g,"vertical",b)}return h};return platypus.createComponentClass({id:"LevelBuilder",properties:{useUniques:!0,levelTemplate:null,levelPieces:null},publicProperties:{},initialize:function(){this.levelMessage={level:null,persistentData:null}},events:{"scene-loaded":function(a){var b=null,c=null,e="",f=0,g=0,h=0;if(this.levelMessage.persistentData=a,this.levelTemplate=a.levelTemplate||this.levelTemplate,this.useUniques=a.useUniques||this.useUniques,c=a.levelPieces||this.levelPieces,this.levelPieces={},c)for(e in c)if(c.hasOwnProperty(e))if("string"==typeof c[e])this.levelPieces[e]=c[e];else{if(!c[e].length)throw"Level Builder: Level pieces of incorrect type: "+c[e];
for(this.levelPieces[e]=[],f=0;f<c[e].length;f++)this.levelPieces[e].push(c[e][f])}if(!this.levelTemplate)throw"Level Builder: There is no level template.";if(!this.levelTemplate)throw"Level Builder: Template is not defined";for(this.levelMessage.level=[],g=0;g<this.levelTemplate.length;g++)if(b=this.levelTemplate[g],"string"==typeof b)this.levelMessage.level[g]=this.getLevelPiece(b);else{if(!b.length)throw"Level Builder: Template row is neither a string or array. What is it?";for(this.levelMessage.level[g]=[],h=0;h<b.length;h++)this.levelMessage.level[g][h]=this.getLevelPiece(b[h])}this.levelMessage.level&&(this.levelMessage.level=d(this.levelMessage.level,this.owner.decodeLayer),this.owner.triggerEvent("load-level",this.levelMessage))}},methods:{getLevelPiece:function(a){var b=this.levelPieces[a]||a,c=null,d=0;if(b){if("string"==typeof b)return this.useUniques?(c=b,this.levelPieces[a]=null,c):b;if(b.length)return d=Math.floor(Math.random()*b.length),this.useUniques?this.levelPieces[a].greenSplice(d):b[d];throw"Level Builder: There are no MORE level pieces of type: "+a}throw"Level Builder: There are no level pieces of type: "+a},destroy:function(){this.levelMessage.level=null,this.levelMessage.persistentData=null,this.levelMessage=null}},publicMethods:{mergeLevels:function(a){return d(a,this.owner.decodeLayer)}},getAssetList:function(a,b,c){var d=0,e=null,f=Array.setUp(),g="",h=null;if(a&&a.levelPieces?h=a.levelPieces:b&&b.levelPieces?h=b.levelPieces:c&&c.levelPieces&&(h=c.levelPieces),h)for(g in h)if(h.hasOwnProperty(g))if(Array.isArray(h[g]))for(d=0;d<h[g].length;d++)e=platypus.components.TiledLoader.getAssetList({level:h[g][d]},b,c),f.union(e),e.recycle();else e=platypus.components.TiledLoader.getAssetList({level:h[g]},b,c),f.union(e),e.recycle();return f}})}(),function(){"use strict";return platypus.createComponentClass({id:"LogicAngularMovement",properties:{maxVelocity:3,acceleration:.01,visualOffset:0,startAngle:0},publicProperties:{},initialize:function(){this.angle=this.startAngle,this.v=Array.setUp(0,0),this.moving=!1,this.piOverTwo=Math.PI/2,this.owner.rotation=this.owner.rotation||this.visualOffset},events:{"handle-logic":function(a){var b=Math.PI,c=Math.sin,d=Math.cos,e=Math.min,f=Math.max,g=a.delta,h=0;this.moving&&(this.v[0]+=this.acceleration*d(this.angle)*g,this.v[1]+=this.acceleration*c(this.angle)*g,0===this.v[0]?h=this.v[1]>0?this.piOverTwo:this.v[1]<0?-this.piOverTwo:this.angle:(h=Math.atan(this.v[1]/this.v[0]),this.v[0]<0&&(h=b+h)),this.v[0]>=0?this.v[0]=e(this.v[0],this.maxVelocity*d(h)):this.v[0]=f(this.v[0],this.maxVelocity*d(h)),this.v[1]>=0?this.v[1]=e(this.v[1],this.maxVelocity*c(h)):this.v[1]=f(this.v[1],this.maxVelocity*c(h)),this.owner.x+=this.v[0],this.owner.y+=this.v[1],this.owner.rotation=h*(180/b)+this.visualOffset)},"set-angle":function(a){this.angle=a},move:function(){this.moving=!0},stop:function(){this.moving=!1,this.v[0]=0,this.v[1]=0},"set-max-velocity":function(a){this.maxVelocity=a}},methods:{destroy:function(){this.v.recycle()}}})}(),function(){"use strict";var a=include("platypus.Entity"),b=0;return platypus.createComponentClass({id:"LogicAttachment",properties:{attachState:"attached",attachment:"",offsetX:0,offsetY:0,offsetZ:.01},publicProperties:{},initialize:function(){this.state=this.owner.state,this.owner.linkId||(this.owner.linkId="attachment-link-"+b,b+=1),this.state.set(this.attachState,!1),this.attachmentPosition={x:0,y:0,z:0,dx:0,dy:0,linkId:this.owner.linkId},this.attachmentProperties={type:this.attachment,properties:this.attachmentPosition},this.attachment=null,this.isAttached=!1},events:{"handle-logic":function(){var a=0,b=this.state;this.isAttached?(this.attachment||(this.attachmentPosition.x=this.owner.x,this.attachmentPosition.y=this.owner.y,this.attachmentPosition.z=this.owner.z,this.attachment=this.owner.parent.addEntity(this.attachmentProperties)),this.attachment.destroyed?(this.owner.parent.removeEntity(this.attachment),this.attachment=null,this.isAttached=!1):(this.attachment.x=this.owner.x,a=this.offsetX,b.get("left")?(a*=-1,this.attachment.rotation=180):b.get("right")&&(this.attachment.rotation=0),this.attachment.x+=a,this.attachment.y=this.owner.y,a=this.offsetY,b.get("top")?(a*=-1,this.attachment.rotation=90):b.get("bottom")&&(this.attachment.rotation=-90),this.attachment.y+=a,this.attachment.z=this.owner.z,this.attachment.z+=this.offsetZ)):this.attachment&&(this.owner.parent.removeEntity(this.attachment),this.attachment=null),b.set(this.attachState,this.isAttached)},attach:function(a){this.isAttached=!a||a.pressed!==!1},detach:function(){this.isAttached=!1}},methods:{destroy:function(){this.state.set(this.attachState,!1),this.attachment&&(this.owner.parent.removeEntity(this.attachment),this.attachment=null),this.isAttached=!1,this.state=null}},getAssetList:function(b,c,d){var e=b.attachment||c.attachment||d.attachment;return e?a.getAssetList({type:e}):Array.setUp()}})}(),function(){"use strict";var a=include("platypus.Data"),b=platypus.components.LogicCanvasButton=platypus.createComponentClass({id:"LogicButton",properties:{onPress:"",onRelease:"",onCancel:"",onHover:"",useOnce:!1,disabled:!1,toggle:!1,pressed:!1},publicProperties:{bottom:null,left:null,right:null,top:null},initialize:function(){var a=this.owner.state;this.state=a,a.set("disabled",this.disabled),a.set("down",this.pressed),a.set("released",!this.pressed),a.set("pressed",this.pressed),a.set("highlighted",!1),this.owner.buttonMode=!this.disabled,this.cancelled=!1,this.readyToToggle=!1},events:{"camera-update":function(a){var b=this.bottom,c=this.left,d=this.owner,e=this.right,f=this.top,g=a.viewport;"number"==typeof c?d.x=g.left+c:"number"==typeof e&&(d.x=g.right-e),"number"==typeof f?d.y=g.top+f:"number"==typeof b&&(d.y=g.bottom-b)},mousedown:function(a){this.state.get("disabled")||(this.toggle?this.readyToToggle=this.readyToToggle||"mousedown"===a.event.type:(this.onPress&&this.owner.trigger(this.onPress),this.updateStateAndTrigger("pressed"),a.pixiEvent.stopPropagation(),this.useOnce&&this.removeEventListener&&this.removeEventListener("mousedown")))},pressup:function(a){var b=this.state;b.get("disabled")||(this.cancelled?(this.onCancel&&this.owner.trigger(this.onCancel),this.updateStateAndTrigger("cancelled")):this.toggle?this.readyToToggle&&(b.get("pressed")?this.updateStateAndTrigger("released"):this.updateStateAndTrigger("pressed")):(this.onRelease&&this.owner.trigger(this.onRelease),this.updateStateAndTrigger("released")),a&&a.pixiEvent&&a.pixiEvent.stopPropagation&&a.pixiEvent.stopPropagation(),this.useOnce&&this.removeEventListener&&(this.removeEventListener("pressup"),this.state.set("disabled",!0),this.owner.buttonMode=!1)),this.cancelled=!1,this.readyToToggle=!1},mouseover:function(){this.onHover&&this.owner.trigger(this.onHover),this.state.get("pressed")&&(this.cancelled=!1)},mouseout:function(){this.state.get("pressed")&&(this.cancelled=!0)},disable:function(){this.state.set("disabled",!0),this.owner.buttonMode=!1},enable:function(){this.state.set("disabled",!1),this.owner.buttonMode=!0},"toggle-disabled":function(){var a=this.state.get("disabled");this.owner.buttonMode=a,this.state.set("disabled",!a)},highlight:function(){this.state.set("highlighted",!0)},unhighlight:function(){this.state.set("highlighted",!1)},"toggle-highlight":function(){var a=this.state;a.set("highlighted",!a.get("highlighted"))}},methods:{updateStateAndTrigger:function(b){var c=null,d=this.state,e=d.get("pressed"),f=d.get("released"),g=!1;f&&"pressed"===b?(d.set("pressed",!0),d.set("down",!1),d.set("released",!1),g=!0):!e||"released"!==b&&"cancelled"!==b||(d.set("pressed",!1),d.set("down",!1),d.set("released",!0),g=!0),g&&(c=a.setUp("released",e,"pressed",f,"triggered",f),this.owner.triggerEvent(b,c),c.recycle())},destroy:function(){this.owner.buttonMode=!1,this.state=null}}});return b}(),function(){"use strict";return platypus.createComponentClass({id:"LogicCarrier",initialize:function(){},events:{load:function(){this.owner.triggerEvent("add-collision-entity",this.owner)||(this.owner.addComponent(new platypus.components.CollisionGroup(this.owner,{})),this.owner.triggerEvent("add-collision-entity",this.owner))},"carry-me":function(a){this.owner.triggerEvent("add-collision-entity",a.entity)},"release-me":function(a){this.owner.triggerEvent("remove-collision-entity",a.entity)}}})}(),function(){"use strict";return platypus.createComponentClass({id:"LogicDestroyMe",properties:{delay:0,destroyed:!1},events:{"prepare-logic":function(a){var b=a.delta;this.destroyed&&!this.owner.state.get("paused")&&(this.delay-=b,this.delay<=0&&this.owner.parent.removeEntity(this.owner))},"destroy-me":function(){this.destroyed=!0}}})}(),function(){"use strict";var a=function(a){return function(b){this[a]=!b||b.pressed!==!1}},b=function(){},c={x:function(a,b){a!==b&&(a>180&&180>=b||180>=a&&b>180)&&this.owner.triggerEvent("transform","vertical")},y:function(a,b){a!==b&&(a>90&&270>=a&&(90>=b||b>270)||(90>=a||a>270)&&b>90&&270>=b)&&this.owner.triggerEvent("transform","horizontal")},z:function(a,b){a!==b&&this.owner.triggerEvent("replace-transform","rotate-"+a)}};return platypus.createComponentClass({id:"LogicDirectionalMovement",properties:{axis:"y",speed:.3},initialize:function(){var a=this.state=this.owner.state;"number"==typeof this.speed&&(this.speed=[this.speed,0,0]),this.initialVector=platypus.Vector.setUp(this.speed),this.reorient=c[this.axis],this.reorient||(this.reorient=b),this.moving=a.set("moving",!1),this.left=a.set("left",!1),this.right=a.set("right",!1),this.up=a.set("up",!1),this.down=a.set("down",!1),this.upLeft=!1,this.upRight=!1,this.downLeft=!1,this.downRight=!1,this.heading=0,this.owner.heading=this.owner.heading||0},events:{"component-added":function(a){if(a===this){if(!this.owner.addMover)return void platypus.debug.warn('The "LogicDirectionalMovement" component requires a "Mover" component to function correctly.');this.direction=this.owner.addMover({velocity:this.speed,drag:0,friction:0,stopOnCollision:!1,orient:!1,aliases:{moving:"control-velocity"}}).velocity,this.owner.heading!==this.heading&&(this.direction.setVector(this.initialVector).rotate(this.owner.heading/180*Math.PI),this.heading=this.owner.heading),this.owner.triggerEvent("moving",this.moving)}},"handle-logic":function(){var a=this.state,b=this.up||this.upLeft||this.downLeft,c=this.upLeft||this.up&&this.left,d=this.left||this.upLeft||this.downLeft,e=this.downLeft||this.down&&this.left,f=this.down||this.downLeft||this.downRight,g=this.downRight||this.down&&this.right,h=this.right||this.upRight||this.downRight,i=this.upRight||this.up&&this.right;if(d&&h||b&&f)this.moving=!1;else if(c)this.moving=!0,this.heading=225;else if(i)this.moving=!0,this.heading=315;else if(e)this.moving=!0,this.heading=135;else if(g)this.moving=!0,this.heading=45;else if(d)this.moving=!0,this.heading=180;else if(h)this.moving=!0,this.heading=0;else if(b)this.moving=!0,this.heading=270;else if(f)this.moving=!0,this.heading=90;else switch(this.moving=!1,this.heading){case 270:b=!0;break;case 90:f=!0;break;case 180:d=!0;break;case 225:b=!0,d=!0;break;case 315:b=!0,h=!0;break;case 135:f=!0,d=!0;break;case 45:f=!0,h=!0;break;case 0:default:h=!0}this.owner.heading!==this.heading&&(this.direction.setVector(this.initialVector).rotate(this.heading/180*Math.PI),this.reorient(this.heading,this.owner.heading),this.owner.heading=this.heading),a.get("moving")!==this.moving&&(this.owner.triggerEvent("moving",this.moving),a.set("moving",this.moving)),a.set("up",b),a.set("right",h),a.set("down",f),a.set("left",d)},"go-down":a("down"),"go-south":a("down"),"go-down-left":a("downLeft"),"go-southwest":a("downLeft"),"go-left":a("left"),"go-west":a("left"),"go-up-left":a("upLeft"),"go-northwest":a("upLeft"),"go-up":a("up"),"go-north":a("up"),"go-up-right":a("upRight"),"go-northeast":a("upRight"),"go-right":a("right"),"go-east":a("right"),"go-down-right":a("downRight"),"go-southeast":a("downRight"),stop:function(a){a&&a.pressed===!1||(this.left=!1,this.right=!1,this.up=!1,this.down=!1,this.upLeft=!1,this.upRight=!1,this.downLeft=!1,this.downRight=!1)},face:function(){var a={up:270,north:270,down:90,south:90,left:180,west:180,right:0,east:0,"up-left":225,northwest:225,"up-right":315,northeast:315,"down-left":135,southwest:135,"down-right":45,southeast:45};return function(b){this.heading=a[b]||0}}(),accelerate:function(a){this.initialVector.normalize().multiply(a),this.direction.normalize().multiply(a)}},methods:{destroy:function(){this.initialVector.recycle(),this.state=null}}})}(),function(){"use strict";return platypus.createComponentClass({id:"LogicDragDrop",properties:{dragZ:1e4,stickyClick:!1},initialize:function(){this.nextX=this.owner.x,this.nextY=this.owner.y,this.lastZ=this.owner.z,this.grabOffsetX=0,this.grabOffsetY=0,this.state=this.owner.state,this.state.set("dragging",!1),this.state.set("noDrop",!1),this.tryDrop=!1,this.hitSomething=!1,this.hasCollision=!1,platypus.supports.mobile&&(this.stickyClick=!1)},events:{"component-added":function(a){"CollisionBasic"===a.type&&(this.hasCollision=!0)},"handle-logic":function(){this.state.get("dragging")&&(this.owner.x=this.nextX,this.owner.y=this.nextY,this.owner.triggerEvent("hovering")),this.state.set("noDrop",!1)},"handle-post-collision-logic":function(){this.tryDrop?(this.tryDrop=!1,this.hitSomething?(this.dropFailed=!1,this.state.set("noDrop",!0),this.state.set("dragging",!0),this.owner.dragMode=!0):(this.state.set("noDrop",!1),this.state.set("dragging",!1),this.owner.dragMode=!1)):this.hitSomething&&this.state.set("noDrop",!0),this.hitSomething=!1},mousedown:function(a){this.sticking?(this.sticking=!1,this.release()):(this.nextX=this.owner.x,this.nextY=this.owner.y,this.lastZ=this.owner.z,this.grabOffsetX=a.x-this.owner.x,this.grabOffsetY=a.y-this.owner.y,this.owner.z=this.dragZ,this.state.set("dragging",!0),this.owner.dragMode=!0,this.sticking=this.stickyClick),a.pixiEvent.stopPropagation()},pressup:function(a){this.sticking||this.release(),a.pixiEvent.stopPropagation()},mousemove:function(a){this.sticking&&(this.nextX=a.x-this.grabOffsetX,this.nextY=a.y-this.grabOffsetY,a.event.preventDefault(),a.pixiEvent.stopPropagation())},pressmove:function(a){this.nextX=a.x-this.grabOffsetX,this.nextY=a.y-this.grabOffsetY,(this.nextX!==this.owner.x||this.nextY!==this.owner.y)&&(this.sticking=!1),a.event.preventDefault(),a.pixiEvent.stopPropagation()},"no-drop":function(){this.hitSomething=!0}},methods:{release:function(){this.hasCollision?this.tryDrop=!0:(this.state.set("noDrop",!1),this.state.set("dragging",!1),this.owner.dragMode=!1,this.owner.z=this.lastZ)},destroy:function(){this.state.set("dragging",!1),this.owner.dragMode=!1,this.state.set("noDrop",!1),this.state=null,this.owner.z=this.lastZ}}})}(),function(){"use strict";var a=include("platypus.Vector");return platypus.createComponentClass({id:"LogicImpactLaunch",properties:{accelerationX:-.3,accelerationY:-.8,flipX:!0,flipY:!1},initialize:function(a){this.stunState=a.state||"stunned",this.flipX=this.flipX?-1:1,this.flipY=this.flipY?-1:1,this.justJumped=!1,this.stunned=!1,this.state=this.owner.state,this.state.set("impact",!1),this.state.set(this.stunState,!1)},events:{"component-added":function(b){if(b===this){if(!this.owner.addMover)return void platypus.debug.warn('The "LogicDirectionalMovement" component requires a "Mover" component to function correctly.');this.direction=this.owner.addMover({velocity:[0,0,0],orient:!1}).velocity,this.vector=a.setUp()}},"handle-logic":function(){this.state.set("impact",this.justJumped),this.state.set(this.stunState,this.stunned),this.justJumped&&(this.direction.setVector(this.vector),this.justJumped=!1,this.stunned=!0)},"impact-launch":function(a){var b=a.x,c=a.y;a.entity&&(b=a.entity.x-this.owner.x,c=a.entity.y-this.owner.y),this.stunned||(this.justJumped=!0,b>=0?this.vector.x=this.accelerationX:0>b&&(this.vector.x=this.accelerationX*this.flipX),c>=0?this.vector.y=this.accelerationY:0>c&&(this.vector.y=this.accelerationY*this.flipY))},"hit-solid":function(a){this.stunned&&a.y>0&&(this.direction.x=0,this.direction.y=0,this.stunned=!1)}},methods:{destroy:function(){this.vector.recycle(),this.state=null}}})}(),function(){"use strict";return platypus.createComponentClass({id:"LogicPacingPlatform",initialize:function(a){this.ang=this.owner.angle||a.angle||0,this.dist=this.owner.distance||a.distance||128,this.dX=this.dist*Math.cos(this.ang),this.dY=this.dist*Math.sin(this.ang),this.period=this.owner.period||a.period||4e3,this.time=0,this.startPos=this.owner.startPos||a.startPos||0,this.offset=0,this.originX=this.owner.x,this.originY=this.owner.y},events:{"handle-logic":function(a){var b=this.period,c=a.delta;this.time+=c,this.time>b&&(this.time=this.time%b),this.offset=this.time/b*(2*Math.PI),this.owner.x=this.originX+Math.sin(this.offset+this.startPos)*this.dX,this.owner.y=this.originY+Math.sin(this.offset+this.startPos)*this.dY}}})}(),function(){"use strict";var a={down:!0};return platypus.createComponentClass({id:"LogicPortable",initialize:function(b){this.portableDirections=b.portableDirections||a,this.carrier=this.lastCarrier=null,this.message={entity:this.owner}},events:{"handle-logic":function(){var a=this.message;this.carrierConnected?(this.carrier!==this.lastCarrier&&(this.lastCarrier&&this.lastCarrier.triggerEvent("release-me",a),this.carrier.triggerEvent("carry-me",a)),this.carrierConnected=!1):this.carrier&&(this.carrier.triggerEvent("release-me",a),this.carrier=null),this.lastCarrier=this.carrier},"hit-solid":function(a){a.y>0?this.updateCarrier(a.entity,"down"):a.y<0?this.updateCarrier(a.entity,"up"):a.x<0?this.updateCarrier(a.entity,"left"):a.x>0&&this.updateCarrier(a.entity,"right")}},methods:{updateCarrier:function(a,b){this.portableDirections[b]&&a&&(a!==this.carrier&&(this.carrier=a),this.carrierConnected=!0)}}})}(),function(){"use strict";var a=include("platypus.DataMap");return platypus.createComponentClass({id:"LogicPortal",initialize:function(b){var c=0,d=b.entrants||b.entrant||"no one",e=this.owner.state;if(this.destination=this.owner.destination||b.destination,this.used=!1,this.ready=!1,this.wasReady=!1,this.entrants=a.setUp(),Array.isArray(d))for(c=0;c<d.length;c++)this.entrants.set(d[c],!1);else this.entrants.set(d,!1);this.state=e,e.set("occupied",!1),e.set("ready",!0)},events:{"handle-logic":function(){var a=this.entrants,b=a.keys,c=b.length,d=!1,e=!0,f=this.state;for(!this.used&&this.activated?(this.owner.triggerEvent("port-"+this.destination),this.used=!0):this.ready&&!this.wasReady?(this.owner.triggerEvent("portal-waiting"),this.wasReady=!0):this.wasReady&&!this.ready&&(this.owner.triggerEvent("portal-not-waiting"),this.wasReady=!1);c--;)a[b[c]]?(d=!0,a.set(b[c],!1)):e=!1;f.set("occupied",d),f.set("ready",e),this.ready=!1},"occupied-portal":function(a){var b=this.entrants,c=b.keys,d=c.length;for(b.set(a.entity.type,!0);d--;)if(!b.get(c[d]))return;this.ready=!0},"activate-portal":function(){this.activated=!0}},methods:{destroy:function(){this.state=null,this.entrants.recycle(),this.entrants=null}}})}(),function(){"use strict";var a=function(a,b){return a/Math.abs(a)*b};return platypus.createComponentClass({id:"LogicPushable",initialize:function(a){this.yPush=a.push||a.yPush||0,this.xPush=a.push||a.xPush||.1,a.roll?(this.radius=a.radius||this.owner.radius||(this.owner.width||this.owner.height||2)/2,this.owner.orientation=this.owner.orientation||0):this.radius=0,this.currentPushX=0,this.currentPushY=0,this.lastX=this.owner.x,this.lastY=this.owner.y,this.pushers=Array.setUp()},events:{"handle-logic":function(b){var c=0,d=b.delta;for(this.currentPushY&&(this.owner.y+=a(this.currentPushY,this.yPush*d),this.currentPushY=0),this.currentPushX&&(this.owner.x+=a(this.currentPushX,this.xPush*d),this.currentPushX=0),(this.lastX!==this.owner.x||this.lastY!==this.owner.y)&&(this.radius&&(this.owner.orientation+=(this.owner.x+this.owner.y-this.lastX-this.lastY)/this.radius),this.lastX=this.owner.x,this.lastY=this.owner.y),c=0;c<this.pushers.length;c++)this.pushers[c].triggerEvent("pushed",this.owner);this.pushers.length=0},"push-entity":function(a){var b=a.x||0,c=a.y||0;this.currentPushX-=b,this.currentPushY-=c,(this.yPush&&c||this.xPush&&b)&&this.pushers.push(a.entity)},"hit-solid":function(a){return a.y>0&&this.vY>0||a.y<0&&this.vY<0?this.vY=0:(a.x<0&&this.vX<0||a.x>0&&this.vX>0)&&(this.vX=0),!0}},methods:{destroy:function(){this.pushers.recycle()}}})}(),function(){"use strict";var a=include("platypus.Vector");return platypus.createComponentClass({id:"LogicRebounder",initialize:function(b){platypus.Vector.assign(this.owner,"velocity","dx","dy","dz"),this.owner.mass=this.owner.mass||b.mass||1,this.elasticity=b.elasticity||.8,this.v=a.setUp(0,0,0),this.incidentVector=a.setUp(0,0,0),this.staticCollisionOccurred=!1,this.nonStaticCollisionOccurred=!1,this.hitThisTick=Array.setUp(),this.otherV=a.setUp(0,0,0),this.otherVelocityData=Array.setUp()},events:{"handle-logic":function(){var a=0;for(this.hitThisTick.length=0,a=0;a<this.otherVelocityData.length;a++)this.otherVelocityData[a].velocity.recycle();this.otherVelocityData.length=0},"hit-static":function(a){var b=0,c=a.entity,d=0;for(d=0;d<this.hitThisTick.length;d++)if(c===this.hitThisTick[d])return;this.hitThisTick.push(c),this.v.setVector(this.owner.velocity),this.incidentVector.setVector(a.direction),b=this.v.scalarProjection(this.incidentVector),isNaN(b)||(this.incidentVector.scale(b*(1+this.elasticity)),this.v.subtractVector(this.incidentVector)),this.owner.velocity.setVector(this.v)},"hit-non-static":function(a){var b=0,c=a.entity,d=!1,e=0,f=0,g=0;if(b=this.hitThisTick.indexOf(c),!(b>=0)){for(this.hitThisTick.push(c),b=0;b<this.otherVelocityData.length;b++)if(c===this.otherVelocityData[b].entity){this.otherV.setVector(this.otherVelocityData[b].velocity),d=!0;break}d||(this.otherV.setVector(c.velocity),c.triggerEvent("share-velocity",this.owner)),this.v.setVector(this.owner.velocity),this.incidentVector.setVector(a.direction),e=this.v.scalarProjection(this.incidentVector),e=isNaN(e)?0:e,f=this.otherV.scalarProjection(this.incidentVector),f=isNaN(f)?0:f,g=(e*(this.owner.mass-c.mass)+2*c.mass*f)/(this.owner.mass+c.mass),this.incidentVector.scale(g-e),this.owner.velocity.setVector(this.incidentVector)}},"share-velocity":function(b){this.otherVelocityData.push({entity:b,velocity:a.setUp(b.velocity)})}},methods:{destroy:function(){this.v.recycle(),this.incidentVector.recycle(),this.otherV.recycle(),this.hitThisTick.recycle(),this.otherVelocityData.recycle()}},publicMethods:{}})}(),function(){"use strict";var a=include("platypus.Entity");return platypus.createComponentClass({id:"LogicRegionSpawner",initialize:function(a){var b=0,c=0,d=1,e=1,f=0,g=0,h=0,i=0;if(this.spawnPosition={x:0,y:0},this.spawnProperties={type:a.spawn,properties:this.spawnPosition},this.regions=null,this.usedRegions=null,this.regionWidth=0,this.regionHeight=0,a.regions)for(this.regions=Array.setUp(),this.usedRegions=Array.setUp(),this.regionWidth=f=a.regions.width||this.owner.width,this.regionHeight=g=a.regions.height||this.owner.height,d=Math.round(this.owner.width/f),e=Math.round(this.owner.height/g),b=0;d>b;b++)for(c=0;e>c;c++)h=Math.min(f,this.owner.width-b*f),i=Math.min(g,this.owner.height-c*g),this.regions.push({x:b*f,y:c*g,width:h,height:i});this.interval=this.owner.interval||a.interval||1e3,this.time=0},events:{"handle-logic":function(a){var b=this.regions,c=null;this.time+=a.delta,this.time>this.interval&&(this.time-=this.interval,b?(b.length||(this.regions=this.usedRegions,this.usedRegions=b,b=this.regions),c=b[Math.floor(b.length*Math.random())],this.spawnPosition.x=this.owner.x-(this.owner.regX||0)+(c.x+Math.random()*c.width),this.spawnPosition.y=this.owner.y-(this.owner.regY||0)+(c.y+Math.random()*c.height)):(this.spawnPosition.x=this.owner.x-(this.owner.regX||0)+Math.random()*this.owner.width,this.spawnPosition.y=this.owner.y-(this.owner.regY||0)+Math.random()*this.owner.height),this.owner.parent.addEntity(this.spawnProperties))}},methods:{destroy:function(){this.regions.recycle(),this.usedRegions.recycle()}},getAssetList:function(b,c,d){var e=b.spawn||c.spawn||d.spawn;return e?a.getAssetList({type:e}):Array.setUp()}})}(),function(){"use strict";var a=Math.cos,b=Math.sin,c=function(b,c){return b*a(c)},d=function(a,c){return a*b(c)};return platypus.createComponentClass({id:"LogicRotationalMovement",initialize:function(a){var b=this.owner.state;this.speed=a.speed||.3,this.magnitude=0,this.degree=a.degree||1,this.angle=a.angle||0,this.state=b,b.set("moving",!1),b.set("turningRight",!1),b.set("turningLeft",!1),this.owner.orientation=0,this.moving=!1,this.turningRight=!1,this.turningLeft=!1},events:{"handle-logic":function(a){var b=this.state,e=0,f=0;this.turningRight&&(this.angle+=this.degree*a.delta/15),this.turningLeft&&(this.angle-=this.degree*a.delta/15),this.moving&&(e=c(this.magnitude,this.angle),f=d(this.magnitude,this.angle)),this.owner.x+=e*a.delta,this.owner.y+=f*a.delta,b.set("moving",this.moving),b.set("turningLeft",this.turningLeft),b.set("turningRight",this.turningRight),this.owner.rotation!==this.angle&&(this.owner.rotation=this.angle)},"turn-right":function(a){a?this.turningRight=a.pressed:this.turningRight=!0},"turn-left":function(a){a?this.turningLeft=a.pressed:this.turningLeft=!0},"go-forward":function(a){!a||a.pressed?(this.moving=!0,this.magnitude=this.speed):this.moving=!1},"go-backward":function(a){!a||a.pressed?(this.moving=!0,this.magnitude=-this.speed):this.moving=!1},stop:function(a){(!a||a.pressed)&&(this.moving=!1,this.turningLeft=!1,this.turningRight=!1)},"stop-moving":function(a){(!a||a.pressed)&&(this.moving=!1)},"stop-turning":function(a){(!a||a.pressed)&&(this.turningLeft=!1,this.turningRight=!1)}},methods:{destroy:function(){this.state=null}}})}(),function(){"use strict";var a=include("platypus.Entity");return platypus.createComponentClass({id:"LogicSpawner",initialize:function(a){var b=this.owner.spawneeClass||a.spawneeClass,c="",d=0;if(this.state=this.owner.state,this.stateName=a.state||"spawning",this.originalZ=platypus.game.settings.entities[b]&&platypus.game.settings.entities[b].properties&&platypus.game.settings.entities[b].properties.z||0,this.speed=a.speed||this.owner.speed||0,this.state.set(this.stateName,!1),this.spawneeProperties={x:0,y:0,z:0,dx:0,dy:0,spawner:this.owner},a.passOnProperties)for(d=0;d<a.passOnProperties.length;d++)c=a.passOnProperties[d],this.owner[c]&&(this.spawneeProperties[c]=this.owner[c]);this.propertiesContainer={type:b,properties:this.spawneeProperties},this.offsetX=this.owner.offsetX||a.offsetX||0,this.offsetY=this.owner.offsetY||a.offsetY||0,this.firing=!1},events:{"handle-logic":function(){var a=0,b=this.state;this.firing&&(this.spawneeProperties.x=this.owner.x,this.spawneeProperties.y=this.owner.y,this.spawneeProperties.z=this.owner.z+this.originalZ,a=this.offsetX,b.get("left")&&(a*=-1),this.spawneeProperties.x+=a,a=this.offsetY,b.get("top")&&(a*=-1),this.spawneeProperties.y+=a,this.speed?(b.get("top")?this.spawneeProperties.dy=-this.speed:b.get("bottom")?this.spawneeProperties.dy=this.speed:delete this.spawneeProperties.dy,b.get("left")?this.spawneeProperties.dx=-this.speed:b.get("right")?this.spawneeProperties.dx=this.speed:delete this.spawneeProperties.dx):(delete this.spawneeProperties.dx,delete this.spawneeProperties.dy),this.parent&&this.parent.addEntity(this.propertiesContainer)),b.set(this.stateName,this.firing),this.firing=!1},spawn:function(a){this.firing=!a||a.pressed!==!1,this.parent=this.owner.parent}},methods:{destroy:function(){this.state=null}},getAssetList:function(b,c,d){var e=b.spawneeClass||c.spawneeClass||d.spawneeClass;return e?a.getAssetList({type:e}):Array.setUp()}})}(),function(){"use strict";var a=include("platypus.DataMap"),b=include("platypus.StateMap"),c=function(a,b){b.update(a)},d=function(a,b){b.set(a,!0)},e=null,f=null,g=function(b){var c=null,d="";if(!b||"object"!=typeof b||Array.isArray(b)||b.event)return b;c=a.setUp();for(d in b)b.hasOwnProperty(d)&&c.set(d,g(b[d]));return c};return e=function(a,b,c,d,g,h,i){var j=0,k="",l=null,m=d.message||0===d.message||d.message===!1,n=null;if(g){if("string"==typeof d)return void h.triggerEvent(d);if(Array.isArray(d)){for(j=0;j<d.length;j++)e(a,b,c,d[j],g,h,i);return}if(d.event&&(m||d.delay))return void(d.delay?i.push(d):h.trigger(d.event,d.message));d.get&&(n=d.get("true"),n&&e(a,b,c,n,g,h,i))}if(l=d.keys)for(j=l.length;j--;)k=l[j],"true"!==k&&f(k,b,c,d.get(k),g,h,i)},f=function(a,b,c,d,f,g,h){var i=f,j=!1,k="",l=!1;"!"===a.charAt(0)?(k=a.substring(1),l=b.get(k),j=l===!1,"outputs"!==a&&c.get(k)!==l&&(i=!0)):(l=b.get(a),j=l===!0,"outputs"!==a&&c.get(a)!==l&&(i=!0)),(j||"outputs"===a)&&e(a,b,c,d,i,g,h)},platypus.createComponentClass({id:"LogicStateMachine",properties:{inputs:null,outputs:null},initialize:function(a){var e=0,f=this.inputs,h="",i=null,j=null,k=null,l=a["sustained-inputs"],m=this.owner.state;if(this.state=m,f){k=Array.setUp();for(h in f)if(f.hasOwnProperty(h))for(j=b.setUp(f[h]),k.push(j),this.addEventListener(h,c.bind(this,j,m)),i=j.keys,e=i.length;e--;)m.set(i[e],!1);this.stateObjects=k}if(this.sustainedState=b.setUp(),l)for(h in l)l.hasOwnProperty(h)&&(this.addEventListener(h,d.bind(this,l[h],this.sustainedState)),this.sustainedState.set(l[h],!1),m.set(l[h],!1));this.snapshot=b.setUp(),this.last=b.setUp(),this.queueTimes=Array.setUp(),this.queue=Array.setUp(),this.outputs=g(this.outputs)},events:{"handle-logic":function(a){for(var b=this.sustainedState,c="",d=b.keys,e=d.length,f=this.state;e--;)c=d[e],f.set(c,b.get(c)),b.set(c,!1);for(e=this.queue.length;e--;)this.queueTimes[e]-=a.delta,this.queueTimes[e]<=0&&(this.owner.trigger(this.queue[e].event,this.queue[e].message),this.queueTimes.greenSplice(e),this.queue.greenSplice(e))},"update-state":function(a){this.state.update(a)},"state-changed":function(a){var b=0,c=null,d=this.snapshot;if(this.outputs){for(d.update(a),c=Array.setUp(),f("outputs",d,this.last,this.outputs,!1,this.owner,c),b=c.length;b--;)this.queue.push(c[b]),this.queueTimes.push(c[b].delay);c.recycle(),this.last.update(d)}}},methods:{destroy:function(){var a=0,b=this.stateObjects;if(this.queueTimes.recycle(),this.queue.recycle(),b){for(a=b.length;a--;)b[a].recycle();b.recycle(),this.stateObjects=null}this.sustainedState.recycle(),this.snapshot.recycle(),this.last.recycle(),this.state=null,this.inputs=null}}})}(),function(){"use strict";return platypus.createComponentClass({id:"LogicSwitch",initialize:function(a){this.state=this.owner.state,this.pressed=!1,this.wasPressed=this.pressed,this.sticky=a.sticky||!1,this.state.set("pressed",!1),this.initialPress=!0},events:{"handle-logic":function(){this.sticky?this.pressed&&!this.wasPressed&&(this.state.set("pressed",!0),this.wasPressed=!0,this.owner.triggerEvent("switch-on")):(this.pressed!==this.wasPressed&&(this.pressed?(this.state.set("pressed",!0),this.owner.triggerEvent("switch-on")):(this.state.set("pressed",!1),this.owner.triggerEvent("switch-off"))),this.wasPressed=this.pressed,this.pressed=!1)},"switch-pressed":function(){this.pressed=!0,this.initialPress&&(this.owner.triggerEvent("initial-press"),this.initialPress=!1)}},methods:{destroy:function(){this.state=null}}})}(),function(){"use strict";var a=include("platypus.Vector");return platypus.createComponentClass({id:"LogicTeleportee",initialize:function(){this.teleportDestination=a.setUp(),this.teleportNow=!1,this.DestinationSet=!1,this.message={position:this.teleportDestination}},events:{"handle-logic":function(){this.teleportNow&&(this.owner.triggerEvent("relocate-entity",this.message),this.teleportNow=!1,this.owner.triggerEvent("teleport-complete"))},teleport:function(){this.destinationSet&&(this.teleportNow=!0)},"set-destination":function(a){this.setDestination(a)},"hit-telepoint":function(a){this.setDestination(a.entity)}},methods:{setDestination:function(a){this.teleportDestination.setXYZ(a.x,a.y,this.owner.z),this.destinationSet=!0},destroy:function(){this.teleportDestination.recycle()}}})}(),
function(){"use strict";return platypus.createComponentClass({id:"LogicTeleporter",initialize:function(a){this.destination=null,this.linkId=this.owner.teleportId||a.teleportId,this.facing=this.owner.facing||a.facing||!1,this.facing&&this.owner.state.set("facing-"+this.facing,!0)},events:{"peer-entity-added":function(a){this.destination||a.linkId!==this.linkId||(this.destination=a)},"teleport-entity":function(a){switch(this.facing){case"up":a.y<0&&a.entity.triggerEvent("teleport",this.destination);break;case"right":a.x>0&&a.entity.triggerEvent("teleport",this.destination);break;case"down":a.y>0&&a.entity.triggerEvent("teleport",this.destination);break;case"left":a.x<0&&a.entity.triggerEvent("teleport",this.destination);break;default:a.entity.triggerEvent("teleport",this.destination)}}},methods:{destroy:function(){this.destination=null}}})}(),function(){"use strict";return platypus.createComponentClass({id:"LogicTimer",initialize:function(a){this.time=this.owner.time||a.time||0,this.prevTime=this.time,this.alarmTime=this.owner.alarmTime||a.alarmTime||0,this.isInterval=this.owner.isInterval||a.isInterval||!1,this.alarmMessage=this.owner.alarmMessage||a.alarmMessage||"",this.updateMessage=this.owner.updateMessage||a.updateMessage||"",this.isOn=this.owner.on||a.on||!0,this.isIncrementing=this.owner.isIncrementing||a.isIncrementing||!0,this.maxTime=this.owner.maxTime||a.maxTime||36e5},events:{"handle-logic":function(a){this.isOn&&(this.prevTime=this.time,this.isIncrementing?this.time+=a.delta:this.time-=a.delta,Math.abs(this.time)>this.maxTime&&(this.time>0?this.time=this.maxTime:this.time<0&&(this.time=-this.maxTime),this.triggerEvent("stop-timer")),0!==this.alarmTime&&(this.isInterval?this.isIncrementing?Math.floor(this.time/this.alarmTime)>Math.floor(this.prevTime/this.alarmTime)&&this.owner.trigger(this.alarmMessage):Math.floor(this.time/this.alarmTime)<Math.floor(this.prevTime/this.alarmTime)&&this.owner.trigger(this.alarmMessage):this.isIncrementing?this.time>this.alarmTime&&this.prevTime<this.alarmTime&&this.owner.trigger(this.alarmMessage):this.time<this.alarmTime&&this.prevTime>this.alarmTime&&this.owner.trigger(this.alarmMessage))),this.owner.trigger(this.updateMessage,{time:this.time})},"set-timer":function(a){this.time=a.time},"start-timer":function(){this.isOn=!0},"stop-timer":function(){this.isOn=!1}}})}(),function(){"use strict";return platypus.createComponentClass({id:"LogicWindUpRacer",properties:{speed:.3,raceTime:5e3,windTime:500},initialize:function(){var a=this.owner.state;this.windProgress=0,this.winding=!1,this.racing=!1,this.blocked=!1,this.right=!1,this.left=!1,this.state=a,a.set("windingUp",!1),a.set("racing",!1),a.set("blocked",!1)},events:{"handle-logic":function(a){var b=this.state;this.racing?!this.blocked&&this.right&&b.get("right")?(this.owner.x+=this.speed*a.delta,this.owner.triggerEvent("racing")):!this.blocked&&this.left&&b.get("left")?(this.owner.x-=this.speed*a.delta,this.owner.triggerEvent("racing")):(this.racing=!1,this.owner.triggerEvent("stopped-racing")):this.winding?((this.right&&b.get("right")||this.left&&b.get("left"))&&(this.windProgress+=a.delta),this.owner.triggerEvent("winding",this.windProgress/this.windTime)):this.windProgress&&(this.windProgress>=this.windTime&&(this.racing=!0),this.windProgress=0,this.owner.triggerEvent("stopped-winding")),b.set("windingUp",this.winding),b.set("racing",this.racing),b.set("blocked",this.blocked),this.blocked=!1},"stop-racing":function(){this.racing=!1,this.owner.triggerEvent("stopped-racing")},"wind-up":function(a){this.winding=!a||a.pressed!==!1,this.right=this.state.get("right"),this.left=this.state.get("left")},"hit-solid":function(a){a.x&&this.racing&&(this.right&&a.x>0||this.left&&a.x<0)&&(this.blocked=!0,this.owner.triggerEvent("blocked",a))}},methods:{destroy:function(){this.state.set("windingUp",!1),this.state.set("racing",!1),this.state.set("blocked",!1),this.state=null}}})}(),function(){"use strict";var a=include("platypus.Vector"),b=function(){return!0},c=function(a,c){var d=b,e=b,f=b,g=a.owner.state,h=c.controlState,i=c.instantState,j=c.instantSuccess;h&&(e=function(){return g.get(h)}),a.instant||i?(i&&(f=function(){return g.get(i)}),a.instant=!0,a.update=function(){var a=f(),b=e();if(this.activeVelocity){if(this.enact&&!b&&(this.ready=!1),this.ready&&this.enact&&a)this.ready=!1,this.velocity.setVector(this.instant),j&&this.owner.triggerEvent(j);else if(this.ready||this.enact&&a){if(b)return null}else this.ready=!0,this.decay();return this.velocity}return null}):a.update=function(a){return this.activeVelocity&&e()?(this.activeAcceleration&&d()&&this.move(a),this.velocity):null}};return platypus.createComponentClass({id:"Motion",properties:{orient:!0,acceleration:0,activeAcceleration:!0,activeVelocity:!0,maxMagnitude:1/0,controlState:"",instant:!1,instantState:"",instantSuccess:"",instantDecay:null,velocity:0,stopOnCollision:!0,drag:-1,friction:-1},initialize:function(b){this.acceleration||(this.activeAcceleration=!1),this.acceleration=a.setUp(this.acceleration),this.velocity=a.setUp(this.velocity),this.triggered=!1,this.ready=!0,"number"==typeof this.instantDecay?this.capMagnitude=this.velocity.magnitude()*this.instantDecay:this.capMagnitude=-1,c(this,b),this.instant&&(this.enact=!1,this.instant=a.setUp(this.velocity),this.velocity.setXYZ(0,0,0)),this.orient&&(this.owner.triggerEvent("orient-vector",this.velocity),this.owner.triggerEvent("orient-vector",this.acceleration))},events:{"control-velocity":function(a){this.activeVelocity=a&&a.pressed!==!1},"stop-velocity":function(){this.activeVelocity=!1},"start-velocity":function(){this.activeVelocity=!0},"control-acceleration":function(a){this.activeAcceleration=a&&a.pressed!==!1},"stop-acceleration":function(){this.activeAcceleration=!1},"start-acceleration":function(){this.activeAcceleration=!0},"instant-motion":function(a){this.enact=a&&a.triggered!==!1},"instant-begin":function(){this.enact=!0},"instant-end":function(){this.enact=!1},"set-motion":function(a){a.acceleration&&this.acceleration.set(a.acceleration),a.velocity&&(this.velocity.set(a.velocity),"number"==typeof this.instantDecay?this.capMagnitude=this.velocity.magnitude()*this.instantDecay:this.capMagnitude=-1),"number"==typeof a.maxMagnitude&&(this.maxMagnitude=a.maxMagnitude)}},methods:{move:function(b){var c=a.setUp(this.acceleration).multiply(b);return this.velocity.add(c),c.recycle(),this.velocity.magnitude()>this.maxMagnitude&&this.velocity.normalize().multiply(this.maxMagnitude),this.velocity},decay:function(){this.capMagnitude>=0&&this.velocity.magnitude()>this.capMagnitude&&this.velocity.normalize().multiply(this.capMagnitude)},destroy:function(){this.orient&&(this.owner.triggerEvent("remove-vector",this.acceleration),this.owner.triggerEvent("remove-vector",this.velocity)),this.acceleration.recycle(),this.velocity.recycle(),this.instant&&this.instant.recycle()}},publicMethods:{}})}(),function(){"use strict";var a=include("platypus.Vector"),b=a.setUp(),c=function(a,b,c,d){return a&&b!==c?c>b?Math.min(b+a*d,c):Math.max(b-a*d,c):b},d=function(a,b){var d=this.maxMagnitudeInterim=c(this.maxMagnitudeDelta,this.maxMagnitudeInterim,this.maxMagnitude,b);a.magnitude()>d&&a.normalize().multiply(d)},e=function(a,b){var d=this.maxMagnitude,e=this.maxMagnitudeDelta,f=this.maxMagnitudeInterim;f.up=c(e,f.up,d.up,b),f.right=c(e,f.right,d.right,b),f.down=c(e,f.down,d.down,b),f.left=c(e,f.left,d.left,b),a.x>0?a.x>f.right&&(a.x=f.right):a.x<0&&a.x<-f.left&&(a.x=-f.left),a.y>0?a.y>f.down&&(a.y=f.down):a.y<0&&a.y<-f.up&&(a.y=-f.up)};return platypus.createComponentClass({id:"Mover",properties:{ground:[0,1]},publicProperties:{movers:[],gravity:0,jump:0,speed:0,drag:.01,friction:.06,maxMagnitude:1/0,maxMagnitudeDelta:0,reorientVelocities:!0},initialize:function(){var b=1/0,c=this.maxMagnitude,f=this.owner.state;platypus.Vector.assign(this.owner,"position","x","y","z"),platypus.Vector.assign(this.owner,"velocity","dx","dy","dz"),this.position=this.owner.position,this.velocity=this.owner.velocity,this.lastVelocity=a.setUp(this.velocity),this.collision=null,this.pause=!1,this.moversCopy=this.movers,this.movers=Array.setUp(),this.velocityChanges=Array.setUp(),this.velocityDirections=Array.setUp(),this.ground=a.setUp(this.ground),this.state=f,f.set("grounded",!1),Object.defineProperty(this.owner,"maxMagnitude",{get:function(){return b},set:function(a){"number"==typeof a?(this.clamp=d,b=a,this.maxMagnitudeDelta||(this.maxMagnitudeInterim=a)):(this.clamp=e,"number"==typeof b&&(b={up:b,right:b,down:b,left:b}),"number"==typeof a.up&&(b.up=a.up),"number"==typeof a.right&&(b.right=a.right),"number"==typeof a.down&&(b.down=a.down),"number"==typeof a.left&&(b.left=a.left),"number"==typeof this.maxMagnitudeInterim?this.maxMagnitudeDelta?this.maxMagnitudeInterim={up:this.maxMagnitudeInterim,right:this.maxMagnitudeInterim,down:this.maxMagnitudeInterim,left:this.maxMagnitudeInterim}:this.maxMagnitudeInterim={up:b.up,right:b.right,down:b.down,left:b.left}:this.maxMagnitudeDelta||(this.maxMagnitudeInterim.up=b.up,this.maxMagnitudeInterim.right=b.right,this.maxMagnitudeInterim.down=b.down,this.maxMagnitudeInterim.left=b.left))}.bind(this)}),this.maxMagnitudeInterim=0,this.maxMagnitude=c},events:{"component-added":function(a){"Motion"===a.type&&this.movers.push(a)},"component-removed":function(a){var b=0;"Motion"===a.type&&(b=this.movers.indexOf(a),b>=0&&this.movers.greenSplice(b))},load:function(){var a=0,b=this.moversCopy;for(delete this.moversCopy,a=0;a<b.length;a++)this.addMover(b[a]);this.externalForces=this.addMover({velocity:[0,0,0],orient:!1}).velocity,this.speed&&(isNaN(this.speed)||(this.speed=[this.speed,0,0]),this.speed=this.addMover({velocity:this.speed,controlState:"moving"}).velocity),this.gravity&&(isNaN(this.gravity)||(this.gravity=[0,this.gravity,0]),this.gravity=this.addMover({acceleration:this.gravity,orient:!1,aliases:{gravitate:"control-acceleration"}}).acceleration),this.jump&&(isNaN(this.jump)||(this.jump=[0,this.jump,0]),this.jump=this.addMover({velocity:this.jump,instant:!0,controlState:"grounded",state:"jumping",instantSuccess:"just-jumped",instantDecay:.2,aliases:{jump:"instant-motion"}}).instant)},"handle-movement":function(b){var c=b.delta,d=null,e=this.state,f=null,g=this.velocity,h=this.position,i=this.movers,j=i.length;if(!e.get("paused")&&!this.paused){for(g.equals(this.lastVelocity,2)||this.externalForces.addVector(g).subtractVector(this.lastVelocity),g.setXYZ(0,0,0);j--;)d=i[j].update(c),d&&(this.grounded?-1!==i[j].friction?d.multiply(1-i[j].friction):d.multiply(1-this.friction):-1!==i[j].drag?d.multiply(1-i[j].drag):d.multiply(1-this.drag),g.add(d));this.clamp(g,c),this.lastVelocity.setVector(g),f=a.setUp(g).multiply(c),h.add(f),f.recycle(),e.set("grounded",this.grounded),this.grounded=!1}},"hit-solid":function(b){var c=0,d=0,e=b.entity&&b.entity.velocity,f=b.direction,g=!0,h=this.velocityChanges,i=this.velocityDirections,j=h.length;if(f.dot(this.ground)>0&&(this.grounded=!0),c=this.velocity.scalarProjection(f),c>0){for(e?(d=Math.max(e.scalarProjection(f),0),c=c>d?d:0):c=0;j--;)if(c<h[j]&&i[j].dot(f)>0){h[j]=c,i[j].setVector(f),g=!1;break}g&&(h.push(c),i.push(a.setUp(f)))}},"handle-post-collision-logic":function(){var a=null,c=this.movers,d=this.velocityChanges,e=this.velocityDirections,f=d.length,g=c.length,h=null,i=0,j=0,k=null,l=b;if(f){for(k=Array.setUp();g--;)h=c[g],h.stopOnCollision&&k.push(h);for(;f--;){for(a=e[f],i=d[f],g=k.length,j=i/g;g--;)h=k[g],l.setVector(a).normalize().multiply(j-h.velocity.scalarProjection(a)),h.velocity.add(l);a.recycle()}d.length=0,e.length=0}},"set-mover":function(a){"number"==typeof a.maxMagnitudeDelta&&(this.maxMagnitudeDelta=a.maxMagnitudeDelta),a.maxMagnitude&&(this.maxMagnitude=a.maxMagnitude)},"pause-movement":function(){this.paused=!0},"unpause-movement":function(){this.paused=!1},"orientation-updated":function(a){this.reorientVelocities||this.lastVelocity.multiply(a)}},methods:{destroy:function(){var a=0,b=this.maxMagnitude;for(a=this.movers.length-1;a>=0;a--)this.removeMover(this.movers[a]);this.movers.recycle(),this.ground.recycle(),this.lastVelocity.recycle(),this.velocityChanges.recycle(),this.velocityDirections.recycle(),delete this.owner.maxMagnitude,this.owner.maxMagnitude=b,this.state=null}},publicMethods:{addMover:function(a){var b=this.owner.addComponent(new platypus.components.Motion(this.owner,a));return b},removeMover:function(a){this.owner.removeComponent(a)}}})}(),function(){"use strict";return platypus.createComponentClass({id:"Node",publicProperties:{x:0,y:0,z:0},initialize:function(a){this.nodeId=a.nodeId||this.owner.nodeId||this.owner.id||String(Math.random()),"string"!=typeof this.nodeId&&this.nodeId.length&&(this.nodeId=a.nodeId.join("|")),this.owner.nodeId=this.nodeId,this.owner.isNode=!0,this.map=this.owner.map=this.owner.map||null,this.contains=this.owner.contains=Array.setUp(),this.edgesContain=this.owner.edgesContain=Array.setUp(),platypus.Vector.assign(this.owner,"position","x","y","z"),this.neighbors=this.owner.neighbors=a.neighbors||this.owner.neighbors||{}},events:{"add-neighbors":function(a){var b=0,c=null;for(c in a)a.hasOwnProperty(c)&&(this.neighbors[c]=a[c]);for(b=0;b<this.contains.length;b++)this.contains[b].triggerEvent("set-directions")},"remove-neighbor":function(a){var b=null,c=a;"string"!=typeof c&&(c=c.nodeId);for(b in this.neighbors)if(this.neighbors.hasOwnProperty(b))if("string"==typeof this.neighbors[b]){if(this.neighbors[b]===c){delete this.neighbors[b];break}}else if(this.neighbors[b].nodeId===c){delete this.neighbors[b];break}}},methods:{destroy:function(){this.contains.recycle(),this.edgesContain.recycle()}},publicMethods:{getNode:function(a){var b=null;if(!this.map&&this.owner.map&&(this.map=this.owner.map),this.neighbors[a]){if(b=this.neighbors[a],b.isNode)return b;if("string"==typeof b){if(b=this.map.getNode(b))return this.neighbors[a]=b,b}else if(b.length&&(b=this.map.getNode(b.join("|"))))return this.neighbors[a]=b,b;return null}return null},addToNode:function(a){var b=0;for(b=0;b<this.contains.length;b++)if(this.contains[b]===a)return!1;return this.contains.push(a),a},removeFromNode:function(a){var b=0;for(b=0;b<this.contains.length;b++)if(this.contains[b]===a)return this.contains.greenSplice(b);return!1},addToEdge:function(a){var b=0;for(b=0;b<this.edgesContain.length;b++)if(this.edgesContain[b]===a)return!1;return this.edgesContain.push(a),a},removeFromEdge:function(a){var b=0;for(b=0;b<this.edgesContain.length;b++)if(this.edgesContain[b]===a)return this.edgesContain.greenSplice(b);return!1}}})}(),function(){"use strict";var a=include("platypus.Vector"),b=function(a,b){a.id?"string"==typeof a.id?this.id=a.id:Array.isArray(a.id)?this.id=a.id.join("|"):this.id=String(Math.random()):this.id=String(Math.random()),this.isNode=!0,this.map=b,this.contains=Array.setUp(),this.type=a.type||"",this.x=a.x||0,this.y=a.y||0,this.z=a.z||0,this.neighbors=a.neighbors||{}},c=b.prototype;return c.getNode=function(a){var b=null;if(this.neighbors[a]){if(b=this.neighbors[a],b.isNode)return b;if("string"==typeof b){if(b=this.map.getNode(b))return this.neighbors[a]=b,b}else if(Array.isArray(b)&&(b=this.map.getNode(b.join("|"))))return this.neighbors[a]=b,b;return null}return null},c.add=function(a){var b=0;for(b=0;b<this.contains.length;b++)if(this.contains[b]===a)return!1;return this.contains.push(a),a},c.remove=function(a){var b=0;for(b=0;b<this.contains.length;b++)if(this.contains[b]===a)return this.contains.greenSplice(b);return!1},c.recycle=function(){this.contains.recycle(),this.recycle()},recycle.add(b,!!springroll.Debug,"Node"),platypus.createComponentClass({id:"NodeMap",publicProperties:{map:[]},initialize:function(){var a=0,c=this.map;for(this.map=Array.setUp(),this.nodes={},this.residentsAwaitingNode=Array.setUp(),a=0;a<c.length;a++)this.addNode(b.setUp(c[a],this))},events:{"add-node":function(a){var c=0,d=null,e=null;for(a.isNode?(e=a,a.map=this):e=b.setUp(a,this),this.addNode(e),c=this.residentsAwaitingNode.length-1;c>=0;c--)d=this.residentsAwaitingNode[c],e.id===d.nodeId&&(this.residentsAwaitingNode.greenSplice(c),d.node=this.getNode(d.nodeId),d.triggerEvent("on-node",d.node))},"child-entity-added":function(a){a.isNode?this.owner.triggerEvent("add-node",a):a.nodeId&&(a.node=this.getNode(a.nodeId),a.node?a.triggerEvent("on-node",a.node):this.residentsAwaitingNode.push(a))}},methods:{addNode:function(a){this.map.push(a),this.nodes[a.id]=a},destroy:function(){var a=0;for(a=0;a<this.map.length;a++)this.map[a]instanceof platypus.Entity||this.map[a].recycle();this.map.recycle(),this.residentsAwaitingNode.recycle()}},publicMethods:{getNode:function(){var a=0,b="",c="",d=arguments;if(1===d.length){if(d[0].isNode)return d[0];Array.isArray(d[0])&&(d=d[0])}for(a=0;a<d.length;a++)b+=c+d[a],c="|";return this.nodes[b]||null},getClosestNode:function(b,c,d){var e=0,f=0,g=a.setUp(b),h=a.setUp(),i=0,j=c||this.map,k=null,l=1/0;for(e=0;e<j.length;e++)if(i=h.setVector(g).subtractVector(j[e].position).magnitude(),l>i){if(d&&(f=d.indexOf(j[e]),f>=0))break;l=i,k=j[e]}return g.recycle(),h.recycle(),k}}})}(),function(){"use strict";var a=function(a,b,c){return function(){var d=b.getNode(a);return this.isPassable(d)?(this.destinationNodes.length=0,this.destinationNodes.push(d),this.node?this.onEdge(d):this.distance=0,this.progress=0,this.setState("going-"+c),!0):!1}},b=function(a,b){var c=b.x-a.x,d=b.y-a.y,e=b.z-a.z;return Math.sqrt(c*c+d*d+e*e)},c=function(a,b,c,d){var e=b.x-a.x,f=b.y-a.y,g=0;return a.rotation&&b.rotation?(e=(a.rotation+180)%360,f=(b.rotation+180)%360,(e*(1-d)+f*d+180)%360):c?(g=Math.acos(e/c),0>f&&(g=2*Math.PI-g),180*g/Math.PI):g},d=function(a,b,c,d){return b*(1-a)+c*a+d},e=function(a,b){var c=0,d=0,e=!1;if(null===b)return!0;for(c=0;c<a.length;c++){for(d=0;d<b.length;d++)a[c].type===b[d]&&(e=!0);if(!e)return!1;e=!1}return!0};return platypus.createComponentClass({id:"NodeResident",publicProperties:{speed:0},initialize:function(a){var c=a.offset||this.owner.nodeOffset||{};this.nodeId=this.owner.nodeId=a.nodeId||this.owner.nodeId,this.neighbors={},this.friendlyNodes=a.nodes||null,this.friendlyEntities=a.shares||null,this.snapToNodes=a.snapToNodes||!1,this.updateOrientation=a.updateOrientation||!1,this.distance=0,this.buffer=a.buffer||0,this.progress=0,this.offset={x:c.x||0,y:c.y||0,z:c.z||0},this.destinationNodes=Array.setUp(),this.algorithm=a.algorithm||b,this.state=this.owner.state,this.state.set("moving",!1),this.state.set("on-node",!1),this.currentState=""},events:{"set-algorithm":function(a){this.algorithm=a||b},"handle-logic":function(a){var b=0,e=0,f=0,g=null,h=null;if(this.owner.node||(h=Array.setUp(this.owner.x,this.owner.y),this.owner.triggerEvent("on-node",this.owner.parent.getClosestNode(h)),h.recycle(),this.owner.triggerEvent("in-location",this.owner)),this.followEntity?(g=this.followEntity.node||this.followEntity,g&&g.isNode&&g!==this.node?(this.lag=0,this.state.set("moving",this.gotoNode()),this.followDistance&&(f=this.lag)):this.followEntity=null):f=this.speed*a.delta,this.blocked&&(this.blocked=!1,this.goingToNode&&this.owner.triggerEvent("goto-closest-node",this.goingToNode)),this.destinationNodes.length){if(this.state.set("moving",0!==this.speed),this.node)this.onEdge(this.destinationNodes[0]);else if(!this.lastNode&&(this.owner.triggerEvent("on-node",this.destinationNodes[0]),this.destinationNodes.greenSplice(0),!this.destinationNodes.length))return void this.state.set("moving",!1);if(this.snapToNodes){for(b=0;b<this.destinationNodes.length;b++)this.owner.triggerEvent("on-node",this.destinationNodes[b]);this.destinationNodes.length=0}else for(;this.destinationNodes.length&&f;)this.progress+f>=this.distance?(g=this.destinationNodes[0],f-=this.distance-this.progress,this.progress=0,this.destinationNodes.greenSplice(0),this.owner.triggerEvent("on-node",g),this.destinationNodes.length&&f&&this.onEdge(this.destinationNodes[0])):(this.progress+=f,e=this.progress/this.distance,this.owner.x=d(e,this.lastNode.x,this.destinationNodes[0].x,this.offset.x),this.owner.y=d(e,this.lastNode.y,this.destinationNodes[0].y,this.offset.y),this.owner.z=d(e,this.lastNode.z,this.destinationNodes[0].z,this.offset.z),this.updateOrientation&&(this.owner.rotation=c(this.lastNode,this.destinationNodes[0],this.distance,e)),f=0)}else this.state.set("moving",!1)},"on-node":function(a){var b=0,c=null;for(this.owner.node=this.node=a,this.node.removeFromEdge(this.owner),this.lastNode&&this.lastNode.removeFromEdge(this.owner),this.node.addToNode(this.owner),this.setState("on-node"),this.owner.x=this.node.x+this.offset.x,this.owner.y=this.node.y+this.offset.y,this.owner.z=this.node.z+this.offset.z,this.updateOrientation&&this.node.rotation&&(this.owner.rotation=this.node.rotation),this.owner.triggerEvent("set-directions"),this.friendlyNodes&&this.friendlyNodes[a.type]&&this.owner.trigger(this.friendlyNodes[a.type],a),c=a.contains,b=0;b<c.length;b++)this.owner!==c[b]&&(c[b].triggerEvent("with-"+this.owner.type,this.owner),this.owner.triggerEvent("with-"+c[b].type,c[b]))},"leave-node":function(){this.node&&(this.node.removeFromNode(this.owner),this.owner.triggerEvent("left-node",this.node),this.owner.triggerEvent("remove-directions")),this.lastNode=this.node,this.node=null},"goto-node":function(a){this.gotoNode(a)},follow:function(a){a.entity?(this.followDistance=a.distance,this.followEntity=a.entity):(this.followDistance=0,this.followEntity=a)},"goto-closest-node":function(){var a=function(a,b){var c=0;for(c=0;c<b.length;c++)if(b[c]===a)return!0;return!1},b=function(a,b){return a.type===b},c=function(a,b){return a.type===b.type};return function(d){var e=null,f=20,g=this.node||this.lastNode,h=null,i=d.steps||0,j=null;this.goingToNode=d,h="string"==typeof d?b:"string"==typeof d.type?c:a,g&&d&&!h(g,d)&&(j=Array.setUp(),e=this.traverseNode({depth:f,origin:g,position:g,test:h,destination:d,nodes:j,shortestPath:1/0,distance:0,found:!1,algorithm:this.algorithm,blocked:!1}),e.distance-=this.progress,e.found?this.followEntity&&this.followDistance?e.distance+(this.followEntity.progress||0)>this.followDistance?(this.lag=e.distance+(this.followEntity.progress||0)-this.followDistance,this.setPath(e,i)):this.lag=0:this.setPath(e,i):e.blocked&&(this.blocked=!0),j.recycle())}}(),"set-directions":function(){var b="",c=0,d=null,e=this.node,f=null;this.owner.triggerEvent("remove-directions");for(b in e.neighbors)if(e.neighbors.hasOwnProperty(b)&&(this.neighbors[b]=a(e.neighbors[b],e.map,b),this.addEventListener(b,this.neighbors[b]),f=e.map.getNode(e.neighbors[b])))for(d=f.contains,c=0;c<d.length;c++)d[c].triggerEvent("next-to-"+this.owner.type,this.owner),this.owner.triggerEvent("next-to-"+d[c].type,d[c])},"remove-directions":function(){var a="";for(a in this.neighbors)this.neighbors.hasOwnProperty(a)&&(this.removeEventListener(a,this.neighbors[a]),delete this.neighbors[a])}},methods:{gotoNode:function(){var a=function(a,b){return a===b};return function(b){var c=null,d=20,e=this.node||this.lastNode,f=null,g=!1;return!b&&this.followEntity&&(b=this.followEntity.node||this.followEntity.lastNode||this.followEntity),e&&b&&this.node!==b&&(f=Array.setUp(),c=this.traverseNode({depth:d,origin:e,position:e,test:a,destination:b,nodes:f,shortestPath:1/0,distance:0,found:!1,algorithm:this.algorithm,blocked:!1}),c.distance-=this.progress,c.found?this.followEntity&&this.followDistance?c.distance+(this.followEntity.progress||0)>this.followDistance?(this.lag=c.distance+(this.followEntity.progress||0)-this.followDistance,this.setPath(c),g=!0):this.lag=0:(this.setPath(c),g=!0):c.blocked&&(this.blocked=!0),f.recycle()),g}}(),isPassable:function(a){return a&&this.node!==a&&(!this.friendlyNodes||"undefined"!=typeof this.friendlyNodes[a.type])&&(!a.contains.length||e(a.contains,this.friendlyEntities))},traverseNode:function(a){var c=1,d="",e=a.position.map,f=null,g=null,h=null,i=null,j=a.algorithm||b,k={shortestPath:1/0,found:!1,blocked:!1},l=!0,m=!1;if(0===a.depth||a.distance>a.shortestPath)return a;if(a.test(a.position,a.destination))return a.found=!0,a.shortestPath=a.distance,a;for(h=a.nodes,c=1;c<h.length-1;c++)if(h[c]===a.position)return a;f=a.position.neighbors;for(d in f)f.hasOwnProperty(d)&&(g=e.getNode(f[d]),m=!0,this.isPassable(g)&&(h=a.nodes.greenSlice(),h.push(g),i=this.traverseNode({depth:a.depth-1,origin:a.origin,position:g,destination:a.destination,test:a.test,algorithm:j,nodes:h,shortestPath:a.shortestPath,distance:a.distance+j(a.position,g),gateway:a.gateway||d,found:!1,blocked:!1}),h.recycle(),i.found&&k.shortestPath>i.shortestPath&&(k=i),l=!1));return k.blocked=m&&l,k},setPath:function(a,b){a.nodes[0]===this.node&&a.nodes.greenSplice(0),this.destinationNodes.recycle(),this.destinationNodes=a.nodes.greenSlice(),b&&(this.destinationNodes.length=Math.min(b,this.destinationNodes.length))},setState:function(a){"on-node"===a?this.state.set("on-node",!0):(this.state.set("on-node",!1),this.currentState&&this.state.set(this.currentState,!1),this.currentState=a,this.state.set(a,!0))},onEdge:function(a){this.distance=b(this.node,a),this.updateOrientation&&(this.owner.rotation=c(this.node,a,this.distance,this.progress/this.distance)),this.node.addToEdge(this.owner),a.addToEdge(this.owner),this.owner.triggerEvent("leave-node")},destroy:function(){this.destinationNodes.recycle(),this.state=null}}})}(),function(){"use strict";var a=include("platypus.Data"),b=include("platypus.Vector"),c=b.setUp(0,0,1),d=b.setUp(1,0,0),e={horizontal:[[-1,0,0],[0,1,0],[0,0,-1]],vertical:[[1,0,0],[0,-1,0],[0,0,-1]],diagonal:[[0,1,0],[1,0,0],[0,0,-1]],"diagonal-inverse":[[0,-1,0],[-1,0,0],[0,0,-1]],"rotate-90":[[0,-1,0],[1,0,0],[0,0,1]],"rotate-180":[[-1,0,0],[0,-1,0],[0,0,1]],"rotate-270":[[0,1,0],[-1,0,0],[0,0,1]]},f=function(){var a=function(a,b,c){var d=0,e=0;for(d=0;d<a.length;d++)e+=a[d]*c[d][b];return e};return function(b,c,d){var e=0,f=0,g=Array.setUp();for(e=0;e<b.length;e++)for(f=0;f<b[0].length;f++)g.push(a(b[e],f,c));for(e=0;e<b.length;e++)for(f=0;f<b[0].length;f++)d[e][f]=g.greenSplice(0);g.recycle()}}(),g=function(a){var b=0,c=0;for(b=0;3>b;b++)for(c=0;3>c;c++)b===c?a[b][c]=1:a[b][c]=0;return a};return platypus.createComponentClass({id:"Orientation",publicProperties:{scaleX:1,scaleY:1,rotation:0,orientation:0,orientationMatrix:null},initialize:function(){var e=function(a,e){var h=b.setUp(1,0,0),i=a.owner,j=Array.setUp(Array.setUp(1,0,0),Array.setUp(0,1,0),Array.setUp(0,0,1));return Object.defineProperty(i,"orientationMatrix",{get:function(){return f(a.matrixTween,a.matrix,g(j)),j},enumerable:!0}),delete i.orientation,Object.defineProperty(i,"orientation",{get:function(){return h.signedAngleTo(d,c)},set:function(a){h.setVector(d).rotate(a)},enumerable:!0}),e&&("number"!=typeof e?h.set(e):h.rotate(e)),h};return function(){this.loadedOrientationMatrix=this.orientationMatrix,this.matrix=Array.setUp(Array.setUp(1,0,0),Array.setUp(0,1,0),Array.setUp(0,0,1)),this.matrixTween=Array.setUp(Array.setUp(1,0,0),Array.setUp(0,1,0),Array.setUp(0,0,1)),this.relocationMessage=a.setUp("position",null),this.vectors=Array.setUp(),this.inverses=Array.setUp(),this.tweens=Array.setUp(),this.orientationVector=e(this,this.orientation),this.owner.triggerEvent("orient-vector",this.orientationVector),this.owner.state.set("reorienting",!1)}}(),events:{load:function(){this.loadedOrientationMatrix?this.transform(this.loadedOrientationMatrix):(this.scaleX&&this.scaleX<0&&(this.scaleX=-this.scaleX,this.transform("horizontal")),this.scaleY&&this.scaleY<0&&(this.scaleY=-this.scaleY,this.transform("vertical")),this.rotation&&((this.rotation+270)%360===0?(this.rotation=0,this.transform("rotate-90")):(this.rotation+180)%360===0?(this.rotation=0,this.transform("rotate-180")):(this.rotation+90)%360===0&&(this.rotation=0,this.transform("rotate-270")))),delete this.loadedOrientationMatrix},"handle-logic":function(a){var b=this.tweens.length,c=a.delta,d=this.owner.state,e=null,f=null,h=this.relocationMessage;if(b){for(e=Array.setUp(),d.set("reorienting",!0),g(this.matrixTween);b--;)this.updateTween(this.tweens[b],c)&&e.push(this.tweens.greenSplice(b));for(b=this.vectors.length;b--;)this.updateVector(this.vectors[b],this.inverses[b]);for(b=e.length;b--;)f=e[b],this.transform(f.endMatrix),f.anchor&&(f.offset.multiply(f.endMatrix).addVector(f.anchor),h.position=f.offset,this.owner.triggerEvent("relocate-entity",h),f.recycleOffset&&f.offset.recycle()),f.onFinished(f.endMatrix),f.recycle();e.recycle()}else d.get("reorienting")&&(g(this.matrixTween),d.set("reorienting",!1))},"complete-tweens":function(){var a=0;for(a=0;a<this.tweens.length;a++)this.tweens[a].time=this.tweens[a].endTime},"drop-tweens":function(){var a=0;for(a=this.tweens.length;a--;)this.tweens[a].offset&&this.tweens[a].offset.recycle();for(this.tweens.length=0,a=this.vectors.length;a--;)this.updateVector(this.vectors[a],this.inverses[a])},"orient-vector":function(a){var c=a.aligned||!1;a.vector&&(a=a.vector),-1===this.vectors.indexOf(a)&&(c||a.multiply(this.matrix),this.vectors.push(a),this.inverses.push(b.setUp()))},"remove-vector":function(a){var b=this.vectors.indexOf(a);b>=0&&(this.vectors.greenSplice(b),this.inverses.greenSplice(b).recycle())},"tween-transform":function(){var b=function(){},c=function(){return!0},d=function(a){return a};return function(f){var g=null,h=f.angle||0,i=f.matrix,j=a.setUp("transform",f.transform,"anchor",f.anchor,"endTime",f.time||0,"time",0,"tween",f.tween||d,"onFinished",f.onFinished||b,"beforeTick",f.beforeTick||c,"afterTick",f.onTick||f.afterTick||b);if(i||(i=e[f.transform]),j.endMatrix=i,!h&&0===f.transform.indexOf("rotate"))switch(f.transform){case"rotate-90":h=Math.PI/2;break;case"rotate-180":h=Math.PI;break;case"rotate-270":h=-Math.PI/2;break;default:g=f.transform.greenSplit("-"),h=g[1]/180*Math.PI,g.recycle()}j.angle=h,f.anchor&&(j.offset=f.offset,j.offset||(j.offset=this.owner.position.copy().subtractVector(f.anchor,2),j.recycleOffset=!0)),this.tweens.push(j)}}(),transform:function(a){this.transform(a)},"prepend-transform":function(a){this.transform(a)},"append-transform":function(a){this.transform(a,!0)},"replace-transform":function(a){this.replace(a)}},methods:{transform:function(a,b){Array.isArray(a)?this.multiply(a,b):"string"==typeof a&&e[a]&&this.multiply(e[a],b)},multiply:function(){return function(a,b){var c=0;for(b?f(this.matrix,a,this.matrix):f(a,this.matrix,this.matrix),c=0;c<this.vectors.length;c++)this.vectors[c].multiply(a),this.inverses[c].multiply(a);this.owner.triggerEvent("orientation-updated",a)}}(),replace:function(){var a=function(a,b,c,d){return a*d-b*c},b=function(a){var b=0,c=0;for(b=0;3>b;b++)c+=a[b][0]*a[(b+1)%3][1]*a[(b+2)%3][2],c-=a[b][2]*a[(b+1)%3][1]*a[(b+2)%3][0];return c},c=function(c){var d=Array.setUp(Array.setUp(),Array.setUp(),Array.setUp()),e=1/b(c);return d[0].push(a(c[1][1],c[1][2],c[2][1],c[2][2])*e),d[0].push(a(c[0][2],c[0][1],c[2][2],c[2][1])*e),d[0].push(a(c[0][1],c[0][2],c[1][1],c[1][2])*e),d[1].push(a(c[1][2],c[1][0],c[2][2],c[2][0])*e),d[1].push(a(c[0][0],c[0][2],c[2][0],c[2][2])*e),d[1].push(a(c[0][2],c[0][0],c[1][2],c[1][0])*e),d[2].push(a(c[1][0],c[1][1],c[2][0],c[2][1])*e),d[2].push(a(c[0][1],c[0][0],c[2][1],c[2][0])*e),d[2].push(a(c[0][0],c[0][1],c[1][0],c[1][1])*e),d};return function(a){var b=c(this.matrix);this.multiply(b),this.multiply(a),b.recycle(2)}}(),updateTween:function(){var a=function(a,b,c){return a*(1-c)+b*c};return function(c,d){var e=0,g=1,h=0,i=0,j=1,k=1,l=0,m=c.endMatrix,n=null,o=null,p=null;return c.beforeTick(c.time)&&(c.time+=d),c.time>=c.endTime?!0:(e=c.tween(c.time/c.endTime),c.angle?(l=e*c.angle,g=j=Math.cos(l),h=Math.sin(l),i=-h):(g=a(g,m[0][0],e),h=a(h,m[1][0],e),i=a(i,m[0][1],e),j=a(j,m[1][1],e),k=a(k,m[2][2],e)),n=Array.setUp(Array.setUp(g,i,0),Array.setUp(h,j,0),Array.setUp(0,0,k)),f(this.matrixTween,n,this.matrixTween),c.anchor&&(o=b.setUp(c.offset).multiply(1-e),p=b.setUp(c.offset).multiply(e),this.owner.triggerEvent("relocate-entity",{position:o.add(p).multiply(n).addVector(c.anchor)}),o.recycle(),p.recycle()),c.afterTick(e,n),
n.recycle(2),!1)}}(),updateVector:function(a,b){b.setVector(a.add(b)),a.multiply(this.matrixTween),b.subtractVector(a)},destroy:function(){this.vectors.recycle(),this.inverses.recycle(),this.tweens.recycle(),this.orientationVector.recycle(),this.orientationMatrix.recycle(2),this.matrix.recycle(2),this.matrixTween.recycle(2),this.relocationMessage.recycle()}}})}(),function(){"use strict";var a=function(a){return function(b,c){this.owner.trigger(a[Math.floor(Math.random()*a.length)],b,c)}};return platypus.createComponentClass({id:"RandomEvents",initialize:function(b){var c="";if(b.events)for(c in b.events)b.events.hasOwnProperty(c)&&this.addEventListener(c,a(b.events[c]))}})}(),function(){"use strict";return platypus.createComponentClass({id:"RelayFamily",properties:{events:null},initialize:function(){var a="";if(this.events)for(a in this.events)this.events.hasOwnProperty(a)&&this.addEventListener(a,this.broadcast.bind(this,null,this.events[a]));this.owner.familyLinks=Array.setUp(this.owner)},events:{"link-family":function(a){var b=0,c=this.owner.familyLinks,d=Array.setUp().union(a).union(c);for(b=0;b<d.length;b++)d[b].familyLinks=d;this.broadcast(a,"family-members-added",c),this.broadcast(c,"family-members-added",a),c.recycle()},"entity-created":function(a){a.triggerEvent("link-family",this.owner.familyLinks)||(a.addComponent(new platypus.components.RelayFamily(a,{})),a.triggerEvent("link-family",this.owner.familyLinks))}},methods:{broadcast:function(a){var b=a||this.owner.familyLinks,c=0,d=Array.prototype.greenSlice.call(arguments);for(d.greenSplice(0),c=0;c<b.length;c++)b[c].trigger.apply(b[c],d);d.recycle()},destroy:function(){var a=this.owner.familyLinks,b=a.indexOf(this.owner);b>=0&&a.greenSplice(b),this.broadcast(a,"family-member-removed",this.owner),this.events=null}}})}(),function(){"use strict";var a=function(){var a=platypus.game.currentScene;a.triggerOnChildren.apply(a,arguments)};return platypus.createComponentClass({id:"RelayGame",properties:{events:null},initialize:function(){var b="",c=this.events;if(c)for(b in c)c.hasOwnProperty(b)&&this.addEventListener(b,a.bind(this,c[b]))}})}(),function(){"use strict";var a=function(){var a=0,b=null;for(a=0;a<this.links.length;a++)b=this.links[a],b.trigger.apply(b,arguments)};return platypus.createComponentClass({id:"RelayLinker",properties:{linkId:"linked",events:null},initialize:function(){var b=0,c="";if(this.events)for(c in this.events)this.events.hasOwnProperty(c)&&this.addEventListener(c,a.bind(this,this.events[c]));if(this.owner.linkId||(this.owner.linkId=this.linkId),this.addEventListener("to-"+this.linkId+"-entities",a.bind(this,"from-"+this.linkId+"-entities")),this.addEventListener("from-"+this.linkId+"-entities",function(a){this.owner.trigger(a.message,a.value,a.debug)}.bind(this)),this.links=Array.setUp(),this.owner.linkEntities)for(b=0;b<this.owner.linkEntities.length;b++)this.links.push(this.owner.linkEntities[b]);this.message={message:"",value:null},this.linkMessage={entity:this.owner,linkId:this.linkId,reciprocate:!1},this.owner.parent&&this.resolveAdoption()},events:{adopted:function(a){this.resolveAdoption(a)},"link-entity":function(a){a.linkId===this.linkId&&a.entity!==this.owner&&-1===this.links.indexOf(a.entity)&&(this.links.push(a.entity),a.reciprocate&&(this.linkMessage.reciprocate=!1,a.entity.triggerEvent("link-entity",this.linkMessage)))},"unlink-entity":function(a){var b=this.links.indexOf(a.entity);b>=0&&this.links.greenSplice(b)}},methods:{resolveAdoption:function(){for(var a=this.owner.parent;a.parent;)a=a.parent;this.linkMessage.reciprocate=!0,a.triggerOnChildren("link-entity",this.linkMessage)},destroy:function(){var a=0;for(a=0;a<this.links.length;a++)this.links[a].triggerEvent("unlink-entity",this.linkMessage);this.links.recycle(),this.links=null,this.events=null}}})}(),function(){"use strict";var a=function(){var a=this.owner.parent;a&&a.trigger.apply(a,arguments)};return platypus.createComponentClass({id:"RelayParent",properties:{events:null},initialize:function(){var b="",c=this.events;if(c)for(b in c)c.hasOwnProperty(b)&&this.addEventListener(b,a.bind(this,c[b]))}})}(),function(){"use strict";var a=function(){var a=this.owner;a.trigger.apply(a,arguments)};return platypus.createComponentClass({id:"RelaySelf",properties:{events:null},initialize:function(){var b="",c=this.events;if(c)for(b in c)c.hasOwnProperty(b)&&this.addEventListener(b,a.bind(this,c[b]))}})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("PIXI.animate.Animator",!1),c=include("platypus.Data"),d=include("platypus.components.EventRender"),e=include("PIXI.Graphics"),f=include("platypus.components.Interactive"),g=include("platypus.components.StateRender"),h=function(a){this.playAnimation(a),this.owner.triggerEvent("animation-ended",a,this.instance)},i=function(){var a=function(a,b){var c=0,d=b.indexOf("("),e=b.substring(0,d),f=b.substring(d+1,b.indexOf(")"));if(f.length){for(f=f.greenSplit(","),c=f.length;c--;)f[c]=+f[c];a[e].apply(a,f),f.recycle()}else a[e]()};return function(b,c){var d=0,e=c.greenSplit(".");for(d=0;d<e.length;d++)a(b,e[d]);e.recycle()}}();return platypus.createComponentClass({id:"RenderAnimation",properties:{animation:"",animationMap:null,framerate:24,mask:null,interactive:!1,visible:!0,eventBased:!1,stateBased:!0,regX:0,regY:0,offsetZ:0},publicProperties:{scaleX:1,scaleY:1,x:0,y:0,z:0},initialize:function(){var b=function(a,b,c,d){var e=c-1,f=null,g=b.length;for(d[0]=e;g--;)d[b[g].label]=e,e=b[g].label;if(a)return a;if(Array.isArray(b)&&1===b.length)return null;for(f={},g=b.length;g--;)f[b[g].label]=b[g].label;return f},e=function(a,e){var h=null,i=b(this.animationMap,e.labels,e.totalFrames,this.endings);this.instance=e,e.framerate=this.framerate,this.stateBased=i&&this.stateBased,this.eventBased=i&&this.eventBased,i&&(this.eventBased&&(h=c.setUp("animationMap",i,"restart",this.restart,"component",this),this.owner.addComponent(new d(this.owner,h)),h.recycle()),this.stateBased&&(h=c.setUp("animationMap",i,"forcePlayThrough",this.forcePlayThrough),this.owner.addComponent(new g(this.owner,h)),h.recycle())),this.parentContainer&&(this.parentContainer.addChild(this.instance),this.ready=!0,this.mask&&this.setMask(this.mask),this.update()),this.interactive?(h=c.setUp("container",e,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover),this.owner.addComponent(new f(this.owner,h,function(){this.owner.triggerEvent("input-on"),a()}.bind(this))),h.recycle()):a()};return function(b,d){return this.endings=c.setUp(),this.instance=null,this.ready=!1,this.animation&&PIXI.animate.load(include(this.animation),e.bind(this,d)),this.parentContainer=null,this.wasVisible=this.visible,this.lastX=this.owner.x,this.lastY=this.owner.y,this.camera=a.setUp(),this.isOnCamera=!0,!0}}(),events:{"camera-update":function(a){this.camera.set(a.viewport),this.instance&&this.checkCameraBounds()},"handle-render-load":function(a){!this.parentContainer&&a&&a.container&&this.addStage(a.container)},"handle-render":function(a){this.ready||this.parentContainer||this.addStage(a.container),this.ready&&this.update()},"hide-animation":function(){this.visible=!1},"show-animation":function(){this.visible=!0},"set-mask":function(a){this.setMask(a)},"stop-animation":function(a){var c=this.instance;a&&c.has(a)?c.gotoAndStop(a):b.stop(c)},"play-animation":function(a,b){this.playAnimation(a,b)}},methods:{checkCameraBounds:function(){this.isOnCamera=this.owner.parent.isOnCanvas(this.instance.getBounds(!1))},addStage:function(a){return a?(this.parentContainer=a,this.instance&&(this.parentContainer.addChild(this.instance),this.ready=!0,this.mask&&this.setMask(this.mask)),this.playAnimation(0),a):null},playAnimation:function(a){var c=this.instance;b.fromTo(c,a,this.endings[a]||0,!1,h.bind(this,a))},setMask:function(a){var b=null;return this.mask&&this.parentContainer&&this.parentContainer.removeChild(this.mask),a?(a instanceof e?b=a:(b=new e,b.beginFill(0,1),"string"==typeof a?i(b,a):a.radius?b.dc(a.x||0,a.y||0,a.radius):a.width&&a.height&&b.r(a.x||0,a.y||0,a.width,a.height),b.endFill()),b.isMask=!0,this.mask=this.instance.mask=b,this.mask.z=0,void(this.parentContainer&&this.parentContainer.addChild(this.mask))):void(this.mask=this.instance.mask=null)},update:function(){var a=this.instance,b=a.scale;b.x=this.scaleX,b.y=this.scaleY,a.x=this.x-this.regX*this.scaleX,a.y=this.y-this.regY*this.scaleY,a.z!==this.z+this.offsetZ&&(this.parentContainer&&(this.parentContainer.reorder=!0),a.z=this.z+this.offsetZ),(this.owner.opacity||0===this.owner.opacity)&&(this.instance.alpha=this.owner.opacity),this.instance&&(!this.wasVisible&&this.visible||this.lastX!==this.owner.x||this.lastY!==this.owner.y)&&this.checkCameraBounds(),this.lastX=this.owner.x,this.lastY=this.owner.y,this.wasVisible=this.visible,this.instance.visible=this.visible&&this.isOnCamera||this.dragMode},destroy:function(){this.camera.recycle(),this.parentContainer&&!this.instance.mouseTarget?(this.parentContainer.removeChild(this.instance),this.parentContainer=null):this.cache||this.instance.destroy(),this.instance=null}}})}(),function(){"use strict";var a=include("PIXI.Graphics"),b=100,c=100,d=1e4,e={aabb:16746751,render:255,collision:16711935,group:65280},f=function(b,c,d,f,g,h,i){var j=null,k=.1;switch(b){case"rectangle":j=(new a).beginFill(e[c],k).drawRect(d,f,g,h);break;case"circle":j=(new a).beginFill(e[c],k).drawCircle(0,0,g)}return j.z=i,j};return platypus.createComponentClass({id:"RenderDebug",initialize:function(){this.parentContainer=null,this.shapes=Array.setUp(),this.isOutdated=!0},events:{"handle-render-load":function(a){platypus.game.settings.debug?!this.parentContainer&&a&&a.container&&(this.parentContainer=a.container):this.owner.removeComponent(this)},"handle-render":function(b){var c=0,e=null,f=-.5;if(!this.parentContainer){if(!platypus.game.settings.debug)return void this.owner.removeComponent(this);if(!b.container)return platypus.debug.warn('No Container, removing render debug component from "'+this.owner.type+'".'),void this.owner.removeComponent(this);this.parentContainer=b.container}for(this.isOutdated&&(this.updateSprites(),this.isOutdated=!1),c=0;c<this.shapes.length;c++)this.shapes[c].x=this.owner.x,this.shapes[c].y=this.owner.y;this.owner.getCollisionGroupAABB&&(e=this.owner.getCollisionGroupAABB(),this.groupShape||(this.groupShape=(new a).beginFill("rgba(255,255,0,0.2)").drawRect(f,f,1,1),this.groupShape.z=(this.owner.z||0)+d,this.parentContainer.addChild(this.groupShape)),this.groupShape.scaleX=e.width,this.groupShape.scaleY=e.height,this.groupShape.x=e.x,this.groupShape.y=e.y)},"orientation-updated":function(){this.isOutdated=!0}},methods:{updateSprites:function(){var a=(this.owner.z||0)+d,e=0,g=0,h=this.owner.width=this.owner.width||c,i=this.owner.height=this.owner.height||b,j=null,k=null,l=null;for(e=0;e<this.shapes.length;e++)this.parentContainer.removeChild(this.shapes[e]);if(this.shapes.length=0,this.owner.getAABB)for(g=0;g<this.owner.collisionTypes.length;g++)for(k=this.owner.getAABB(this.owner.collisionTypes[g]),h=this.initialWidth=k.width,i=this.initialHeight=k.height,j=this.owner.getShapes(this.owner.collisionTypes[g]),l=f("rectangle","aabb",k.left-this.owner.x,k.top-this.owner.y,h,i,a--),this.shapes.push(l),this.parentContainer.addChild(l),this.addInput(l),e=0;e<j.length;e++)l=f(j[e].type,"collision",j[e].offsetX-j[e].width/2,j[e].offsetY-j[e].height/2,j[e].radius||j[e].width,j[e].height,a--),this.shapes.push(l),this.parentContainer.addChild(l),this.addInput(l);else l=f("rectangle","render",-h/2,-i/2,h,i,a--),this.shapes.push(l),this.parentContainer.addChild(l),this.addInput(l)},addInput:function(){var a=null,b=function(){return a!==this.owner&&(a=this.owner,platypus.debug.olive('Entity "'+a.type+'":',a)),!1};return function(a){a.interactive=!0,a.addListener("rightdown",b.bind(this))}}(),destroy:function(){var a=0;for(a=0;a<this.shapes.length;a++)this.parentContainer.removeChild(this.shapes[a]);this.shapes.recycle(),this.parentContainer=null}}})}(),function(){"use strict";return platypus.createComponentClass({id:"RenderDestroyMe",properties:{animationId:"",animationIds:null},initialize:function(a){this.animationId?this.animationIds=Array.setUp(a.animationId):this.animationIds&&(this.animationIds=this.animationIds.greenSlice())},events:{"animation-ended":function(a){(!this.animationIds||this.animationIds.indexOf(a)>=0)&&this.owner.parent.removeEntity(this.owner)}},methods:{destroy:function(){this.animationIds&&(this.animationIds.recycle(),delete this.animationIds)}}})}(),function(){"use strict";return platypus.createComponentClass({id:"RenderProgress",properties:{backgroundColor:0,color:16777215,rotate:!1,mirror:!1,flip:!1,width:100,height:20,regX:0,regY:0},publicProperties:{x:0,y:0,z:0},initialize:function(){var a=new PIXI.Graphics,b=new PIXI.Graphics,c=new PIXI.Container;this.parentContainer=null,this.background=a,this.progress=b,this.container=c,"string"==typeof this.backgroundColor&&(this.backgroundColor=+this.backgroundColor.replace("#","0x")),"string"==typeof this.color&&(this.color=+this.color.replace("#","0x")),a.f(this.backgroundColor).r(-this.regX,-this.regY,this.width,this.height),b.f(this.color).r(-this.regX,-this.regY,this.width,this.height),b.scale=new PIXI.Point(1e-4,1),c.addChild(a),c.addChild(b)},events:{"handle-render-load":function(a){!this.parentContainer&&a&&a.container&&(this.parentContainer=a.container,this.parentContainer.addChild(this.container))},"handle-render":function(a){this.container&&(this.parentContainer||(a&&a.container?(this.parentContainer=a.container,this.parentContainer.addChild(this.container)):(platypus.debug.warn('No PIXI Stage, removing ProgressRender component from "'+this.owner.type+'".'),this.owner.removeComponent(this))),this.container.x=this.x,this.container.y=this.y,this.container.z=this.z)},"update-progress":function(a){isNaN(a)?"number"==typeof a.fraction?this.progress.scale.x=a.fraction:"number"==typeof a.total&&"number"==typeof a.progress&&(this.progress.scale.x=a.progress/a.total):this.progress.scale.x=a}},methods:{destroy:function(){this.parentContainer&&(this.parentContainer.removeChild(this.container),this.parentContainer=null),this.container=null}}})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("PIXI.spine.SpineRuntime.Atlas",!1),c=include("PIXI.spine.SpineRuntime.AtlasAttachmentParser",!1),d=include("PIXI.BaseTexture"),e=include("platypus.Data"),f=include("platypus.components.EventRender"),g=include("PIXI.Graphics"),h=include("PIXI.Matrix"),i=include("PIXI.spine.SpineRuntime.SkeletonJsonParser",!1),j=include("PIXI.spine.Spine",!1),k=include("platypus.components.StateRender"),l=(new h,function(){var a=function(a,b){var c=0,d=b.indexOf("("),e=b.substring(0,d),f=b.substring(d+1,b.indexOf(")"));if(f.length){for(f=f.greenSplit(","),c=f.length;c--;)f[c]=+f[c];a[e].apply(a,f),f.recycle()}else a[e]()};return function(b,c){var d=0,e=c.greenSplit(".");for(d=0;d<e.length;d++)a(b,e[d]);e.recycle()}}());return j?platypus.createComponentClass({id:"RenderSpine",properties:{animationMap:null,mask:null,interactive:!1,mixTimes:0,offsetZ:0,atlas:"",skeleton:null,visible:!0,eventBased:!1,stateBased:!0},publicProperties:{dragMode:!1,scaleX:1,scaleY:1,skewX:0,skewY:0,rotation:0,x:0,y:0,z:0},initialize:function(){var g=function(a,b){var c=null,d="";if(a)return a;c={};for(d in b)b.hasOwnProperty(d)&&(c[d]=d);return c},l=function(a,b){b(d.fromImage(a))},m=function(){this.owner.triggerEvent("animation-ended",this.currentAnimation)};return function(){var d="",n=null,o=platypus.game.settings,p=o.atlases[this.atlas],q=null,r=o.skeletons[this.skeleton],s=new b(p,l),t=new i(new c(s)),u=t.readSkeletonData(r),v=this.spine=new j(u);v.transformMatrix=new h,v.state.onComplete=m.bind(this),q=g(this.animationMap,r.animations),this.stateBased=q&&this.stateBased,this.eventBased=q&&this.eventBased,q&&(d=q["default"]||"",this.eventBased&&(n=e.setUp("animationMap",q),this.owner.addComponent(new f(this.owner,n)),n.recycle()),this.stateBased&&(n=e.setUp("animationMap",q,"forcePlayThrough",this.forcePlayThrough),this.owner.addComponent(new k(this.owner,n)),n.recycle())),this.parentContainer=null,this.wasVisible=this.visible,this.lastX=this.owner.x,this.lastY=this.owner.y,this.camera=a.setUp(),this.affine=new h,this.isOnCamera=!0,this.interactive&&(n=e.setUp("container",this.spine,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover),this.owner.addComponent(new platypus.components.Interactive(this.owner,n)),n.recycle()),this.mixTimes&&this.setMixTimes(this.mixTimes),d&&(this.currentAnimation=d,v.state.setAnimationByName(0,d,!0))}}(),events:{"camera-update":function(a){this.camera.set(a.viewport),this.spine&&this.checkCameraBounds()},"handle-render-load":function(a){!this.parentContainer&&a&&a.container&&(this.addStage(a.container),this.updateSprite(!0))},"handle-render":function(a){return this.spine?this.parentContainer||this.addStage(a.container)?void this.updateSprite(!0):(platypus.debug.warn('No PIXI Stage, removing render component from "'+this.owner.type+'".'),void this.owner.removeComponent(this)):void 0},"set-mix-times":function(a){this.setMixTimes(a)},hide:function(){this.visible=!1},show:function(){this.visible=!0},"set-mask":function(a){this.setMask(a)},"stop-animation":function(a){var b=this.spine;a&&b.state.hasAnimationByName(a)&&(this.currentAnimation=a,b.state.setAnimationByName(0,a,!1)),this.paused=!0},"play-animation":function(a){var b=this.spine;a&&b.state.hasAnimationByName(a)&&(this.currentAnimation=a,b.state.setAnimationByName(0,a,!0)),this.paused=!1}},methods:{addStage:function(a){return a?(this.parentContainer=a,this.parentContainer.addChild(this.spine),this.mask&&this.setMask(this.mask),this.owner.triggerEvent("input-on"),a):null},checkCameraBounds:function(){this.isOnCamera=this.owner.parent.isOnCanvas(this.instance.getBounds(!1))},setMixTimes:function(a){var b=this.spine,c=b.spineData.animations,d=0,e=0,f=0,g="",h=b.stateData;if("number"==typeof a)for(e=c.length;e--;)for(f=c.length;f--;)e!==f&&h.setMixByName(c[e].name,c[f].name,a);else for(g in a)a.hasOwnProperty(g)&&(d=g.indexOf(":"),d>=0&&h.setMixByName(g.substring(0,d),g.substring(d+1),a[g]));this.mixTimes=h.animationToMixTime},setMask:function(a){var b=null;return this.mask&&this.parentContainer&&this.parentContainer.removeChild(this.mask),a?(a instanceof g?b=a:(b=new g,b.beginFill(0,1),"string"==typeof a?l(b,a):a.radius?b.dc(a.x||0,a.y||0,a.radius):a.width&&a.height&&b.r(a.x||0,a.y||0,a.width,a.height),b.endFill()),b.isMask=!0,this.mask=this.container.mask=b,void(this.parentContainer&&this.parentContainer.addChild(this.mask))):void(this.mask=this.container.mask=null)},updateSprite:function(a){var b=this.spine,c=this.affine.copy(b.transformMatrix),d=null,e=h.TEMP_MATRIX;this.owner.triggerEvent("update-animation",a),b.z!==this.owner.z+this.offsetZ&&(this.parentContainer&&(this.parentContainer.reorder=!0),b.z=this.owner.z+this.offsetZ),"number"==typeof this.owner.opacity&&(b.alpha=this.owner.opacity),this.owner.orientationMatrix&&(d=this.owner.orientationMatrix,e.tx=d[0][2],e.ty=d[1][2],e.a=d[0][0],e.b=d[1][0],e.c=d[0][1],e.d=d[1][1],c.prepend(e)),e.tx=this.owner.x,e.ty=this.owner.y,e.a=this.scaleX||1,e.b=this.owner.skewX||0,e.c=this.owner.skewY||0,e.d=this.scaleY||1,c.prepend(e),(!this.wasVisible&&this.visible||this.lastX!==this.owner.x||this.lastY!==this.owner.y)&&this.checkCameraBounds(),this.lastX=this.owner.x,this.lastY=this.owner.y,this.wasVisible=this.visible,this.spine.visible=this.visible&&this.isOnCamera||this.dragMode},destroy:function(){this.camera.recycle(),this.parentContainer&&!this.spine.mouseTarget&&(this.parentContainer.removeChild(this.spine),this.parentContainer=null,this.spine.destroy()),this.spine=null,this.mixTimes=null}},getAssetList:function(){var a=function(b,c){var d=0;return b?(d=b.indexOf("\n"),0>d?a(c[b],c):Array.setUp(b.substring(0,d).replace("\r",""))):Array.setUp()};return function(b,c,d){var e=null,f=0,g=null,h=platypus.game.settings.atlases,i=b.atlas||c.atlas||d.atlas;if(Array.isArray(i)){for(f=i.length,g=Array.setUp();f--;)e=a(i[f],h),g.union(e),e.recycle();return g}return a(i,h)}}()}):function(){platypus.debug.error("RenderSpine requires `PIXI.spine` to function.")}}(),function(){"use strict";var a=include("platypus.AABB"),b=include("platypus.Data"),c=include("platypus.components.EventRender"),d=include("PIXI.Graphics"),e=include("platypus.components.Interactive"),f=include("platypus.PIXIAnimation"),g=include("platypus.components.StateRender"),h=function(){var a=function(a,b){var c=0,d=b.indexOf("("),e=b.substring(0,d),f=b.substring(d+1,b.indexOf(")"));if(f.length){for(f=f.greenSplit(","),c=f.length;c--;)f[c]=+f[c];a[e].apply(a,f),f.recycle()}else a[e]()};return function(b,c){var d=0,e=c.greenSplit(".");for(d=0;d<e.length;d++)a(b,e[d]);e.recycle()}}();return platypus.createComponentClass({id:"RenderSprite",properties:{spriteSheet:null,animationMap:null,mask:null,interactive:!1,acceptInput:null,offsetZ:0,restart:!0,rotate:!1,mirror:!1,flip:!1,visible:!0,eventBased:!1,stateBased:!0,cache:!1,forcePlayThrough:!1,ignoreOpacity:!1},publicProperties:{dragMode:!1,scaleX:1,scaleY:1,skewX:0,skewY:0,rotation:0,x:0,y:0,z:0},initialize:function(){var d=function(a,b){var c=null,d="";if(a)return a;if(Array.isArray(b.frames)&&1===b.frames.length)return null;c={};for(d in b.animations)b.animations.hasOwnProperty(d)&&(c[d]=d);return c},h=function(a){this.owner.triggerEvent("animation-ended",a)};return function(){var i="",j=null,k=f.formatSpriteSheet(this.spriteSheet),l=null;this.acceptInput&&(platypus.debug.warn('Entity "'+this.owner.type+'": RenderSprite "acceptInput" property has been deprecated since 0.9.0 in favor of the "interactive" property which adds an "Interactive" component to the entity to handle input.'),this.interactive=this.interactive||this.acceptInput),k===f.EmptySpriteSheet&&platypus.debug.warn('Entity "'+this.owner.type+'": RenderSprite sprite sheet not defined.'),l=d(this.animationMap,k),this.stateBased=l&&this.stateBased,this.eventBased=l&&this.eventBased,l&&(i=l["default"]||"",this.eventBased&&(j=b.setUp("animationMap",l,"restart",this.restart,"component",this),this.owner.addComponent(new c(this.owner,j)),j.recycle()),this.stateBased&&(j=b.setUp("animationMap",l,"forcePlayThrough",this.forcePlayThrough),this.owner.addComponent(new g(this.owner,j)),j.recycle())),this.parentContainer=null,this.wasVisible=this.visible,this.lastX=this.owner.x,this.lastY=this.owner.y,this.camera=a.setUp(),this.isOnCamera=!0,this.sprite=new f(k,i),this.sprite.on("complete",h.bind(this)),this.interactive&&(j=b.setUp("container",this.sprite,"hitArea",this.interactive.hitArea,"hover",this.interactive.hover),this.owner.addComponent(new e(this.owner,j)),j.recycle()),this.cache&&(this.updateSprite(!1),this.owner.cacheRender=this.sprite),k.recycleSpriteSheet()}}(),events:{cache:function(){this.updateSprite(!1),this.owner.cacheRender=this.sprite,this.cache=!0,this.owner.parent&&this.owner.parent.triggerEventOnChildren?this.owner.parent.triggerEventOnChildren("cache-sprite",this.owner):platypus.debug.warn("Unable to cache sprite for "+this.owner.type)},"camera-update":function(a){this.camera.set(a.viewport),this.sprite&&this.checkCameraBounds()},"handle-render-load":function(a){!this.parentContainer&&a&&a.container&&(this.addStage(a.container),this.updateSprite(!0))},"handle-render":function(a){if(this.sprite){if(!this.parentContainer&&!this.addStage(a.container))return platypus.debug.warn('No PIXI Stage, removing render component from "'+this.owner.type+'".'),void this.owner.removeComponent(this);this.updateSprite(!0),this.sprite.update(a.delta)}},"hide-sprite":function(){this.visible=!1},"show-sprite":function(){this.visible=!0},"set-mask":function(a){this.setMask(a)},"stop-animation":function(a){var b=this.sprite;a&&b.has(a)?b.gotoAndStop(a):b.stop()},"play-animation":function(a,b){this.playAnimation(a,b)},"stop-sprite":function(){this.sprite.stop()},"play-sprite":function(){this.sprite.play()}},methods:{checkCameraBounds:function(){this.isOnCamera=this.owner.parent.isOnCanvas(this.sprite.getBounds(!1))},addStage:function(a){return a?(this.parentContainer=a,this.parentContainer.addChild(this.sprite),this.mask&&this.setMask(this.mask),this.owner.triggerEvent("input-on"),a):null},updateSprite:function(){var a=function(a,b){return a.z-b.z};return function(b){var c=0,d=0,e=this.owner.orientationMatrix,f=0,g=1,h=1,i=null;c=this.owner.x,d=this.owner.y,this.rotate&&(f=this.rotation),this.sprite.z!==this.owner.z+this.offsetZ&&(this.parentContainer&&(this.parentContainer.reorder=!0),this.sprite.z=this.owner.z+this.offsetZ),this.ignoreOpacity||!this.owner.opacity&&0!==this.owner.opacity||(this.sprite.alpha=this.owner.opacity),this.sprite.reorder&&(this.sprite.reorder=!1,this.sprite.children.sort(a)),(this.mirror||this.flip)&&(i=this.rotation%360,this.mirror&&i>90&&270>i&&(g=-1),this.flip&&180>i&&(h=-1)),this.owner.triggerEvent("update-animation",b),e?this.sprite.setTransform(e[0][2],e[1][2],e[0][0],e[1][1],f?f/180*Math.PI:0,e[1][0],e[0][1]):this.sprite.setTransform(c,d,this.scaleX*g,this.scaleY*h,f?f/180*Math.PI:0,this.skewX,this.skewY),this.sprite&&(!this.wasVisible&&this.visible||this.lastX!==this.owner.x||this.lastY!==this.owner.y)&&this.checkCameraBounds(),this.lastX=this.owner.x,this.lastY=this.owner.y,this.wasVisible=this.visible,this.sprite.visible=this.visible&&this.isOnCamera||this.dragMode}}(),playAnimation:function(a,b){var c=this.sprite;a&&c.has(a)?c.gotoAndPlay(a,b):c.play()},setMask:function(a){var b=null;return this.mask&&this.parentContainer&&this.parentContainer.removeChild(this.mask),a?(a instanceof d?b=a:(b=new d,b.beginFill(0,1),"string"==typeof a?h(b,a):a.radius?b.dc(a.x||0,a.y||0,a.radius):a.width&&a.height&&b.r(a.x||0,a.y||0,a.width,a.height),b.endFill()),b.isMask=!0,this.mask=this.sprite.mask=b,this.mask.z=0,void(this.parentContainer&&this.parentContainer.addChild(this.mask))):void(this.mask=this.sprite.mask=null)},destroy:function(){this.camera.recycle(),this.parentContainer&&!this.sprite.mouseTarget?(this.parentContainer.removeChild(this.sprite),this.parentContainer=null):this.cache||this.sprite.destroy(),this.sprite=null}},getAssetList:function(){var a=function(b,c){if(b){if("string"==typeof b)return a(c[b],c);if(b.images)return b.images.greenSlice()}return Array.setUp()};return function(b,c,d){var e=null,f=0,g=null,h=platypus.game.settings.spriteSheets,i=b.spriteSheet||c.spriteSheet||d.spriteSheet;if(Array.isArray(i)){for(f=i.length,g=Array.setUp();f--;)e=a(i[f],h),g.union(e),e.recycle();return g}return a(i,h)}}()})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("platypus.PIXIAnimation"),c=include("springroll.Application"),d=include("PIXI.CanvasRenderer"),e=include("PIXI.Container"),f=include("PIXI.Graphics"),g=include("PIXI.ParticleContainer"),h=include("PIXI.Rectangle"),i=include("PIXI.RenderTexture"),j=include("PIXI.Sprite"),k=function(){return null},l=a.setUp(),m=function(a,b){return a.z-b.z},n=function(a){for(var b=1;a>b;)b*=2;return b},o=function(a,b){var c=+a.substring(4),d=0;return 2147483648&c&&(b.scale.x=-1),1073741824&c&&(b.scale.y=-1),536870912&c&&(d=b.scale.x,b.scale.x=b.scale.y,b.scale.y=-d,b.rotation=Math.PI/2),268435455&c},p=function(a,b){this.id=b,this.instances=Array.setUp(a),this.index=0,a.template=this},q={getNext:k,destroy:k},r=p.prototype;return r.getNext=function(){var a=this.instances[this.index],b=null;return a||(b=this.instances[0],a=this.instances[this.index]=new j(b.texture),a.scale=b.scale,a.rotation=b.rotation,a.anchor=b.anchor),this.index+=1,a},r.clear=function(){this.index=0},r.destroy=function(){var a=0;for(a=0;a<this.instances.length;a++)this.instances[a].destroy();this.instances.recycle(),this.recycle()},recycle.add(p,!!springroll.Debug,"Template"),platypus.createComponentClass({id:"RenderTiles",properties:{buffer:0,cacheAll:!1,entityCache:!1,imageMap:[],maximumBuffer:2048,scaleX:1,scaleY:1,spriteSheet:null,tileCache:!0,tileHeight:10,tileWidth:10,top:0,left:0},initialize:function(){var f=this.imageMap;this.doMap=null,this.cachedDisplayObjects=null,this.populate=this.populateTiles,this.tiles={},this.renderer=c.instance.display.renderer,this.tilesSprite=null,this.cacheTexture=null,this.mapContainer=null,this.laxCam=a.setUp(),this.worldWidth=this.tileWidth,this.worldHeight=this.tileHeight,this.cache=a.setUp(),this.cachePixels=a.setUp(),this.spriteSheet=b.formatSpriteSheet(this.spriteSheet),this.tileContainer=this.spriteSheet.images.length>1||this.renderer instanceof d?new e:new g(15e3,{position:!0,rotation:!0,scale:!0}),this.mapContainer=new e,this.mapContainer.addChild(this.tileContainer),this.reorderedStage=!1,this.updateCache=!1,this.imageMap=Array.setUp(this.createMap(f)),this.tilesWidth=this.imageMap[0].length,this.tilesHeight=this.imageMap[0][0].length,this.layerWidth=this.tilesWidth*this.tileWidth,this.layerHeight=this.tilesHeight*this.tileHeight,this.cacheWidth=Math.min(n(this.layerWidth),this.maximumBuffer),this.cacheHeight=Math.min(n(this.layerHeight),this.maximumBuffer),this.tileCache||(this.buffer=0,this.cacheAll=!1)},events:{"handle-render-load":function(a){var b=2,c=this.mapContainer,d=null,f=this.renderer,g=null,h=this.owner.z;a&&a.container&&(d=this.parentContainer=a.container,d&&!this.reorderedStage&&(d.reorder=!0,this.reorderedStage=!0),this.updateRegion(0),this.tileCache?(this.mapContainerWrapper=new e,this.mapContainerWrapper.addChild(c),this.layerWidth<=this.cacheWidth&&this.layerHeight<=this.cacheHeight?(this.cacheAll=!0,this.render=this.renderCache,this.cacheTexture=new i(f,this.cacheWidth,this.cacheHeight),this.tilesSprite=g=new j(this.cacheTexture),g.scaleX=this.scaleX,g.scaleY=this.scaleY,g.z=h,this.cache.setBounds(0,0,this.tilesWidth-1,this.tilesHeight-1),this.update(this.cacheTexture,this.cache),d.addChild(g)):this.cacheAll||this.layerWidth<=2*this.cacheWidth&&this.layerHeight<=this.cacheHeight||this.layerWidth<=this.cacheWidth&&this.layerHeight<=2*this.cacheHeight?(this.cacheAll=!0,this.cacheWidth=Math.min(n(this.layerWidth+b),this.maximumBuffer),this.cacheHeight=Math.min(n(this.layerHeight+b),this.maximumBuffer),this.updateRegion(b),this.render=this.renderCacheWithExtrusion,this.cacheGrid=this.createGrid(d,f),this.updateCache=!0):(this.render=this.renderCache,this.cacheAll=!1,this.cacheTexture=new i(f,this.cacheWidth,this.cacheHeight),this.tilesSprite=new j(this.cacheTexture),this.tilesSprite.scaleX=this.scaleX,this.tilesSprite.scaleY=this.scaleY,this.tilesSprite.z=h,this.cacheTexture.alternate=new i(f,this.cacheWidth,this.cacheHeight),this.tilesSpriteCache=new j(this.cacheTexture.alternate),this.cacheTexture.alternate.alternate=this.cacheTexture,d.addChild(this.tilesSprite))):(this.render=k,c.scaleX=this.scaleX,c.scaleY=this.scaleY,c.x=this.left,c.y=this.top,c.z=h,d.addChild(c)))},"cache-sprite":function(a){this.cacheSprite(a)},"peer-entity-added":function(a){this.cacheSprite(a)},"add-tiles":function(a){var b=a.imageMap;b&&(this.imageMap.push(this.createMap(b)),this.updateCache=!0)},"change-tile":function(a,b,c,d){var e=this.imageMap;e&&(this.updateTile(a,e[d||0],b,c),this.updateCache=!0)},"camera-loaded":function(a){this.worldWidth=a.world.width,this.worldHeight=a.world.height,this.buffer&&!this.cacheAll&&this.updateBufferRegion(a.viewport)},"camera-update":function(a){var b=0,c=0,d=!1,e=null,f=0,g=0,h=0,i=0,j=this.cache,k=this.cachePixels,m=a.viewport,n=this.buffer&&(m.width!==this.laxCam.width||m.height!==this.laxCam.height),o=l,p=this.convertCamera(m);if(!this.cacheAll&&(k.empty||!k.contains(p))&&this.imageMap.length>0&&(n&&this.updateBufferRegion(p),f=this.cacheTilesWidth-1,g=this.cacheTilesHeight-1,h=f/2,i=g/2,o.setAll(Math.round((p.x-this.left)/this.tileWidth-h)+h,Math.round((p.y-this.top)/this.tileHeight-i)+i,f,g),o.left<0?o.moveX(o.halfWidth):o.right>this.tilesWidth-1&&o.moveX(this.tilesWidth-1-o.halfWidth),o.top<0?o.moveY(o.halfHeight):o.bottom>this.tilesHeight-1&&o.moveY(this.tilesHeight-1-o.halfHeight),
this.tileCache?(j.empty||!o.contains(j))&&(this.tilesSpriteCache.texture=this.cacheTexture,this.cacheTexture=this.cacheTexture.alternate,this.tilesSprite.texture=this.cacheTexture,this.update(this.cacheTexture,o,this.tilesSpriteCache,j)):this.update(null,o),k.setAll((j.x+.5)*this.tileWidth+this.left,(j.y+.5)*this.tileHeight+this.top,(j.width+1)*this.tileWidth,(j.height+1)*this.tileHeight)),this.cacheGrid)for(b=0;b<this.cacheGrid.length;b++)for(c=0;c<this.cacheGrid[b].length;c++)e=this.cacheGrid[b][c],k.setAll((b+.5)*this.cacheClipWidth+this.left,(c+.5)*this.cacheClipHeight+this.top,this.cacheClipWidth,this.cacheClipHeight),d=k.intersects(p),e.visible&&!d?e.visible=!1:!e.visible&&d&&(e.visible=!0),e.visible&&d&&(e.x=m.left-p.left+b*this.cacheClipWidth+this.left,e.y=m.top-p.top+c*this.cacheClipHeight+this.top);else this.tileCache&&(this.tilesSprite.x=m.left-p.left+j.left*this.tileWidth+this.left,this.tilesSprite.y=m.top-p.top+j.top*this.tileHeight+this.top)},"handle-render":function(){this.updateCache&&(this.updateCache=!1,this.cacheGrid?this.updateGrid():this.update(this.cacheTexture,this.cache))}},methods:{cacheSprite:function(a){var b=0,c=0,d=a.cacheRender,e=null,f=0,g=0,h=0,i=0;if(this.entityCache&&d){for(this.doMap||(this.doMap=Array.setUp(),this.cachedDisplayObjects=Array.setUp(),this.populate=this.populateTilesAndEntities),this.cachedDisplayObjects.push(d),e=d.getBounds(d.transformMatrix),e.x-=this.left,e.y-=this.top,f=Math.max(0,Math.floor(e.y/this.tileHeight)),g=Math.min(this.tilesHeight,Math.ceil((e.y+e.height)/this.tileHeight)),i=Math.max(0,Math.floor(e.x/this.tileWidth)),h=Math.min(this.tilesWidth,Math.ceil((e.x+e.width)/this.tileWidth)),b=i;h>b;b++)for(this.doMap[b]||(this.doMap[b]=Array.setUp()),c=f;g>c;c++)this.doMap[b][c]||(this.doMap[b][c]=Array.setUp()),this.doMap[b][c].push(d);a.removeComponent("RenderSprite"),this.updateCache=!0}},convertCamera:function(a){var b=this.worldWidth/this.scaleX,c=b-a.width,d=this.worldHeight/this.scaleY,e=d-a.height,f=this.laxCam;return b!==this.layerWidth&&c?f.moveX((a.left-this.left)*(this.layerWidth-a.width)/c+a.halfWidth+this.left):f.moveX(a.x),d!==this.layerHeight&&e?f.moveY((a.top-this.top)*(this.layerHeight-a.height)/e+a.halfHeight+this.top):f.moveY(a.y),(a.width!==f.width||a.height!==f.height)&&f.resize(a.width,a.height),f},createTile:function(a){var c=null,d="";return"tile-1"===a?q:(c=new b(this.spriteSheet),d="tile"+o(a,c),c.gotoAndStop(d),p.setUp(c,a))},createMap:function(a){var b=0,c=0,d="",e=null;if("string"!=typeof a[0][0])return a;for(e=Array.setUp(),b=0;b<a.length;b++)for(e[b]=Array.setUp(),c=0;c<a[b].length;c++)d=a[b][c],this.updateTile(d,e,b,c);return e},updateTile:function(a,b,c,d){var e=null,f=this.tiles;a.id&&(a=a.id),e=f[a],e||null===e||(e=f[a]=this.createTile(a)),b[c][d]=e},createGrid:function(a,b){var c=this.cacheHeight,d=this.cacheWidth,e=this.cacheTilesHeight,f=this.cacheTilesWidth,g=0,k=0,l=2,m=1,o=null,p=this.scaleX,q=this.scaleY,r=this.tileHeight,s=this.tileWidth,t=this.tilesHeight,u=this.tilesWidth,v=0,w=0,x=this.owner.z,y=null,z=null,A=Array.setUp();for(v=0;u>v;v+=f)for(y=Array.setUp(),A.push(y),w=0;t>w;w+=e)k=Math.min(n((u-v)*s+l),d),g=Math.min(n((t-w)*r+l),c),o=new i(b,k,g),o.frame=new h(m,m,(k/s>>0)*s+m,(g/r>>0)*r+m),z=new j(o),z.z=x,z.scaleX=p,z.scaleY=q,y.push(z),a.addChild(z),x-=1e-6;return A},updateRegion:function(a){var b=Math.floor(this.cacheWidth/this.tileWidth),c=Math.floor(this.cacheHeight/this.tileHeight);this.cacheTilesWidth=Math.min(this.tilesWidth,b),this.cacheTilesHeight=Math.min(this.tilesHeight,c),this.cacheClipWidth=this.cacheTilesWidth*this.tileWidth,this.cacheClipHeight=this.cacheTilesHeight*this.tileHeight,this.tileCache&&(this.mapContainer.mask=(new f).beginFill(0).drawRect(0,0,this.cacheClipWidth+a,this.cacheClipHeight+a).endFill())},updateBufferRegion:function(a){var b=Math.floor(this.cacheWidth/this.tileWidth),c=Math.floor(this.cacheHeight/this.tileHeight);this.cacheTilesWidth=Math.min(this.tilesWidth,Math.ceil((a.width+2*this.buffer)/this.tileWidth),b),this.cacheTilesHeight=Math.min(this.tilesHeight,Math.ceil((a.height+2*this.buffer)/this.tileHeight),c),this.cacheClipWidth=this.cacheTilesWidth*this.tileWidth,this.cacheClipHeight=this.cacheTilesHeight*this.tileHeight,this.mapContainer.mask=(new f).beginFill(0).drawRect(0,0,this.cacheClipWidth,this.cacheClipHeight).endFill()},update:function(a,b,c,d){this.populate(b,d),this.render(b,a,this.mapContainer,this.mapContainerWrapper,c,d),d&&d.set(b)},populateTiles:function(a,b){var c=0,d=0,e=0,f=0,g=null,h=Array.setUp();for(this.tileContainer.removeChildren(),c=a.left;c<=a.right;c++)for(d=a.top;d<=a.bottom;d++)if(!b||b.empty||d>b.bottom||d<b.top||c>b.right||c<b.left)for(f=0;f<this.imageMap.length;f++)g=this.imageMap[f][c][d].getNext(),g&&(g.template&&h.push(g.template),g.x=(c+.5)*this.tileWidth,g.y=(d+.5)*this.tileHeight,this.tileContainer.addChild(g));for(e=0;e<h.length;e++)h[e].clear();h.recycle()},populateTilesAndEntities:function(a,b){var c=0,d=0,e=0,f=0,g=null,h=null,i=Array.setUp(),j=Array.setUp(),k=null;for(this.tileContainer.removeChildren(),c=a.left;c<=a.right;c++)for(d=a.top;d<=a.bottom;d++)if(!b||b.empty||d>b.bottom||d<b.top||c>b.right||c<b.left){for(f=0;f<this.imageMap.length;f++)g=this.imageMap[f][c][d].getNext(),g&&(g.template&&j.push(g.template),g.x=(c+.5)*this.tileWidth,g.y=(d+.5)*this.tileHeight,this.tileContainer.addChild(g));if(this.doMap[c]&&this.doMap[c][d])for(k=this.doMap[c][d],e=0;e<k.length;e++)k[e].drawn||(k[e].drawn=!0,i.push(k[e]))}if(this.mapContainer.removeChildren(),this.mapContainer.addChild(this.tileContainer),i.length)for(i.sort(m),e=0;e<i.length;e++)h=i[e],delete h.drawn,this.mapContainer.addChild(h),h.mask&&this.mapContainer.addChild(h.mask);for(e=0;e<j.length;e++)j[e].clear();j.recycle(),i.recycle()},renderCache:function(a,b,c,d,e,f){e&&!f.empty&&(e.x=f.left*this.tileWidth,e.y=f.top*this.tileHeight,c.addChild(e)),b.clear(),c.x=-a.left*this.tileWidth,c.y=-a.top*this.tileHeight,b.render(d),b.requiresUpdate=!0},renderCacheWithExtrusion:function(a,b,c,d){var e=1,g=new f;g.lineStyle(1,0),g.drawRect(.5,.5,this.cacheClipWidth+1,this.cacheClipHeight+1),b.clear(),d.mask=g,c.x=-a.left*this.tileWidth,c.y=-a.top*this.tileHeight+e,b.render(d),c.x=-a.left*this.tileWidth+e,c.y=-a.top*this.tileHeight,b.render(d),c.x=-a.left*this.tileWidth+2*e,c.y=-a.top*this.tileHeight+e,b.render(d),c.x=-a.left*this.tileWidth+e,c.y=-a.top*this.tileHeight+2*e,b.render(d),d.mask=null,c.x=-a.left*this.tileWidth+e,c.y=-a.top*this.tileHeight+e,b.render(d),b.requiresUpdate=!0},updateGrid:function(){var a=this.cache,b=this.cacheTilesHeight,c=this.cacheTilesWidth,d=this.tilesHeight-1,e=this.tilesWidth-1,f=0,g=0,h=this.cacheGrid;for(f=0;f<h.length;f++)for(g=0;g<h[f].length;g++)a.setBounds(f*c,g*b,Math.min((f+1)*c,e),Math.min((g+1)*b,d)),this.update(h[f][g].texture,a)},destroy:function(){var a=0,b=0,c="",d=this.cacheGrid,e=this.doMap,f=this.imageMap;if(d){for(a=0;a<d.length;a++)for(b=0;b<d[a].length;b++)d[a][b].texture.destroy(!0),this.parentContainer.removeChild(d[a][b]);d.recycle(2),delete this.cacheGrid}else this.tilesSprite?(this.tilesSprite.texture.alternate&&this.tilesSprite.texture.alternate.destroy(!0),this.tilesSprite.texture.destroy(!0),this.parentContainer.removeChild(this.tilesSprite)):this.parentContainer.removeChild(this.mapContainer);f.recycle(2);for(c in this.tiles)this.tiles.hasOwnProperty(c)&&this.tiles[c].destroy();if(this.tiles=null,this.parentContainer=null,this.tilesSprite=null,this.spriteSheet.recycleSpriteSheet(),e){for(a=0;a<this.cachedDisplayObjects.length;a++)this.cachedDisplayObjects[a].destroy();for(this.cachedDisplayObjects.recycle(),a=0;a<e.length;a++)if(e[a]){for(b=0;b<e.length;b++)e[a][b]&&e[a][b].recycle();e[a].recycle()}e.recycle()}this.laxCam.recycle(),this.cache.recycle(),this.cachePixels.recycle()}},getAssetList:function(){var a=function(b,c){if(b){if("string"==typeof b)return a(c[b],c);if(b.images)return b.images.greenSlice()}return Array.setUp()};return function(b,c,d){var e=null,f=0,g=null,h=platypus.game.settings.spriteSheets,i=b.spriteSheet||c.spriteSheet||d.spriteSheet;if(i){if("string"==typeof i&&"import"!==i)return a(i,h);if(Array.isArray(i)){for(f=i.length,g=Array.setUp();f--;)e=a(i[f],h),g.union(e),e.recycle();return g}if(i.images)return i.images.greenSlice()}return Array.setUp()}}()})}(),function(){"use strict";var a=include("platypus.Data");return platypus.createComponentClass({id:"SceneChanger",properties:{scene:"",persistentData:null},initialize:function(){this.persistentData=a.setUp(this.persistentData)},events:{"new-scene":function(a){var b=a||this,c=b.scene||this.scene,d=b.persistentData||this.persistentData;platypus.game.loadScene(c,d)},"set-scene":function(a){this.scene=a},"set-persistent-scene-data":function(a){var b=this.persistentData,c="";for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c])}},methods:{destroy:function(){}}})}(),function(){"use strict";var a=include("platypus.AABB"),b=include("platypus.Data"),c=include("platypus.Entity"),d=268435455,e=268435456,f=2147483648,g=1073741824,h=function(){var a=function(a,b){return a.charCodeAt(b)+(a.charCodeAt(b+1)<<8)+(a.charCodeAt(b+2)<<16)+(a.charCodeAt(b+3)<<24)>>>0},b=function(a,b){return a[b]+(a[b+1]<<8)+(a[b+2]<<16)+(a[b+3]<<24)>>>0};return function(c,d){var e=4,f=[],g=atob(c.replace(/\\/g,""));if("zlib"===d)for(g=pako.inflate(g);e<=g.length;)f.push(b(g,e-4)),e+=4;else for(;e<=g.length;)f.push(a(g,e-4)),e+=4;return f}}(),i=function(a){for(var b=1;a>b;)b*=10;return b},j={x:1,y:1,id:-1},k=function(a){var b=j,c=!!(g&a),e=!!(f&a);return b.id=d&a,b.x=1,b.y=1,c&&(b.y=-1),e&&(b.x=-1),b},l=function(a,b){var c=0,d=a.gid||-1,e={},f={gid:-1,transform:null,properties:e,type:""},g=null,h=null;for(-1!==d&&(f.transform=k(d),d=f.gid=j.id),c=0;c<b.length&&!(b[c].firstgid>d);c++)h=b[c];return h&&h.tileproperties&&h.tileproperties[d-h.firstgid]&&(g=h.tileproperties[d-h.firstgid]),""!==a.type?f.type=a.type:""!==a.name?f.type=a.name:g&&(f.type=g.entity||g.type||""),f.type?(f.transform?(e.scaleX=f.transform.x,e.scaleY=f.transform.y):(e.scaleX=1,e.scaleY=1),m(g,f.properties),m(a.properties,f.properties),f):null},m=function(a,b){var c="";if(a&&b)for(c in a)a.hasOwnProperty(c)&&(b[c]=n(a[c]));return b},n=function(a){var b=0;if("string"==typeof a){if(b=parseFloat(a),0===b||b)return b;if("true"===a)return!0;if("false"===a)return!1;if(a.length>1&&("{"===a[0]&&"}"===a[a.length-1]||"["===a[0]&&"]"===a[a.length-1]))try{return JSON.parse(a)}catch(c){}}return a},o=function(a,d){var e=0,f=0,g=Array.setUp(),h=null,i=Array.setUp(),j=null,k=null,m=null;if("string"==typeof a&&(a=platypus.game.settings.levels[a]),a)if(a.tilesets=r(a.tilesets),a.assets)i.union(a.assets);else{for(e=0;e<a.layers.length;e++)if("objectgroup"===a.layers[e].type)for(f=0;f<a.layers[e].objects.length;f++)k=l(a.layers[e].objects[f],a.tilesets),k&&(m=c.getAssetList(k),i.union(m),m.recycle());else"imagelayer"===a.layers[e].type?i.union([a.layers[e].image]):a.layers[e].properties&&a.layers[e].properties.entity&&(j=b.setUp("type",a.layers[e].properties.entity),h=c.getAssetList(j),i.union(h),h.recycle(),j.recycle());if(!d){for(e=0;e<a.tilesets.length;e++)g.push(a.tilesets[e].image);i.union(g),g.recycle()}a.assets=i.greenSlice()}return i},p={"render-layer":{id:"render-layer",components:[{type:"RenderTiles",spriteSheet:"import",imageMap:"import",entityCache:!0}]},"collision-layer":{id:"collision-layer",components:[{type:"CollisionTiles",collisionMap:"import"}]},"image-layer":{id:"image-layer",components:[{type:"RenderTiles",spriteSheet:"import",imageMap:"import"}]}},q=function(a){var b="",c=platypus.game.settings.levels[a.source.replace(".json","")];for(b in c)c.hasOwnProperty(b)&&(a[b]=c[b]);return delete a.source,a},r=function(a){var b=0;for(b=0;b<a.length;b++)a[b].source&&(a[b]=q(a[b]));return a};return platypus.createComponentClass({id:"TiledLoader",properties:{offsetMap:!1,showCollisionTiles:!1,images:null,layerIncrement:1e3,separateTiles:!1,spriteSheet:null},publicProperties:{level:null,unitsPerPixel:1,imagesScale:1,entityPositionX:"center",entityPositionY:"bottom",manuallyLoad:!1},initialize:function(){this.assetCache=platypus.game.app.assetManager.cache,this.layerZ=0,this.followEntity=!1},events:{"scene-loaded":function(a){this.manuallyLoad||this.loadLevel({level:this.level||a.level,persistentData:a})},"load-level":function(a){this.loadLevel(a)}},methods:{createLayer:function(a,b,f,g,h,i,j,k,l){var n=null,o=b.width,q=b.height,r=b.tileheight||i,s=b.tilewidth||h,t=0,u=0,v=0,w=JSON.parse(JSON.stringify(platypus.game.settings.entities[a]||p[a])),x=null,y=null,z=null,A=!1,B=null,C=null,D=0,E=0,F=0,G="",H=null;if(this.decodeLayer(b),H=b.data,w.properties=w.properties||{},b.properties){if(b.properties.width&&(t=parseInt(b.properties.width,10)),b.properties.height&&(u=parseInt(b.properties.height,10)),t||u){for(t=t||o,u=u||q,H=[],E=0;t>E;E++)for(F=0;u>F;F++)o>E&&q>F?H[E+F*t]=b.data[E+F*o]:H[E+F*t]=0;o=t,q=u}m(b.properties,w.properties)}if(x={},y=[],z=[],"collision-layer"===a)for(C=[],E=0;E<j.length;E++)if(B=j[E],B.tileproperties)for(G in B.tileproperties)B.tileproperties.hasOwnProperty(G)&&B.tileproperties[G].jumpThrough&&C.push(B.firstgid+parseInt(G,10));if(w.properties.width=s*o*this.unitsPerPixel,w.properties.height=r*q*this.unitsPerPixel,w.properties.columns=o,w.properties.rows=q,w.properties.tileWidth=s*this.unitsPerPixel,w.properties.tileHeight=r*this.unitsPerPixel,w.properties.scaleX=this.imagesScale,w.properties.scaleY=this.imagesScale,w.properties.layerZ=this.layerZ,w.properties.left=w.properties.x||f,w.properties.top=w.properties.y||g,w.properties.z=w.properties.z||this.layerZ,j.length)for(v=j[j.length-1].imagewidth/s*(j[j.length-1].imageheight/r)+j[j.length-1].firstgid,E=-1;v>E;E++)x["tile"+E]=E;for(E=0;o>E;E++)for(y[E]=[],z[E]=[],F=0;q>F;F++)D=+H[E+F*o]-1,z[E][F]="tile"+D,D+=1,C&&C.length&&C[0]===(d&D)&&(D=e|D),y[E][F]=D;for(E=0;E<w.components.length;E++)"RenderTiles"===w.components[E].type&&(A=w.components[E]),"import"===w.components[E].spriteSheet?w.components[E].spriteSheet={images:b.image?[b.image]:k,frames:{width:s*this.unitsPerPixel/this.imagesScale,height:r*this.unitsPerPixel/this.imagesScale,regX:s*this.unitsPerPixel/this.imagesScale/2,regY:r*this.unitsPerPixel/this.imagesScale/2},animations:x}:w.components[E].spriteSheet&&("string"==typeof w.components[E].spriteSheet&&platypus.game.settings.spriteSheets[w.components[E].spriteSheet]&&(w.components[E].spriteSheet=platypus.game.settings.spriteSheets[w.components[E].spriteSheet]),w.components[E].spriteSheet.animations||(w.components[E].spriteSheet.animations=x)),"import"===w.components[E].collisionMap&&(w.components[E].collisionMap=y),"import"===w.components[E].imageMap&&(w.components[E].imageMap=z);return this.layerZ+=this.layerIncrement,"render-layer"===a&&!this.separateTiles&&l&&l.tileHeight===r&&l.tileWidth===s&&l.columns===o&&l.rows===q?(l.triggerEvent("add-tiles",A),l):(n={},"render-layer"===a&&this.spriteSheet&&("string"==typeof this.spriteSheet?n.spriteSheet=platypus.game.settings.spriteSheets[this.spriteSheet]:n.spriteSheet=this.spriteSheet,n.spriteSheet.animations||(n.spriteSheet.animations=x)),this.owner.addEntity(new c(w,{properties:n})))},convertImageLayer:function(a,b,c){var d=0,e=0,f=a.properties||{},g={data:[],image:"",height:1,name:a.name,type:"tilelayer",width:1,tileheight:b,tilewidth:c,x:a.x,y:a.y,properties:f};for(f.repeat&&(g.width=+f.repeat,g.height=+f.repeat),f["repeat-x"]&&(g.width=+f["repeat-x"]),f["repeat-y"]&&(g.height=+f["repeat-y"]),e=g.width*g.height,d=0;e>d;d++)g.data.push(1);return this.assetCache.read(a.name)?(g.image=a.name,g.tileheight=this.assetCache.read(a.name).height,g.tilewidth=this.assetCache.read(a.name).width):(platypus.debug.warn('Component TiledLoader: Cannot find the "'+a.name+'" sprite sheet. Add it to the list of assets in config.json and give it the id "'+a.name+'".'),g.image=a.image),g},loadLevel:function(c){var d=!0,e=null,f=null,g=0,h=0,j=null,k=null,l=null,n=null,o=0,p=0,q=b.setUp("count",0,"progress",0,"total",0),s=0,t=0,u=0,v=b.setUp("level",null,"world",a.setUp(),"tile",a.setUp(),"camera",null);if(f="string"==typeof c.level?platypus.game.settings.levels[c.level]:c.level,e=f.layers,n=r(f.tilesets),o=f.tilewidth,p=f.tileheight,f.properties&&m(f.properties,this.owner),j=this.images?this.images.greenSlice():Array.setUp(),0===j.length)for(h=0;h<n.length;h++)this.assetCache.read(n[h].name)?j.push(n[h].name):(platypus.debug.warn('Component TiledLoader: Cannot find the "'+n[t].name+'" sprite sheet. Add it to the list of assets in config.json and give it the id "'+n[t].name+'".'),j.push(n[h].image));for(s=f.width*o*this.unitsPerPixel,g=f.height*p*this.unitsPerPixel,this.offsetMap&&(t=i(s),u=i(g)),q.total=h=e.length;h--;)"objectgroup"===e[h].type?q.total+=e[h].objects.length:d&&("collision"===e[h].name||e[h].properties&&"collision-layer"===e[h].properties.entity)&&(d=!1);for(h=0;h<e.length;h++){switch(l=e[h],l.type){case"imagelayer":k=this.createLayer("image-layer",this.convertImageLayer(l,p,o),t,u,o,p,n,j,k);break;case"objectgroup":this.setUpEntities(l,t,u,o,p,n,q),k=null;break;case"tilelayer":k=this.setupLayer(l,d,k,t,u,o,p,n,j);break;default:platypus.debug.warn('TiledLoader: Platypus does not support Tiled layers of type "'+l.type+'". This layer will not be loaded.')}this.updateLoadingProgress(q)}q.recycle(),v.level=f,v.camera=this.followEntity,v.width=s,v.height=g,v.world.setBounds(t,u,t+s,u+g),v.tile.setBounds(0,0,o,p),this.owner.triggerEvent("world-loaded",v),v.world.recycle(),v.tile.recycle(),v.recycle(),this.owner.removeComponent(this)},setUpEntities:function(a,b,d,e,f,g,h){var i=1e3,j=0,k=0,m=0,n=0,o=0,p=0,q=0,r=null,s=0,t=null,u=null,v=null,w="",x="",y="",z=-1,A=1/0,B=-(1/0),C=1/0,D=-(1/0),E=null,F=null,G=null,H=0,I=0;for(w=this.entityPositionX,x=this.entityPositionY,a.properties&&(a.properties.entityPositionX&&(w=a.properties.entityPositionX),a.properties.entityPositionY&&(x=a.properties.entityPositionY)),s=0;s<a.objects.length;s++){if(t=a.objects[s],E=l(t,g)){if(z=E.gid,y=E.type,u=platypus.game.settings.entities[y],v=u?u.properties||null:null,F=E.properties,t.polygon||t.polyline){for(A=1/0,B=-(1/0),C=1/0,D=-(1/0),G=null,t.polygon?G=t.polygon:t.polyline&&(G=t.polyline),m=0;m<G.length;m++)G[m].x>B&&(B=G[m].x),G[m].x<A&&(A=G[m].x),G[m].y>D&&(D=G[m].y),G[m].y<C&&(C=G[m].y);if(F.width=B-A,F.height=D-C,F.x=t.x+A,F.y=t.y+C,j=0,k=0,F.width=F.width*this.unitsPerPixel,F.height=F.height*this.unitsPerPixel,F.x=F.x*this.unitsPerPixel+b,F.y=F.y*this.unitsPerPixel+d,t.polygon)for(F.shape={},F.shape.type="polygon",F.shape.points=[],n=0;n<G.length;n++)F.shape.points.push({x:(G[n].x-A)*this.unitsPerPixel+b,y:(G[n].y-C)*this.unitsPerPixel+d});else if(t.polyline)for(F.shape={},F.shape.type="polyline",F.shape.points=[],n=0;n<G.length;n++)F.shape.points.push({x:(G[n].x-A)*this.unitsPerPixel+b,y:(G[n].y-C)*this.unitsPerPixel+d})}else H=e*this.unitsPerPixel,I=f*this.unitsPerPixel,j=0,k=0,F.width=(t.width||0)*this.unitsPerPixel,F.height=(t.height||0)*this.unitsPerPixel,v&&("number"==typeof v.width&&(F.width=v.width,j=H),"number"==typeof v.height&&(F.height=v.height,k=I)),F.width||(F.width=H),F.height||(F.height=I),j=j||F.width,k=k||F.height,F.x=t.x*this.unitsPerPixel,F.y=t.y*this.unitsPerPixel,t.rotation&&(o=(t.width||H)/2,p=(t.height||I)/2,q=t.rotation/180%2*Math.PI,r=platypus.Vector.setUp(o,-p).rotate(q),F.rotation=t.rotation,F.x=Math.round((F.x+r.x-o)*i)/i,F.y=Math.round((F.y+r.y+p)*i)/i,r.recycle()),"left"===w?F.regX=0:"center"===w?(F.regX=F.width/2,F.x+=j/2):"right"===w&&(F.regX=F.width,F.x+=j),F.x+=b,-1===z&&(F.y+=F.height),"bottom"===x?F.regY=F.height:"center"===x?(F.regY=F.height/2,F.y-=k/2):"top"===x&&(F.regY=0,F.y-=k),F.y+=d,t.ellipse?(F.shape={},F.shape.type="ellipse",F.shape.width=F.width*this.unitsPerPixel,F.shape.height=F.height*this.unitsPerPixel):t.width&&t.height&&(F.shape={},F.shape.type="rectangle",F.shape.width=F.width*this.unitsPerPixel,F.shape.height=F.height*this.unitsPerPixel);v?(F.scaleX*=this.imagesScale*(v.scaleX||1),F.scaleY*=this.imagesScale*(v.scaleY||1)):(F.scaleX*=this.imagesScale,F.scaleY*=this.imagesScale),F.layerZ=this.layerZ,F.z?F.z+=this.layerZ:v&&"number"==typeof v.z?F.z=this.layerZ+v.z:F.z=this.layerZ,F.parent=this.owner,t=this.owner.addEntity(new c(u,{properties:F})),t&&(t.camera&&(this.followEntity={entity:t,mode:t.camera}),this.owner.triggerEvent("entity-created",t))}this.updateLoadingProgress(h)}this.layerZ+=this.layerIncrement},setupLayer:function(a,b,c,d,e,f,g,h,i){var j="render-layer";return a.properties&&a.properties.entity?j=a.properties.entity:"collision"===a.name?j="collision-layer":"action"===a.name&&(j=b?"tile-layer":"render-layer"),"tile-layer"===j||this.showCollisionTiles&&platypus.game.settings.debug?(this.createLayer("collision-layer",a,d,e,f,g,h,i,c),this.createLayer("render-layer",a,d,e,f,g,h,i,c)):"collision-layer"===j?(this.createLayer("collision-layer",a,d,e,f,g,h,i,c),null):this.createLayer(j,a,d,e,f,g,h,i,c)},updateLoadingProgress:function(a){a.count+=1,a.progress=a.count/a.total,this.owner.triggerEvent("level-loading-progress",a)},destroy:function(){}},publicMethods:{decodeLayer:function(a){return"base64"===a.encoding&&(a.data=h(a.data,a.compression),a.encoding="csv"),a}},getAssetList:function(a,b,c){var d=b||{},e=c||{},f=a.spriteSheet||d.spriteSheet||e.spriteSheet,g=a.images||d.images||e.images,h=o(a.level||d.level||e.level,f);return f&&("string"==typeof f?h.union(platypus.game.settings.spriteSheets[f].images):h.union(f.images)),g&&h.union(g),h},getLateAssetList:function(a,b,c,d){var e=b||{},f=c||{},g=a.spriteSheet||e.spriteSheet||f.spriteSheet;return d&&d.level?o(d.level,g):Array.setUp()}})}(),function(){"use strict";var a=include("platypus.Data"),b=function(){this.active--},c=function(){this.active++},d=function(a){this.timelineInstances.push(this.createTimeStampedTimeline(this.timelines[a]))},e=function(a){for(var b=a.delta,c=null,d=this.timelineInstances,e=d.length;e--;)c=d[e],c.active&&(0===c.timeline.length?(d.greenSplice(e),c.timeline.recycle(2),c.recycle()):this.progressTimeline(c,b))};return platypus.createComponentClass({id:"Timeline",properties:{timelines:{}},initialize:function(){var a=0;this.timelineInstances=Array.setUp();for(a in this.timelines)this.timelines.hasOwnProperty(a)&&this.addEventListener(a,d.bind(this,a))},events:{"logic-tick":e,"handle-logic":e},methods:{createTimeStampedTimeline:function(d){var e=Array.setUp(),f=0,g=0,h=null;for(f=0;f<d.length;f++)h=d[f],"number"==typeof h?g+=h:e.push(a.setUp("time",g,"value",h));return e.reverse(),a.setUp("timeline",e,"time",0,"active",1,"pause",b,"play",c)},progressTimeline:function(a,b){var c=a.timeline,d=c.length,e=null,f=null,g=this.owner;for(a.time+=b;d--;){if(e=c[d],!(e.time<=a.time))return;if(f=e.value,"string"==typeof f?this.owner.triggerEvent(f):(f.entity&&(g=this.owner.getEntityById?this.owner.getEntityById(f.entity):this.owner.parent.getEntityById(f.entity),g||(platypus.debug.warn("No entity of that id"),g=this.owner)),f.message?g.triggerEvent(f.event,f.message):g.trigger(f.event)),e.recycle(),c.pop(),!a.active)return;e=null,f=null,g=this.owner}},destroy:function(){for(var a=null,b=this.timelineInstances,c=b.length;c--;)a=b[c],a.timeline.recycle(2),a.recycle();b.recycle(),this.timelineInstances=null}}})}(),function(){"use strict";var a=function(a){var b=null;for(b in this.watchedEntities)a.type===b&&this.watchedEntities[b].push(a)},b=function(a){var b=0,c=a.type;for(b=this.watchedEntities[c].length-1;b>=0;b--)if(this.watchedEntities[c][b]===a){this.watchedEntities[c].splice(b,1);break}},c=function(a){var b=a.delta,c=0,d=null,e=null,f=-1,g=!1,h=null;for(c=0;c<this.tutorials.length;c++)if(g=!1,d=this.tutorials[c],this.playing||0!==this.theQueue.length?!this.playing&&this.theQueue.length>0&&d.priority>this.theQueue[0].priority?g=!0:this.playing&&this.playing.priority<d.priority?g=!0:d.queue&&(g=!0):g=!0,g&&this.checkRequirements(d.requirements)){if(d.replayDelay&&d.replayDelayTimer>0&&(d.replayDelayTimer-=b,d.replayDelayTimer>0))continue;(!e||e.priority<d.priority)&&(e=d,f=c)}e?(h=this.tutorials.splice(f,1)[0],this.playing?h.priority>this.playing.priority?(this.owner.triggerEvent("stop-audio"),this.play(h)):this.queue(h):this.theQueue.length>0?h.priority>this.theQueue[0].priority?this.play(h):(this.play(this.theQueue.splice(0,1)[0]),this.queue(h)):this.play(h)):!this.playing&&this.theQueue.length>0&&this.play(this.theQueue.splice(0,1)[0])};return platypus.createComponentClass({id:"Tutorial",properties:{tutorialDefs:[]},publicProperties:{},initialize:function(){var a=0,b=null,c=null,d=null;for(this.playing=null,this.theQueue=[],this.watchedEntities={},this.tutorials=[],a=0;a<this.tutorialDefs.length;a++)if(c=this.tutorialDefs[a],d={},c.events){d.events=c.events.greenSlice(),d.originalEvents=c.events.greenSlice(),d.priority=c.priority||0,d.queue=c.queue||!1,d.timesToReplay="number"==typeof c.timesToReplay?c.timesToReplay:1/0,d.replayDelay=c.replayDelay||null,d.replayDelayTimer=d.replayDelay,d.level=c.level,d.requirements={};for(b in c.requirements)c.requirements.hasOwnProperty(b)&&(d.requirements[b]=c.requirements[b].greenSlice(),this.watchedEntities[b]||(this.watchedEntities[b]=[]));this.tutorials.push(d)}else platypus.debug.warn("Tutorial definition lacks events.")},events:{"child-entity-added":a,"peer-entity-added":a,"child-entity-removed":b,"peer-entity-removed":b,"logic-tick":c,"handle-logic":c,"sequence-complete":function(){this.playing.timesToReplay>=0&&this.tutorials.push(this.playing),this.playing=null}},methods:{play:function(a){var b=null;this.playing=a,0===this.playing.events.length&&(this.playing.events=this.playing.originalEvents.greenSlice()),b=this.playing.events.splice(Math.floor(Math.random()*this.playing.events.length),1)[0],this.owner.triggerEvent(b),a.timesToReplay-=1,a.replayDelayTimer=a.replayDelay},queue:function(a){var b=0,c=!1;for(b=0;b<this.theQueue.length;b++)if(this.theQueue[b].priority<a.priority){this.theQueue.splice(b,0,a),c=!0;break}c||this.theQueue.push(a)},checkRequirements:function(a){var b=0,c=0,d=null,e=null,f=null,g=!0;for(d in a)if(a.hasOwnProperty(d)){for(e=a[d],c=this.watchedEntities[d].length-1;c>=0;c--){for(f=this.watchedEntities[d][c],g=!0,b=0;b<e.length;b++)if(!f.state.get(e[b])){g=!1;break}if(g)break}if(!g)return!1}return!0},destroy:function(){this.watchedEntities=null,this.theQueue=null,this.playing=null,this.tutorials=null}}})}(),function(){"use strict";var a=function(a,b,c,d){return function(){a.trigger(b,c,d)}},b=function(b){return function(c){var d=0,e=b,f=null,g=null,h=null,i=createjs.Tween.get(this.owner);if(Array.isArray(c))e=c;else if(!Array.isArray(e))return;for(d=0;d<e.length;d++)f=e[d],"string"==typeof f?i.call(a(this.owner,f)):Array.isArray(f)?"call"===f[0]&&"string"==typeof f[1]?i.call(a(this.owner,f[1])):(g=f.greenSlice(),"to"===g.greenSplice(0)&&g[2]&&createjs.Ease[g[2]]&&(g.length>3?(h=g.greenSlice(),h.greenSplice(0),h.greenSplice(0),g[2]=createjs.Ease[h.greenSplice(0)].apply(null,h),h.recycle()):g[2]=createjs.Ease[g[2]]),i[f[0]].apply(i,g),g.recycle()):"call"===f.method&&"string"==typeof f.params?i.call(a(this.owner,f.params)):i[f.method].apply(i,f.params)}};return platypus.createComponentClass({id:"Tween",initialize:function(a){var c="";if(a.events)for(c in a.events)a.events.hasOwnProperty(c)&&this.addEventListener(c,b(a.events[c]))}})}(),function(){"use strict";var a=include("platypus.components.AudioVO"),b=include("platypus.components.RenderAnimation"),c=include("platypus.components.RenderSprite"),d=function(a,b){return" "===b?a+"default":a+b},e=function(a,b,c){this.owner.addComponent(new a(this.owner,b,c))},f=function(a,b,c,e){var f=0,g="",h={},i=0,j="",k="",l=a.voice;if("string"==typeof a.sound)h.sound=a.sound,h.events=Array.setUp();else{for(g in a.sound)a.sound.hasOwnProperty(g)&&(h[g]=a.sound[g]);h.events?h.events=h.events.greenSlice():h.events=Array.setUp()}if(l)for(l+=" ",f=0;f<l.length;f++)k=l[f],k!==j&&(j=k,h.events.push({time:i,event:d(c,k)})),i+=e;return h},g=function(a,b,c,d){var e=0,g=Array.setUp();if(b[" "]||(b[" "]=b["default"]),Array.isArray(a)){for(e=0;e<a.length;e++)"number"==typeof a[e]?g.push(a[e]):g.push(f(a[e],b,c,d));return g}return f(a,b,c,d)};return platypus.createComponentClass({id:"VoiceOver",properties:{animationMap:{"default":"default"},frameLength:100,messagePrefix:"",voiceOverMap:{}},initialize:function(f,h){var i="",j=Array.setUp(),k={audioMap:{},aliases:f.aliases},l={acceptInput:f.acceptInput,aliases:f.aliases,animation:f.animation,animationMap:{},eventBased:!0,flip:f.flip,hidden:f.hidden,interactive:f.interactive,mask:f.mask,mirror:f.mirror,offsetZ:f.offsetZ,regX:f.regX,regY:f.regY,restart:f.restart,rotate:f.rotate,scaleX:f.scaleX,scaleY:f.scaleY,spriteSheet:f.spriteSheet,stateBased:f.stateBased||!1};this.messagePrefix?this.message=this.messagePrefix+"-":this.message="";for(i in this.animationMap)this.animationMap.hasOwnProperty(i)&&(l.animationMap[d(this.message,i)]=this.animationMap[i]);l.animationMap["default"]=this.animationMap["default"],j.push(e.bind(this,f.animation?b:c,l));for(i in this.voiceOverMap)this.voiceOverMap.hasOwnProperty(i)&&(k.audioMap[i]=g(this.voiceOverMap[i],this.animationMap,this.message,this.frameLength));return j.push(e.bind(this,a,k)),platypus.Async.setUp(j,h),j.recycle(),!0},events:{load:function(){this.owner.removeComponent(this)}},getAssetList:function(a,b,c){var d=a.spriteSheet||b.spriteSheet||c&&c.spriteSheet;return"string"==typeof d?platypus.game.settings.spriteSheets[d].images.greenSlice():d?d.images.greenSlice():Array.setUp()}})}(),function(){"use strict";var a=include("window.XMLHttpRequest");return platypus.createComponentClass({id:"XHR",properties:{method:"GET",path:"",responseType:"text",withCredentials:!1},initialize:function(a){this.setProperties(a)},events:{request:function(a){if(this.setProperties(a),"GET"===this.method)this.get();else{if("POST"!==this.method)throw"Method must be GET or POST";this.post()}}},methods:{setProperties:function(a){var b="",c="",d=a||this;if(this.method=d.method||this.method||"GET",this.path=d.path||this.path||null,this.responseType=d.responseType||this.responseType||"text",this.withCredentials=d.withCredentials||this.withCredentials||!1,d!==this&&d.data){this.data="";for(b in d.data)d.data.hasOwnProperty(b)&&(this.data+=c+b+"="+d.data[b],c="&")}else this.data="";this.onload=d.onload||this.onload||function(){200===this.status&&this.owner.triggerEvent("response",this.responseText)}.bind(this)},get:function(){var b=new a,c=this.path;this.data&&(c+="?"+this.data),b.open(this.method,c,!0),b.withCredentials=this.withCredentials,b.responseType=this.responseType,b.onload=this.onload,b.send()},post:function(){var b=new a;b.open(this.method,this.path,!0),b.withCredentials=this.withCredentials,b.responseType=this.responseType,b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),b.onload=this.onload,b.send(this.data)}}})}();