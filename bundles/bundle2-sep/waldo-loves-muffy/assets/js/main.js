var gameLib=gameLib||{};gameLib.AUDIO_TITLE="AUDIO_TITLE",gameLib.AUDIO_WIN="AUDIO_WIN",gameLib.AUDIO_MENU_CHOOSE="AUDIO_MENU_CHOOSE",gameLib.AUDIO_TUTORIAL_MAIN="AUDIO_TUTORIAL_MAIN",gameLib.AUDIO_TUTORIAL_MENU="AUDIO_TUTORIAL_MENU",gameLib.AUDIO_TUTORIAL_SHRINK="AUDIO_TUTORIAL_SHRINK",gameLib.AUDIO_TUTORIAL_PORTALS="AUDIO_TUTORIAL_PORTALS",gameLib.AUDIO_TUTORIAL_INVISIBLE="AUDIO_TUTORIAL_INVISIBLE",gameLib.AUDIO_TUTORIAL_SPRINGS="AUDIO_TUTORIAL_SPRINGS",gameLib.AUDIO_TUTORIAL_ARROWS="AUDIO_TUTORIAL_ARROWS",gameLib.AUDIO_MISSING_PORTAL="AUDIO_MISSING_PORTAL",gameLib.AUDIO_PLACE_PIECES="AUDIO_PLACE_PIECES",gameLib.AUDIO_BASIC_CLICK="AUDIO_BASIC_CLICK",gameLib.AUDIO_PICKUP="AUDIO_PICKUP",gameLib.AUDIO_CHANGE_SHRINK="AUDIO_CHANGE_SHRINK",gameLib.AUDIO_COLLECT_HEART="AUDIO_COLLECT_HEART",gameLib.AUDIO_PASS_PORTAL="AUDIO_PASS_PORTAL",gameLib.AUDIO_PASS_EYEBALL="AUDIO_PASS_EYEBALL",gameLib.AUDIO_FAIL_EYEBALL="AUDIO_FAIL_EYEBALL",gameLib.AUDIO_CHANGE_INVIS="AUDIO_CHANGE_INVIS",gameLib.AUDIO_SUCCESS="AUDIO_SUCCESS",gameLib.AUDIO_HIT_COMPLETED_PIECE="AUDIO_HIT_COMPLETED_PIECE",gameLib.AUDIO_GO="AUDIO_GO",gameLib.AUDIO_HIT_WALL_HOLE="AUDIO_HIT_WALL_HOLE",gameLib.AUDIO_HIT_WALL="AUDIO_HIT_WALL",gameLib.AUDIO_PASS_WALL_HOLE="AUDIO_PASS_WALL_HOLE",gameLib.AUDIO_PASS_GAME_PIECE="AUDIO_PASS_GAME_PIECE",gameLib.AUDIO_PASS_DIAG_GAME_PIECE="AUDIO_PASS_DIAG_GAME_PIECE",gameLib.AUDIO_HEART_POPUP="AUDIO_HEART_POPUP";var audioMgrInstance=null;gameLib.AudioManager=function(){audioMgrInstance=this,audioMgrInstance.successAudio_origin=["game-success-bestfriend","game-success-himuffy","game-success-hooray"],audioMgrInstance.successAudio=[],audioMgrInstance.failAudio_origin=["game-fdbk-oops","game-fdbk-uhoh","game-fdbk-whoa"],audioMgrInstance.failAudio=[],audioMgrInstance.currentSound=null,audioMgrInstance.currentSoundAlt=null,audioMgrInstance.loopedAudio=null,audioMgrInstance.stopLoopedAudio=!1},gameLib.AudioManager.getInstance=function(){return null===audioMgrInstance&&(audioMgrInstance=new gameLib.AudioManager),audioMgrInstance},gameLib.AudioManager.prototype={preload:function(){},setup:function(a){audioMgrInstance.game=a},stopAudio:function(){app.voPlayer.stop()}},gameLib.AudioManager.prototype.startLoop=function(){audioMgrInstance.stopLoopedAudio=!1,app.sound.play("waldo-loop",{loop:-1})},gameLib.AudioManager.prototype.stopLoop=function(){audioMgrInstance.stopLoopedAudio=!0,app.sound.stop("waldo-loop")},gameLib.AudioManager.prototype.playAudio=function(a){var b=null,c=null;switch(a){case gameLib.AUDIO_TITLE:app.voPlayer.play(["splash-title","splash-clickplay"]);break;case gameLib.AUDIO_MENU_CHOOSE:app.voPlayer.play("menu-chooseround");break;case gameLib.AUDIO_TUTORIAL_MAIN:app.voPlayer.play("tut-main");break;case gameLib.AUDIO_TUTORIAL_ARROWS:app.voPlayer.play("tut-arrows");break;case gameLib.AUDIO_TUTORIAL_SPRINGS:app.voPlayer.play("tut-springs");break;case gameLib.AUDIO_TUTORIAL_MENU:app.voPlayer.play("tut-instruct");break;case gameLib.AUDIO_TUTORIAL_INVISIBLE:app.voPlayer.play("tut-invisible");break;case gameLib.AUDIO_TUTORIAL_PORTALS:app.voPlayer.play("tut-portals");break;case gameLib.AUDIO_TUTORIAL_SHRINK:app.voPlayer.play("tut-shrink");break;case gameLib.AUDIO_WIN:c=UTIL.getRandomItemFromArray(audioMgrInstance.successAudio,audioMgrInstance.successAudio_origin),app.voPlayer.play(c);break;case gameLib.AUDIO_MISSING_PORTAL:app.voPlayer.play("game-fdbk-bothportals");break;case gameLib.AUDIO_PASS_PORTAL:app.sound.play("direct-portalin"),app.sound.play("direct-portalout");break;case gameLib.AUDIO_PLACE_PIECES:app.voPlayer.play("game-placethepieces");break;case gameLib.AUDIO_BASIC_CLICK:app.sound.isPlaying("basic-click")||(audioMgrInstance.currentSound=app.sound.play("basic-click"));break;case gameLib.AUDIO_PICKUP:app.sound.isPlaying("direct-pickup")||(audioMgrInstance.currentSound=app.sound.play("direct-pickup"));break;case gameLib.AUDIO_CHANGE_SHRINK:app.sound.play("shrink-pass");break;case gameLib.AUDIO_COLLECT_HEART:app.sound.play("heart-collect");break;case gameLib.CHAR_WALDO_CAVE:app.voPlayer.play("game-fdbk-char-caveman");break;case gameLib.CHAR_WALDO_COW:app.voPlayer.play("game-fdbk-char-cowboy");break;case gameLib.CHAR_WALDO_ELVIS:app.voPlayer.play("game-fdbk-char-elvis");break;case gameLib.CHAR_WALDO_KARATE:app.voPlayer.play("game-fdbk-char-karate");break;case gameLib.CHAR_WALDO_SHERLOCK:app.voPlayer.play("game-fdbk-char-sherlock");break;case gameLib.CHAR_WALDO_SUPER:app.voPlayer.play("game-fdbk-char-super");break;case gameLib.CHAR_WALDO_VACATION:app.voPlayer.play("game-fdbk-char-vacation");break;case gameLib.AUDIO_PASS_EYEBALL:app.sound.isPlaying("eyeball-pass")||(audioMgrInstance.currentSound=app.sound.play("eyeball-pass"));break;case gameLib.AUDIO_FAIL_EYEBALL:app.sound.isPlaying("eyeball-hit")||(audioMgrInstance.currentSound=app.sound.play("eyeball-hit")),"game-fdbk-eyeball"!==app.voPlayer.currentVO&&(this.currentSoundAlt=app.voPlayer.play("game-fdbk-eyeball"));break;case gameLib.AUDIO_CHANGE_INVIS:app.sound.isPlaying("invisible-pass")||(audioMgrInstance.currentSound=app.sound.play("invisible-pass")),"game-fdbk-invisible"!==app.voPlayer.currentVO&&(this.currentSoundAlt=app.voPlayer.play("game-fdbk-invisible"));break;case gameLib.AUDIO_SUCCESS:app.sound.play("success");break;case gameLib.AUDIO_HIT_COMPLETED_PIECE:app.voPlayer.play("game-fdbk-alreadyused");break;case gameLib.AUDIO_GO:app.voPlayer.play("game-fdbk-go");break;case gameLib.AUDIO_HIT_WALL_HOLE:app.sound.play("wall-hole-hit"),app.voPlayer.play("game-fdbk-wallhole");break;case gameLib.AUDIO_HIT_WALL:app.sound.play("wall-hit"),b=UTIL.getRandomItemFromArray(audioMgrInstance.failAudio,audioMgrInstance.failAudio_origin),app.voPlayer.play(b);break;case gameLib.AUDIO_PASS_WALL_HOLE:"game-fdbk-shrink"!==app.voPlayer.currentVO&&(audioMgrInstance.currentSound=app.voPlayer.play("game-fdbk-shrink"));break;case gameLib.AUDIO_PASS_GAME_PIECE:app.sound.play("direct-arrow");break;case gameLib.AUDIO_PASS_DIAG_GAME_PIECE:audioMgrInstance.currentSound=app.sound.play("direct-spring");break;case gameLib.AUDIO_HEART_POPUP:app.sound.play("heart-popup")}},window.gameLib.AudioManager=gameLib.AudioManager;var gameLib=gameLib||{},modelInstance=null;gameLib.GameModel=function(){this.tileWidth=78,this.tileHeight=76,this.isFirstMenu=!0,this.isFirstLevel=!0,this.currentWidth=0,this.currentHeight=0,this.canvasWidth=960,this.canvasHeight=556,this.levelState=[new gameLib.GameStateVO("blue_level","Round_01"),new gameLib.GameStateVO("green_level","Round_02"),new gameLib.GameStateVO("purple_level","Round_03"),new gameLib.GameStateVO("orange_level","Round_04"),new gameLib.GameStateVO("yellow_level","Round_05"),new gameLib.GameStateVO("blue_level","Round_06"),new gameLib.GameStateVO("green_level","Round_07"),new gameLib.GameStateVO("purple_level","Round_08"),new gameLib.GameStateVO("orange_level","Round_09"),new gameLib.GameStateVO("yellow_level","Round_10"),new gameLib.GameStateVO("blue_level","Round_11"),new gameLib.GameStateVO("green_level","Round_12"),new gameLib.GameStateVO("purple_level","Round_13"),new gameLib.GameStateVO("orange_level","Round_14"),new gameLib.GameStateVO("yellow_level","Round_15"),new gameLib.GameStateVO("blue_level","Round_16"),new gameLib.GameStateVO("green_level","Round_17"),new gameLib.GameStateVO("purple_level","Round_18"),new gameLib.GameStateVO("orange_level","Round_19"),new gameLib.GameStateVO("yellow_level","Round_20"),new gameLib.GameStateVO("blue_level","Round_21"),new gameLib.GameStateVO("green_level","Round_22"),new gameLib.GameStateVO("purple_level","Round_23"),new gameLib.GameStateVO("orange_level","Round_24"),new gameLib.GameStateVO("yellow_level","Round_25")],this.levelStateIndex=0},gameLib.GameModel.getInstance=function(){return null===modelInstance&&(modelInstance=new gameLib.GameModel),modelInstance},gameLib.GameModel.prototype.getLevel=function(a){for(var b,c=0;c<modelInstance.levelState.length;c++)if(modelInstance.levelState[c].objectLayerName==a){b=modelInstance.levelState[c];break}return b},gameLib.GameModel.prototype.getLevelByIndex=function(a){var b=modelInstance.levelState[a];return b},window.gameLib.GameModel=gameLib.GameModel;var gameLib=gameLib||{};gameLib.GameStateVO=function(a,b){this.backgroundLayerName=a,this.objectLayerName=b,this.heartsWonHigh=0,this.heartsWonCurrent=0,this.completed=!1},gameLib.GameStateVO.prototype.heartsWon=function(a){a>this.heartsWonHigh&&(this.heartsWonHigh=a),this.heartsWonCurrent=a,this.completed=!0};var gameLib=gameLib||{},GameModel=include("gameLib.GameModel"),gameModel=GameModel.getInstance();gameLib.Boot=function(a){},gameLib.Boot.prototype={preload:function(){this.load.atlasXML("loader","assets/images/spritesheet/loader.png","assets/images/spritesheet/loader.xml")},create:function(){this.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,this.scale.onSizeChange.add(this.handleSizeChange),this.stage.backgroundColor="#f59799",this.state.start("preload"),UTIL.SetScaleSize(gameModel,this.game.scale,window.innerHeight,window.innerWidth)},handleSizeChange:function(a){UTIL.SetScaleSize(gameModel,a,window.innerHeight,window.innerWidth)}},window.gameLib.Boot=gameLib.Boot;var gameLib=gameLib||{},gameMenuRef=null;gameLib.GameMenu=function(a){gameMenuRef=this,gameMenuRef.gameCore=a,gameMenuRef.audioMgr=gameLib.AudioManager.getInstance(),gameMenuRef.backgroundGroup=null,gameMenuRef.blueCompleteScreen=null,gameMenuRef.greenCompleteScreen=null,gameMenuRef.orangeCompleteScreen=null,gameMenuRef.purpleCompleteScreen=null,gameMenuRef.yellowCompleteScreen=null,gameMenuRef.levelName=null,gameMenuRef.heartOffsetXPos=207,gameMenuRef.heartOffsetYPos=150,gameMenuRef.screenOffSetX=-25,gameMenuRef.screenOffSetY=0},gameLib.GameMenu.prototype={init:function(a){gameMenuRef.levelName=a},create:function(){switch(gameMenuRef.gameModel=gameLib.GameModel.getInstance(),gameMenuRef.levelName){case"blue_level":gameMenuRef.gameCore.add.sprite(gameMenuRef.screenOffSetX,0,"round_complete_blue");break;case"green_level":gameMenuRef.gameCore.add.sprite(gameMenuRef.screenOffSetX,0,"round_complete_green");break;case"orange_level":gameMenuRef.gameCore.add.sprite(gameMenuRef.screenOffSetX,0,"round_complete_orange");break;case"purple_level":gameMenuRef.gameCore.add.sprite(gameMenuRef.screenOffSetX,0,"round_complete_purple");break;case"yellow_level":gameMenuRef.gameCore.add.sprite(gameMenuRef.screenOffSetX,0,"round_complete_yellow")}gameMenuRef.menuButton=gameMenuRef.add.button(220+gameMenuRef.screenOffSetX,SETTINGS_GAME.height-180,"button_spritesheet",gameMenuRef.onMainMenuDisplay,gameMenuRef,"lrg_menu_btn_up","lrg_menu_btn_up","lrg_menu_btn_down"),gameMenuRef.menuButton.inputEnabled=!0;var a=175;gameMenuRef.replayButton=gameMenuRef.add.button(gameMenuRef.menuButton.x+a+gameMenuRef.screenOffSetX,SETTINGS_GAME.height-180,"button_spritesheet",gameMenuRef.onReplayHandler,gameMenuRef,"replay-button_up","replay-button_up","replay_btn_down"),gameMenuRef.replayButton.inputEnabled=!0,gameMenuRef.gameModel.levelStateIndex<gameMenuRef.gameModel.levelState.length-1&&(gameMenuRef.nextButton=gameMenuRef.add.button(gameMenuRef.replayButton.x+a+gameMenuRef.screenOffSetX,SETTINGS_GAME.height-180,"button_spritesheet",gameMenuRef.onNextHandler,gameMenuRef,"next_btn_up","next_btn_up","next_btn_down"),gameMenuRef.nextButton.inputEnabled=!0),gameMenuRef.startAnimation()},startAnimation:function(){var a=gameMenuRef.gameModel.getLevelByIndex(gameMenuRef.gameModel.levelStateIndex).heartsWonCurrent;gameMenuRef.heart_complete_1=gameMenuRef.add.sprite(220+gameMenuRef.screenOffSetX,gameMenuRef.heartOffsetYPos,"round_complete_hearts"),gameMenuRef.heart_complete_1.visible=!1,gameMenuRef.heart_complete_1.animations.add("play_heart",["round_complete_heart_00","round_complete_heart_01","round_complete_heart_02","round_complete_heart_03","round_complete_heart_04","round_complete_heart_05","round_complete_heart_06","round_complete_heart_07","round_complete_heart_08","round_complete_heart_09","round_complete_heart_10","round_complete_heart_11"],10,!1),a>0&&gameMenuRef.time.events.add(100,gameMenuRef.playHeart1),gameMenuRef.heart_complete_2=gameMenuRef.add.sprite(gameMenuRef.heart_complete_1.x+gameMenuRef.heartOffsetXPos+gameMenuRef.screenOffSetX,gameMenuRef.heartOffsetYPos,"round_complete_hearts"),gameMenuRef.heart_complete_2.visible=!1,gameMenuRef.heart_complete_2.animations.add("play_heart",["round_complete_heart_00","round_complete_heart_01","round_complete_heart_02","round_complete_heart_03","round_complete_heart_04","round_complete_heart_05","round_complete_heart_06","round_complete_heart_07","round_complete_heart_08","round_complete_heart_09","round_complete_heart_10","round_complete_heart_11"],10,!1),a>1&&gameMenuRef.time.events.add(200,gameMenuRef.playHeart2),gameMenuRef.heart_complete_3=gameMenuRef.add.sprite(gameMenuRef.heart_complete_2.x+gameMenuRef.heartOffsetXPos+gameMenuRef.screenOffSetX,gameMenuRef.heartOffsetYPos,"round_complete_hearts"),gameMenuRef.heart_complete_3.visible=!1,gameMenuRef.heart_complete_3.animations.add("play_heart",["round_complete_heart_00","round_complete_heart_01","round_complete_heart_02","round_complete_heart_03","round_complete_heart_04","round_complete_heart_05","round_complete_heart_06","round_complete_heart_07","round_complete_heart_08","round_complete_heart_09","round_complete_heart_10","round_complete_heart_11"],10,!1),a>2&&gameMenuRef.time.events.add(400,gameMenuRef.playHeart3),gameMenuRef.checkmark=gameMenuRef.add.sprite(gameMenuRef.heart_complete_1.x+gameMenuRef.heartOffsetXPos+gameMenuRef.screenOffSetX,gameMenuRef.heartOffsetYPos+20,"checkmark_anim"),gameMenuRef.checkmark.visible=!1,gameMenuRef.checkmark.animations.add("play_checkmark",["checkmark_splash_00","checkmark_splash_01","checkmark_splash_02","checkmark_splash_03","checkmark_splash_04","checkmark_splash_05","checkmark_splash_06","checkmark_splash_07","checkmark_splash_08","checkmark_splash_09","checkmark_splash_10","checkmark_splash_11","checkmark_splash_12"],10,!1),0===a&&(gameMenuRef.checkmark.visible=!0,gameMenuRef.checkmark.play("play_checkmark"),gameMenuRef.audioMgr.playAudio(gameLib.AUDIO_HEART_POPUP))},playHeart1:function(){gameMenuRef.heart_complete_1.visible=!0,gameMenuRef.heart_complete_1.play("play_heart"),gameMenuRef.audioMgr.playAudio(gameLib.AUDIO_HEART_POPUP)},playHeart2:function(){gameMenuRef.heart_complete_2.visible=!0,gameMenuRef.heart_complete_2.play("play_heart"),gameMenuRef.audioMgr.playAudio(gameLib.AUDIO_HEART_POPUP)},playHeart3:function(){gameMenuRef.heart_complete_3.visible=!0,gameMenuRef.heart_complete_3.play("play_heart"),gameMenuRef.audioMgr.playAudio(gameLib.AUDIO_HEART_POPUP)},onReplayHandler:function(){gameMenuRef.state.start("game",!0,!1,"nextLevel")},onNextHandler:function(){gameMenuRef.gameModel.levelStateIndex<gameMenuRef.gameModel.levelState.length-1&&(gameMenuRef.gameModel.levelStateIndex=Number(gameMenuRef.gameModel.levelStateIndex)+1,gameMenuRef.state.start("game",!0,!1,"nextLevel"))},onMainMenuDisplay:function(){gameMenuRef.state.start("mainmenu")}},window.gameLib.GameMenu=gameLib.GameMenu;var gameLib=gameLib||{},levelRef=null;gameLib.DIRECTION_MOVE_LEFT="DIRECTION_MOVE_LEFT",gameLib.DIRECTION_MOVE_RIGHT="DIRECTION_MOVE_RIGHT",gameLib.DIRECTION_MOVE_UP="DIRECTION_MOVE_UP",gameLib.DIRECTION_MOVE_DOWN="DIRECTION_MOVE_DOWN",gameLib.DIRECTION_MOVE_UP_LEFT="DIRECTION_MOVE_UP_LEFT",gameLib.DIRECTION_MOVE_DOWN_LEFT="DIRECTION_MOVE_DOWN_LEFT",gameLib.DIRECTION_MOVE_UP_RIGHT="DIRECTION_MOVE_UP_RIGHT",gameLib.DIRECTION_MOVE_DOWN_RIGHT="DIRECTION_MOVE_DOWN_RIGHT",gameLib.CHAR_WALDO_DEFAULT=gameLib.CHAR_WALDO_DEFAULT,gameLib.CHAR_WALDO_CAVE="waldo_cave",gameLib.CHAR_WALDO_COW="waldo_cow",gameLib.CHAR_WALDO_ELVIS="waldo_elv",gameLib.CHAR_WALDO_KARATE="waldo_kar",gameLib.CHAR_WALDO_SHERLOCK="waldo_sher",gameLib.CHAR_WALDO_SUPER="waldo_sup",gameLib.CHAR_WALDO_VACATION="waldo_vac",gameLib.START_DIRECT_RIGHT="move_right",gameLib.START_DIRECT_LEFT="move_left",gameLib.START_DIRECT_UP="move_up",gameLib.START_DIRECT_DOWN="move_down",gameLib.DEFAULT_ERROR_MESSAGE="Oops! Try again!",gameLib.Level_1=function(a){levelRef=this,this.game=a,this.map=null,this.layer=null,this.muffy=null,this.elephant_toy=null,this.direction_tile=null,this.gameModel=null,this.statusDisplay=null,this.gamePiecesUp=null,this.gamePiecesDown=null,this.gamePiecesLeft=null,this.gamePiecesRight=null,this.gamePiecesUpLeft=null,this.gamePiecesUpRight=null,this.gamePiecesDownLeft=null,this.gamePiecesDownRight=null,this.blockersGroup=null,this.heartsGroup=null,this.gameLeftPortal=null,this.gameRightPortal=null,this.gameUpPortal=null,this.gameDownPortal=null,this.completedImages=[],this.isRenderOn=!1,this.active=!0,this.gameSetupMode=!0,this.audioMgr=null,this.isMouseUp=!0,this.heartCounted=0,this.transformWaldo=!1,this.failed=!1,this.ignoreBlockers=!1,this.direction="",this.invisibleWaldo=!1,this.portalIsEnabled=!1,this.isShunk=!1,this.poofAnimationIsPlaying=!1,this.activeAddCompImageTimer=!1,this.needToClearCompleted=!1,this.widthOfCollision=6,this.currentTile=null,this.cloudBorder=null,this.elephant_toy_setting=null,this.gameState=null,this.playButton=null,this.transition_waldo_origin=[gameLib.CHAR_WALDO_CAVE,gameLib.CHAR_WALDO_COW,gameLib.CHAR_WALDO_ELVIS,gameLib.CHAR_WALDO_KARATE,gameLib.CHAR_WALDO_SHERLOCK,gameLib.CHAR_WALDO_SUPER,gameLib.CHAR_WALDO_VACATION],this.transition_waldo=[],this.screenOffSetX=9,this.screenOffSetY=12,this.gameAreaXPos=155,this.velocitySpeed=125,this.waldoFrameRate=6},gameLib.Level_1.prototype={init:function(a){this.game.device.touch&&(this.game.input.maxPointers=1),this.gameModel=gameLib.GameModel.getInstance(),this.audioMgr=gameLib.AudioManager.getInstance(),this.audioMgr.setup(this.game),this.audioMgr.stopAudio(),this.gameModel.isFirstLevel===!0&&(levelRef.playAudio(gameLib.AUDIO_PLACE_PIECES),this.gameModel.isFirstLevel=!1),this.heartCounted=0,"nextLevel"!==a&&UTIL.isNumeric(a)&&a<this.gameModel.levelState.length?(this.gameModel.levelStateIndex=a,this.gameState=this.gameModel.levelState[a]):this.gameState=this.gameModel.levelState[this.gameModel.levelStateIndex]},create:function(){this.gameSetupMode=!0,this.stage.backgroundColor="#FFFFFF",this.tileMapGroup=this.add.group(),this.game.physics.startSystem(Phaser.Physics.ARCADE),this.map=this.add.tilemap("GameTileMap"),this.map.addTilesetImage("WaldoTiles"),this.map.addTilesetImage(this.gameState.backgroundLayerName+"_tilesheet"),this.layer=this.map.createLayer(this.gameState.backgroundLayerName+"_layer"),this.layer.resizeWorld(),this.tileMapGroup.addChild(this.layer),this.pocketlayer=this.map.createLayer("pockets"),this.pocketlayer.resizeWorld(),this.tileMapGroup.addChild(this.pocketlayer),this.gameboard_objs=this.map.objects[this.gameState.objectLayerName],this.elephant_toy_setting=this.getTileDataByName("elephant_toy"),this.elephant_toy=this.add.sprite(this.elephant_toy_setting.x,this.elephant_toy_setting.y,"elephant_toy"),this.elephant_toy.animations.add(gameLib.CHAR_WALDO_DEFAULT,["waldo_default_0","waldo_default_1"]),this.elephant_toy.animations.add(gameLib.CHAR_WALDO_CAVE,["waldo_cave_0","waldo_cave_1"]),this.elephant_toy.animations.add(gameLib.CHAR_WALDO_COW,["waldo_cow_0","waldo_cow_1"]),this.elephant_toy.animations.add(gameLib.CHAR_WALDO_ELVIS,["waldo_elv_0","waldo_elv_1"]),this.elephant_toy.animations.add(gameLib.CHAR_WALDO_KARATE,["waldo_kar_0","waldo_kar_1"]),this.elephant_toy.animations.add(gameLib.CHAR_WALDO_SHERLOCK,["waldo_sher_0","waldo_sher_1"]),this.elephant_toy.animations.add(gameLib.CHAR_WALDO_SUPER,["waldo_sup_0","waldo_sup_1"]),this.elephant_toy.animations.add(gameLib.CHAR_WALDO_VACATION,["waldo_vac_0","waldo_vac_1"]),this.elephant_toy.anchor.x=.5,this.elephant_toy.anchor.y=.5,this.elephant_toy.x=this.elephant_toy.x+this.gameModel.tileWidth/2,this.elephant_toy.y=this.elephant_toy.y+this.gameModel.tileHeight/2,this.elephant_toy_setting.direction==gameLib.START_DIRECT_DOWN?(this.elephant_toy.angle=90,this.elephant_toy.y=this.elephant_toy.y+10):this.elephant_toy.x=this.elephant_toy.x+10,this.physics.arcade.enable(this.elephant_toy),this.elephant_toy.body.collideWorldBounds=!0,this.elephant_toy.body.setSize(2,2,-1,-1),this.menuButton=this.add.button(20,this.screenOffSetY,"button_spritesheet",this.onMainMenuDisplay,this,"menu_btn_up","menu_btn_up","menu_btn_down"),this.menuButton.inputEnabled=!0,this.menuButton.input.useHandCursor=!0,this.helpButton=this.add.button(90+this.screenOffSetX,this.screenOffSetY,"button_spritesheet",this.onHelpDisplay,this,"help_btn","help_btn","help_btn"),this.helpButton.inputEnabled=!0,this.helpButton.input.useHandCursor=!0,this.helpButton.scale.x=this.helpButton.scale.y=.95;var a=this.getTileDataByName("muffy");this.muffy=this.add.sprite(a.x,a.y,"tilesheet_imgs",a.tileName),this.physics.arcade.enable(this.muffy),this.muffy.body.setSize(8,8,(this.gameModel.tileWidth-4)/2,(this.gameModel.tileHeight-4)/2),this.muffy.body.immovable=!0,this.waldo_muffy_heart=this.add.sprite(this.muffy.x,this.muffy.y,"tilesheet_imgs","waldo_muffy_heart"),this.waldo_muffy_heart.visible=!1,this.blockersGroup=this.add.physicsGroup(),this.createTileGroup(this.getTileDataByType("blocker"),this.blockersGroup,!0),this.heartsGroup=this.add.physicsGroup(),this.createTileGroup(this.getTileDataByType("reward"),this.heartsGroup),this.gamePiecesUp=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","arrow_up"),this.gamePiecesUp),this.gamePiecesUp.name="gamePiecesUp",this.gamePiecesDown=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","arrow_down"),this.gamePiecesDown),this.gamePiecesDown.name="gamePiecesDown",this.gamePiecesLeft=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","arrow_left"),this.gamePiecesLeft),this.gamePiecesLeft.name="gamePiecesLeft",this.gamePiecesRight=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","arrow_right"),this.gamePiecesRight),this.gamePiecesRight.name="gamePiecesRight",this.gameLeftPortal=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","portal_left"),this.gameLeftPortal),this.gameLeftPortal.name="gameLeftPortal",this.gameRightPortal=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","portal_right"),this.gameRightPortal),this.gameRightPortal.name="gameRightPortal",this.gameUpPortal=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","portal_up"),this.gameUpPortal),this.gameUpPortal.name="gameUpPortal",this.gameDownPortal=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","portal_down"),this.gameDownPortal),this.gameDownPortal.name="gameDownPortal",this.gamePiecesUpLeft=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","arrow_up_left"),this.gamePiecesUpLeft),this.gamePiecesUpLeft.name="gamePiecesUpLeft",this.gamePiecesDownLeft=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","arrow_down_left"),this.gamePiecesDownLeft),this.gamePiecesDownLeft.name="gamePiecesDownLeft",this.gamePiecesUpRight=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","arrow_up_right"),this.gamePiecesUpRight),this.gamePiecesUpRight.name="gamePiecesUpRight",this.gamePiecesDownRight=this.add.physicsGroup(),this.createGamePieceGroup(this.getTileDataByType("game_piece","arrow_down_right"),this.gamePiecesDownRight),this.gamePiecesDownRight.name="gamePiecesDownRight",this.gameTransformHat=this.add.physicsGroup(),this.createTileGroup(this.getTileDataByType("effect","hat"),this.gameTransformHat),this.gameShrink=this.add.physicsGroup(),this.createTileGroup(this.getTileDataByType("effect","shrink"),this.gameShrink),this.gameEyeball=this.add.physicsGroup(),this.createTileGroup(this.getTileDataByType("effect","eye_ball"),this.gameEyeball,!1),this.gameInvisible=this.add.physicsGroup(),this.createTileGroup(this.getTileDataByType("effect","invisible"),this.gameInvisible),this.gamePiecesCompleted=this.add.physicsGroup(),this.start_button=this.add.button(1*this.gameModel.tileWidth/2+this.screenOffSetX,6*this.gameModel.tileHeight-10+this.screenOffSetY,"button_spritesheet",this.onClickToy,this,"go_btn_up","go_btn_up","go_btn_down"),this.start_button.events.onInputDown.add(this.onClickToy,this),this.start_button.inputEnabled=!0,this.start_button.input.useHandCursor=!0,this.pause_button=this.add.button(1*this.gameModel.tileWidth/2+this.screenOffSetX,6*this.gameModel.tileHeight-10+this.screenOffSetY,"button_spritesheet",null,this,"stop_btn_up","stop_btn_up","stop_btn_dwn"),this.pause_button.visible=!1,this.stage.children[0].setChildIndex(this.elephant_toy,this.stage.children[0].children.length-1),this.direction_tile=this.setUpDirectionTile(this.elephant_toy_setting.direction),this.physics.arcade.enable(this.direction_tile),this.cloudBorder=this.add.sprite(this.screenOffSetX-10,0,"cloud_border"),this.winScreen=this.add.group(),this.winBackgroundImg=this.add.sprite(0,0,"background_img"),this.winMuffyWaldo=this.add.sprite(SETTINGS_GAME.width/2-188,SETTINGS_GAME.height/2-187,"win_muffy_waldo_ss"),this.winMuffyWaldo.animations.add("play_win",["Win_Muffy_Waldo_01","Win_Muffy_Waldo_01","Win_Muffy_Waldo_02","Win_Muffy_Waldo_03","Win_Muffy_Waldo_04","Win_Muffy_Waldo_05","Win_Muffy_Waldo_06","Win_Muffy_Waldo_07","Win_Muffy_Waldo_08","Win_Muffy_Waldo_09"],12,!1),this.winScreen.addChild(this.winBackgroundImg),this.winScreen.addChild(this.winMuffyWaldo),this.winScreen.visible=!1,this.winScreen.x=SETTINGS_GAME.width,this.poofGroup=this.add.group(),this.tileMapGroup.x=this.screenOffSetX,this.tileMapGroup.y=this.screenOffSetY},handleInputUp:function(a){levelRef.gameSetupMode!==!1&&(levelRef.tileOnTileCrime(levelRef.currentTile),levelRef.playAudio(gameLib.AUDIO_BASIC_CLICK))},handleInputDown:function(a){levelRef.gameSetupMode!==!1&&levelRef.playAudio(gameLib.AUDIO_PICKUP)},tileOnTileCrime:function(a){a&&(levelRef.checkGroupOfTileCrime(this.gamePiecesUp,a,"gamePiecesUp"),levelRef.checkGroupOfTileCrime(this.gamePiecesDown,a,"gamePiecesDown"),levelRef.checkGroupOfTileCrime(this.gamePiecesLeft,a,"gamePiecesLeft"),levelRef.checkGroupOfTileCrime(this.gamePiecesRight,a,"gamePiecesRight"),levelRef.checkGroupOfTileCrime(this.gamePiecesUpLeft,a,"gamePiecesUpLeft"),levelRef.checkGroupOfTileCrime(this.gamePiecesUpRight,a,"gamePiecesUpRight"),levelRef.checkGroupOfTileCrime(this.gamePiecesDownLeft,a,"gamePiecesDownLeft"),levelRef.checkGroupOfTileCrime(this.gamePiecesDownRight,a,"gamePiecesDownRight"),levelRef.checkGroupOfTileCrime(this.gameLeftPortal,a,"gameLeftPortal"),levelRef.checkGroupOfTileCrime(this.gameRightPortal,a,"gameRightPortal"),levelRef.checkGroupOfTileCrime(this.gameUpPortal,a,"gameUpPortal"),levelRef.checkGroupOfTileCrime(this.gameDownPortal,a,"gameDownPortal"))},checkGroupOfTileCrime:function(a,b,c){if(a.children.length>0)if(b.parent.name===c)for(var d=0;d<a.children.length;++d)a.children[d]!==b&&this.checkForCollision(a.children[d],b);else a.forEach(levelRef.checkForCollision,levelRef,!0,b)},checkForCollision:function(a,b){levelRef.physics.arcade.overlap(a,b)&&(a.x=a.origPosX,a.y=a.origPosY)},resetPieceGroup:function(a){var b;switch(a.frameName){case"arrow_down":group=this.gamePiecesDown;break;case"arrow_up":group=this.gamePiecesUp;break;case"arrow_right":group=this.gamePiecesRight;break;case"arrow_left":group=this.gamePiecesLeft;break;case"arrow_down_left":group=this.gamePiecesDownLeft;break;case"arrow_down_right":group=this.gamePiecesDownRight;break;case"arrow_up_left":group=this.gamePiecesUpLeft;break;case"arrow_up_right":group=this.gamePiecesUpRight;break;case"portal_right":group=this.gameRightPortal;break;case"portal_left":group=this.gameLeftPortal;break;case"portal_up":group=this.gameUpPortal;break;case"portal_down":group=this.gameDownPortal}if(1===group.children.length)b=this.getTileDataByName(a.frameName),levelRef.currentTile.x=b.x,levelRef.currentTile.y=b.y;else for(var c=this.getTileDataByType("game_piece",a.frameName),d=group.children.length-1;d>=0;d--)b=c[d],group.children[d].x=b.x,group.children[d].y=b.y},onHelpDisplay:function(){this.waldo_muffy_heart.visible!==!0&&(null!==this.statusDisplay&&this.closeStatusDisplay(),this.game.state.start("tutorialmenu"))},render:function(){this.isRenderOn!==!1&&(this.muffy&&this.game.debug.body(this.muffy),this.elephant_toy&&this.game.debug.body(this.elephant_toy),this.debugGroup(this.gamePiecesUp),this.debugGroup(this.gamePiecesDown),this.debugGroup(this.gamePiecesLeft),this.debugGroup(this.gamePiecesRight),this.debugGroup(this.gamePiecesUpLeft),this.debugGroup(this.gamePiecesDownLeft),this.debugGroup(this.gamePiecesUpRight),this.debugGroup(this.gamePiecesDownRight),this.debugGroup(this.gameLeftPortal),this.debugGroup(this.gameRightPortal),this.debugGroup(this.gameUpPortal),this.debugGroup(this.gameDownPortal),this.debugGroup(this.blockersGroup),this.debugGroup(this.gameShrink),this.debugGroup(this.gameTransformHat),this.debugGroup(this.gamePiecesCompleted),this.debugGroup(this.gameEyeball))},debugGroup:function(a){if(a.children.length>0)for(i=0;i<a.children.length;i++)this.game.debug.body(a.getChildAt(i))},update:function(){if(this.gameSetupMode!==!0){if(levelRef.active!==!1&&null!==this.elephant_toy){if(this.physics.arcade.overlap(this.elephant_toy,this.gamePiecesDown,this.moveDown),this.physics.arcade.overlap(this.elephant_toy,this.gamePiecesUp,this.moveUp),this.physics.arcade.overlap(this.elephant_toy,this.gamePiecesRight,this.moveRight),this.physics.arcade.overlap(this.elephant_toy,this.gamePiecesLeft,this.moveLeft),this.physics.arcade.overlap(this.elephant_toy,this.gamePiecesDownLeft,this.moveDownLeft),this.physics.arcade.overlap(this.elephant_toy,this.gamePiecesUpLeft,this.moveUpLeft),this.physics.arcade.overlap(this.elephant_toy,this.gamePiecesUpRight,this.moveUpRight),this.physics.arcade.overlap(this.elephant_toy,this.gamePiecesDownRight,this.moveDownRight),this.physics.arcade.overlap(this.elephant_toy,this.gameLeftPortal,this.moveLeftRightPortal),this.physics.arcade.overlap(this.elephant_toy,this.gameRightPortal,this.moveLeftRightPortal),this.physics.arcade.overlap(this.elephant_toy,this.gameDownPortal,this.moveDownUpPortal),this.physics.arcade.overlap(this.elephant_toy,this.gameUpPortal,this.moveDownUpPortal),this.physics.arcade.overlap(this.heartsGroup,this.elephant_toy,this.handleTileCaughtRemove)&&(this.heartCounted=this.heartCounted+1,levelRef.playAudio(gameLib.AUDIO_COLLECT_HEART)),this.physics.arcade.collide(this.muffy,this.elephant_toy))return levelRef.audioMgr.stopLoop(),this.failed=!1,levelRef.playAudio(gameLib.AUDIO_SUCCESS),this.waldo_muffy_heart.visible=!0,this.muffy.visible=!1,this.elephant_toy.visible=!1,levelRef.createPoofAnim(levelRef.elephant_toy.x,levelRef.elephant_toy.y),levelRef.active=!1,levelRef.audioMgr.stopLoop(),levelRef.elephant_toy.body.velocity.x=0,levelRef.elephant_toy.body.velocity.y=0,levelRef.elephant_toy.animations.stop(),void(levelRef.endGameEvent=levelRef.time.events.add(3e3,levelRef.endGame));if(this.physics.arcade.overlap(this.elephant_toy,this.gameShrink,this.handleShrinkage)){if(levelRef.isShunk)return;levelRef.isShunk=!0,levelRef.playAudio(gameLib.AUDIO_CHANGE_SHRINK),levelRef.createPoofAnim(this.gameShrink.children[0].x+39,this.gameShrink.children[0].y+38),this.elephant_toy.body.setSize(this.widthOfCollision,this.widthOfCollision,-1,-1);var a;levelRef.direction==gameLib.DIRECTION_MOVE_RIGHT||levelRef.direction==gameLib.DIRECTION_MOVE_UP||levelRef.direction==gameLib.DIRECTION_MOVE_DOWN||levelRef.direction==gameLib.DIRECTION_MOVE_DOWN_RIGHT||levelRef.direction==gameLib.DIRECTION_MOVE_UP_RIGHT?a=levelRef.add.tween(this.elephant_toy.scale).to({x:.5,y:.5},250,Phaser.Easing.Bounce.InOut):(levelRef.direction==gameLib.DIRECTION_MOVE_LEFT||levelRef.direction==gameLib.DIRECTION_MOVE_DOWN_LEFT||levelRef.direction==gameLib.DIRECTION_MOVE_UP_LEFT)&&(a=levelRef.add.tween(this.elephant_toy.scale).to({x:-.5,y:.5},250,Phaser.Easing.Bounce.InOut)),
a&&a.start()}if(this.ignoreBlockers===!1?this.physics.arcade.overlap(this.blockersGroup,this.elephant_toy,this.handleBlocker)&&(levelRef.elephant_toy.animations.stop(),levelRef.active=!1,levelRef.elephant_toy.body.velocity.x=0,levelRef.elephant_toy.body.velocity.y=0,levelRef.audioMgr.stopLoop()):this.physics.arcade.overlap(this.blockersGroup,this.elephant_toy,this.handleHoleInWall),this.physics.arcade.overlap(this.gameEyeball,this.elephant_toy)){if(!this.invisibleWaldo)return levelRef.playAudio(gameLib.AUDIO_FAIL_EYEBALL),this.elephant_toy.body.velocity.x=0,this.elephant_toy.body.velocity.y=0,this.elephant_toy.animations.stop(),this.failed=!0,levelRef.audioMgr.stopLoop(),void this.createStatusDisplay(gameLib.DEFAULT_ERROR_MESSAGE,this.onRestart);levelRef.playAudio(gameLib.AUDIO_PASS_EYEBALL)}if(this.physics.arcade.overlap(this.gameInvisible,this.elephant_toy)&&(levelRef.poofAnimationIsPlaying=!0,levelRef.invisibleWaldo=!0,levelRef.playAudio(gameLib.AUDIO_CHANGE_INVIS),levelRef.createPoofAnim(this.gameInvisible.children[0].x+39,this.gameInvisible.children[0].y+38),levelRef.elephant_toy.alpha=.5),this.elephant_toy.body.onWall()||this.elephant_toy.body.x<=170||this.elephant_toy.body.y<=0||Math.round(this.elephant_toy.body.y)>=529)return levelRef.audioMgr.stopAudio(),levelRef.stopWaldo(),levelRef.playAudio(gameLib.AUDIO_HIT_WALL),void this.createStatusDisplay(gameLib.DEFAULT_ERROR_MESSAGE,this.onRestart);if(this.physics.arcade.collide(this.gamePiecesCompleted,this.elephant_toy)&&(this.elephant_toy.body.velocity.x=0,this.elephant_toy.body.velocity.y=0,this.elephant_toy.animations.stop(),levelRef.active=!1,levelRef.audioMgr.stopLoop(),levelRef.playAudio(gameLib.AUDIO_HIT_COMPLETED_PIECE),this.failed=!0,this.createStatusDisplay(gameLib.DEFAULT_ERROR_MESSAGE,this.onRestart)),this.physics.arcade.overlap(this.gameTransformHat,this.elephant_toy,this.handleMagicHatTransform)){if(this.transformWaldo)return;this.transformWaldo=!0;var b=this.gameTransformHat.children[0].x+39,c=this.gameTransformHat.children[0].y+38;levelRef.createPoofAnim(b,c);var d=UTIL.getRandomItemFromArray(this.transition_waldo,this.transition_waldo_origin);this.elephant_toy.play(d,this.waldoFrameRate,!0),""!==d?levelRef.playAudio(d):(this.elephant_toy.play(gameLib.CHAR_WALDO_VACATION,this.waldoFrameRate,!0),levelRef.playAudio(gameLib.AUDIO_CHAR_WALDO_VACATION))}}}else{if(this.moveTileImage){var e=Math.clip(this.input.activePointer.worldX,10,900),f=Math.clip(this.input.activePointer.worldY,20,500);this.moveTileImage.x=this.layer.getTileX(e)*this.gameModel.tileWidth+1+this.screenOffSetX,this.moveTileImage.y=this.layer.getTileY(f)*this.gameModel.tileHeight+1+this.screenOffSetY}if(this.input.activePointer.isUp){if(this.isMouseUp=!0,this.checkCollisionForGamePieces(this.moveTileImage),this.moveTileImage&&(this.moveTileImage=null),levelRef.currentTile&&levelRef.currentTile.x<this.gameAreaXPos){var g=levelRef.getTileDataByName(levelRef.currentTile.frameName);levelRef.currentTile.x!==g.x&&levelRef.currentTile.y!==g.y&&(levelRef.currentTile.x=levelRef.currentTile.origPosX,levelRef.currentTile.y=levelRef.currentTile.origPosY),levelRef.currentTile=null}}else this.isMouseUp=!1}}},gameLib.Level_1.prototype.checkCollisionForGamePieces=function(a){(this.physics.arcade.overlap(this.blockersGroup,a)||this.physics.arcade.overlap(this.muffy,a)||this.physics.arcade.overlap(this.gameInvisible,a)||this.physics.arcade.overlap(this.gameEyeball,a)||this.physics.arcade.overlap(this.gameTransformHat,a)||this.physics.arcade.overlap(this.heartsGroup,a)||this.physics.arcade.overlap(this.gameShrink,a)||this.physics.arcade.overlap(this.direction_tile,a))&&(levelRef.currentTile.x=levelRef.currentTile.origPosX,levelRef.currentTile.y=levelRef.currentTile.origPosY)},gameLib.Level_1.prototype.getTileDataByName=function(a){var b=null;if(this.gameboard_objs){var c=0;for(c=this.gameboard_objs.length-1;c>=0;c--)if(this.gameboard_objs[c].name===a){var d=(this.gameboard_objs[c].y/this.gameModel.tileHeight-1)*this.gameModel.tileHeight;b={type:this.gameboard_objs[c].properties.type,tileName:this.gameboard_objs[c].properties.tile,x:this.gameboard_objs[c].x+this.screenOffSetX,y:d+this.screenOffSetY,direction:this.gameboard_objs[c].properties.direction};break}}return b},gameLib.Level_1.prototype.getTileDataByType=function(a,b){var c=[];if(this.gameboard_objs){var d=0;for(d=0;d<this.gameboard_objs.length;d++)if(this.gameboard_objs[d].properties.type===a&&(void 0===b||this.gameboard_objs[d].properties.tile===b)){var e=(this.gameboard_objs[d].y/this.gameModel.tileHeight-1)*this.gameModel.tileHeight,f={type:this.gameboard_objs[d].properties.type,tileName:this.gameboard_objs[d].properties.tile,x:this.gameboard_objs[d].x+this.screenOffSetX,y:e+this.screenOffSetY};c.push(f)}}return c},gameLib.Level_1.prototype.createTileGroup=function(a,b,c){var d=0;for(d=0;d<a.length;d++){var e=a[d];b.create(e.x,e.y,"tilesheet_imgs",e.tileName)}b.setAll("body.immovable",!0)},gameLib.Level_1.prototype.createGamePieceGroup=function(a,b){var c=0;for(c=0;c<a.length;c++){var d=a[c],e=b.create(d.x,d.y,"tilesheet_imgs",d.tileName);e.origPosX=d.x,e.origPosY=d.y,e.inputEnabled=!0,e.events.onInputDown.add(this.onClickTileImage,this),e.body.setSize(this.widthOfCollision,this.widthOfCollision,(this.gameModel.tileWidth-this.widthOfCollision)/2,(this.gameModel.tileHeight-this.widthOfCollision)/2),e.events.onInputUp.add(this.handleInputUp),e.events.onInputDown.add(this.handleInputDown)}b.setAll("body.immovable",!0)},gameLib.Level_1.prototype.addTile=function(a,b,c,d,e){void 0===d&&(d=0),void 0===e&&(e=0);var f=this.add.sprite(a,b,"tilesheet_imgs",c);return this.physics.arcade.enable(f),f.body.immovable=!0,f.body.setSize(this.widthOfCollision,this.widthOfCollision,(this.gameModel.tileWidth-this.widthOfCollision)/2,(this.gameModel.tileHeight-this.widthOfCollision)/2),f.inputEnabled=!0,f.events.onInputDown.add(this.onClickTileImage,this),f.events.onInputUp.add(this.handleInputUp),f.events.onInputDown.add(this.handleInputDown),f},gameLib.Level_1.prototype.createStatusDisplay=function(a,b){if(null===this.statusDisplay){levelRef.failed===!0&&(levelRef.failed=!1),levelRef.active=!1,this.statusDisplay=levelRef.add.group(),levelRef.stage.children[0].setChildIndex(this.statusDisplay,levelRef.stage.children[0].children.length-1);var c=levelRef.add.graphics();c.beginFill(0,.2),c.drawRoundedRect(SETTINGS_GAME.width/2-210+2,SETTINGS_GAME.height/2-135+2,420,270,12);var d=levelRef.add.graphics();d.beginFill(16777215,1),d.drawRoundedRect(SETTINGS_GAME.width/2-210,SETTINGS_GAME.height/2-135,420,270,12);var e=levelRef.add.text(SETTINGS_GAME.width/2-114,SETTINGS_GAME.height/2-135+20,a,{font:"34px Lilita One",fill:"#000000",align:"center"}),f=levelRef.add.sprite(SETTINGS_GAME.width/2-215+130,e.y+64,"loss_overlay_waldo");f.anchor.x=.5,f.scale.x=-1,levelRef.playButton=levelRef.add.button(f.x+125,e.y+60,"button_spritesheet",null,levelRef,"replay-button_up","replay-button_up","replay_btn_down"),this.statusDisplay.addChild(c),this.statusDisplay.addChild(d),this.statusDisplay.addChild(e),this.statusDisplay.addChild(f),this.statusDisplay.addChild(levelRef.playButton),this.statusDisplay.alpha=0;var g=levelRef.add.tween(this.statusDisplay).to({alpha:1},250,Phaser.Easing.Linear.In,!0,300);g.onComplete.add(function(){levelRef.playButton.inputEnabled=!0,levelRef.playButton.input.useHandCursor=!0,levelRef.playButton.events.onInputDown.add(b,levelRef)},levelRef)}},gameLib.Level_1.prototype.closeStatusDisplay=function(){this.statusDisplay&&this.statusDisplay.destroy(),this.statusDisplay=null},gameLib.Level_1.prototype.onClickTileImage=function(a){levelRef.gameSetupMode!==!1&&(levelRef.moveTileImage=a,levelRef.currentTile=a,levelRef.currentTile.parent.setChildIndex(levelRef.currentTile,levelRef.currentTile.parent.children.length-1),levelRef.stage.children[0].setChildIndex(levelRef.currentTile.parent,levelRef.stage.children[0].children.length-1),levelRef.stage.children[0].setChildIndex(levelRef.cloudBorder,levelRef.stage.children[0].children.length-1))},gameLib.Level_1.prototype.onClickPause=function(){levelRef.active!==!1&&(levelRef.active=!1,levelRef.audioMgr.stopLoop(),levelRef.elephant_toy.body.velocity.x=0,levelRef.elephant_toy.body.velocity.y=0,levelRef.onRestart())},gameLib.Level_1.prototype.onClickToy=function(){if(this.isMouseUp!==!1){switch(levelRef.stage.children[0].setChildIndex(levelRef.gamePiecesCompleted,levelRef.stage.children[0].children.length-1),levelRef.stage.children[0].setChildIndex(levelRef.elephant_toy,levelRef.stage.children[0].children.length-1),levelRef.stage.children[0].setChildIndex(levelRef.direction_tile,levelRef.stage.children[0].children.length-1),levelRef.stage.children[0].setChildIndex(levelRef.cloudBorder,levelRef.stage.children[0].children.length-1),this.gameSetupMode=!1,this.audioMgr.stopAudio(),levelRef.playAudio(gameLib.AUDIO_GO),this.audioMgr.startLoop(),this.start_button.events.onInputDown.remove(this.onClickToy),this.start_button.input.useHandCursor=!1,this.start_button.inputEnabled=!1,this.pause_button.events.onInputDown.add(this.onClickPause,this),this.pause_button.inputEnabled=!0,this.pause_button.input.useHandCursor=!0,this.pause_button.visible=!0,this.transformWaldo=!1,this.portalIsEnabled=!1,this.elephant_toy.play(gameLib.CHAR_WALDO_DEFAULT,this.waldoFrameRate,!0),this.elephant_toy_setting.direction){case gameLib.START_DIRECT_RIGHT:this.moveRight();break;case gameLib.START_DIRECT_LEFT:this.moveLeft();break;case gameLib.START_DIRECT_DOWN:this.moveDown(),this.elephant_toy.angle=90,this.elephant_toy.x=this.elephant_toy_setting.x+this.gameModel.tileWidth/2,this.elephant_toy.y=this.elephant_toy_setting.y+this.gameModel.tileHeight;break;case gameLib.START_DIRECT_UP:this.moveUp();break;default:this.moveRight()}levelRef.active=!0;levelRef.createCompleteTile(this.elephant_toy_setting,"wall",.1)}},gameLib.Level_1.prototype.setUpDirectionTile=function(a){var b;switch(a){case gameLib.START_DIRECT_RIGHT:b=this.add.sprite(this.elephant_toy_setting.x,this.elephant_toy_setting.y,"tilesheet_imgs","launcher_right");break;case gameLib.START_DIRECT_LEFT:b=this.add.sprite(this.elephant_toy_setting.x,this.elephant_toy_setting.y,"tilesheet_imgs","launcher_left");break;case gameLib.START_DIRECT_DOWN:b=this.add.sprite(this.elephant_toy_setting.x,this.elephant_toy_setting.y,"tilesheet_imgs","launcher_down");break;case gameLib.START_DIRECT_UP:b=this.add.sprite(this.elephant_toy_setting.x,this.elephant_toy_setting.y,"tilesheet_imgs","launcher_up");break;default:b=this.add.sprite(this.elephant_toy_setting.x,this.elephant_toy_setting.y,"tilesheet_imgs","launcher_right")}return b},gameLib.Level_1.prototype.onRestart=function(){this.gameSetupMode=!0,this.heartCounted=0,this.transformWaldo=!1,this.elephant_toy.scale.x=1,this.elephant_toy.scale.y=1,this.elephant_toy.animations.stop(),this.invisibleWaldo=!1,this.elephant_toy.alpha=1,this.portalIsEnabled=!1,this.isShunk=!1,this.playButton&&this.playButton.events.onInputDown.remove(levelRef.onRestart,this),this.elephant_toy.x=this.elephant_toy_setting.x+this.gameModel.tileWidth/2,this.elephant_toy.y=this.elephant_toy_setting.y+this.gameModel.tileHeight/2,this.elephant_toy_setting.direction==gameLib.START_DIRECT_DOWN?(this.elephant_toy.angle=90,this.elephant_toy.y=this.elephant_toy.y+10):(this.elephant_toy.angle=0,this.elephant_toy.x=this.elephant_toy.x+10),this.closeStatusDisplay(),this.activeAddCompImageTimer?this.needToClearCompleted=!0:(this.gamePiecesCompleted&&this.gamePiecesCompleted.removeAll(),this.completedImages=[]),this.heartsGroup.destroy(),this.heartsGroup=this.add.physicsGroup(),this.physics.arcade.enable(this.heartsGroup),this.createTileGroup(this.getTileDataByType("reward"),this.heartsGroup),this.start_button.events.onInputDown.add(this.onClickToy,this),this.start_button.inputEnabled=!0,this.start_button.input.useHandCursor=!0,this.pause_button.events.onInputDown.remove(this.onClickPause,this),this.pause_button.input.useHandCursor=!1,this.pause_button.inputEnabled=!1,this.pause_button.visible=!1},gameLib.Level_1.prototype.createCompleteTile=function(a,b,c){levelRef.activeAddCompImageTimer=!0;var d=levelRef.add.sprite(a.x+levelRef.gameModel.tileWidth/2,a.y+levelRef.gameModel.tileHeight/2,"tilesheet_imgs",b);levelRef.physics.enable(d),d.anchor.x=.5,d.anchor.y=.5,d.body.immovable=!0,c&&(d.alpha=c),levelRef.completedImages.push(d),levelRef.addCompleteImageEvent=levelRef.time.events.add(100,levelRef.addCompleteImage)},gameLib.Level_1.prototype.addCompleteImage=function(){levelRef.time.events.remove(levelRef.addCompleteImageEvent);for(var a=levelRef.completedImages.length;a>0;a--)levelRef.gamePiecesCompleted.add(levelRef.completedImages[a-1]);levelRef.needToClearCompleted&&(levelRef.gamePiecesCompleted.removeAll(),levelRef.completedImages=[],levelRef.needToClearCompleted=!1),levelRef.activeAddCompImageTimer=!1},gameLib.Level_1.prototype.handleTileCaughtRemove=function(a,b){levelRef.createHeartAnim(b.x,b.y),b.destroy()},gameLib.Level_1.prototype.handleBlocker=function(a,b){"wall_hortiz_narrow"==b.frameName||"wall_vert_narrow"==b.frameName?(levelRef.audioMgr.stopAudio(),levelRef.playAudio(gameLib.AUDIO_HIT_WALL_HOLE),levelRef.stopWaldo(),levelRef.createStatusDisplay(gameLib.DEFAULT_ERROR_MESSAGE,levelRef.onRestart)):(levelRef.audioMgr.stopAudio(),levelRef.playAudio(gameLib.AUDIO_HIT_WALL),levelRef.stopWaldo(),levelRef.createStatusDisplay(gameLib.DEFAULT_ERROR_MESSAGE,levelRef.onRestart))},gameLib.Level_1.prototype.handleHoleInWall=function(a,b){"wall_hortiz_narrow"==b.frameName||"wall_vert_narrow"==b.frameName?levelRef.playAudio(gameLib.AUDIO_PASS_WALL_HOLE):(levelRef.elephant_toy.animations.stop(),levelRef.active=!1,levelRef.elephant_toy.body.velocity.x=0,levelRef.elephant_toy.body.velocity.y=0,levelRef.audioMgr.stopAudio(),levelRef.audioMgr.stopLoop(),levelRef.playAudio(gameLib.AUDIO_HIT_WALL),levelRef.stopWaldo(),levelRef.createStatusDisplay(gameLib.DEFAULT_ERROR_MESSAGE,levelRef.onRestart))},gameLib.Level_1.prototype.moveLeft=function(a,b){levelRef.direction=gameLib.DIRECTION_MOVE_LEFT,b&&levelRef.createCompleteTile(b,"arrow_left_completed"),levelRef.playAudio(gameLib.AUDIO_PASS_GAME_PIECE),levelRef.elephant_toy.x=Math.round(levelRef.elephant_toy.x-levelRef.gameModel.tileWidth/2),levelRef.elephant_toy.y=b?b.y+levelRef.gameModel.tileHeight/2:Math.round(levelRef.elephant_toy.y),levelRef.elephant_toy.body.velocity.x=-levelRef.velocitySpeed,levelRef.elephant_toy.body.velocity.y=0,levelRef.resetSize()},gameLib.Level_1.prototype.moveRight=function(a,b){levelRef.direction=gameLib.DIRECTION_MOVE_RIGHT,b&&levelRef.createCompleteTile(b,"arrow_right_completed"),levelRef.playAudio(gameLib.AUDIO_PASS_GAME_PIECE),levelRef.elephant_toy.x=Math.round(levelRef.elephant_toy.x+levelRef.gameModel.tileWidth/2),levelRef.elephant_toy.y=b?b.y+levelRef.gameModel.tileHeight/2:Math.round(levelRef.elephant_toy.y),levelRef.elephant_toy.body.velocity.x=levelRef.velocitySpeed,levelRef.elephant_toy.body.velocity.y=0,levelRef.resetSize()},gameLib.Level_1.prototype.moveUp=function(a,b){levelRef.direction=gameLib.DIRECTION_MOVE_UP,b&&levelRef.createCompleteTile(b,"arrow_up_completed"),levelRef.playAudio(gameLib.AUDIO_PASS_GAME_PIECE),levelRef.elephant_toy.x=b?b.x+levelRef.gameModel.tileWidth/2:Math.round(levelRef.elephant_toy.x),levelRef.elephant_toy.y=Math.round(levelRef.elephant_toy.y-levelRef.gameModel.tileHeight/2),levelRef.elephant_toy.body.velocity.x=0,levelRef.elephant_toy.body.velocity.y=-levelRef.velocitySpeed,levelRef.resetSize()},gameLib.Level_1.prototype.moveDown=function(a,b){levelRef.direction=gameLib.DIRECTION_MOVE_DOWN,b&&levelRef.createCompleteTile(b,"arrow_down_completed"),levelRef.playAudio(gameLib.AUDIO_PASS_GAME_PIECE),levelRef.elephant_toy.x=b?b.x+levelRef.gameModel.tileWidth/2:Math.round(levelRef.elephant_toy.x),levelRef.elephant_toy.y=Math.round(levelRef.elephant_toy.y+levelRef.gameModel.tileHeight/2),levelRef.elephant_toy.body.velocity.x=0,levelRef.elephant_toy.body.velocity.y=levelRef.velocitySpeed-1,levelRef.resetSize()},gameLib.Level_1.prototype.moveDownLeft=function(a,b){b&&levelRef.createCompleteTile(b,"arrow_down_left_completed"),levelRef.playAudio(gameLib.AUDIO_PASS_DIAG_GAME_PIECE),levelRef.resetSize(),levelRef.elephant_toy.scale.x=-1,levelRef.elephant_toy.angle=-30,levelRef.elephant_toy.body.velocity.x=-levelRef.velocitySpeed-2,levelRef.elephant_toy.body.velocity.y=levelRef.velocitySpeed,levelRef.direction=gameLib.DIRECTION_MOVE_DOWN_LEFT},gameLib.Level_1.prototype.moveDownRight=function(a,b){b&&levelRef.createCompleteTile(b,"arrow_down_right_completed"),levelRef.playAudio(gameLib.AUDIO_PASS_DIAG_GAME_PIECE),levelRef.resetSize(),levelRef.elephant_toy.angle=30,levelRef.elephant_toy.scale.x=1,levelRef.elephant_toy.body.velocity.x=levelRef.velocitySpeed+2,levelRef.elephant_toy.body.velocity.y=levelRef.velocitySpeed-2,levelRef.direction=gameLib.DIRECTION_MOVE_DOWN_RIGHT},gameLib.Level_1.prototype.moveUpLeft=function(a,b){b&&levelRef.createCompleteTile(b,"arrow_up_left_completed"),levelRef.playAudio(gameLib.AUDIO_PASS_DIAG_GAME_PIECE),levelRef.resetSize(),levelRef.elephant_toy.angle=30,levelRef.elephant_toy.scale.x=-1,levelRef.elephant_toy.body.velocity.x=-levelRef.velocitySpeed+2,levelRef.elephant_toy.body.velocity.y=-levelRef.velocitySpeed+2,levelRef.direction=gameLib.DIRECTION_MOVE_UP_LEFT},gameLib.Level_1.prototype.moveUpRight=function(a,b){b&&levelRef.createCompleteTile(b,"arrow_up_right_completed"),levelRef.playAudio(gameLib.AUDIO_PASS_DIAG_GAME_PIECE),levelRef.resetSize(),levelRef.elephant_toy.angle=-30,levelRef.elephant_toy.scale.x=1,levelRef.elephant_toy.body.velocity.x=levelRef.velocitySpeed+2,levelRef.elephant_toy.body.velocity.y=-levelRef.velocitySpeed+2,levelRef.direction=gameLib.DIRECTION_MOVE_UP_RIGHT},gameLib.Level_1.prototype.moveLeftRightPortal=function(a,b){if(levelRef.portalIsEnabled===!1){levelRef.portalIsEnabled=!0,levelRef.createPoofAnim(a.x,a.y);var c,d=!0;"portal_right"==b.frameName?(levelRef.createCompleteTile(b,"portal_right_completed"),c=levelRef.gameLeftPortal.getChildAt(0),levelRef.createCompleteTile(c,"portal_left_completed"),d=!1):(levelRef.createCompleteTile(b,"portal_left_completed"),c=levelRef.gameRightPortal.getChildAt(0),levelRef.createCompleteTile(c,"portal_right_completed")),levelRef.moveToPortal(c)}},gameLib.Level_1.prototype.moveDownUpPortal=function(a,b){if(levelRef.portalIsEnabled===!1){levelRef.portalIsEnabled=!0,levelRef.createPoofAnim(a.x,a.y);var c,d=!0;"portal_up"==b.frameName?(levelRef.createCompleteTile(b,"portal_up_completed"),c=levelRef.gameDownPortal.getChildAt(0),levelRef.createCompleteTile(c,"portal_down_completed"),d=!1):(levelRef.createCompleteTile(b,"portal_down_completed"),c=levelRef.gameUpPortal.getChildAt(0),levelRef.createCompleteTile(c,"portal_up_completed")),levelRef.moveToPortal(c)}},gameLib.Level_1.prototype.moveToPortal=function(a){if(a){if(a.x<150)return this.audioMgr.stopAudio(),this.createStatusDisplay(gameLib.DEFAULT_ERROR_MESSAGE,this.onRestart),levelRef.audioMgr.stopAudio(),levelRef.stopWaldo(),void levelRef.playAudio(gameLib.AUDIO_MISSING_PORTAL);levelRef.playAudio(gameLib.AUDIO_PASS_PORTAL),levelRef.elephant_toy.x=a.x+levelRef.gameModel.tileWidth/2,levelRef.elephant_toy.y=a.y+levelRef.gameModel.tileHeight/2,levelRef.poofAnimationIsPlaying=!1,levelRef.createPoofAnim(a.x+39,a.y+38),levelRef.resetSize()}},gameLib.Level_1.prototype.resetSize=function(){levelRef.elephant_toy.scale.x=1,levelRef.elephant_toy.scale.y=1,levelRef.elephant_toy.angle=0,levelRef.direction===gameLib.DIRECTION_MOVE_RIGHT||levelRef.direction===gameLib.DIRECTION_MOVE_LEFT&&(levelRef.elephant_toy.scale.x=-1),levelRef.direction===gameLib.DIRECTION_MOVE_UP?levelRef.elephant_toy.angle=-90:levelRef.direction===gameLib.DIRECTION_MOVE_DOWN&&(levelRef.elephant_toy.angle=90),levelRef.invisibleWaldo=!1,levelRef.elephant_toy.alpha=1,levelRef.elephant_toy.body.setSize(2,2,-1,-1),levelRef.ignoreBlockers=!1,levelRef.isShunk=!1},gameLib.Level_1.prototype.stopWaldo=function(){this.audioMgr.stopLoop(),levelRef.failed=!0,levelRef.elephant_toy.body.velocity.x=0,levelRef.elephant_toy.body.velocity.y=0,levelRef.elephant_toy.animations.stop(),levelRef.active=!1;var a=levelRef.elephant_toy.x,b=levelRef.elephant_toy.y;switch(levelRef.direction){case gameLib.DIRECTION_MOVE_LEFT:a=levelRef.elephant_toy.x+levelRef.gameModel.tileWidth/2;break;case gameLib.DIRECTION_MOVE_RIGHT:a=levelRef.elephant_toy.x-levelRef.gameModel.tileWidth/2;break;case gameLib.DIRECTION_MOVE_UP:b=levelRef.elephant_toy.y+levelRef.gameModel.tileHeight/2;break;case gameLib.DIRECTION_MOVE_DOWN:b=levelRef.elephant_toy.y-levelRef.gameModel.tileHeight/2;break;case gameLib.DIRECTION_MOVE_DOWN_RIGHT:a=levelRef.elephant_toy.x-levelRef.gameModel.tileWidth/2,b=levelRef.elephant_toy.y-levelRef.gameModel.tileHeight/2;break;case gameLib.DIRECTION_MOVE_DOWN_LEFT:a=levelRef.elephant_toy.x+levelRef.gameModel.tileWidth/2,b=levelRef.elephant_toy.y-levelRef.gameModel.tileHeight/2;break;case gameLib.DIRECTION_MOVE_UP_RIGHT:a=levelRef.elephant_toy.x-levelRef.gameModel.tileWidth/2,b=levelRef.elephant_toy.y+levelRef.gameModel.tileHeight/2;break;case gameLib.DIRECTION_MOVE_UP_LEFT:a=levelRef.elephant_toy.x+levelRef.gameModel.tileWidth/2,b=levelRef.elephant_toy.y+levelRef.gameModel.tileHeight/2}tween=levelRef.add.tween(levelRef.elephant_toy).to({x:a,y:b},500,Phaser.Easing.Bounce.Out,!0)},gameLib.Level_1.prototype.handleShrinkage=function(a,b){levelRef.ignoreBlockers=!0},gameLib.Level_1.prototype.createHeartAnim=function(a,b){var c=this.add.sprite(a,b,"game_heart_anim");c.animations.add("play_heart",["heart_splash_00","heart_splash_01","heart_splash_02","heart_splash_03","heart_splash_04","heart_splash_05","heart_splash_06","heart_splash_07","heart_splash_08","heart_splash_09","heart_splash_10","heart_splash_11"],12,!1);var d=c.play("play_heart");d.onComplete.add(levelRef.heartAnimationIsDone),levelRef.playAudio(gameLib.AUDIO_HEART_POPUP)},gameLib.Level_1.prototype.heartAnimationIsDone=function(a,b){a.visible=!1},gameLib.Level_1.prototype.heartAnimationIsDone=function(a,b){a.visible=!1},gameLib.Level_1.prototype.createPoofAnim=function(a,b){levelRef.poofGroup.visible=!0,levelRef.stage.children[0].setChildIndex(levelRef.poofGroup,levelRef.stage.children[0].children.length-1);var c=this.add.sprite(a,b,"smoke_puff_anim");levelRef.poofGroup.addChild(c),c.anchor.x=.5,c.anchor.y=.5,c.animations.add("play_smoke",["smoke_puff_00","smoke_puff_01","smoke_puff_02","smoke_puff_03","smoke_puff_04","smoke_puff_05","smoke_puff_06","smoke_puff_07","smoke_puff_08","smoke_puff_09"],12,!1),c.play("play_smoke"),c.events.onAnimationComplete.addOnce(levelRef.poofAnimationIsDone)},gameLib.Level_1.prototype.poofAnimationIsDone=function(){levelRef.poofGroup.visible=!1,levelRef.poofAnimationIsPlaying=!1,levelRef.poofAnimationCleanUpEvent=levelRef.time.events.add(1e3,levelRef.poofAnimationCleanUp)},gameLib.Level_1.prototype.poofAnimationCleanUp=function(){levelRef.time.events.remove(levelRef.poofAnimationCleanUpEvent),levelRef.poofGroup.removeAll()},gameLib.Level_1.prototype.endGame=function(){levelRef.time.events.remove(levelRef.endGameEvent),levelRef.stage.children[0].setChildIndex(levelRef.winScreen,levelRef.stage.children[0].children.length-1),levelRef.winScreen.visible=!0,levelRef.poofGroup.visible=!1;var a=levelRef.add.tween(levelRef.winScreen).to({x:0},500,Phaser.Easing.Quadratic.InOut,!0);a.onComplete.addOnce(levelRef.WinAnimation)},gameLib.Level_1.prototype.WinAnimation=function(){levelRef.cleanup(),levelRef.winMuffyWaldo.play("play_win"),levelRef.playAudio(gameLib.AUDIO_WIN),levelRef.continueToGameMenuEvent=levelRef.time.events.add(3e3,levelRef.ContinueToGameMenu)},gameLib.Level_1.prototype.playAudio=function(a){this.audioMgr.playAudio(a)},gameLib.Level_1.prototype.ContinueToGameMenu=function(){levelRef.time.events.remove(levelRef.continueToGameMenuEvent),levelRef.gameState.heartsWon(levelRef.heartCounted),levelRef.closeStatusDisplay(),levelRef.state.start("gamemenu",!0,!1,levelRef.gameState.backgroundLayerName)},gameLib.Level_1.prototype.onMainMenuDisplay=function(){this.waldo_muffy_heart.visible!==!0&&(levelRef.time.events.removeAll(),levelRef.closeStatusDisplay(),levelRef.state.start("mainmenu"))},gameLib.Level_1.prototype.cleanup=function(){levelRef.gamePiecesUp.destroy(),levelRef.gamePiecesDown.destroy(),levelRef.gamePiecesLeft.destroy(),levelRef.gamePiecesRight.destroy(),levelRef.gamePiecesUpLeft.destroy(),levelRef.gamePiecesUpRight.destroy(),levelRef.gamePiecesDownLeft.destroy(),levelRef.gamePiecesDownRight.destroy(),levelRef.blockersGroup.destroy(),levelRef.heartsGroup.destroy(),levelRef.gamePiecesCompleted.destroy()},window.gameLib.Level_1=gameLib.Level_1;var gameLib=gameLib||{},mainMenuRef=null;gameLib.MainMenu=function(a){this.gameCore=a,mainMenuRef=this,this.screenIndex=1,this.screenMax=5},gameLib.MainMenu.prototype={init:function(){this.gameModel=gameLib.GameModel.getInstance(),this.audioMgr=gameLib.AudioManager.getInstance(),this.audioMgr.setup(this.game)},create:function(){this.audioMgr.stopAudio(),this.gameModel.isFirstMenu===!0&&(this.audioMgr.playAudio(gameLib.AUDIO_MENU_CHOOSE),this.gameModel.isFirstMenu=!1),this.backgroundImg=this.gameCore.add.sprite(0,0,"background_img"),this.menuGroup=this.add.group(),this.tweenMenuGroup=null,this.menuScreen1=new gameLib.Menu(this.gameCore,["menu_item_01","menu_item_02","menu_item_03","menu_item_04","menu_item_05"]),this.menuScreen1.x=110,this.menuScreen1.y=-5,this.menuGroup.addChild(this.menuScreen1),this.menuScreen2=new gameLib.Menu(this.gameCore,["menu_item_06","menu_item_07","menu_item_08","menu_item_09","menu_item_10"]),this.menuScreen2.x=110+SETTINGS_GAME.width,this.menuScreen2.y=-5,this.menuGroup.addChild(this.menuScreen2),this.menuScreen3=new gameLib.Menu(this.gameCore,["menu_item_11","menu_item_12","menu_item_13","menu_item_14","menu_item_15"]),this.menuScreen3.x=110+2*SETTINGS_GAME.width,this.menuScreen3.y=-5,this.menuGroup.addChild(this.menuScreen3),this.menuScreen4=new gameLib.Menu(this.gameCore,["menu_item_16","menu_item_17","menu_item_18","menu_item_19","menu_item_20"]),this.menuScreen4.x=110+3*SETTINGS_GAME.width,this.menuScreen4.y=-5,this.menuGroup.addChild(this.menuScreen4),this.menuScreen5=new gameLib.Menu(this.gameCore,["menu_item_21","menu_item_22","menu_item_23","menu_item_24","menu_item_25"]),this.menuScreen5.x=110+4*SETTINGS_GAME.width,this.menuScreen5.y=-5,this.menuGroup.addChild(this.menuScreen5),this.menuGroup.x=SETTINGS_GAME.width,this.menuScreenLeftImg=this.gameCore.add.sprite(0,0,"menu_screen_left"),this.menuScreenRightImg=this.gameCore.add.sprite(SETTINGS_GAME.width-237,0,"menu_screen_right"),this.helpButton=this.gameCore.add.button(10,10,"button_spritesheet",this.onHelpDisplay,this,"help_btn","help_btn","help_btn"),this.helpButton.inputEnabled=!0,this.helpButton.input.useHandCursor=!0,this.backButton=this.gameCore.add.button(this.menuScreenLeftImg.x+130,this.menuScreenLeftImg.height-150,"button_spritesheet",this.onBackDisplay,this,"blue_arrow_up","blue_arrow_up","blue_arrow_down"),this.backButton.inputEnabled=!0,this.backButton.input.useHandCursor=!0,this.backButton.scale.x=-1,this.nextButton=this.gameCore.add.button(this.menuScreenRightImg.x+100,this.menuScreenLeftImg.height-150,"button_spritesheet",this.onNextDisplay,this,"blue_arrow_up","blue_arrow_up","blue_arrow_down"),this.nextButton.inputEnabled=!0,this.nextButton.input.useHandCursor=!0,this.currentView()},onHelpDisplay:function(){this.gameCore.state.start("tutorialmenu")},onBackDisplay:function(){this.tweenMenuGroup&&this.tweenMenuGroup.isRunning===!0||(this.screenIndex=this.screenIndex-1,this.screenIndex<1&&(this.screenIndex=1),this.currentView())},onNextDisplay:function(){this.tweenMenuGroup&&this.tweenMenuGroup.isRunning===!0||(this.screenIndex=this.screenIndex+1,this.screenIndex>this.screenMax&&(this.screenIndex=5),this.currentView())},currentView:function(){if(!this.tweenMenuGroup||this.tweenMenuGroup.isRunning!==!0)switch(this.menuScreen1.resetMenuItems(),this.menuScreen2.resetMenuItems(),this.menuScreen3.resetMenuItems(),this.menuScreen4.resetMenuItems(),this.menuScreen5.resetMenuItems(),this.backButton.input.useHandCursor=!1,this.backButton.inputEnabled=!1,this.backButton.frameName="blue_arrow_up",this.nextButton.input.useHandCursor=!1,this.nextButton.inputEnabled=!1,this.nextButton.frameName="blue_arrow_up",mainMenuRef.currentMenuScreen=null,this.screenIndex<2?this.backButton.alpha=.5:this.backButton.alpha=1,this.screenIndex>4?this.nextButton.alpha=.5:this.nextButton.alpha=1,this.screenIndex){case 1:this.tweenMenuGroup=this.add.tween(this.menuGroup).to({x:0},800,Phaser.Easing.Quadratic.InOut,!0),mainMenuRef.currentMenuScreen=this.menuScreen1,this.tweenMenuGroup.onComplete.addOnce(this.handleOnCompleteAnimMenu,this);break;case 2:this.tweenMenuGroup=this.add.tween(this.menuGroup).to({x:-(1*SETTINGS_GAME.width)},800,Phaser.Easing.Quadratic.InOut,!0),mainMenuRef.currentMenuScreen=this.menuScreen2,this.tweenMenuGroup.onComplete.addOnce(this.handleOnCompleteAnimMenu,this);break;case 3:this.tweenMenuGroup=this.add.tween(this.menuGroup).to({x:-(2*SETTINGS_GAME.width)},800,Phaser.Easing.Quadratic.InOut,!0),mainMenuRef.currentMenuScreen=this.menuScreen3,this.tweenMenuGroup.onComplete.addOnce(this.handleOnCompleteAnimMenu,this);break;case 4:this.tweenMenuGroup=this.add.tween(this.menuGroup).to({x:-(3*SETTINGS_GAME.width)},800,Phaser.Easing.Quadratic.InOut,!0),mainMenuRef.currentMenuScreen=this.menuScreen4,this.tweenMenuGroup.onComplete.addOnce(this.handleOnCompleteAnimMenu,this);break;case 5:this.tweenMenuGroup=this.add.tween(this.menuGroup).to({x:-(4*SETTINGS_GAME.width)},800,Phaser.Easing.Quadratic.InOut,!0),mainMenuRef.currentMenuScreen=this.menuScreen5,this.tweenMenuGroup.onComplete.addOnce(this.handleOnCompleteAnimMenu,this)}},handleOnCompleteAnimMenu:function(){switch(mainMenuRef.currentMenuScreen.setupMenuItems(),this.screenIndex){case 1:this.backButton.input.useHandCursor=!1,this.backButton.inputEnabled=!1,this.nextButton.inputEnabled=!0,this.nextButton.input.useHandCursor=!0;break;case 5:this.backButton.inputEnabled=!0,this.backButton.input.useHandCursor=!0,this.nextButton.input.useHandCursor=!1,this.nextButton.inputEnabled=!1;break;default:this.backButton.inputEnabled=!0,this.backButton.input.useHandCursor=!0,this.nextButton.inputEnabled=!0,this.nextButton.input.useHandCursor=!0}}},window.gameLib.MainMenu=gameLib.MainMenu;var gameLib=gameLib||{},SETTINGS_GAME={};SETTINGS_GAME.width=960,SETTINGS_GAME.height=556;var domainPath="";gameLib.Preload=function(a){this.gameCore=a},gameLib.Preload.prototype={preload:function(){var a=this.add.sprite(SETTINGS_GAME.width/2,SETTINGS_GAME.height/2,"loader");a.animations.add("play_loader",["loader_00","loader_01","loader_02","loader_03","loader_04","loader_05"],12,!0),a.play("play_loader"),a.anchor.setTo(.5,.5),this.load.tilemap("GameTileMap","assets/images/tilesheet/waldo_game_tilemap.json",null,Phaser.Tilemap.TILED_JSON),this.load.image("WaldoTiles","assets/images/tilesheet/WaldoTiles.png"),this.load.image("background_img","assets/images/background.jpg"),this.load.image("heart_menu","assets/images/heart_menu.png"),this.load.image("checkmark","assets/images/checkmark.png"),this.load.image("menu_screen_left","assets/images/menu_screen/menu_screen_left.png"),this.load.image("menu_screen_right","assets/images/menu_screen/menu_screen_right.png"),this.load.image("round_complete_blue","assets/images/round_complete/round_complete_blue.png"),this.load.image("round_complete_green","assets/images/round_complete/round_complete_green.png"),this.load.image("round_complete_orange","assets/images/round_complete/round_complete_orange.png"),this.load.image("round_complete_purple","assets/images/round_complete/round_complete_purple.png"),this.load.image("round_complete_yellow","assets/images/round_complete/round_complete_yellow.png"),this.load.image("blue_level_tilesheet","assets/images/tilesheet/blue_level_tilesheet.png"),this.load.image("green_level_tilesheet","assets/images/tilesheet/green_level_tilesheet.png"),
this.load.image("orange_level_tilesheet","assets/images/tilesheet/orange_level_tilesheet.png"),this.load.image("purple_level_tilesheet","assets/images/tilesheet/purple_level_tilesheet.png"),this.load.image("yellow_level_tilesheet","assets/images/tilesheet/yellow_level_tilesheet.png"),this.load.image("play_button","assets/images/play_button.png"),this.load.image("splash_screen","assets/images/splash_screen.jpg"),this.load.image("blue_arrow_tutorial_01","assets/images/tutorial/blue_arrow/arrow_tutorial1.png"),this.load.image("blue_arrow_tutorial_02","assets/images/tutorial/blue_arrow/arrow_tutorial2.png"),this.load.image("blue_arrow_tutorial_03","assets/images/tutorial/blue_arrow/arrow_tutorial3.png"),this.load.image("invisible_tutorial_01","assets/images/tutorial/invisible/invisible_tutorial1.png"),this.load.image("invisible_tutorial_02","assets/images/tutorial/invisible/invisible_tutorial2.png"),this.load.image("invisible_tutorial_03","assets/images/tutorial/invisible/invisible_tutorial3.png"),this.load.image("invisible_tutorial_04","assets/images/tutorial/invisible/invisible_tutorial4.png"),this.load.image("portals_tutorial_01","assets/images/tutorial/portals/portals_tutorial1.png"),this.load.image("portals_tutorial_02","assets/images/tutorial/portals/portals_tutorial2.png"),this.load.image("portals_tutorial_03","assets/images/tutorial/portals/portals_tutorial3.png"),this.load.image("portals_tutorial_04","assets/images/tutorial/portals/portals_tutorial4.png"),this.load.image("smallen_tutorial_01","assets/images/tutorial/smallen/smallen_tutorial1.png"),this.load.image("smallen_tutorial_02","assets/images/tutorial/smallen/smallen_tutorial2.png"),this.load.image("smallen_tutorial_03","assets/images/tutorial/smallen/smallen_tutorial3.png"),this.load.image("smallen_tutorial_04","assets/images/tutorial/smallen/smallen_tutorial4.png"),this.load.image("spring_tutorial_01","assets/images/tutorial/springs/spring_tutorial1.png"),this.load.image("spring_tutorial_02","assets/images/tutorial/springs/spring_tutorial2.png"),this.load.image("spring_tutorial_03","assets/images/tutorial/springs/spring_tutorial3.png"),this.load.image("loss_overlay_waldo","assets/images/loss_overlay_waldo.png"),this.load.image("cloud_border","assets/images/new_cloud_border_tightright.png"),this.load.image("quick_tutorial","assets/images/tutorial/quick_tutorial.png"),this.load.atlasXML("elephant_toy","assets/images/spritesheet/elephant_toy_spritesheet.png","assets/images/spritesheet/elephant_toy_spritesheet.xml"),this.load.atlasXML("button_spritesheet","assets/images/spritesheet/button_spritesheet.png","assets/images/spritesheet/button_spritesheet.xml"),this.load.atlasXML("menu_screen_items","assets/images/spritesheet/menu_screen_items.png","assets/images/spritesheet/menu_screen_items.xml"),this.load.atlasXML("round_complete_hearts","assets/images/spritesheet/round_complete_hearts.png","assets/images/spritesheet/round_complete_hearts.xml"),this.load.atlasXML("win_muffy_waldo_ss","assets/images/spritesheet/win_muffy_waldo_ss.png","assets/images/spritesheet/win_muffy_waldo_ss.xml"),this.load.atlasXML("game_heart_anim","assets/images/spritesheet/game_heart_anim.png","assets/images/spritesheet/game_heart_anim.xml"),this.load.atlasXML("smoke_puff_anim","assets/images/spritesheet/smoke_puff_anim.png","assets/images/spritesheet/smoke_puff_anim.xml"),this.load.atlasXML("checkmark_anim","assets/images/spritesheet/checkmark_splash.png","assets/images/spritesheet/checkmark_splash.xml"),this.load.atlasXML("tilesheet_imgs","assets/images/spritesheet/tilesheet_imgs.png","assets/images/spritesheet/tilesheet_imgs.xml")},create:function(){this.load.hasLoaded&&this.state.start("title")}},window.gameLib.Preload=gameLib.Preload;var gameLib=gameLib||{},quickTutorialRef=null;gameLib.QuickTutorial=function(a){this.gameCore=a,quickTutorialRef=this},gameLib.QuickTutorial.prototype={preload:function(){},create:function(){quickTutorialRef.audioMgr=gameLib.AudioManager.getInstance(),quickTutorialRef.audioMgr.setup(quickTutorialRef.game),quickTutorialRef.audioMgr.stopAudio(),quickTutorialRef.audioMgr.playAudio(gameLib.AUDIO_TUTORIAL_MAIN),quickTutorialRef.backgroundImg=quickTutorialRef.gameCore.add.sprite(0,0,"quick_tutorial"),quickTutorialRef.playButton=quickTutorialRef.gameCore.add.button(SETTINGS_GAME.width-280,SETTINGS_GAME.height-120,"button_spritesheet",quickTutorialRef.onCloseDisplay,quickTutorialRef,"next_btn_up","next_btn_up","next_btn_down"),quickTutorialRef.playButton.input.useHandCursor=!0},onCloseDisplay:function(){quickTutorialRef.audioMgr.stopAudio(),quickTutorialRef.gameCore.state.start("tutorialmenu")}},window.gameLib.QuickTutorial=gameLib.QuickTutorial;var gameLib=gameLib||{},titleRef=null,SETTINGS_GAME={};SETTINGS_GAME.width=960,SETTINGS_GAME.height=556;var GameModel=include("gameLib.GameModel"),gameModel=GameModel.getInstance();gameLib.Title=function(a){this.gameCore=a,titleRef=this},gameLib.Title.prototype={preload:function(){},create:function(){titleRef.stage.backgroundColor="#FFFFFF",titleRef.splashScreen=titleRef.gameCore.add.sprite(SETTINGS_GAME.width/2-480,SETTINGS_GAME.height/2-278,"splash_screen"),titleRef.splashScreen.enabled=!0,titleRef.splashScreen.inputEnabled=!0,titleRef.splashScreen.input.useHandCursor=!0,titleRef.playButton=titleRef.gameCore.add.button(SETTINGS_GAME.width-270,SETTINGS_GAME.height-130,"button_spritesheet",null,titleRef,"play_button_up","play_button_up","play_button_down"),titleRef.playButton.input.useHandCursor=!0,titleRef.playButton.events.onInputDown.add(titleRef.onCloseDisplay,this),titleRef.splashScreen.events.onInputDown.add(titleRef.onCloseDisplay,this),titleRef.audioMgr=gameLib.AudioManager.getInstance(),titleRef.audioMgr.setup(titleRef.game)},onCloseDisplay:function(){titleRef.gameCore.state.start("quicktutorial")}},window.gameLib.Title=gameLib.Title;var gameLib=gameLib||{},tutorialRef=null;gameLib.Tutorial=function(a){this.gameCore=a,tutorialRef=this,tutorialRef.tutorialName=null},gameLib.Tutorial.prototype={init:function(a){tutorialRef.tutorialName=a,tutorialRef.tutorialPages=[],tutorialRef.tutorialGroup=null,tutorialRef.animationTime=3e3,tutorialRef.audioMgr=gameLib.AudioManager.getInstance(),tutorialRef.audioMgr.setup(tutorialRef.game)},preload:function(){tutorialRef.tutorialGroup=tutorialRef.add.group()},create:function(){switch(tutorialRef.audioMgr.stopAudio(),tutorialRef.gameCore.backgroundColor="#FFFFFF",tutorialRef.tutorialName){case"arrows_tutorial":tutorialRef.tutorialPages=["blue_arrow_tutorial_01","blue_arrow_tutorial_02","blue_arrow_tutorial_03"],tutorialRef.addTutorialPage(),tutorialRef.audioMgr.playAudio(gameLib.AUDIO_TUTORIAL_ARROWS);break;case"cannon_tutorial":tutorialRef.tutorialPages=["spring_tutorial_01","spring_tutorial_02","spring_tutorial_03"],tutorialRef.addTutorialPage(),tutorialRef.audioMgr.playAudio(gameLib.AUDIO_TUTORIAL_SPRINGS);break;case"invisible_tutorial":tutorialRef.tutorialPages=["invisible_tutorial_01","invisible_tutorial_02","invisible_tutorial_03","invisible_tutorial_04"],tutorialRef.addTutorialPage(),tutorialRef.audioMgr.playAudio(gameLib.AUDIO_TUTORIAL_INVISIBLE);break;case"portals_tutorial":tutorialRef.tutorialPages=["portals_tutorial_01","portals_tutorial_02","portals_tutorial_03","portals_tutorial_04"],tutorialRef.addTutorialPage(),tutorialRef.audioMgr.playAudio(gameLib.AUDIO_TUTORIAL_PORTALS);break;case"smallen_tutorial":tutorialRef.tutorialPages=["smallen_tutorial_01","smallen_tutorial_02","smallen_tutorial_03","smallen_tutorial_04"],tutorialRef.addTutorialPage(),tutorialRef.audioMgr.playAudio(gameLib.AUDIO_TUTORIAL_SHRINK)}},addTutorialPage:function(){for(var a=tutorialRef.tutorialPages.length-1;a>=0;a--)tutorialRef.tutorialGroup.addChild(tutorialRef.gameCore.add.sprite(-1,0,tutorialRef.tutorialPages[a]));tutorialRef.currentPageIndex=tutorialRef.tutorialPages.length,tutorialRef.time.events.add(tutorialRef.animationTime,tutorialRef.nextPageTutorial)},nextPageTutorial:function(){tutorialRef.currentPageIndex>1?(tutorialRef.tutorialGroup.removeChildAt(tutorialRef.currentPageIndex-1),tutorialRef.currentPageIndex=tutorialRef.currentPageIndex-1,tutorialRef.time.events.add(tutorialRef.animationTime,tutorialRef.nextPageTutorial)):tutorialRef.onCloseDisplay()},onCloseDisplay:function(){tutorialRef.tutorialGroup.removeAll(),tutorialRef.tutorialPages=[],tutorialRef.gameCore.state.start("tutorialmenu")}},window.gameLib.Tutorial=gameLib.Tutorial;var gameLib=gameLib||{},tutorialMenuRef=null;gameLib.TutorialMenu=function(a){this.gameCore=a,tutorialMenuRef=this,tutorialMenuRef.instructedPlayed=!1},gameLib.TutorialMenu.prototype={create:function(){tutorialMenuRef.audioMgr=gameLib.AudioManager.getInstance(),tutorialMenuRef.audioMgr.setup(tutorialMenuRef.game),tutorialMenuRef.audioMgr.stopAudio(),tutorialMenuRef.instructedPlayed===!1&&(tutorialMenuRef.audioMgr.playAudio(gameLib.AUDIO_TUTORIAL_MENU),tutorialMenuRef.instructedPlayed=!0),tutorialMenuRef.backgroundImg=tutorialMenuRef.gameCore.add.sprite(0,0,"background_img"),tutorialMenuRef.backgroundPanel=tutorialMenuRef.gameCore.add.graphics(SETTINGS_GAME.width/2-405,SETTINGS_GAME.height/2-217.5),tutorialMenuRef.backgroundPanel.beginFill(16777215,1),tutorialMenuRef.backgroundPanel.drawRoundedRect(0,0,810,435,12),tutorialMenuRef.backgroundPanel.endFill(),tutorialMenuRef.descriptionText=tutorialMenuRef.gameCore.add.text(0,tutorialMenuRef.backgroundPanel.y+54,"Click on a piece \nto learn what it does."),tutorialMenuRef.descriptionText.anchor.set(.5,0),tutorialMenuRef.descriptionText.wordWrap=!0,tutorialMenuRef.descriptionText.wordWrapWidth=800,tutorialMenuRef.descriptionText.x=SETTINGS_GAME.width/2,tutorialMenuRef.descriptionText.font="Lilita One",tutorialMenuRef.descriptionText.fontStyle="normal",tutorialMenuRef.descriptionText.fontSize="42px",tutorialMenuRef.descriptionText.color=0,tutorialMenuRef.descriptionText.align="center",tutorialMenuRef.arrowButton=tutorialMenuRef.gameCore.add.sprite(tutorialMenuRef.backgroundPanel.x+130,tutorialMenuRef.backgroundPanel.y+217.5,"tilesheet_imgs","arrow_right"),tutorialMenuRef.arrowButton.inputEnabled=!0,tutorialMenuRef.arrowButton.input.useHandCursor=!0,tutorialMenuRef.arrowButton.events.onInputDown.add(tutorialMenuRef.openArrowsTutorial,tutorialMenuRef),tutorialMenuRef.arrowDownButton=tutorialMenuRef.gameCore.add.sprite(tutorialMenuRef.arrowButton.x+116,tutorialMenuRef.backgroundPanel.y+217.5,"tilesheet_imgs","arrow_up_right"),tutorialMenuRef.arrowDownButton.inputEnabled=!0,tutorialMenuRef.arrowDownButton.input.useHandCursor=!0,tutorialMenuRef.arrowDownButton.events.onInputDown.add(tutorialMenuRef.openCannonTutorial,tutorialMenuRef),tutorialMenuRef.portalButton=tutorialMenuRef.gameCore.add.sprite(tutorialMenuRef.arrowDownButton.x+116,tutorialMenuRef.backgroundPanel.y+217.5,"tilesheet_imgs","portal_right"),tutorialMenuRef.portalButton.inputEnabled=!0,tutorialMenuRef.portalButton.input.useHandCursor=!0,tutorialMenuRef.portalButton.events.onInputDown.add(tutorialMenuRef.openPortalTutorial,tutorialMenuRef),tutorialMenuRef.invisibleBorder=tutorialMenuRef.gameCore.add.sprite(tutorialMenuRef.portalButton.x+116,tutorialMenuRef.backgroundPanel.y+217.5,"tilesheet_imgs","icon_border"),tutorialMenuRef.invisibleButton=tutorialMenuRef.gameCore.add.sprite(tutorialMenuRef.portalButton.x+118,tutorialMenuRef.backgroundPanel.y+217.5,"tilesheet_imgs","invisible"),tutorialMenuRef.invisibleButton.scale.x=tutorialMenuRef.invisibleButton.scale.y=.95,tutorialMenuRef.invisibleButton.inputEnabled=!0,tutorialMenuRef.invisibleButton.input.useHandCursor=!0,tutorialMenuRef.invisibleButton.events.onInputDown.add(tutorialMenuRef.openInvisibleTutorial,tutorialMenuRef),tutorialMenuRef.shrinkBorder=tutorialMenuRef.gameCore.add.sprite(tutorialMenuRef.invisibleButton.x+116,tutorialMenuRef.backgroundPanel.y+217.5,"tilesheet_imgs","icon_border"),tutorialMenuRef.shrinkButton=tutorialMenuRef.gameCore.add.sprite(tutorialMenuRef.invisibleButton.x+116,tutorialMenuRef.backgroundPanel.y+217.5,"tilesheet_imgs","shrink"),tutorialMenuRef.shrinkButton.scale.x=tutorialMenuRef.shrinkButton.scale.y=.95,tutorialMenuRef.shrinkButton.inputEnabled=!0,tutorialMenuRef.shrinkButton.input.useHandCursor=!0,tutorialMenuRef.shrinkButton.events.onInputDown.add(tutorialMenuRef.openSmallenTutorial,tutorialMenuRef),tutorialMenuRef.playButton=tutorialMenuRef.gameCore.add.button(SETTINGS_GAME.width-290,SETTINGS_GAME.height-140,"button_spritesheet",tutorialMenuRef.onCloseDisplay,tutorialMenuRef,"to_game_btn_up","to_game_btn_up","to_game_btn_up"),tutorialMenuRef.playButton.input.useHandCursor=!0},openArrowsTutorial:function(){tutorialMenuRef.state.start("tutorial",!0,!1,"arrows_tutorial")},openCannonTutorial:function(){tutorialMenuRef.state.start("tutorial",!0,!1,"cannon_tutorial")},openPortalTutorial:function(){tutorialMenuRef.state.start("tutorial",!0,!1,"portals_tutorial")},openSmallenTutorial:function(){tutorialMenuRef.state.start("tutorial",!0,!1,"smallen_tutorial")},openInvisibleTutorial:function(){tutorialMenuRef.state.start("tutorial",!0,!1,"invisible_tutorial")},onCloseDisplay:function(){tutorialMenuRef.gameCore.state.start("game",!0,!1,"nextLevel")}},window.gameLib.TutorialMenu=gameLib.TutorialMenu;var gameLib=gameLib||{},menuRef=null;gameLib.Menu=function(a,b){Phaser.Group.call(this,a),this.gameCore=a,this.menuItems=b,this.gameModel=gameLib.GameModel.getInstance(),menuRef=this,this.menu_item_1=new gameLib.MenuItem(this.gameCore,b[0]),this.addChild(this.menu_item_1),this.menu_item_1.x=0,this.menu_item_1.y=42,this.menu_item_2=new gameLib.MenuItem(this.gameCore,b[1]),this.addChild(this.menu_item_2),this.menu_item_2.x=255,this.menu_item_2.y=0,this.menu_item_3=new gameLib.MenuItem(this.gameCore,b[2]),this.addChild(this.menu_item_3),this.menu_item_3.x=490,this.menu_item_3.y=42,this.menu_item_4=new gameLib.MenuItem(this.gameCore,b[3]),this.addChild(this.menu_item_4),this.menu_item_4.x=150,this.menu_item_4.y=262,this.menu_item_5=new gameLib.MenuItem(this.gameCore,b[4]),this.addChild(this.menu_item_5),this.menu_item_5.x=396,this.menu_item_5.y=262},window.gameLib.Menu.prototype=Object.create(Phaser.Group.prototype),gameLib.Menu.prototype.contructor=gameLib.Menu,gameLib.Menu.prototype.setupMenuItems=function(){for(var a,b,c=0;c<this.menuItems.length;c++)switch(b=this.menuItems[c].replace(/menu_item_/,"Round_"),a=menuRef.gameModel.getLevel(b),c){case 0:this.menu_item_1.setup(a.heartsWonHigh,a.completed),this.menu_item_1.menu_item.events.onInputDown.add(this.onClickMenuItem,this);break;case 1:this.menu_item_2.setup(a.heartsWonHigh,a.completed),this.menu_item_2.menu_item.events.onInputDown.add(this.onClickMenuItem,this);break;case 2:this.menu_item_3.setup(a.heartsWonHigh,a.completed),this.menu_item_3.menu_item.events.onInputDown.add(this.onClickMenuItem,this);break;case 3:this.menu_item_4.setup(a.heartsWonHigh,a.completed),this.menu_item_4.menu_item.events.onInputDown.add(this.onClickMenuItem,this);break;case 4:this.menu_item_5.setup(a.heartsWonHigh,a.completed),this.menu_item_5.menu_item.events.onInputDown.add(this.onClickMenuItem,this)}},gameLib.Menu.prototype.resetMenuItems=function(){this.menu_item_1.menu_item.events.onInputDown.remove(this.onClickMenuItem,this),this.menu_item_2.menu_item.events.onInputDown.remove(this.onClickMenuItem,this),this.menu_item_3.menu_item.events.onInputDown.remove(this.onClickMenuItem,this),this.menu_item_4.menu_item.events.onInputDown.remove(this.onClickMenuItem,this),this.menu_item_5.menu_item.events.onInputDown.remove(this.onClickMenuItem,this)},gameLib.Menu.prototype.onClickMenuItem=function(a){var b=a.parent.itemID.replace(/menu_item_/,"");b=Number(b),this.gameModel.levelStateIndex=b-1,this.gameCore.state.start("game",!0,!1,"nextLevel")};var gameLib=gameLib||{},titleRef=null;gameLib.MenuItem=function(a,b){Phaser.Group.call(this,a),this.gameCore=a,titleRef=this,this.itemID=b,this.menu_item=this.gameCore.add.sprite(0,0,"menu_screen_items",this.itemID),this.addChild(this.menu_item),this.menu_item.inputEnabled=!0,this.menu_item.input.useHandCursor=!0,this.checkmark_1=this.gameCore.add.sprite(125,50,"checkmark"),this.addChild(this.checkmark_1),this.checkmark_1.alpha=0,this.heart_1=this.gameCore.add.sprite(35,186,"heart_menu"),this.addChild(this.heart_1),this.heart_1.alpha=0,this.heart_2=this.gameCore.add.sprite(84,186,"heart_menu"),this.addChild(this.heart_2),this.heart_2.alpha=0,this.heart_3=this.gameCore.add.sprite(135,186,"heart_menu"),this.addChild(this.heart_3),this.heart_3.alpha=0},window.gameLib.MenuItem.prototype=Object.create(Phaser.Group.prototype),gameLib.MenuItem.prototype.contructor=gameLib.MenuItem,gameLib.MenuItem.prototype.setup=function(a,b){switch(a){case 1:this.heart_1.alpha=1;break;case 2:this.heart_1.alpha=1,this.heart_2.alpha=1;break;case 3:this.heart_1.alpha=1,this.heart_2.alpha=1,this.heart_3.alpha=1}b===!0&&(this.checkmark_1.alpha=1)},function(){var a,b=include("springroll.Application"),c=include("gameLib.Boot"),d=include("gameLib.Preload"),e=include("gameLib.Title"),f=include("gameLib.QuickTutorial"),g=include("gameLib.GameModel"),h=include("gameLib.TutorialMenu"),i=include("gameLib.Tutorial"),j=include("gameLib.MainMenu"),k=include("gameLib.GameMenu"),l=include("gameLib.Level_1"),m=g.getInstance(),n=new b({name:"springroll_waldo",configPath:"assets/config/config.json",captionsPath:"assets/config/captions.json"});n.on("init",function(){function b(){var a=Phaser.Loader.prototype,b=navigator.userAgent,c=/safari/i.test(b)&&!/chrome/i.test(b);c&&!a.originalXhrLoad&&(UTIL.logger("Monkeypatching Phaser.Loader to bust cache because https://github.com/photonstorm/phaser/issues/1355."),a.originalXhrLoad=a.xhrLoad,a.xhrLoad=function(a,b,c,d,e){return b=b+"?cacheBust="+Date.now(),this.originalXhrLoad(a,b,c,d,e)})}this.game=a=new Phaser.Game(m.canvasWidth,m.canvasHeight,Phaser.CANVAS,"content"),this.game.state.add("boot",c),this.game.state.add("preload",d),this.game.state.add("title",e),this.game.state.add("quicktutorial",f),this.game.state.add("tutorialmenu",h),this.game.state.add("tutorial",i),this.game.state.add("mainmenu",j),this.game.state.add("gamemenu",k,!0),this.game.state.add("game",l,!1),this.game.state.start("boot"),n.on("paused",function(){this.game&&(this.game.paused=!0)}),n.on("resumed",function(){this.game&&(this.game.paused=!1)}),n.on("resize",function(){UTIL.SetScaleSize(m,this.game.scale,window.innerHeight,window.innerWidth)}),b(),WebFontConfig={google:{families:["Lilita One"]}}}),window.app=n}();